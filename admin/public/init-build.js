function fix_sidebar(){if(!$("body").hasClass("fixed"))return;$(".sidebar").slimscroll({height:$(window).height()-$(".header").height()+"px",color:"rgba(0,0,0,0.2)"})}function change_layout(){$("body").toggleClass("fixed"),fix_sidebar()}function change_skin(e){$("body").removeClass("skin-blue skin-black"),$("body").addClass(e)}(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}return e};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return e==null?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t){var n=[],r=[];return T(e,function(e){(t(e)?n:r).push(e)}),[n,r]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===x&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}).call(this),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t=e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,r){if(n.isFunction(t))return n.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return n.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(w.test(t))return n.filter(t,e,r);t=n.filter(t,e)}return n.grep(e,function(e){return g.call(t,e)>=0!==r})}function D(e,t){while((e=e[t])&&1!==e.nodeType);return e}function G(e){var t=F[e]={};return n.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}function P(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(O,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:N.test(r)?n.parseJSON(r):r}catch(s){}M.set(e,t,r)}else r=void 0;return r}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(e){}}function jb(e,t){return n.nodeName(e,"table")&&n.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function kb(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function lb(e){var t=gb.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function mb(e,t){for(var n=0,r=e.length;r>n;n++)L.set(e[n],"globalEval",!t||L.get(t[n],"globalEval"))}function nb(e,t){var r,i,s,o,u,a,f,l;if(1===t.nodeType){if(L.hasData(e)&&(o=L.access(e),u=L.set(t,o),l=o.events)){delete u.handle,u.events={};for(s in l)for(r=0,i=l[s].length;i>r;r++)n.event.add(t,s,l[s][r])}M.hasData(e)&&(a=M.access(e),f=n.extend({},a),M.set(t,f))}}function ob(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&n.nodeName(e,t)?n.merge([e],r):r}function pb(e,t){var n=t.nodeName.toLowerCase();"input"===n&&T.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function sb(e,t){var r,i=n(t.createElement(e)).appendTo(t.body),s=a.getDefaultComputedStyle&&(r=a.getDefaultComputedStyle(i[0]))?r.display:n.css(i[0],"display");return i.detach(),s}function tb(e){var t=l,r=rb[e];return r||(r=sb(e,t),"none"!==r&&r||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qb[0].contentDocument,t.write(),t.close(),r=sb(e,t),qb.detach()),rb[e]=r),r}function xb(e,t,r){var i,s,o,u,a=e.style;return r=r||wb(e),r&&(u=r.getPropertyValue(t)||r[t]),r&&(""!==u||n.contains(e.ownerDocument,e)||(u=n.style(e,t)),vb.test(u)&&ub.test(t)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=r.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==u?u+"":u}function yb(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function Fb(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Eb.length;while(i--)if(t=Eb[i]+n,t in e)return t;return r}function Gb(e,t,n){var r=Ab.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Hb(e,t,r,i,s){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,u=0;4>o;o+=2)"margin"===r&&(u+=n.css(e,r+R[o],!0,s)),i?("content"===r&&(u-=n.css(e,"padding"+R[o],!0,s)),"margin"!==r&&(u-=n.css(e,"border"+R[o]+"Width",!0,s))):(u+=n.css(e,"padding"+R[o],!0,s),"padding"!==r&&(u+=n.css(e,"border"+R[o]+"Width",!0,s)));return u}function Ib(e,t,r){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=wb(e),u="border-box"===n.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=xb(e,t,o),(0>s||null==s)&&(s=e.style[t]),vb.test(s))return s;i=u&&(k.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+Hb(e,t,r||(u?"border":"content"),i,o)+"px"}function Jb(e,t){for(var r,i,s,o=[],u=0,a=e.length;a>u;u++)i=e[u],i.style&&(o[u]=L.get(i,"olddisplay"),r=i.style.display,t?(o[u]||"none"!==r||(i.style.display=""),""===i.style.display&&S(i)&&(o[u]=L.access(i,"olddisplay",tb(i.nodeName)))):(s=S(i),"none"===r&&s||L.set(i,"olddisplay",s?r:n.css(i,"display"))));for(u=0;a>u;u++)i=e[u],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[u]||"":"none"));return e}function Kb(e,t,n,r,i){return new Kb.prototype.init(e,t,n,r,i)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=R[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ub(e,t,n){for(var r,i=(Rb[t]||[]).concat(Rb["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function Vb(e,t,r){var i,s,o,u,a,f,l,c,h=this,p={},d=e.style,v=e.nodeType&&S(e),m=L.get(e,"fxshow");r.queue||(a=n._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,f=a.empty.fire,a.empty.fire=function(){a.unqueued||f()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,n.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],l=n.css(e,"display"),c="none"===l?L.get(e,"olddisplay")||tb(e.nodeName):l,"inline"===c&&"none"===n.css(e,"float")&&(d.display="inline-block")),r.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}));for(i in t)if(s=t[i],Nb.exec(s)){if(delete t[i],o=o||"toggle"===s,s===(v?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;v=!0}p[i]=m&&m[i]||n.style(e,i)}else l=void 0;if(n.isEmptyObject(p))"inline"===("none"===l?tb(e.nodeName):l)&&(d.display=l);else{m?"hidden"in m&&(v=m.hidden):m=L.access(e,"fxshow",{}),o&&(m.hidden=!v),v?n(e).show():h.done(function(){n(e).hide()}),h.done(function(){var t;L.remove(e,"fxshow");for(t in p)n.style(e,t,p[t])});for(i in p)u=Ub(v?m[i]:0,i,h),i in m||(m[i]=u.start,v&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function Wb(e,t){var r,i,s,o,u;for(r in e)if(i=n.camelCase(r),s=t[i],o=e[r],n.isArray(o)&&(s=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),u=n.cssHooks[i],u&&"expand"in u){o=u.expand(o),delete e[i];for(r in o)r in e||(e[r]=o[r],t[r]=s)}else t[i]=s}function Xb(e,t,r){var i,s,o=0,u=Qb.length,a=n.Deferred().always(function(){delete f.elem}),f=function(){if(s)return!1;for(var t=Lb||Sb(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,i=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,n]),1>i&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:n.extend({},t),opts:n.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Lb||Sb(),duration:r.duration,tweens:[],createTween:function(t,r){var i=n.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,r=t?l.tweens.length:0;if(s)return this;for(s=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Wb(c,l.opts.specialEasing);u>o;o++)if(i=Qb[o].call(l,e,c,l.opts))return i;return n.map(c,Ub,l),n.isFunction(l.opts.start)&&l.opts.start.call(e,l),n.fx.timer(n.extend(f,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function rc(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,s=0,o=t.toLowerCase().match(E)||[];if(n.isFunction(r))while(i=o[s++])"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function sc(e,t,r,i){function u(l){var h;return s[l]=!0,n.each(e[l]||[],function(e,n){var a=n(t,r,i);return"string"!=typeof a||o||s[a]?o?!(h=a):void 0:(t.dataTypes.unshift(a),u(a),!1)}),h}var s={},o=e===oc;return u(t.dataTypes[0])||!s["*"]&&u("*")}function tc(e,t){var r,i,s=n.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((s[r]?e:i||(i={}))[r]=t[r]);return i&&n.extend(!0,e,i),e}function uc(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function vc(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Bc(e,t,r,i){var s;if(n.isArray(t))n.each(t,function(t,n){r||xc.test(e)?i(e,n):Bc(e+"["+("object"==typeof n?t:"")+"]",n,r,i)});else if(r||"object"!==n.type(t))i(e,t);else for(s in t)Bc(e+"["+s+"]",t[s],r,i)}function Kc(e){return n.isWindow(e)?e:9===e.nodeType&&e.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(e,t){return new n.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return n.each(this,e,t)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,t,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||n.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],i=e[t],u!==i&&(l&&i&&(n.isPlainObject(i)||(s=n.isArray(i)))?(s?(s=!1,o=r&&n.isArray(r)?r:[]):o=r&&n.isPlainObject(r)?r:{},u[t]=n.extend(l,o,i)):void 0!==i&&(u[t]=i));return u},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===n.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!n.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==n.type(e)||e.nodeType||n.isWindow(e)?!1:e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(s(Object(e))?n.merge(r,"string"==typeof e?[e]:e):f.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var r,i,s;return"string"==typeof t&&(r=e[t],t=e,e=r),n.isFunction(e)?(i=d.call(arguments,2),s=function(){return e.apply(t||this,i.concat(d.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=function(e){function st(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],!e||"string"!=typeof e)return r;if(1!==(l=t.nodeType)&&9!==l)return[];if(v&&!i){if(s=Z.exec(e))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return P.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+mt(d[c]);S=et.test(e)&&dt(t.parentNode)||t,x=d.join(",")}if(x)try{return P.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ot(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function ut(e){return e[w]=!0,e}function at(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ft(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function lt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ut(function(t){return t=+t,ut(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function dt(e){return e&&typeof e.getElementsByTagName!==L&&e}function vt(){}function mt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function gt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function yt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function bt(e,t,n){for(var r=0,i=t.length;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function Et(e,t,n,r,i,s){return r&&!r[w]&&(r=Et(r)),i&&!i[w]&&(i=Et(i,s)),ut(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||bt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:wt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?B.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):P.apply(o,g)})}function St(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=gt(function(e){return e===t},u,!0),c=gt(function(e){return B.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];s>a;a++)if(n=r.relative[e[a].type])h=[gt(yt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return Et(a>1&&yt(h),a>1&&mt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&St(e.slice(a,i)),s>i&&St(e=e.slice(i)),s>i&&mt(e))}h.push(n)}return yt(h)}function xt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=_.call(a));y=wt(y)}P.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(a)}return l&&(S=E,f=b),g};return n?ut(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ot(),N=ot(),C=ot(),k=function(e,t){return e===t&&(c=!0),0},L="undefined",A=1<<31,O={}.hasOwnProperty,M=[],_=M.pop,D=M.push,P=M.push,H=M.slice,B=M.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",q=I.replace("w","w#"),R="\\["+F+"*("+I+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+F+"*\\]",U=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),X=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),$=new RegExp(U),J=new RegExp("^"+q+"$"),K={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I.replace("w","w*")+")"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{P.apply(M=H.call(E.childNodes),E.childNodes),M[E.childNodes.length].nodeType}catch(it){P={apply:M.length?function(e,t){D.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=st.support={},s=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=st.setDocument=function(e){var t,i=e?e.ownerDocument||e:E,o=i.defaultView;return i!==p&&9===i.nodeType&&i.documentElement?(p=i,d=i.documentElement,v=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){h()},!1):o.attachEvent&&o.attachEvent("onunload",function(){h()})),n.attributes=at(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=at(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(i.getElementsByClassName)&&at(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),n.getById=at(function(e){return d.appendChild(e).id=w,!i.getElementsByName||!i.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==L&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==L?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==L&&v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(i.querySelectorAll))&&(at(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+j+")"),e.querySelectorAll(":checked").length||m.push(":checked")}),at(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&at(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",U)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===E&&b(E,e)?-1:t===i||t.ownerDocument===E&&b(E,t)?1:l?B.call(l,e)-B.call(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:l?B.call(l,e)-B.call(l,t):0;if(s===o)return lt(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?lt(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},i):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},st.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&O.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},st.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=st.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=st.selectors={cacheLength:50,createPseudo:ut,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ut(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=B.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ut(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?ut(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:ut(function(e){return function(t){return st(e,t).length>0}}),contains:ut(function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ut(function(e){return J.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ht(t);return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,o=st.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?st.error(e):N(e,a).slice(0)},u=st.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=St(t[n]),s[w]?r.push(s):i.push(s);s=C(e,xt(i,r)),s.selector=e}return s},a=st.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&dt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&mt(f),!e)return P.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&dt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=at(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),at(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ft("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&at(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ft("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),at(function(e){return null==e.getAttribute("disabled")})||ft(j,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),st}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?n.find.matchesSelector(i,e)?[i]:[]:n.find.matches(e,n.grep(t,function(e){return 1===e.nodeType}))},n.fn.extend({find:function(e){var t,r=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(n(e).filter(function(){for(t=0;r>t;t++)if(n.contains(s[t],this))return!0}));for(t=0;r>t;t++)n.find(e,s[t],i);return i=this.pushStack(r>1?n.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&u.test(e)?n(e):e||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||y).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:l,!0)),v.test(r[1])&&n.isPlainObject(t))for(r in t)n.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=l.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=l,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):n.isFunction(e)?"undefined"!=typeof y.ready?y.ready(e):e(n):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),n.makeArray(e,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(e,t,r){var i=[],s=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&n(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),n.fn.extend({has:function(e){var t=n(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,s=this.length,o=[],a=u.test(e)||"string"!=typeof e?n(e,t||this.context):0;s>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?n.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(n(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),n.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,r){return n.dir(e,"parentNode",r)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,r){return n.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return n.dir(e,"previousSibling",r)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(r,i){var s=n.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(s=n.filter(i,s)),this.length>1&&(C[e]||n.unique(s),B.test(e)&&s.reverse()),this.pushStack(s)}});var E=/\S+/g,F={};n.Callbacks=function(e){e="string"==typeof e?F[e]||G(e):n.extend({},e);var t,r,i,s,o,u,a=[],f=!e.once&&[],l=function(n){for(t=e.memory&&n,r=!0,u=s||0,s=0,o=a.length,i=!0;a&&o>u;u++)if(a[u].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function u(t){n.each(t,function(t,r){var i=n.type(r);"function"===i?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==i&&u(r)})}(arguments),i?o=a.length:t&&(s=r,l(t))}return this},remove:function(){return a&&n.each(arguments,function(e,t){var r;while((r=n.inArray(t,a,r))>-1)a.splice(r,1),i&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?n.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||r&&!f||(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},n.extend({Deferred:function(e){var t=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return n.Deferred(function(r){n.each(t,function(t,o){var u=n.isFunction(e[t])&&e[t];s[o[1]](function(){var e=u&&u.apply(this,arguments);e&&n.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?n.extend(e,i):i}},s={};return i.pipe=i.then,n.each(t,function(e,n){var o=n[2],u=n[3];i[n[1]]=o.add,u&&o.add(function(){r=u},t[1^e][2].disable,t[2][2].lock),s[n[0]]=function(){return s[n[0]+"With"](this===s?i:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,r=d.call(arguments),i=r.length,s=1!==i||e&&n.isFunction(e.promise)?i:0,o=1===s?e:n.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)r[t]&&n.isFunction(r[t].promise)?r[t].promise().done(u(t,l,r)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,r),o.promise()}});var H;n.fn.ready=function(e){return n.ready.promise().done(e),this},n.extend({isReady:!1,readyWait:1,holdReady:function(e){e?n.readyWait++:n.ready(!0)},ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,e!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(e){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(e)},n.ready.promise();var J=n.access=function(e,t,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===n.type(r)){s=!0;for(a in r)n.access(e,t,a,r[a],!0,o,u)}else if(void 0!==i&&(s=!0,n.isFunction(i)||(u=!0),l&&(u?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(n(e),r)})),t))for(;f>a;a++)t(e[a],r,u?i:i.call(e[a],a,t(e[a],r)));return s?e:l?t.call(e):f?t(e[0],r):o};n.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(e){if(!K.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=K.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,n.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=r;else if(n.isEmptyObject(o))n.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,n.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,s,o=this.key(e),u=this.cache[o];if(void 0===t)this.cache[o]={};else{n.isArray(t)?i=t.concat(t.map(n.camelCase)):(s=n.camelCase(t),t in u?i=[t,s]:(i=s,i=i in u?[i]:i.match(E)||[])),r=i.length;while(r--)delete u[i[r]]}},hasData:function(e){return!n.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return L.access(e,t,n)},_removeData:function(e,t){L.remove(e,t)}}),n.fn.extend({data:function(e,t){var r,i,s,o=this[0],u=o&&o.attributes;if(void 0===e){if(this.length&&(s=M.get(o),1===o.nodeType&&!L.get(o,"hasDataAttrs"))){r=u.length;while(r--)u[r]&&(i=u[r].name,0===i.indexOf("data-")&&(i=n.camelCase(i.slice(5)),P(o,i,s[i])));L.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){M.set(this,e)}):J(this,function(t){var r,i=n.camelCase(e);if(o&&void 0===t){if(r=M.get(o,e),void 0!==r)return r;if(r=M.get(o,i),void 0!==r)return r;if(r=P(o,i,void 0),void 0!==r)return r}else this.each(function(){var n=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),n.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||n.isArray(r)?i=L.access(e,t,n.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=n.queue(e,t),i=r.length,s=r.shift(),o=n._queueHooks(e,t),u=function(){n.dequeue(e,t)};"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===t&&r.unshift("inprogress"),delete o.stop,s.call(e,u,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:n.Callbacks("once memory").add(function(){L.remove(e,[t+"queue",r])})})}}),n.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?n.queue(this[0],e):void 0===t?this:this.each(function(){var r=n.queue(this,e,t);n._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,s=n.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)r=L.get(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(e,t){return e=t||e,"none"===n.css(e,"display")||!n.contains(e.ownerDocument,e)},T=/^(?:checkbox|radio)$/i;!function(){var e=l.createDocumentFragment(),t=e.appendChild(l.createElement("div")),n=l.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),k.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.get(e);if(g){r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=n.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof n!==U&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(E)||[""],l=t.length;while(l--)a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=n.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=n.event.special[d]||{},c=n.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&n.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),n.event.global[d]=!0)}},remove:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.hasData(e)&&L.get(e);if(g&&(f=g.events)){t=(t||"").match(E)||[""],l=t.length;while(l--)if(a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=n.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;while(o--)c=p[o],!s&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||n.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)n.event.remove(e,d+t[l],r,i,!0);n.isEmptyObject(f)&&(delete g.handle,L.remove(e,"events"))}},trigger:function(e,t,r,i){var s,o,u,f,c,h,p,d=[r||l],v=j.call(e,"type")?e.type:e,m=j.call(e,"namespace")?e.namespace.split("."):[];if(o=u=r=r||l,3!==r.nodeType&&8!==r.nodeType&&!X.test(v+n.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[n.expando]?e:new n.Event(v,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:n.makeArray(t,[e]),p=n.event.special[v]||{},i||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!i&&!p.noBubble&&!n.isWindow(r)){for(f=p.delegateType||v,X.test(f+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(r.ownerDocument||l)&&d.push(u.defaultView||u.parentWindow||a)}s=0;while((o=d[s++])&&!e.isPropagationStopped())e.type=s>1?f:p.bindType||v,h=(L.get(o,"events")||{})[e.type]&&L.get(o,"handle"),h&&h.apply(o,t),h=c&&o[c],h&&h.apply&&n.acceptData(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),t)!==!1||!n.acceptData(r)||c&&n.isFunction(r[v])&&!n.isWindow(r)&&(u=r[c],u&&(r[c]=null),n.event.triggered=v,r[v](),n.event.triggered=void 0,u&&(r[c]=u)),e.result}},dispatch:function(e){e=n.event.fix(e);var t,r,i,s,o,u=[],a=d.call(arguments),f=(L.get(this,"events")||{})[e.type]||[],l=n.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=n.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((n.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(i=[],r=0;a>r;r++)o=t[r],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?n(s,this).index(f)>=0:n.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||l,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[n.expando])return e;var t,r,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=W.test(s)?this.mouseHooks:V.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new n.Event(o),t=i.length;while(t--)r=i[t],e[r]=o[r];return e.target||(e.target=l),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return n.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var s=n.extend(new n.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?n.event.trigger(s,null,t):n.event.dispatch.call(t,s),s.isDefaultPrevented()&&r.preventDefault()}},n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},n.Event=function(e,t){return this instanceof n.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?Z:$):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(e,t)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Z,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){n.event.simulate(t,e.target,n.event.fix(e),!0)};n.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=L.access(n,t);i||n.addEventListener(e,r,!0),L.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=L.access(n,t)-1;i?L.access(n,t,i):(n.removeEventListener(e,r,!0),L.remove(n,t))}}}),n.fn.extend({on:function(e,t,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(u in e)this.on(u,t,r,e[u],s);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=$;else if(!i)return this;return 1===s&&(o=i,i=function(e){return n().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=n.guid++)),this.each(function(){n.event.add(this,e,i,r,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,n(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=$),this.each(function(){n.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?n.event.trigger(e,t,r,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,n.extend({clone:function(e,t,r){var i,s,o,u,a=e.cloneNode(!0),f=n.contains(e.ownerDocument,e);if(!(k.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||n.isXMLDoc(e)))for(u=ob(a),o=ob(e),i=0,s=o.length;s>i;i++)pb(o[i],u[i]);if(t)if(r)for(o=o||ob(e),u=u||ob(a),i=0,s=o.length;s>i;i++)nb(o[i],u[i]);else nb(e,a);return u=ob(a,"script"),u.length>0&&mb(u,!f&&ob(e,"script")),a},buildFragment:function(e,t,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(s=e[p],s||0===s)if("object"===n.type(s))n.merge(h,s.nodeType?[s]:s);else if(cb.test(s)){o=o||c.appendChild(t.createElement("div")),u=(bb.exec(s)||["",""])[1].toLowerCase(),a=ib[u]||ib._default,o.innerHTML=a[1]+s.replace(ab,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;n.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if((!i||-1===n.inArray(s,i))&&(f=n.contains(s.ownerDocument,s),o=ob(c.appendChild(s),"script"),f&&mb(o),r)){l=0;while(s=o[l++])fb.test(s.type||"")&&r.push(s)}return c},cleanData:function(e){for(var t,r,i,s,o=n.event.special,u=0;void 0!==(r=e[u]);u++){if(n.acceptData(r)&&(s=r[L.expando],s&&(t=L.cache[s]))){if(t.events)for(i in t.events)o[i]?n.event.remove(r,i):n.removeEvent(r,i,t.handle);L.cache[s]&&delete L.cache[s]}delete M.cache[r[M.expando]]}}}),n.fn.extend({text:function(e){return J(this,function(e){return void 0===e?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?n.filter(e,this):this,s=0;null!=(r=i[s]);s++)t||1!==r.nodeType||n.cleanData(ob(r)),r.parentNode&&(t&&n.contains(r.ownerDocument,r)&&mb(ob(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(n.cleanData(ob(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return n.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!db.test(e)&&!ib[(bb.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ab,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(n.cleanData(ob(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,n.cleanData(ob(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,r){t=e.apply([],t);var i,s,o,u,a,f,l=0,c=this.length,h=this,p=c-1,d=t[0],v=n.isFunction(d);if(v||c>1&&"string"==typeof d&&!k.checkClone&&eb.test(d))return this.each(function(e){var n=h.eq(e);v&&(t[0]=d.call(this,e,n.html())),n.domManip(t,r)});if(c&&(i=n.buildFragment(t,this[0].ownerDocument,!1,this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(o=n.map(ob(i,"script"),kb),u=o.length;c>l;l++)a=i,l!==p&&(a=n.clone(a,!0,!0),u&&n.merge(o,ob(a,"script"))),r.call(this[l],a,l);if(u)for(f=o[o.length-1].ownerDocument,n.map(o,lb),l=0;u>l;l++)a=o[l],fb.test(a.type||"")&&!L.access(a,"globalEval")&&n.contains(f,a)&&(a.src?n._evalUrl&&n._evalUrl(a.src):n.globalEval(a.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var r,i=[],s=n(e),o=s.length-1,u=0;o>=u;u++)r=u===o?this:this.clone(!0),n(s[u])[t](r),f.apply(i,r.get());return this.pushStack(i)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){var e,t,r=l.documentElement,i=l.createElement("div"),s=l.createElement("div");if(s.style){s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(s);function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(i);var n=a.getComputedStyle(s,null);e="1%"!==n.top,t="4px"===n.width,r.removeChild(i)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(l.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(a.getComputedStyle(t,null).marginRight),r.removeChild(i),e}})}}(),n.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xb(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=n.camelCase(t),f=e.style;return t=n.cssProps[a]||(n.cssProps[a]=Fb(f,a)),u=n.cssHooks[t]||n.cssHooks[a],void 0===r?u&&"get"in u&&void 0!==(s=u.get(e,!1,i))?s:f[t]:(o=typeof r,"string"===o&&(s=Bb.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(n.css(e,t)),o="number"),null!=r&&r===r&&("number"!==o||n.cssNumber[a]||(r+="px"),k.clearCloneStyle||""!==r||0!==t.indexOf("background")||(f[t]="inherit"),u&&"set"in u&&void 0===(r=u.set(e,r,i))||(f[t]=r)),void 0)}},css:function(e,t,r,i){var s,o,u,a=n.camelCase(t);return t=n.cssProps[a]||(n.cssProps[a]=Fb(e.style,a)),u=n.cssHooks[t]||n.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),void 0===s&&(s=xb(e,t,i)),"normal"===s&&t in Db&&(s=Db[t]),""===r||r?(o=parseFloat(s),r===!0||n.isNumeric(o)?o||0:s):s}}),n.each(["height","width"],function(e,t){n.cssHooks[t]={get:function(e,r,i){return r?zb.test(n.css(e,"display"))&&0===e.offsetWidth?n.swap(e,Cb,function(){return Ib(e,t,i)}):Ib(e,t,i):void 0},set:function(e,r,i){var s=i&&wb(e);return Gb(e,r,i?Hb(e,t,i,"border-box"===n.css(e,"boxSizing",!1,s),s):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(e,t){return t?n.swap(e,{display:"inline-block"},xb,[e,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(e,t){n.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+R[r]+t]=s[r]||s[r-2]||s[0];return i}},ub.test(e)||(n.cssHooks[e+t].set=Gb)}),n.fn.extend({css:function(e,t){return J(this,function(e,t,r){var i,s,o={},u=0;if(n.isArray(t)){for(i=wb(e),s=t.length;s>u;u++)o[t[u]]=n.css(e,t[u],!1,i);return o}return void 0!==r?n.style(e,t,r):n.css(e,t)},e,t,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(e,t,r,i,s,o){this.elem=e,this.prop=r,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(n.cssNumber[r]?"":"px")},cur:function(){var e=Kb.propHooks[this.prop];return e&&e.get?e.get(this):Kb.propHooks._default.get(this)},run:function(e){var t,r=Kb.propHooks[this.prop];return this.pos=t=this.options.duration?n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=n.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[n.cssProps[e.prop]]||n.cssHooks[e.prop])?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),s=Ob.exec(t),o=s&&s[3]||(n.cssNumber[e]?"":"px"),u=(n.cssNumber[e]||"px"!==o&&+i)&&Ob.exec(n.css(r.elem,e)),a=1,f=20;if(u&&u[3]!==o){o=o||u[3],s=s||[],u=+i||1;do a=a||".5",u/=a,n.style(r.elem,e,u+o);while(a!==(a=r.cur()/i)&&1!==a&&--f)}return s&&(u=r.start=+u||+i||0,r.unit=o,r.end=s[1]?u+(s[1]+1)*s[2]:+s[2]),r}]};n.Animation=n.extend(Xb,{tweener:function(e,t){n.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,s=e.length;s>i;i++)r=e[i],Rb[r]=Rb[r]||[],Rb[r].unshift(t)},prefilter:function(e,t){t?Qb.unshift(e):Qb.push(e)}}),n.speed=function(e,t,r){var i=e&&"object"==typeof e?n.extend({},e):{complete:r||!r&&t||n.isFunction(e)&&e,duration:e,easing:r&&t||t&&!n.isFunction(t)&&t};return i.duration=n.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in n.fx.speeds?n.fx.speeds[i.duration]:n.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){n.isFunction(i.old)&&i.old.call(this),i.queue&&n.dequeue(this,i.queue)},i},n.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,r,i){var s=n.isEmptyObject(e),o=n.speed(t,r,i),u=function(){var t=Xb(this,n.extend({},e),o);(s||L.get(this,"finish"))&&t.stop(!0)};return u.finish=u,s||o.queue===!1?this.each(u):this.queue(o.queue,u)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=n.timers,u=L.get(this);if(s)u[s]&&u[s].stop&&i(u[s]);else for(s in u)u[s]&&u[s].stop&&Pb.test(s)&&i(u[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(r),t=!1,o.splice(s,1));(t||!r)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=L.get(this),i=r[e+"queue"],s=r[e+"queueHooks"],o=n.timers,u=i?i.length:0;for(r.finish=!0,n.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;u>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),n.each(["toggle","show","hide"],function(e,t){var r=n.fn[t];n.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Tb(t,!0),e,n,i)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){n.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),n.timers=[],n.fx.tick=function(){var e,t=0,r=n.timers;for(Lb=n.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(e){n.timers.push(e),e()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(e,t){return e=n.fx?n.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=l.createElement("input"),t=l.createElement("select"),n=t.appendChild(l.createElement("option"));e.type="checkbox",k.checkOn=""!==e.value,k.optSelected=n.selected,t.disabled=!0,k.optDisabled=!n.disabled,e=l.createElement("input"),e.value="t",e.type="radio",k.radioValue="t"===e.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(e,t){return J(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,r){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===U?n.prop(e,t,r):(1===o&&n.isXMLDoc(e)||(t=t.toLowerCase(),i=n.attrHooks[t]||(n.expr.match.bool.test(t)?Zb:Yb)),void 0===r?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=n.find.attr(e,t),null==s?void 0:s):null!==r?i&&"set"in i&&void 0!==(s=i.set(e,r,t))?s:(e.setAttribute(t,r+""),r):void n.removeAttr(e,t))},removeAttr:function(e,t){var r,i,s=0,o=t&&t.match(E);if(o&&1===e.nodeType)while(r=o[s++])i=n.propFix[r]||r,n.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!k.radioValue&&"radio"===t&&n.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Zb={set:function(e,t,r){return t===!1?n.removeAttr(e,r):e.setAttribute(r,r),r}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var r=$b[t]||n.find.attr;$b[t]=function(e,t,n){var i,s;return n||(s=$b[t],$b[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,$b[t]=s),i}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(e,t){return J(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!n.isXMLDoc(e),o&&(t=n.propFix[t]||t,s=n.propHooks[t]),void 0!==r?s&&"set"in s&&void 0!==(i=s.set(e,r,t))?i:e[t]=r:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||_b.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(e){var t,r,i,s,o,u,a="string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):" ")){o=0;while(s=t[o++])i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=n.trim(i),r.className!==u&&(r.className=u)}return this},removeClass:function(e){var t,r,i,s,o,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):"")){o=0;while(s=t[o++])while(i.indexOf(" "+s+" ")>=0)i=i.replace(" "+s+" "," ");u=e?n.trim(i):"",r.className!==u&&(r.className=u)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(n.isFunction(e)?function(r){n(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r){var t,i=0,s=n(this),o=e.match(E)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(r===U||"boolean"===r)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||e===!1?"":L.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ac," ").indexOf(t)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(e){var t,r,i,s=this[0];if(arguments.length)return i=n.isFunction(e),this.each(function(r){var s;1===this.nodeType&&(s=i?e.call(this,r,n(this).val()):e,null==s?s="":"number"==typeof s?s+="":n.isArray(s)&&(s=n.map(s,function(e){return null==e?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=n.valHooks[s.type]||n.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(bc,""):null==r?"":r)}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return null!=t?t:n.trim(n.text(e))}},select:{get:function(e){for(var t,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,u=o?null:[],a=o?s+1:i.length,f=0>s?a:o?s:0;a>f;f++)if(r=i[f],!(!r.selected&&f!==s||(k.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&n.nodeName(r.parentNode,"optgroup"))){if(t=n(r).val(),o)return t;u.push(t)}return u},set:function(e,t){var r,i,s=e.options,o=n.makeArray(t),u=s.length;while(u--)i=s[u],(i.selected=n.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){return n.isArray(t)?e.checked=n.inArray(n(e).val(),t)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),n.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(e){return JSON.parse(e+"")},n.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+e),t};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[],n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?tc(tc(e,n.ajaxSettings),t):tc(n.ajaxSettings,e)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(e,t){function T(e,t,o,a){var l,g,y,w,E,x=t;2!==b&&(b=2,u&&clearTimeout(u),r=void 0,s=a||"",S.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(w=uc(c,S,o)),w=vc(c,w,S,l),l?(c.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(n.lastModified[i]=E),E=S.getResponseHeader("etag"),E&&(n.etag[i]=E)),204===e||"HEAD"===c.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,l=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),S.status=e,S.statusText=(t||x)+"",l?d.resolveWith(h,[g,x,S]):d.rejectWith(h,[S,x,y]),S.statusCode(m),m=void 0,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?g:y]),v.fireWith(h,[S,x]),f&&(p.trigger("ajaxComplete",[S,c]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,u,a,f,l,c=n.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?n(h):n.event,d=n.Deferred(),v=n.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o){o={};while(t=ic.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),T(0,t),this}};if(d.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=n.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(a=mc.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ec[1]&&a[2]===ec[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=n.param(c.data,c.traditional)),sc(nc,c,t,S),2===b)return S;f=c.global,f&&0===n.active++&&n.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!kc.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(dc.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=hc.test(i)?i.replace(hc,"$1_="+cc++):i+(dc.test(i)?"&":"?")+"_="+cc++)),c.ifModified&&(n.lastModified[i]&&S.setRequestHeader("If-Modified-Since",n.lastModified[i]),n.etag[i]&&S.setRequestHeader("If-None-Match",n.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+pc+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)S.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&2!==b){w="abort";for(l in{success:1,error:1,complete:1})S[l](c[l]);if(r=sc(oc,c,t,S)){S.readyState=1,f&&p.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){S.abort("timeout")},c.timeout));try{b=1,r.send(g,T)}catch(x){if(!(2>b))throw x;T(-1,x)}}else T(-1,"No Transport");return S}return S.abort()},getJSON:function(e,t,r){return n.get(e,t,r,"json")},getScript:function(e,t){return n.get(e,void 0,t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,r,i,s){return n.isFunction(r)&&(s=s||i,i=r,r=void 0),n.ajax({url:e,type:t,dataType:s,data:r,success:i})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n._evalUrl=function(e){return n.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(e){var t;return n.isFunction(e)?this.each(function(t){n(this).wrapAll(e.call(this,t))}):(this[0]&&(t=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(n.isFunction(e)?function(t){n(this).wrapInner(e.call(this,t))}:function(){var t=n(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=n.isFunction(e);return this.each(function(r){n(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},n.expr.filters.visible=function(e){return!n.expr.filters.hidden(e)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;n.param=function(e,t){var r,i=[],s=function(e,t){t=n.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){s(this.name,this.value)});else for(r in e)Bc(r,e[r],t,s);return i.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(e)&&(this.checked||!T.test(e))}).map(function(e,t){var r=n(this).val();return null==r?null:n.isArray(r)?n.map(r,function(e){return{name:t.name,value:e.replace(yc,"\r\n")}}):{name:t.name,value:r.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var e in Dc)Dc[e]()}),k.cors=!!Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(e){var t;return k.cors||Fc&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Cc;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Dc[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Ec[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Dc[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,s){t=n("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&s("error"===e.type?404:200,e.type)}),l.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gc.pop()||n.expando+"_"+cc++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,u=e.jsonp!==!1&&(Hc.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=n.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Hc,"$1"+i):e.jsonp!==!1&&(e.url+=(dc.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||n.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=a[i],a[i]=function(){o=arguments},r.always(function(){a[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Gc.push(i)),o&&n.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),n.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||l;var i=v.exec(e),s=!r&&[];return i?[t.createElement(i[1])]:(i=n.buildFragment([e],t,s),s&&s.length&&n(s).remove(),n.merge([],i.childNodes))};var Ic=n.fn.load;n.fn.load=function(e,t,r){if("string"!=typeof e&&Ic)return Ic.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=n.trim(e.slice(a)),e=e.slice(0,a)),n.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),u.length>0&&n.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,u.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},n.expr.filters.animated=function(e){return n.grep(n.timers,function(t){return e===t.elem}).length};var Jc=a.document.documentElement;n.offset={setOffset:function(e,t,r){var i,s,o,u,a,f,l,c=n.css(e,"position"),h=n(e),p={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=n.css(e,"top"),f=n.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+f).indexOf("auto")>-1,l?(i=h.position(),u=i.top,s=i.left):(u=parseFloat(o)||0,s=parseFloat(f)||0),n.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(p.top=t.top-a.top+u),null!=t.left&&(p.left=t.left-a.left+s),"using"in t?t.using.call(e,p):h.css(p)}},n.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){n.offset.setOffset(this,e,t)});var t,r,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,n.contains(t,i)?(typeof i.getBoundingClientRect!==U&&(s=i.getBoundingClientRect()),r=Kc(o),{top:s.top+r.pageYOffset-t.clientTop,left:s.left+r.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===n.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n.nodeName(e[0],"html")||(i=e.offset()),i.top+=n.css(e[0],"borderTopWidth",!0),i.left+=n.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-n.css(r,"marginTop",!0),left:t.left-i.left-n.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Jc;while(e&&!n.nodeName(e,"html")&&"static"===n.css(e,"position"))e=e.offsetParent;return e||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;n.fn[e]=function(n){return J(this,function(e,n,i){var s=Kc(e);return void 0===i?s?s[t]:e[n]:void (s?s.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i)},e,n,arguments.length,null)}}),n.each(["top","left"],function(e,t){n.cssHooks[t]=yb(k.pixelPosition,function(e,r){return r?(r=xb(e,t),vb.test(r)?n(e).position()[t]+"px":r):void 0})}),n.each({Height:"height",Width:"width"},function(e,t){n.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){n.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return J(this,function(t,r,i){var s;return n.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?n.css(t,r,u):n.style(t,r,i,u)},t,o?i:void 0,o,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(e){return a.$===n&&(a.$=Mc),e&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n}),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),function(e){define("bootstrap",["jquery"],function(){return function(){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one(e.support.transition.end,function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){s.trigger("closed.bs.alert").remove()}var r=e(this),i=r.attr("data-target");i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=e(i);t&&t.preventDefault(),s.length||(s=r.hasClass("alert")?r:r.parent()),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one(e.support.transition.end,n).emulateTransitionEnd(150):n())};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),"string"==typeof t&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",s.resetText||r.data("resetText",r[i]()),r[i](s[t]||this.options[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof n&&n;i||r.data("bs.button",i=new t(this,s)),"toggle"==n?i.toggle():n&&i.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(jQuery),+function(e){var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,r=this.getActiveIndex();return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o="next"==t?"left":"right",u="next"==t?"first":"last",f=this;if(!i.length){if(!this.options.wrap)return;i=this.$element.find(".item")[u]()}if(i.hasClass("active"))return this.sliding=!1;var l=e.Event("slide.bs.carousel",{relatedTarget:i[0],direction:o});return this.$element.trigger(l),l.isDefaultPrevented()?void 0:(this.sliding=!0,s&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(f.$indicators.children()[f.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),r.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*r.css("transition-duration").slice(0,-1))):(r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),s&&this.cycle(),this)};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n),o="string"==typeof n?n:s.slide;i||r.data("bs.carousel",i=new t(this,s)),"number"==typeof n?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,r=e(this),i=e(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),r.data()),o=r.attr("data-slide-to");o&&(s.interval=!1),i.carousel(s),(o=r.attr("data-slide-to"))&&i.data("bs.carousel").to(o),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;n.collapse("hide"),r||n.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var o=e.camelCase(["scroll",i].join("-"));this.$element.one(e.support.transition.end,e.proxy(s,this)).emulateTransitionEnd(350)[i](this.$element[0][o])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one(e.support.transition.end,e.proxy(r,this)).emulateTransitionEnd(350):r.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);!i&&s.toggle&&"show"==n&&(n=!n),i||r.data("bs.collapse",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,r=e(this),i=r.attr("data-target")||t.preventDefault()||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(i),o=s.data("bs.collapse"),u=o?"toggle":r.data(),f=r.attr("data-parent"),l=f&&e(f);o&&o.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+f+'"]').not(r).addClass("collapsed"),r[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),s.collapse(u)})}(jQuery),+function(e){function t(t){e(r).remove(),e(i).each(function(){var r=n(e(this)),i={relatedTarget:this};r.hasClass("open")&&(r.trigger(t=e.Event("hide.bs.dropdown",i)),t.isDefaultPrevented()||r.removeClass("open").trigger("hidden.bs.dropdown",i))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}var r=".dropdown-backdrop",i="[data-toggle=dropdown]",s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown",u),i.focus()}return!1}},s.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var s=n(r),o=s.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&s.find(i).focus(),r.click();var u=" li:not(.divider):visible a",f=s.find("[role=menu]"+u+", [role=listbox]"+u);if(f.length){var l=f.index(f.filter(":focus"));38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<f.length-1&&l++,~l||(l=0),f.eq(l).focus()}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new s(this)),"string"==typeof t&&r[t].call(n)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",i,s.prototype.toggle).on("keydown.bs.dropdown.data-api",i+", [role=menu], [role=listbox]",s.prototype.keydown)}(jQuery),+function(e){var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),r&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(i)}).emulateTransitionEnd(300):n.$element.focus().trigger(i)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);s||i.data("bs.modal",s=new t(this,o)),"string"==typeof n?s[n](r):o.show&&s.show(r)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());n.is("a")&&t.preventDefault(),i.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r);for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",f="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,r=this.tip();this.setContent(),this.options.animation&&r.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,o=s.test(i);o&&(i=i.replace(s,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),f=r[0].offsetWidth,l=r[0].offsetHeight;if(o){var c=this.$element.parent(),h=i,p=document.documentElement.scrollTop||document.body.scrollTop,d="body"==this.options.container?window.innerWidth:c.outerWidth(),v="body"==this.options.container?window.innerHeight:c.outerHeight(),m="body"==this.options.container?0:c.offset().left;i="bottom"==i&&u.top+u.height+l-p>v?"top":"top"==i&&u.top-p-l<0?"bottom":"right"==i&&u.right+f>d?"left":"left"==i&&u.left-f<m?"right":i,r.removeClass(h).addClass(i)}var g=this.getCalculatedOffset(i,u,f,l);this.applyPlacement(g,i),this.hoverState=null;var y=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,y).emulateTransitionEnd(150):y()}},t.prototype.applyPlacement=function(t,n){var r,i=this.tip(),s=i[0].offsetWidth,o=i[0].offsetHeight,u=parseInt(i.css("margin-top"),10),f=parseInt(i.css("margin-left"),10);isNaN(u)&&(u=0),isNaN(f)&&(f=0),t.top=t.top+u,t.left=t.left+f,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;if("top"==n&&c!=o&&(r=!0,t.top=t.top+o-c),/bottom|top/.test(n)){var h=0;t.left<0&&(h=-2*t.left,t.left=0,i.offset(t),l=i[0].offsetWidth,c=i[0].offsetHeight),this.replaceArrow(h-s+l,l,"left")}else this.replaceArrow(c-o,c,"top");r&&i.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&r.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,r=this.tip(),i=e.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof n&&n;(i||"destroy"!=n)&&(i||r.data("bs.tooltip",i=new t(this,s)),"string"==typeof n&&i[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof n&&n;(i||"destroy"!=n)&&(i||r.data("bs.popover",i=new t(this,s)),"string"==typeof n&&i[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){function t(n,r){var i,s=e.proxy(this.process,this);this.$element=e(e(n).is("body")?window:n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",s),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||(i=e(n).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var n=this;this.$body.find(this.selector).map(function(){var r=e(this),i=r.data("target")||r.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,r=n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(t>=r)return o!=(e=s.last()[0])&&this.activate(e);if(o&&t<=i[0])return o!=(e=s[0])&&this.activate(e);for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(!i[e+1]||t<=i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:i});if(t.trigger(s),!s.isDefaultPrevented()){var o=e(r);this.activate(t.parent("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:i})})}}},t.prototype.activate=function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one(e.support.transition.end,i).emulateTransitionEnd(150):i(),s.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),"string"==typeof n&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),r=this.$window.scrollTop(),i=this.$element.offset(),s=this.options.offset,o=s.top,u=s.bottom;"top"==this.affixed&&(i.top+=r),"object"!=typeof s&&(u=o=s),"function"==typeof o&&(o=s.top(this.$element)),"function"==typeof u&&(u=s.bottom(this.$element));var f=null!=this.unpin&&r+this.unpin<=i.top?!1:null!=u&&i.top+this.$element.height()>=n-u?"bottom":null!=o&&o>=r?"top":!1;if(this.affixed!==f){this.unpin&&this.$element.css("top","");var l="affix"+(f?"-"+f:""),c=e.Event(l+".bs.affix");this.$element.trigger(c),c.isDefaultPrevented()||(this.affixed=f,this.unpin="bottom"==f?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(l).trigger(e.Event(l.replace("affix","affixed"))),"bottom"==f&&this.$element.offset({top:n-u-this.$element.height()}))}}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof n&&n;i||r.data("bs.affix",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(jQuery)}.apply(e,arguments)})}(this),!function(e,t){var n,r=e.document;n=function(){var n,i,s,o,u,f,l,c,h,p,v,m,g,y={},w={},E=!1,S={ENTER:13,ESC:27,SPACE:32},x=[];return w={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',cancel:'<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},g=function(){var e,n,i=!1,s=r.createElement("fakeelement"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(e in o)if(s.style[e]!==t){n=o[e],i=!0;break}return{type:n,supported:i}},n=function(e){return r.getElementById(e)},y={labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok",transition:t,addListeners:function(e){var t,n,a,f,l,c="undefined"!=typeof s,h="undefined"!=typeof i,p="undefined"!=typeof m,v="",g=this;t=function(t){return"undefined"!=typeof t.preventDefault&&t.preventDefault(),a(t),"undefined"!=typeof m&&(v=m.value),"function"==typeof e&&("undefined"!=typeof m?e(!0,v):e(!0)),!1},n=function(t){return"undefined"!=typeof t.preventDefault&&t.preventDefault(),a(t),"function"==typeof e&&e(!1),!1},a=function(){g.hide(),g.unbind(r.body,"keyup",f),g.unbind(o,"focus",l),c&&g.unbind(s,"click",t),h&&g.unbind(i,"click",n)},f=function(e){var r=e.keyCode;(r===S.SPACE&&!p||p&&r===S.ENTER)&&t(e),r===S.ESC&&h&&n(e)},l=function(){p?m.focus():!h||g.buttonReverse?s.focus():i.focus()},this.bind(o,"focus",l),this.bind(u,"focus",l),c&&this.bind(s,"click",t),h&&this.bind(i,"click",n),this.bind(r.body,"keyup",f),this.transition.supported||this.setFocus()},bind:function(e,t,n){"function"==typeof e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},handleErrors:function(){if("undefined"!=typeof e.onerror){var t=this;return e.onerror=function(e,n,r){t.error("["+e+" on line "+r+" of "+n+"]",0)},!0}return!1},appendButtons:function(e,t){return this.buttonReverse?t+e:e+t},build:function(e){var t="",n=e.type,r=e.message,i=e.cssClass||"";switch(t+='<div class="alertify-dialog">',t+='<a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>',"none"===y.buttonFocus&&(t+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),"prompt"===n&&(t+='<div id="alertify-form">'),t+='<article class="alertify-inner">',t+=w.message.replace("{{message}}",r),"prompt"===n&&(t+=w.input),t+=w.buttons.holder,t+="</article>","prompt"===n&&(t+="</div>"),t+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',t+="</div>",n){case"confirm":t=t.replace("{{buttons}}",this.appendButtons(w.buttons.cancel,w.buttons.ok)),t=t.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":t=t.replace("{{buttons}}",this.appendButtons(w.buttons.cancel,w.buttons.submit)),t=t.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":t=t.replace("{{buttons}}",w.buttons.ok),t=t.replace("{{ok}}",this.labels.ok)}return h.className="alertify alertify-"+n+" "+i,c.className="alertify-cover",t},close:function(e,t){var n,r,i=t&&!isNaN(t)?+t:this.delay,s=this;this.bind(e,"click",function(){n(e)}),r=function(e){e.stopPropagation(),s.unbind(this,s.transition.type,r),p.removeChild(this),p.hasChildNodes()||(p.className+=" alertify-logs-hidden")},n=function(e){"undefined"!=typeof e&&e.parentNode===p&&(s.transition.supported?(s.bind(e,s.transition.type,r),e.className+=" alertify-log-hide"):(p.removeChild(e),p.hasChildNodes()||(p.className+=" alertify-logs-hidden")))},0!==t&&setTimeout(function(){n(e)},i)},dialog:function(e,t,n,i,s){l=r.activeElement;var o=function(){p&&null!==p.scrollTop&&c&&null!==c.scrollTop||o()};if("string"!=typeof e)throw new Error("message must be a string");if("string"!=typeof t)throw new Error("type must be a string");if("undefined"!=typeof n&&"function"!=typeof n)throw new Error("fn must be a function");return this.init(),o(),x.push({type:t,message:e,callback:n,placeholder:i,cssClass:s}),E||this.setup(),this},extend:function(e){if("string"!=typeof e)throw new Error("extend method must have exactly one paramter");return function(t,n){return this.log(t,e,n),this}},hide:function(){var e,t=this;x.splice(0,1),x.length>0?this.setup(!0):(E=!1,e=function(n){n.stopPropagation(),t.unbind(h,t.transition.type,e)},this.transition.supported?(this.bind(h,this.transition.type,e),h.className="alertify alertify-hide alertify-hidden"):h.className="alertify alertify-hide alertify-hidden alertify-isHidden",c.className="alertify-cover alertify-cover-hidden",l.focus())},init:function(){r.createElement("nav"),r.createElement("article"),r.createElement("section"),null==n("alertify-cover")&&(c=r.createElement("div"),c.setAttribute("id","alertify-cover"),c.className="alertify-cover alertify-cover-hidden",r.body.appendChild(c)),null==n("alertify")&&(E=!1,x=[],h=r.createElement("section"),h.setAttribute("id","alertify"),h.className="alertify alertify-hidden",r.body.appendChild(h)),null==n("alertify-logs")&&(p=r.createElement("section"),p.setAttribute("id","alertify-logs"),p.className="alertify-logs alertify-logs-hidden",r.body.appendChild(p)),r.body.setAttribute("tabindex","0"),this.transition=g()},log:function(e,t,n){var r=function(){p&&null!==p.scrollTop||r()};return this.init(),r(),p.className="alertify-logs",this.notify(e,t,n),this},notify:function(e,t,n){var i=r.createElement("article");i.className="alertify-log"+("string"==typeof t&&""!==t?" alertify-log-"+t:""),i.innerHTML=e,p.appendChild(i),setTimeout(function(){i.className=i.className+" alertify-log-show"},50),this.close(i,n)},set:function(e){var t;if("object"!=typeof e&&e instanceof Array)throw new Error("args must be an object");for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},setFocus:function(){m?(m.focus(),m.select()):f.focus()},setup:function(e){var r,a=x[0],l=this;E=!0,r=function(e){e.stopPropagation(),l.setFocus(),l.unbind(h,l.transition.type,r)},this.transition.supported&&!e&&this.bind(h,this.transition.type,r),h.innerHTML=this.build(a),o=n("alertify-resetFocus"),u=n("alertify-resetFocusBack"),s=n("alertify-ok")||t,i=n("alertify-cancel")||t,f="cancel"===y.buttonFocus?i:"none"===y.buttonFocus?n("alertify-noneFocus"):s,m=n("alertify-text")||t,v=n("alertify-form")||t,"string"==typeof a.placeholder&&""!==a.placeholder&&(m.value=a.placeholder),e&&this.setFocus(),this.addListeners(a.callback)},unbind:function(e,t,n){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}},{alert:function(e,t,n){return y.dialog(e,"alert",t,"",n),this},confirm:function(e,t,n){return y.dialog(e,"confirm",t,"",n),this},extend:y.extend,init:y.init,log:function(e,t,n){return y.log(e,t,n),this},prompt:function(e,t,n,r){return y.dialog(e,"prompt",t,n,r),this},success:function(e,t){return y.log(e,"success",t),this},error:function(e,t){return y.log(e,"error",t),this},set:function(e){y.set(e)},labels:y.labels,debug:y.handleErrors}},"function"==typeof define?define("third-party/alertify.js/lib/alertify.min",[],function(){return new n}):"undefined"==typeof e.alertify&&(e.alertify=new n)}(this),function(){var e,t,n,r,i,s,o=[].slice;n=function(e){var t,r;return!_.isObject(e)||_.isFunction(e)?e:e instanceof Backbone.Collection||e instanceof Backbone.Model?e:_.isDate(e)?new Date(e.getTime()):_.isRegExp(e)?new RegExp(e.source,e.toString().replace(/.*\//,"")):(r=_.isArray(e||_.isArguments(e)),t=function(e,t,i){return r?e.push(n(t)):e[i]=n(t),e},_.reduce(e,t,r?[]:{}))},s=function(e){return e==null?!1:(e.prototype==={}.prototype||e.prototype===Object.prototype)&&_.isObject(e)&&!_.isArray(e)&&!_.isFunction(e)&&!_.isDate(e)&&!_.isRegExp(e)&&!_.isArguments(e)},t=function(e){return _.filter(_.keys(e),function(t){return s(e[t])})},e=function(e){return _.filter(_.keys(e),function(t){return _.isArray(e[t])})},i=function(n,r,s){var o,u,a,f,l,c,h,p,d,v;s==null&&(s=20);if(s<=0)return console.warn("_.deepExtend(): Maximum depth of recursion hit."),_.extend(n,r);c=_.intersection(t(n),t(r)),u=function(e){return r[e]=i(n[e],r[e],s-1)};for(h=0,d=c.length;h<d;h++)l=c[h],u(l);f=_.intersection(e(n),e(r)),o=function(e){return r[e]=_.union(n[e],r[e])};for(p=0,v=f.length;p<v;p++)a=f[p],o(a);return _.extend(n,r)},r=function(){var e,t,r,s;r=2<=arguments.length?o.call(arguments,0,s=arguments.length-1):(s=0,[]),t=arguments[s++],_.isNumber(t)||(r.push(t),t=20);if(r.length<=1)return r[0];if(t<=0)return _.extend.apply(this,r);e=r.shift();while(r.length>0)e=i(e,n(r.shift()),t);return e},_.mixin({deepClone:n,isBasicObject:s,basicObjects:t,arrays:e,deepExtend:r})}.call(this),function(e){typeof define=="function"&&define.amd?define("third-party/backbone-deep-model/distribution/deep-model.min",["underscore","backbone"],e):e(_,Backbone)}(function(e,t){function n(t){var r={},i=o.keyPathSeparator;for(var s in t){var u=t[s];if(u&&u.constructor===Object&&!e.isEmpty(u)){var a=n(u);for(var f in a){var l=a[f];r[s+i+f]=l}}else r[s]=u}return r}function r(t,n,r){var i=o.keyPathSeparator,s=n.split(i),u=t;r||r===!1;for(var a=0,f=s.length;a<f;a++){if(r&&!e.has(u,s[a]))return!1;u=u[s[a]],u==null&&a<f-1&&(u={});if(typeof u=="undefined")return r?!0:u}return r?!0:u}function i(t,n,r,i){i=i||{};var s=o.keyPathSeparator,u=n.split(s),a=t;for(var f=0,l=u.length;f<l&&a!==undefined;f++){var c=u[f];if(f===l-1)i.unset?delete a[c]:a[c]=r;else{if(typeof a[c]=="undefined"||!e.isObject(a[c]))a[c]={};a=a[c]}}}function s(e,t){i(e,t,null,{unset:!0})}var o=t.Model.extend({constructor:function(t,n){var r,i=t||{};this.cid=e.uniqueId("c"),this.attributes={},n&&n.collection&&(this.collection=n.collection),n&&n.parse&&(i=this.parse(i,n)||{});if(r=e.result(this,"defaults"))i=e.deepExtend({},r,i);this.set(i,n),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(t){return e.deepClone(this.attributes)},get:function(e){return r(this.attributes,e)},set:function(t,u,a){var f,l,c,h,p,d,v,m;if(t==null)return this;typeof t=="object"?(l=t,a=u||{}):(l={})[t]=u,a||(a={});if(!this._validate(l,a))return!1;c=a.unset,p=a.silent,h=[],d=this._changing,this._changing=!0,d||(this._previousAttributes=e.deepClone(this.attributes),this.changed={}),m=this.attributes,v=this._previousAttributes,this.idAttribute in l&&(this.id=l[this.idAttribute]),l=n(l);for(f in l)u=l[f],e.isEqual(r(m,f),u)||h.push(f),e.isEqual(r(v,f),u)?s(this.changed,f):i(this.changed,f,u),c?s(m,f):i(m,f,u);if(!p){h.length&&(this._pending=!0);var g=o.keyPathSeparator;for(var y=0,b=h.length;y<b;y++){var t=h[y];this.trigger("change:"+t,this,r(m,t),a);var w=t.split(g);for(var E=w.length-1;E>0;E--){var S=e.first(w,E).join(g),x=S+g+"*";this.trigger("change:"+x,this,r(m,S),a)}}}if(d)return this;if(!p)while(this._pending)this._pending=!1,this.trigger("change",this,a);return this._pending=!1,this._changing=!1,this},clear:function(t){var r={},i=n(this.attributes);for(var s in i)r[s]=void 0;return this.set(r,e.extend({},t,{unset:!0}))},hasChanged:function(t){return t==null?!e.isEmpty(this.changed):r(this.changed,t)!==undefined},changedAttributes:function(t){if(!t)return this.hasChanged()?n(this.changed):!1;var r=this._changing?this._previousAttributes:this.attributes;t=n(t),r=n(r);var i,s=!1;for(var o in t){if(e.isEqual(r[o],i=t[o]))continue;(s||(s={}))[o]=i}return s},previous:function(e){return e==null||!this._previousAttributes?null:r(this._previousAttributes,e)},previousAttributes:function(){return e.deepClone(this._previousAttributes)}});return o.keyPathSeparator=".",t.DeepModel=o,typeof module!="undefined"&&(module.exports=o),t}),function(e){define("third-party/backbone-forms/distribution/backbone-forms",["backbone"],function(){return function(){(function(e){if(typeof exports!="undefined"&&typeof require!="undefined")var t=e.jQuery||e.Zepto||e.ender||require("jquery"),n=e._||require("underscore"),r=e.Backbone||require("backbone");else var t=e.jQuery,n=e._,r=e.Backbone;var i=r.View.extend({initialize:function(e){var t=this;e=e||{};var r=this.schema=function(){if(e.schema)return n.result(e,"schema");var r=e.model;return r&&r.schema?n.isFunction(r.schema)?r.schema():r.schema:t.schema?n.isFunction(t.schema)?t.schema():t.schema:{}}();n.extend(this,n.pick(e,"model","data","idPrefix","templateData"));var i=this.constructor;this.template=e.template||this.template||i.template,this.Fieldset=e.Fieldset||this.Fieldset||i.Fieldset,this.Field=e.Field||this.Field||i.Field,this.NestedField=e.NestedField||this.NestedField||i.NestedField;var s=this.selectedFields=e.fields||n.keys(r),o=this.fields={};n.each(s,function(e){var t=r[e];o[e]=this.createField(e,t)},this);var u=e.fieldsets||[s],a=this.fieldsets=[];n.each(u,function(e){this.fieldsets.push(this.createFieldset(e))},this)},createFieldset:function(e){var t={schema:e,fields:this.fields};return new this.Fieldset(t)},createField:function(e,t){var n={form:this,key:e,schema:t,idPrefix:this.idPrefix};this.model?n.model=this.model:this.data?n.value=this.data[e]:n.value=null;var r=new this.Field(n);return this.listenTo(r.editor,"all",this.handleEditorEvent),r},handleEditorEvent:function(e,t){var r=t.key+":"+e;this.trigger.call(this,r,this,t,Array.prototype.slice.call(arguments,2));switch(e){case"change":this.trigger("change",this);break;case"focus":this.hasFocus||this.trigger("focus",this);break;case"blur":if(this.hasFocus){var i=this;setTimeout(function(){var e=n.find(i.fields,function(e){return e.editor.hasFocus});e||i.trigger("blur",i)},0)}}},render:function(){var e=this,r=this.fields,i=t(t.trim(this.template(n.result(this,"templateData"))));return i.find("[data-editors]").add(i).each(function(i,s){var o=t(s),u=o.attr("data-editors");if(n.isUndefined(u))return;var a=u=="*"?e.selectedFields||n.keys(r):u.split(",");n.each(a,function(e){var t=r[e];o.append(t.editor.render().el)})}),i.find("[data-fields]").add(i).each(function(i,s){var o=t(s),u=o.attr("data-fields");if(n.isUndefined(u))return;var a=u=="*"?e.selectedFields||n.keys(r):u.split(",");n.each(a,function(e){var t=r[e];o.append(t.render().el)})}),i.find("[data-fieldsets]").add(i).each(function(r,i){var s=t(i),o=s.attr("data-fieldsets");if(n.isUndefined(o))return;n.each(e.fieldsets,function(e){s.append(e.render().el)})}),this.setElement(i),i.addClass(this.className),this},validate:function(e){var t=this,r=this.fields,i=this.model,s={};e=e||{},n.each(r,function(e){var t=e.validate();t&&(s[e.key]=t)});if(!e.skipModelValidate&&i&&i.validate){var o=i.validate(this.getValue());if(o){var u=n.isObject(o)&&!n.isArray(o);u||(s._others=s._others||[],s._others.push(o)),u&&n.each(o,function(e,t){if(r[t]&&!s[t])r[t].setError(e),s[t]=e;else{s._others=s._others||[];var n={};n[t]=e,s._others.push(n)}})}}return n.isEmpty(s)?null:s},commit:function(e){e=e||{};var t={skipModelValidate:!e.validate},r=this.validate(t);if(r)return r;var i,s=n.extend({error:function(e,t){i=t}},e);this.model.set(this.getValue(),s);if(i)return i},getValue:function(e){if(e)return this.fields[e].getValue();var t={};return n.each(this.fields,function(e){t[e.key]=e.getValue()}),t},setValue:function(e,t){var n={};typeof e=="string"?n[e]=t:n=e;var r;for(r in this.schema)n[r]!==undefined&&this.fields[r].setValue(n[r])},getEditor:function(e){var t=this.fields[e];if(!t)throw new Error("Field not found: "+e);return t.editor},focus:function(){if(this.hasFocus)return;var e=this.fieldsets[0],t=e.getFieldAt(0);if(!t)return;t.editor.focus()},blur:function(){if(!this.hasFocus)return;var e=n.find(this.fields,function(e){return e.editor.hasFocus});e&&e.editor.blur()},trigger:function(e){return e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),r.View.prototype.trigger.apply(this,arguments)},remove:function(){return n.each(this.fieldsets,function(e){e.remove()}),n.each(this.fields,function(e){e.remove()}),r.View.prototype.remove.apply(this,arguments)}},{template:n.template("    <form data-fieldsets></form>  ",null,this.templateSettings),templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},editors:{}});i.validators=function(){var e={};return e.errMessages={required:"Required",regexp:"Invalid",email:"Invalid email address",url:"Invalid URL",match:n.template('Must match field "<%= field %>"',null,i.templateSettings)},e.required=function(e){return e=n.extend({type:"required",message:this.errMessages.required},e),function(r){e.value=r;var i={type:e.type,message:n.isFunction(e.message)?e.message(e):e.message};if(r===null||r===undefined||r===!1||r==="")return i}},e.regexp=function(e){if(!e.regexp)throw new Error('Missing required "regexp" option for "regexp" validator');return e=n.extend({type:"regexp",message:this.errMessages.regexp},e),function(r){e.value=r;var i={type:e.type,message:n.isFunction(e.message)?e.message(e):e.message};if(r===null||r===undefined||r==="")return;if(!e.regexp.test(r))return i}},e.email=function(t){return t=n.extend({type:"email",message:this.errMessages.email,regexp:/^[\w\-]{1,}([\w\-\+.]{1,1}[\w\-]{1,}){0,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/},t),e.regexp(t)},e.url=function(t){return t=n.extend({type:"url",message:this.errMessages.url,regexp:/^(http|https):\/\/(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i},t),e.regexp(t)},e.match=function(e){if(!e.field)throw new Error('Missing required "field" options for "match" validator');return e=n.extend({type:"match",message:this.errMessages.match},e),function(r,i){e.value=r;var s={type:e.type,message:n.isFunction(e.message)?e.message(e):e.message};if(r===null||r===undefined||r==="")return;if(r!==i[e.field])return s}},e}(),i.Fieldset=r.View.extend({initialize:function(e){e=e||{};var t=this.schema=this.createSchema(e.schema);this.fields=n.pick(e.fields,t.fields),this.template=e.template||this.constructor.template},createSchema:function(e){return n.isArray(e)&&(e={fields:e}),e.legend=e.legend||null,e},getFieldAt:function(e){var t=this.schema.fields[e];return this.fields[t]},templateData:function(){return this.schema},render:function(){var e=this.schema,r=this.fields,i=t(t.trim(this.template(n.result(this,"templateData"))));return i.find("[data-fields]").add(i).each(function(e,i){var s=t(i),o=s.attr("data-fields");if(n.isUndefined(o))return;n.each(r,function(e){s.append(e.render().el)})}),this.setElement(i),this},remove:function(){n.each(this.fields,function(e){e.remove()}),r.View.prototype.remove.call(this)}},{template:n.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  ",null,i.templateSettings)}),i.Field=r.View.extend({initialize:function(e){e=e||{},n.extend(this,n.pick(e,"form","key","model","value","idPrefix"));var t=this.schema=this.createSchema(e.schema);this.template=e.template||t.template||this.constructor.template,this.errorClassName=e.errorClassName||this.constructor.errorClassName,this.editor=this.createEditor()},createSchema:function(e){return n.isString(e)&&(e={type:e}),e=n.extend({type:"Text",title:this.createTitle()},e),e.type=n.isString(e.type)?i.editors[e.type]:e.type,e},createEditor:function(){var e=n.extend(n.pick(this,"schema","form","key","model","value"),{id:this.createEditorId()}),t=this.schema.type;return new t(e)},createEditorId:function(){var e=this.idPrefix,t=this.key;return t=t.replace(/\./g,"_"),n.isString(e)||n.isNumber(e)?e+t:n.isNull(e)?t:this.model?this.model.cid+"_"+t:t},createTitle:function(){var e=this.key;return e=e.replace(/([A-Z])/g," $1"),e=e.replace(/^./,function(e){return e.toUpperCase()}),e},templateData:function(){var e=this.schema;return{help:e.help||"",title:e.title,fieldAttrs:e.fieldAttrs,editorAttrs:e.editorAttrs,key:this.key,editorId:this.editor.id}},render:function(){var e=this.schema,r=this.editor;if(e.type==i.editors.Hidden)return this.setElement(r.render().el);var s=t(t.trim(this.template(n.result(this,"templateData"))));return e.fieldClass&&s.addClass(e.fieldClass),e.fieldAttrs&&s.attr(e.fieldAttrs),s.find("[data-editor]").add(s).each(function(e,i){var s=t(i),o=s.attr("data-editor");if(n.isUndefined(o))return;s.append(r.render().el)}),this.setElement(s),this},validate:function(){var e=this.editor.validate();return e?this.setError(e.message):this.clearError(),e},setError:function(e){if(this.editor.hasNestedForm)return;this.$el.addClass(this.errorClassName),this.$("[data-error]").html(e)},clearError:function(){this.$el.removeClass(this.errorClassName),this.$("[data-error]").empty()},commit:function(){return this.editor.commit()},getValue:function(){return this.editor.getValue()},setValue:function(e){this.editor.setValue(e)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove(),r.View.prototype.remove.call(this)}},{template:n.template('    <div>      <label for="<%= editorId %>"><%= title %></label>      <div>        <span data-editor></span>        <div data-error></div>        <div><%= help %></div>      </div>    </div>  ',null,i.templateSettings),errorClassName:"error"}),i.NestedField=i.Field.extend({template:n.template(t.trim("    <div>      <span data-editor></span>      <% if (help) { %>        <div><%= help %></div>      <% } %>      <div data-error></div>    </div>  "),null,i.templateSettings)}),i.Editor=i.editors.Base=r.View.extend({defaultValue:null,hasFocus:!1,initialize:function(e){var e=e||{};if(e.model){if(!e.key)throw new Error("Missing option: 'key'");this.model=e.model,this.value=this.model.get(e.key)}else e.value!==undefined&&(this.value=e.value);this.value===undefined&&(this.value=this.defaultValue),n.extend(this,n.pick(e,"key","form"));var t=this.schema=e.schema||{};this.validators=e.validators||t.validators,this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),t.editorClass&&this.$el.addClass(t.editorClass),t.editorAttrs&&this.$el.attr(t.editorAttrs)},getName:function(){var e=this.key||"";return e.replace(/\./g,"_")},getValue:function(){return this.value},setValue:function(e){this.value=e},focus:function(){throw new Error("Not implemented")},blur:function(){throw new Error("Not implemented")},commit:function(e){var t=this.validate();if(t)return t;this.listenTo(this.model,"invalid",function(e,n){t=n}),this.model.set(this.key,this.getValue(),e);if(t)return t},validate:function(){var e=this.$el,t=null,r=this.getValue(),i=this.form?this.form.getValue():{},s=this.validators,o=this.getValidator;return s&&n.every(s,function(e){return t=o(e)(r,i),t?!1:!0}),t},trigger:function(e){return e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),r.View.prototype.trigger.apply(this,arguments)},getValidator:function(e){var t=i.validators;if(n.isRegExp(e))return t.regexp({regexp:e});if(n.isString(e)){if(!t[e])throw new Error('Validator "'+e+'" not found');return t[e]()}if(n.isFunction(e))return e;if(n.isObject(e)&&e.type){var r=e;return t[r.type](r)}throw new Error("Invalid validator: "+e)}}),i.editors.Text=i.Editor.extend({tagName:"input",defaultValue:"",previousValue:"",events:{keyup:"determineChange",keypress:function(e){var t=this;setTimeout(function(){t.determineChange()},0)},select:function(e){this.trigger("select",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){i.editors.Base.prototype.initialize.call(this,e);var t=this.schema,n="text";t&&t.editorAttrs&&t.editorAttrs.type&&(n=t.editorAttrs.type),t&&t.dataType&&(n=t.dataType),this.$el.attr("type",n)},render:function(){return this.setValue(this.value),this},determineChange:function(e){var t=this.$el.val(),n=t!==this.previousValue;n&&(this.previousValue=t,this.trigger("change",this))},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},select:function(){this.$el.select()}}),i.editors.TextArea=i.editors.Text.extend({tagName:"textarea",initialize:function(e){i.editors.Base.prototype.initialize.call(this,e)}}),i.editors.Password=i.editors.Text.extend({initialize:function(e){i.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","password")}}),i.editors.Number=i.editors.Text.extend({defaultValue:0,events:n.extend({},i.editors.Text.prototype.events,{keypress:"onKeyPress",change:"onKeyPress"}),initialize:function(e){i.editors.Text.prototype.initialize.call(this,e);var t=this.schema;this.$el.attr("type","number"),(!t||!t.editorAttrs||!t.editorAttrs.step)&&this.$el.attr("step","any")},onKeyPress:function(e){var t=this,n=function(){setTimeout(function(){t.determineChange()},0)};if(e.charCode===0){n();return}var r=this.$el.val();e.charCode!=undefined&&(r+=String.fromCharCode(e.charCode));var i=/^[0-9]*\.?[0-9]*?$/.test(r);i?n():e.preventDefault()},getValue:function(){var e=this.$el.val();return e===""?null:parseFloat(e,10)},setValue:function(e){e=function(){return n.isNumber(e)?e:n.isString(e)&&e!==""?parseFloat(e,10):null}(),n.isNaN(e)&&(e=null),i.editors.Text.prototype.setValue.call(this,e)}}),i.editors.Hidden=i.editors.Text.extend({defaultValue:"",initialize:function(e){i.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","hidden")},focus:function(){},blur:function(){}}),i.editors.Checkbox=i.editors.Base.extend({defaultValue:!1,tagName:"input",events:{click:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){i.editors.Base.prototype.initialize.call(this,e),this.$el.attr("type","checkbox")},render:function(){return this.setValue(this.value),this},getValue:function(){return this.$el.prop("checked")},setValue:function(e){e?this.$el.prop("checked",!0):this.$el.prop("checked",!1)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()}}),i.editors.Select=i.editors.Base.extend({tagName:"select",events:{change:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){i.editors.Base.prototype.initialize.call(this,e);if(!this.schema||!this.schema.options)throw new Error("Missing required 'schema.options'")},render:function(){return this.setOptions(this.schema.options),this},setOptions:function(e){var t=this;if(e instanceof r.Collection){var i=e;i.length>0?this.renderOptions(e):i.fetch({success:function(n){t.renderOptions(e)}})}else n.isFunction(e)?e(function(e){t.renderOptions(e)},t):this.renderOptions(e)},renderOptions:function(e){var t=this.$el,n;n=this._getOptionsHtml(e),t.html(n),this.setValue(this.value)},_getOptionsHtml:function(e){var t;if(n.isString(e))t=e;else if(n.isArray(e))t=this._arrayToHtml(e);else if(e instanceof r.Collection)t=this._collectionToHtml(e);else if(n.isFunction(e)){var i;e(function(e){i=e},this),t=this._getOptionsHtml(i)}else t=this._objectToHtml(e);return t},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},_collectionToHtml:function(e){var t=[];e.each(function(e){t.push({val:e.id,label:e.toString()})});var n=this._arrayToHtml(t);return n},_objectToHtml:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({val:n,label:e[n]});var r=this._arrayToHtml(t);return r},_arrayToHtml:function(e){var t=[];return n.each(e,function(e){if(n.isObject(e))if(e.group)t.push('<optgroup label="'+e.group+'">'),t.push(this._getOptionsHtml(e.options)),t.push("</optgroup>");else{var r=e.val||e.val===0?e.val:"";t.push('<option value="'+r+'">'+e.label+"</option>")}else t.push("<option>"+e+"</option>")},this),t.join("")}}),i.editors.Radio=i.editors.Select.extend({tagName:"ul",events:{"change input[type=radio]":function(){this.trigger("change",this)},"focus input[type=radio]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=radio]":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("input[type=radio]:focus")[0])return;e.trigger("blur",e)},0)}},getValue:function(){return this.$("input[type=radio]:checked").val()},setValue:function(e){this.$("input[type=radio]").val([e])},focus:function(){if(this.hasFocus)return;var e=this.$("input[type=radio]:checked");if(e[0]){e.focus();return}this.$("input[type=radio]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=radio]:focus").blur()},_arrayToHtml:function(e){var t=[],r=this;return n.each(e,function(e,i){var s="<li>";if(n.isObject(e)){var o=e.val||e.val===0?e.val:"";s+='<input type="radio" name="'+r.getName()+'" value="'+o+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e.label+"</label>"}else s+='<input type="radio" name="'+r.getName()+'" value="'+e+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e+"</label>";s+="</li>",t.push(s)}),t.join("")}}),i.editors.Checkboxes=i.editors.Select.extend({tagName:"ul",groupNumber:0,events:{"click input[type=checkbox]":function(){this.trigger("change",this)},"focus input[type=checkbox]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=checkbox]":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("input[type=checkbox]:focus")[0])return;e.trigger("blur",e)},0)}},getValue:function(){var e=[];return this.$("input[type=checkbox]:checked").each(function(){e.push(t(this).val())}),e},setValue:function(e){n.isArray(e)||(e=[e]),this.$("input[type=checkbox]").val(e)},focus:function(){if(this.hasFocus)return;this.$("input[type=checkbox]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=checkbox]:focus").blur()},_arrayToHtml:function(e){var t=[],r=this;return n.each(e,function(e,i){var s="<li>",o=!0;if(n.isObject(e))if(e.group){var u=r.id;r.id+="-"+r.groupNumber++,s='<fieldset class="group"> <legend>'+e.group+"</legend>",s+=r._arrayToHtml(e.options),s+="</fieldset>",r.id=u,o=!1}else{var a=e.val||e.val===0?e.val:"";s+='<input type="checkbox" name="'+r.getName()+'" value="'+a+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e.label+"</label>"}else s+='<input type="checkbox" name="'+r.getName()+'" value="'+e+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e+"</label>";o&&(s+="</li>"),t.push(s)}),t.join("")}}),i.editors.Object=i.editors.Base.extend({hasNestedForm:!0,initialize:function(e){this.value={},i.editors.Base.prototype.initialize.call(this,e);if(!this.form)throw new Error('Missing required option "form"');if(!this.schema.subSchema)throw new Error("Missing required 'schema.subSchema' option for Object editor")},render:function(){var e=this.form.constructor;return this.nestedForm=new e({schema:this.schema.subSchema,data:this.value,idPrefix:this.id+"_",Field:e.NestedField}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){return this.nestedForm?this.nestedForm.getValue():this.value},setValue:function(e){this.value=e,this.render()},focus:function(){if(this.hasFocus)return;this.nestedForm.focus()},blur:function(){if(!this.hasFocus)return;this.nestedForm.blur()},remove:function(){this.nestedForm.remove(),r.View.prototype.remove.call(this)},validate:function(){return this.nestedForm.validate()},_observeFormEvents:function(){if(!this.nestedForm)return;this.nestedForm.on("all",function(){var e=n.toArray(arguments);e[1]=this,this.trigger.apply(this,e)},this)}}),i.editors.NestedModel=i.editors.Object.extend({initialize:function(e){i.editors.Base.prototype.initialize.call(this,e);if(!this.form)throw new Error('Missing required option "form"');if(!e.schema.model)throw new Error('Missing required "schema.model" option for NestedModel editor')},render:function(){var e=this.form.constructor,t=this.value||{},n=this.key,r=this.schema.model,i=t.constructor===r?t:new r(t);return this.nestedForm=new e({model:i,idPrefix:this.id+"_",fieldTemplate:"nestedField"}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},commit:function(){var e=this.nestedForm.commit();return e?(this.$el.addClass("error"),e):i.editors.Object.prototype.commit.call(this)}}),i.editors.Date=i.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("select:focus")[0])return;e.trigger("blur",e)},0)}},initialize:function(e){e=e||{},i.editors.Base.prototype.initialize.call(this,e);var t=i.editors.Date,r=new Date;this.options=n.extend({monthNames:t.monthNames,showMonthNames:t.showMonthNames},e),this.schema=n.extend({yearStart:r.getFullYear()-100,yearEnd:r.getFullYear()},e.schema||{}),this.value&&!n.isDate(this.value)&&(this.value=new Date(this.value));if(!this.value){var s=new Date;s.setSeconds(0),s.setMilliseconds(0),this.value=s}this.template=e.template||this.constructor.template},render:function(){var e=this.options,r=this.schema,i=n.map(n.range(1,32),function(e){return'<option value="'+e+'">'+e+"</option>"}),s=n.map(n.range(0,12),function(t){var n=e.showMonthNames?e.monthNames[t]:t+1;return'<option value="'+t+'">'+n+"</option>"}),o=r.yearStart<r.yearEnd?n.range(r.yearStart,r.yearEnd+1):n.range(r.yearStart,r.yearEnd-1,-1),u=n.map(o,function(e){return'<option value="'+e+'">'+e+"</option>"}),a=t(t.trim(this.template({dates:i.join(""),months:s.join(""),years:u.join("")})));return this.$date=a.find('[data-type="date"]'),this.$month=a.find('[data-type="month"]'),this.$year=a.find('[data-type="year"]'),this.$hidden=t('<input type="hidden" name="'+this.key+'" />'),a.append(this.$hidden),this.setValue(this.value),this.setElement(a),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.$year.val(),t=this.$month.val(),n=this.$date.val();return!e||!t||!n?null:new Date(e,t,n)},setValue:function(e){this.$date.val(e.getDate()),this.$month.val(e.getMonth()),this.$year.val(e.getFullYear()),this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();n.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)}},{template:n.template('    <div>      <select data-type="date"><%= dates %></select>      <select data-type="month"><%= months %></select>      <select data-type="year"><%= years %></select>    </div>  ',null,i.templateSettings),showMonthNames:!0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}),i.editors.DateTime=i.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("select:focus")[0])return;e.trigger("blur",e)},0)}},initialize:function(e){e=e||{},i.editors.Base.prototype.initialize.call(this,e),this.options=n.extend({DateEditor:i.editors.DateTime.DateEditor},e),this.schema=n.extend({minsInterval:15},e.schema||{}),this.dateEditor=new this.options.DateEditor(e),this.value=this.dateEditor.value,this.template=e.template||this.constructor.template},render:function(){function e(e){return e<10?"0"+e:e}var r=this.schema,i=n.map(n.range(0,24),function(t){return'<option value="'+t+'">'+e(t)+"</option>"}),s=n.map(n.range(0,60,r.minsInterval),function(t){return'<option value="'+t+'">'+e(t)+"</option>"}),o=t(t.trim(this.template({hours:i.join(),mins:s.join()})));return o.find("[data-date]").append(this.dateEditor.render().el),this.$hour=o.find('select[data-type="hour"]'),this.$min=o.find('select[data-type="min"]'),this.$hidden=o.find('input[type="hidden"]'),this.setValue(this.value),this.setElement(o),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.dateEditor.getValue(),t=this.$hour.val(),n=this.$min.val();return!e||!t||!n?null:(e.setHours(t),e.setMinutes(n),e)},setValue:function(e){n.isDate(e)||(e=new Date(e)),this.dateEditor.setValue(e),this.$hour.val(e.getHours()),this.$min.val(e.getMinutes()),this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();n.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)},remove:function(){this.dateEditor.remove(),i.editors.Base.prototype.remove.call(this)}},{template:n.template('    <div class="bbf-datetime">      <div class="bbf-date-container" data-date></div>      <select data-type="hour"><%= hours %></select>      :      <select data-type="min"><%= mins %></select>    </div>  ',null,i.templateSettings),DateEditor:i.editors.Date}),i.VERSION="0.13.0",r.Form=i,typeof exports!="undefined"&&(exports=i)})(window||global||this)}.apply(e,arguments)})}(this),function(e){function r(e,t){var n=.1;return e>=t&&e<=t*(1+n)?t:e}var t={ago:"Ago",from:"",now:"Just Now",minute:"Minute",minutes:"Minutes",hour:"Hour",hours:"Hours",day:"Day",days:"Days",week:"Week",weeks:"Weeks",month:"Month",months:"Months",year:"Year",years:"Years"},n=[[60,t.now],[3600,t.minute,t.minutes,60],[86400,t.hour,t.hours,3600],[604800,t.day,t.days,86400],[2628e3,t.week,t.weeks,604800],[31536e3,t.month,t.months,2628e3],[Infinity,t.year,t.years,31536e3]];e.humaneDate=function(e,i){if(!e)return;var s=typeof e=="string",e=s?new Date((""+e).replace(/-/g,"/").replace(/T|(?:\.\d+)?Z/g," ")):e,i=i||new Date,o=(i-e+(i.getTimezoneOffset()-(s?0:e.getTimezoneOffset()))*6e4)/1e3,u;o<0?(o=Math.abs(o),u=t.from?" "+t.from:""):u=t.ago?" "+t.ago:"";for(var a=0,f=n[0];n[a];f=n[++a])if(o<f[0]){if(a===0)return f[1];var l=Math.ceil(r(o,f[3])/f[3]);return l+" "+(l!=1?f[2]:f[1])+(a>0?u:"")}},typeof jQuery!="undefined"&&(jQuery.fn.humaneDates=function(e){var t=jQuery.extend({lowercase:!1},e);return this.each(function(){var e=jQuery(this),n=e.attr("datetime")||e.attr("title");n=humaneDate(n),n&&t.lowercase&&(n=n.toLowerCase()),n&&e.html()!=n&&e.html(n)})})}(this),define("third-party/humane-dates/humane",function(){});var left_side_width=220;$(window).load(function(){(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$=[].slice,J={}.hasOwnProperty,K=function(e,t){function n(){this.constructor=e}for(var r in t)J.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},Q=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};for(b={catchupTime:500,initialRate:.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!1}},k=function(){var e;return null!=(e="undefined"!=typeof performance&&null!==performance?"function"==typeof performance.now?performance.now():void 0:void 0)?e:+(new Date)},A=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,y=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==A&&(A=function(e){return setTimeout(e,50)},y=function(e){return clearTimeout(e)}),M=function(e){var t,n;return t=k(),(n=function(){var r;return r=k()-t,r>=33?(t=k(),e(r,function(){return A(n)})):setTimeout(n,33-r)})()},O=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?$.call(arguments,2):[],"function"==typeof n[t]?n[t].apply(n,e):n[t]},w=function(){var e,t,n,r,i,s,o;for(t=arguments[0],r=2<=arguments.length?$.call(arguments,1):[],s=0,o=r.length;o>s;s++)if(n=r[s])for(e in n)J.call(n,e)&&(i=n[e],null!=t[e]&&"object"==typeof t[e]&&null!=i&&"object"==typeof i?w(t[e],i):t[e]=i);return t},v=function(e){var t,n,r,i,s;for(n=t=0,i=0,s=e.length;s>i;i++)r=e[i],n+=Math.abs(r),t++;return n/t},S=function(e,t){var n,r,i;if(null==e&&(e="options"),null==t&&(t=!0),i=document.querySelector("[data-pace-"+e+"]")){if(n=i.getAttribute("data-pace-"+e),!t)return n;try{return JSON.parse(n)}catch(s){return r=s,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",r):void 0}}},o=function(){function e(){}return e.prototype.on=function(e,t,n,r){var i;return null==r&&(r=!1),null==this.bindings&&(this.bindings={}),null==(i=this.bindings)[e]&&(i[e]=[]),this.bindings[e].push({handler:t,ctx:n,once:r})},e.prototype.once=function(e,t,n){return this.on(e,t,n,!0)},e.prototype.off=function(e,t){var n,r,i;if(null!=(null!=(r=this.bindings)?r[e]:void 0)){if(null==t)return delete this.bindings[e];for(n=0,i=[];n<this.bindings[e].length;)this.bindings[e][n].handler===t?i.push(this.bindings[e].splice(n,1)):i.push(n++);return i}},e.prototype.trigger=function(){var e,t,n,r,i,s,o,u,a;if(n=arguments[0],e=2<=arguments.length?$.call(arguments,1):[],null!=(o=this.bindings)?o[n]:void 0){for(i=0,a=[];i<this.bindings[n].length;)u=this.bindings[n][i],r=u.handler,t=u.ctx,s=u.once,r.apply(null!=t?t:this,e),s?a.push(this.bindings[n].splice(i,1)):a.push(i++);return a}},e}(),null==window.Pace&&(window.Pace={}),w(Pace,o.prototype),L=Pace.options=w({},b,window.paceOptions,S()),W=["ajax","document","eventLag","elements"],q=0,U=W.length;U>q;q++)P=W[q],L[P]===!0&&(L[P]=b[P]);a=function(e){function t(){return X=t.__super__.constructor.apply(this,arguments)}return K(t,e),t}(Error),t=function(){function e(){this.progress=0}return e.prototype.getElement=function(){var e;if(null==this.el){if(e=document.querySelector(L.target),!e)throw new a;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace("pace-done",""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=e.firstChild?e.insertBefore(this.el,e.firstChild):e.appendChild(this.el)}return this.el},e.prototype.finish=function(){var e;return e=this.getElement(),e.className=e.className.replace("pace-active",""),e.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},e.prototype.update=function(e){return this.progress=e,this.render()},e.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(e){a=e}return this.el=void 0},e.prototype.render=function(){var e,t;return null==document.querySelector(L.target)?!1:(e=this.getElement(),e.children[0].style.width=""+this.progress+"%",(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(e.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?t="99":(t=this.progress<10?"0":"",t+=0|this.progress),e.children[0].setAttribute("data-progress",""+t)),this.lastRenderedProgress=this.progress)},e.prototype.done=function(){return this.progress>=100},e}(),u=function(){function e(){this.bindings={}}return e.prototype.trigger=function(e,t){var n,r,i,s,o;if(null!=this.bindings[e]){for(s=this.bindings[e],o=[],r=0,i=s.length;i>r;r++)n=s[r],o.push(n.call(this,t));return o}},e.prototype.on=function(e,t){var n;return null==(n=this.bindings)[e]&&(n[e]=[]),this.bindings[e].push(t)},e}(),I=window.XMLHttpRequest,F=window.XDomainRequest,j=window.WebSocket,E=function(e,t){var n,r,i,s;s=[];for(r in t.prototype)try{i=t.prototype[r],null==e[r]&&"function"!=typeof i?s.push(e[r]=i):s.push(void 0)}catch(o){n=o}return s},N=[],Pace.ignore=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?$.call(arguments,1):[],N.unshift("ignore"),n=t.apply(null,e),N.shift(),n},Pace.track=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?$.call(arguments,1):[],N.unshift("track"),n=t.apply(null,e),N.shift(),n},D=function(e){var t;if(null==e&&(e="GET"),"track"===N[0])return"force";if(!N.length&&L.ajax){if("socket"===e&&L.ajax.trackWebSockets)return!0;if(t=e.toUpperCase(),Q.call(L.ajax.trackMethods,t)>=0)return!0}return!1},f=function(e){function t(){var e,n=this;t.__super__.constructor.apply(this,arguments),e=function(e){var t;return t=e.open,e.open=function(r,i){return D(r)&&n.trigger("request",{type:r,url:i,request:e}),t.apply(e,arguments)}},window.XMLHttpRequest=function(t){var n;return n=new I(t),e(n),n},E(window.XMLHttpRequest,I),null!=F&&(window.XDomainRequest=function(){var t;return t=new F,e(t),t},E(window.XDomainRequest,F)),null!=j&&L.ajax.trackWebSockets&&(window.WebSocket=function(e,t){var r;return r=new j(e,t),D("socket")&&n.trigger("request",{type:"socket",url:e,protocols:t,request:r}),r},E(window.WebSocket,j))}return K(t,e),t}(u),R=null,x=function(){return null==R&&(R=new f),R},x().on("request",function(t){var n,r,i,s;return s=t.type,i=t.request,Pace.running||L.restartOnRequestAfter===!1&&"force"!==D(s)?void 0:(r=arguments,n=L.restartOnRequestAfter||0,"boolean"==typeof n&&(n=0),setTimeout(function(){var t,n,o,u,a,f;if(t="socket"===s?i.readyState<2:0<(u=i.readyState)&&4>u){for(Pace.restart(),a=Pace.sources,f=[],n=0,o=a.length;o>n;n++){if(P=a[n],P instanceof e){P.watch.apply(P,r);break}f.push(void 0)}return f}},n))}),e=function(){function e(){var e=this;this.elements=[],x().on("request",function(){return e.watch.apply(e,arguments)})}return e.prototype.watch=function(e){var t,n,r;return r=e.type,t=e.request,n="socket"===r?new h(t):new p(t),this.elements.push(n)},e}(),p=function(){function e(e){var t,n,r,i,s,o,u=this;if(this.progress=0,null!=window.ProgressEvent)for(n=null,e.addEventListener("progress",function(e){return u.progress=e.lengthComputable?100*e.loaded/e.total:u.progress+(100-u.progress)/2}),o=["load","abort","timeout","error"],r=0,i=o.length;i>r;r++)t=o[r],e.addEventListener(t,function(){return u.progress=100});else s=e.onreadystatechange,e.onreadystatechange=function(){var t;return 0===(t=e.readyState)||4===t?u.progress=100:3===e.readyState&&(u.progress=50),"function"==typeof s?s.apply(null,arguments):void 0}}return e}(),h=function(){function e(e){var t,n,r,i,s=this;for(this.progress=0,i=["error","open"],n=0,r=i.length;r>n;n++)t=i[n],e.addEventListener(t,function(){return s.progress=100})}return e}(),r=function(){function e(e){var t,n,r,s;for(null==e&&(e={}),this.elements=[],null==e.selectors&&(e.selectors=[]),s=e.selectors,n=0,r=s.length;r>n;n++)t=s[n],this.elements.push(new i(t))}return e}(),i=function(){function e(e){this.selector=e,this.progress=0,this.check()}return e.prototype.check=function(){var e=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return e.check()},L.elements.checkInterval)},e.prototype.done=function(){return this.progress=100},e}(),n=function(){function e(){var e,t,n=this;this.progress=null!=(t=this.states[document.readyState])?t:100,e=document.onreadystatechange,document.onreadystatechange=function(){return null!=n.states[document.readyState]&&(n.progress=n.states[document.readyState]),"function"==typeof e?e.apply(null,arguments):void 0}}return e.prototype.states={loading:0,interactive:50,complete:100},e}(),s=function(){function e(){var e,t,n,r,i,s=this;this.progress=0,e=0,i=[],r=0,n=k(),t=setInterval(function(){var o;return o=k()-n-50,n=k(),i.push(o),i.length>L.eventLag.sampleCount&&i.shift(),e=v(i),++r>=L.eventLag.minSamples&&e<L.eventLag.lagThreshold?(s.progress=100,clearInterval(t)):s.progress=100*(3/(e+3))},50)}return e}(),c=function(){function e(e){this.source=e,this.last=this.sinceLastUpdate=0,this.rate=L.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=O(this.source,"progress"))}return e.prototype.tick=function(e,t){var n;return null==t&&(t=O(this.source,"progress")),t>=100&&(this.done=!0),t===this.last?this.sinceLastUpdate+=e:(this.sinceLastUpdate&&(this.rate=(t-this.last)/this.sinceLastUpdate),this.catchup=(t-this.progress)/L.catchupTime,this.sinceLastUpdate=0,this.last=t),t>this.progress&&(this.progress+=this.catchup*e),n=1-Math.pow(this.progress/100,L.easeFactor),this.progress+=n*this.rate*e,this.progress=Math.min(this.lastProgress+L.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},e}(),H=null,_=null,m=null,B=null,d=null,g=null,Pace.running=!1,T=function(){return L.restartOnPushState?Pace.restart():void 0},null!=window.history.pushState&&(z=window.history.pushState,window.history.pushState=function(){return T(),z.apply(window.history,arguments)}),null!=window.history.replaceState&&(V=window.history.replaceState,window.history.replaceState=function(){return T(),V.apply(window.history,arguments)}),l={ajax:e,elements:r,document:n,eventLag:s},(C=function(){var e,n,r,i,s,o,u,a;for(Pace.sources=H=[],o=["ajax","elements","document","eventLag"],n=0,i=o.length;i>n;n++)e=o[n],L[e]!==!1&&H.push(new l[e](L[e]));for(a=null!=(u=L.extraSources)?u:[],r=0,s=a.length;s>r;r++)P=a[r],H.push(new P(L));return Pace.bar=m=new t,_=[],B=new c})(),Pace.stop=function(){return Pace.trigger("stop"),Pace.running=!1,m.destroy(),g=!0,null!=d&&("function"==typeof y&&y(d),d=null),C()},Pace.restart=function(){return Pace.trigger("restart"),Pace.stop(),Pace.start()},Pace.go=function(){return Pace.running=!0,m.render(),g=!1,d=M(function(e,t){var n,r,i,s,o,u,a,f,l,h,p,d,v,y,b,w,E;for(f=100-m.progress,r=d=0,i=!0,u=v=0,b=H.length;b>v;u=++v)for(P=H[u],h=null!=_[u]?_[u]:_[u]=[],o=null!=(E=P.elements)?E:[P],a=y=0,w=o.length;w>y;a=++y)s=o[a],l=null!=h[a]?h[a]:h[a]=new c(s),i&=l.done,l.done||(r++,d+=l.tick(e));return n=d/r,m.update(B.tick(e,n)),p=k(),m.done()||i||g?(m.update(100),Pace.trigger("done"),setTimeout(function(){return m.finish(),Pace.running=!1,Pace.trigger("hide")},Math.max(L.ghostTime,Math.min(L.minTime,k()-p)))):t()})},Pace.start=function(e){w(L,e),Pace.running=!0;try{m.render()}catch(t){a=t}return document.querySelector(".pace")?(Pace.trigger("start"),Pace.go()):setTimeout(Pace.start,50)},"function"==typeof define&&define.amd?define("theme-app",[],function(){return Pace}):"object"==typeof exports?module.exports=Pace:L.startOnPageLoad&&Pace.start()}).call(this)}),function(e){e.fn.boxRefresh=function(t){function i(e){e.append(r),n.onLoadStart.call(e)}function s(e){e.find(r).remove(),n.onLoadDone.call(e)}var n=e.extend({trigger:".refresh-btn",source:"",onLoadStart:function(e){},onLoadDone:function(e){}},t),r=e('<div class="overlay"></div><div class="loading-img"></div>');return this.each(function(){if(n.source===""){console&&console.log("Please specify a source first - boxRefresh()");return}var t=e(this),r=t.find(n.trigger).first();r.click(function(e){e.preventDefault(),i(t),t.find(".box-body").load(n.source,function(){s(t)})})})}}(jQuery),function(e){e.fn.tree=function(){return this.each(function(){var t=e(this).children("a").first(),n=e(this).children(".treeview-menu").first(),r=e(this).hasClass("active");r&&(n.show(),t.children(".fa-angle-left").first().removeClass("fa-angle-left").addClass("fa-angle-down")),t.click(function(e){e.preventDefault(),r?(n.slideUp(),r=!1,t.children(".fa-angle-down").first().removeClass("fa-angle-down").addClass("fa-angle-left"),t.parent("li").removeClass("active")):(n.slideDown(),r=!0,t.children(".fa-angle-left").first().removeClass("fa-angle-left").addClass("fa-angle-down"),t.parent("li").addClass("active"))}),n.find("li > a").each(function(){var t=parseInt(e(this).css("margin-left"))+10;e(this).css({"margin-left":t+"px"})})})}}(jQuery),function(e){e.fn.todolist=function(t){var n=e.extend({onCheck:function(e){},onUncheck:function(e){}},t);return this.each(function(){e("input",this).on("ifChecked",function(t){var r=e(this).parents("li").first();r.toggleClass("done"),n.onCheck.call(r)}),e("input",this).on("ifUnchecked",function(t){var r=e(this).parents("li").first();r.toggleClass("done"),n.onUncheck.call(r)})})}}(jQuery),function(e){jQuery.fn.center=function(t){return t?t=this.parent():t=window,this.css({position:"absolute",top:(e(t).height()-this.outerHeight())/2+e(t).scrollTop()+"px",left:(e(t).width()-this.outerWidth())/2+e(t).scrollLeft()+"px"}),this}}(jQuery),function(e,t,n){function c(){s=t[o](function(){r.each(function(){var t=e(this),n=t.width(),r=t.height(),i=e.data(this,a);(n!==i.w||r!==i.h)&&t.trigger(u,[i.w=n,i.h=r])}),c()},i[f])}var r=e([]),i=e.resize=e.extend(e.resize,{}),s,o="setTimeout",u="resize",a=u+"-special-event",f="delay",l="throttleWindow";i[f]=250,i[l]=!0,e.event.special[u]={setup:function(){if(!i[l]&&this[o])return!1;var t=e(this);r=r.add(t),e.data(this,a,{w:t.width(),h:t.height()}),r.length===1&&c()},teardown:function(){if(!i[l]&&this[o])return!1;var t=e(this);r=r.not(t),t.removeData(a),r.length||clearTimeout(s)},add:function(t){function s(t,i,s){var o=e(this),u=e.data(this,a);u.w=i!==n?i:o.width(),u.h=s!==n?s:o.height(),r.apply(this,arguments)}if(!i[l]&&this[o])return!1;var r;if(e.isFunction(t))return r=t,s;r=t.handler,t.handler=s}}}(jQuery,this),function(e){jQuery.fn.extend({slimScroll:function(n){var r=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"0px",railBorderRadius:"0px"},n);return this.each(function(){function i(t){if(p){t=t||window.event;var n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3),e(t.target||t.srcTarget||t.srcElement).closest("."+r.wrapperClass).is(x.parent())&&s(n,!0),t.preventDefault&&!S&&t.preventDefault(),S||(t.returnValue=!1)}}function s(e,t,n){S=!1;var i=e,s=x.outerHeight()-N.outerHeight();t&&(i=parseInt(N.css("top"))+e*parseInt(r.wheelStep)/100*N.outerHeight(),i=Math.min(Math.max(i,0),s),i=0<e?Math.ceil(i):Math.floor(i),N.css({top:i+"px"})),b=parseInt(N.css("top"))/(x.outerHeight()-N.outerHeight()),i=b*(x[0].scrollHeight-x.outerHeight()),n&&(i=e,e=i/x[0].scrollHeight*x.outerHeight(),e=Math.min(Math.max(e,0),s),N.css({top:e+"px"})),x.scrollTop(i),x.trigger("slimscrolling",~~i),l(),c()}function o(){window.addEventListener?(this.addEventListener("DOMMouseScroll",i,!1),this.addEventListener("mousewheel",i,!1),this.addEventListener("MozMousePixelScroll",i,!1)):document.attachEvent("onmousewheel",i)}function u(){y=Math.max(x.outerHeight()/x[0].scrollHeight*x.outerHeight(),E),N.css({height:y+"px"});var e=y==x.outerHeight()?"none":"block";N.css({display:e})}function l(){u(),clearTimeout(m),b==~~b?(S=r.allowPageScroll,w!=b&&x.trigger("slimscroll",0==~~b?"top":"bottom")):S=!1,w=b,y>=x.outerHeight()?S=!0:(N.stop(!0,!0).fadeIn("fast"),r.railVisible&&C.stop(!0,!0).fadeIn("fast"))}function c(){r.alwaysVisible||(m=setTimeout(function(){r.disableFadeOut&&p||d||v||(N.fadeOut("slow"),C.fadeOut("slow"))},1e3))}var p,d,v,m,g,y,b,w,E=30,S=!1,x=e(this);if(x.parent().hasClass(r.wrapperClass)){var T=x.scrollTop(),N=x.parent().find("."+r.barClass),C=x.parent().find("."+r.railClass);u();if(e.isPlainObject(n)){if("height"in n&&"auto"==n.height){x.parent().css("height","auto"),x.css("height","auto");var k=x.parent().parent().height();x.parent().css("height",k),x.css("height",k)}if("scrollTo"in n)T=parseInt(r.scrollTo);else if("scrollBy"in n)T+=parseInt(r.scrollBy);else if("destroy"in n){N.remove(),C.remove(),x.unwrap();return}s(T,!1,!0)}}else{r.height="auto"==r.height?x.parent().height():r.height,T=e("<div></div>").addClass(r.wrapperClass).css({position:"relative",overflow:"hidden",width:r.width,height:r.height}),x.css({overflow:"hidden",width:r.width,height:r.height});var C=e("<div></div>").addClass(r.railClass).css({width:r.size,height:"100%",position:"absolute",top:0,display:r.alwaysVisible&&r.railVisible?"block":"none","border-radius":r.railBorderRadius,background:r.railColor,opacity:r.railOpacity,zIndex:90}),N=e("<div></div>").addClass(r.barClass).css({background:r.color,width:r.size,position:"absolute",top:0,opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.borderRadius,BorderRadius:r.borderRadius,MozBorderRadius:r.borderRadius,WebkitBorderRadius:r.borderRadius,zIndex:99}),k="right"==r.position?{right:r.distance}:{left:r.distance};C.css(k),N.css(k),x.wrap(T),x.parent().append(N),x.parent().append(C),r.railDraggable&&N.bind("mousedown",function(n){var r=e(document);return v=!0,t=parseFloat(N.css("top")),pageY=n.pageY,r.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,N.css("top",currTop),s(0,N.position().top,!1)}),r.bind("mouseup.slimscroll",function(e){v=!1,c(),r.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),C.hover(function(){l()},function(){c()}),N.hover(function(){d=!0},function(){d=!1}),x.hover(function(){p=!0,l(),c()},function(){p=!1,c()}),x.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(g=e.originalEvent.touches[0].pageY)}),x.bind("touchmove",function(e){S||e.originalEvent.preventDefault(),e.originalEvent.touches.length&&(s((g-e.originalEvent.touches[0].pageY)/r.touchScrollStep,!0),g=e.originalEvent.touches[0].pageY)}),u(),"bottom"===r.start?(N.css({top:x.outerHeight()-N.outerHeight()}),s(0,!0)):"top"!==r.start&&(s(e(r.start).position().top,null,!0),r.alwaysVisible||N.hide()),o()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),function(e){function t(e,t,i){var s=e[0],o=/er/.test(i)?v:/bl/.test(i)?p:c,u=i==m?{checked:s[c],disabled:s[p],indeterminate:"true"==e.attr(v)||"false"==e.attr(d)}:s[o];if(/^(ch|di|in)/.test(i)&&!u)n(e,o);else if(/^(un|en|de)/.test(i)&&u)r(e,o);else if(i==m)for(o in u)u[o]?n(e,o,!0):r(e,o,!0);else if(!t||"toggle"==i)t||e[w]("ifClicked"),u?s[g]!==l&&r(e,o):n(e,o)}function n(t,n,i){var m=t[0],w=t.parent(),E=n==c,x=n==v,T=n==p,N=x?d:E?h:"enabled",C=s(t,N+o(m[g])),A=s(t,n+o(m[g]));if(!0!==m[n]){if(!i&&n==c&&m[g]==l&&m.name){var O=t.closest("form"),M='input[name="'+m.name+'"]',M=O.length?O.find(M):e(M);M.each(function(){this!==m&&e(this).data(a)&&r(e(this),n)})}x?(m[n]=!0,m[c]&&r(t,c,"force")):(i||(m[n]=!0),E&&m[v]&&r(t,v,!1)),u(t,E,n,i)}m[p]&&s(t,S,!0)&&w.find("."+f).css(S,"default"),w[y](A||s(t,n)||""),T?w.attr("aria-disabled","true"):w.attr("aria-checked",x?"mixed":"true"),w[b](C||s(t,N)||"")}function r(e,t,n){var r=e[0],i=e.parent(),a=t==c,l=t==v,m=t==p,w=l?d:a?h:"enabled",E=s(e,w+o(r[g])),x=s(e,t+o(r[g]));if(!1!==r[t]){if(l||!n||"force"==n)r[t]=!1;u(e,a,w,n)}!r[p]&&s(e,S,!0)&&i.find("."+f).css(S,"pointer"),i[b](x||s(e,t)||""),m?i.attr("aria-disabled","false"):i.attr("aria-checked","false"),i[y](E||s(e,w)||"")}function i(t,n){t.data(a)&&(t.parent().html(t.attr("style",t.data(a).s||"")),n&&t[w](n),t.off(".i").unwrap(),e(E+'[for="'+t[0].id+'"]').add(t.closest(E)).off(".i"))}function s(e,t,n){if(e.data(a))return e.data(a).o[t+(n?"":"Class")]}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function u(e,t,n,r){r||(t&&e[w]("ifToggled"),e[w]("ifChanged")[w]("if"+o(n)))}var a="iCheck",f=a+"-helper",l="radio",c="checked",h="un"+c,p="disabled",d="determinate",v="in"+d,m="update",g="type",y="addClass",b="removeClass",w="trigger",E="label",S="cursor",x=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);e.fn[a]=function(s,o){var u='input[type="checkbox"], input[type="'+l+'"]',h=e(),d=function(t){t.each(function(){var t=e(this);h=t.is(u)?h.add(t):h.add(t.find(u))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(s))return s=s.toLowerCase(),d(this),h.each(function(){var n=e(this);"destroy"==s?i(n,"ifDestroyed"):t(n,!0,s),e.isFunction(o)&&o()});if("object"!=typeof s&&s)return this;var S=e.extend({checkedClass:c,disabledClass:p,indeterminateClass:v,labelHover:!0,aria:!1},s),T=S.handle,N=S.hoverClass||"hover",C=S.focusClass||"focus",k=S.activeClass||"active",L=!!S.labelHover,A=S.labelHoverClass||"hover",O=(""+S.increaseArea).replace("%","")|0;if("checkbox"==T||T==l)u='input[type="'+T+'"]';return-50>O&&(O=-50),d(this),h.each(function(){var s=e(this);i(s);var o=this,u=o.id,h=-O+"%",d=100+2*O+"%",d={position:"absolute",top:h,left:h,display:"block",width:d,height:d,margin:0,padding:0,background:"#fff",border:0,opacity:0},h=x?{position:"absolute",visibility:"hidden"}:O?d:{position:"absolute",opacity:0},v="checkbox"==o[g]?S.checkboxClass||"icheckbox":S.radioClass||"i"+l,T=e(E+'[for="'+u+'"]').add(s.closest(E)),_=!!S.aria,P=a+"-"+Math.random().toString(36).replace("0.",""),j='<div class="'+v+'" '+(_?'role="'+o[g]+'" ':"");T.length&&_&&T.each(function(){j+='aria-labelledby="',this.id?j+=this.id:(this.id=P,j+=P),j+='"'}),j=s.wrap(j+"/>")[w]("ifCreated").parent().append(S.insert),d=e('<ins class="'+f+'"/>').css(d).appendTo(j),s.data(a,{o:S,s:s.attr("style")}).css(h),S.inheritClass&&j[y](o.className||""),S.inheritID&&u&&j.attr("id",a+"-"+u),"static"==j.css("position")&&j.css("position","relative"),t(s,!0,m),T.length&&T.on("click.i mouseover.i mouseout.i touchbegin.i touchend.i",function(n){var r=n[g],i=e(this);if(!o[p]){if("click"==r){if(e(n.target).is("a"))return;t(s,!1,!0)}else L&&(/ut|nd/.test(r)?(j[b](N),i[b](A)):(j[y](N),i[y](A)));if(!x)return!1;n.stopPropagation()}}),s.on("click.i focus.i blur.i keyup.i keydown.i keypress.i",function(e){var t=e[g];e=e.keyCode;if("click"==t)return!1;if("keydown"==t&&32==e)return o[g]==l&&o[c]||(o[c]?r(s,c):n(s,c)),!1;"keyup"==t&&o[g]==l?!o[c]&&n(s,c):/us|ur/.test(t)&&j["blur"==t?b:y](C)}),d.on("click mousedown mouseup mouseover mouseout touchbegin.i touchend.i",function(e){var n=e[g],r=/wn|up/.test(n)?k:N;if(!o[p]){"click"==n?t(s,!1,!0):(/wn|er|in/.test(n)?j[y](r):j[b](r+" "+k),T.length&&L&&r==N&&T[/ut|nd/.test(n)?b:y](A));if(!x)return!1;e.stopPropagation()}})})}}(window.jQuery||window.Zepto),$(function(){function e(){var e=$(window).height()-$("body > .header").height();$(".wrapper").css("min-height",e+"px");var t=$(".wrapper").height();t>e?$(".left-side, html, body").css("min-height",t+"px"):$(".left-side, html, body").css("min-height",e+"px")}$("[data-toggle='offcanvas']").click(function(e){e.preventDefault(),$(window).width()<=992?($(".row-offcanvas").toggleClass("active"),$(".left-side").removeClass("collapse-left"),$(".right-side").removeClass("strech"),$(".row-offcanvas").toggleClass("relative")):($(".left-side").toggleClass("collapse-left"),$(".right-side").toggleClass("strech"))}),$(".btn").bind("touchstart",function(){$(this).addClass("hover")}).bind("touchend",function(){$(this).removeClass("hover")}),$("[data-widget='collapse']").click(function(){var e=$(this).parents(".box").first(),t=e.find(".box-body, .box-footer");e.hasClass("collapsed-box")?(e.removeClass("collapsed-box"),t.slideDown()):(e.addClass("collapsed-box"),t.slideUp())}),$(".navbar .menu").slimscroll({height:"200px",alwaysVisible:!1,size:"3px"}).css("width","100%"),$('.btn-group[data-toggle="btn-toggle"]').each(function(){var e=$(this);$(this).find(".btn").click(function(t){e.find(".btn.active").removeClass("active"),$(this).addClass("active"),t.preventDefault()})}),$("[data-widget='remove']").click(function(){var e=$(this).parents(".box").first();e.slideUp()}),$(".sidebar .treeview").tree(),e(),$(".wrapper").resize(function(){e(),fix_sidebar()}),fix_sidebar(),$("input[type='checkbox'], input[type='radio']").iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal"})}),define("admin-lte",function(){}),define("helpers/string",[],function(){String.prototype.toCamelCase=function(){return this.split(/\W+/g).map(function(e){return e.substr(0,1).toUpperCase()+e.substr(1)}).join(" ")}}),!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("spin",t):e.Spinner=t()}(this,function(){function e(e,t){var n,r=document.createElement(e||"div");for(n in t)r[n]=t[n];return r}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,r){var i=["opacity",t,~~(100*e),n,r].join("-"),s=.01+n/r*100,o=Math.max(1-(1-e)/t*(100-s),e),u=f.substring(0,f.indexOf("Animation")).toLowerCase(),a=u&&"-"+u+"-"||"";return c[i]||(h.insertRule("@"+a+"keyframes "+i+"{0%{opacity:"+o+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+t)%100+"%{opacity:"+e+"}100%{opacity:"+o+"}}",h.cssRules.length),c[i]=1),i}function r(e,t){var n,r,i=e.style;if(void 0!==i[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<l.length;r++)if(n=l[r]+t,void 0!==i[n])return n}function i(e,t){for(var n in t)e.style[r(e,n)||n]=t[n];return e}function s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)void 0===e[r]&&(e[r]=n[r])}return e}function o(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function u(e){return"undefined"==typeof this?new u(e):(this.opts=s(e||{},u.defaults,p),void 0)}function a(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}h.addRule(".spin-vml","behavior:url(#default#VML)"),u.prototype.lines=function(e,r){function s(){return i(n("group",{coordsize:f+" "+f,coordorigin:-a+" "+ -a}),{width:f,height:f})}function o(e,o,u){t(c,t(i(s(),{rotation:360/r.lines*e+"deg",left:~~o}),t(i(n("roundrect",{arcsize:r.corners}),{width:a,height:r.width,left:r.radius,top:-r.width>>1,filter:u}),n("fill",{color:r.color,opacity:r.opacity}),n("stroke",{opacity:0}))))}var u,a=r.length+r.width,f=2*a,l=2*-(r.width+r.length)+"px",c=i(s(),{position:"absolute",top:l,left:l});if(r.shadow)for(u=1;u<=r.lines;u++)o(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=r.lines;u++)o(u);return t(e,c)},u.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var f,l=["webkit","Moz","ms","O"],c={},h=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};u.defaults={},s(u.prototype,{spin:function(t){this.stop();var n,r,s=this,u=s.opts,a=s.el=i(e(0,{className:u.className}),{position:u.position,width:0,zIndex:u.zIndex}),l=u.radius+u.length+u.width;if(t&&(t.insertBefore(a,t.firstChild||null),r=o(t),n=o(a),i(a,{left:("auto"==u.left?r.x-n.x+(t.offsetWidth>>1):parseInt(u.left,10)+l)+"px",top:("auto"==u.top?r.y-n.y+(t.offsetHeight>>1):parseInt(u.top,10)+l)+"px"})),a.setAttribute("role","progressbar"),s.lines(a,s.opts),!f){var c,h=0,p=(u.lines-1)*(1-u.direction)/2,d=u.fps,v=d/u.speed,m=(1-u.opacity)/(v*u.trail/100),y=v/u.lines;!function b(){h++;for(var e=0;e<u.lines;e++)c=Math.max(1-(h+(u.lines-e)*y)%v*m,u.opacity),s.opacity(a,e*u.direction+p,c,u);s.timeout=s.el&&setTimeout(b,~~(1e3/d))}()}return s},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(r,s){function o(t,n){return i(e(),{position:"absolute",width:s.length+s.width+"px",height:s.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*a+s.rotate)+"deg) translate("+s.radius+"px,0)",borderRadius:(s.corners*s.width>>1)+"px"})}for(var u,a=0,l=(s.lines-1)*(1-s.direction)/2;a<s.lines;a++)u=i(e(),{position:"absolute",top:1+~(s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:f&&n(s.opacity,s.trail,l+a*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&t(u,i(o("#000","0 0 4px #000"),{top:"2px"})),t(r,t(u,o(s.color,"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var d=i(e("group"),{behavior:"url(#default#VML)"});return!r(d,"transform")&&d.adj?a():f=r(d,"animation"),u}),!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("third-party/ladda-bootstrap/dist/ladda.min",["spin"],t):e.Ladda=t(e.Spinner)}(this,function(e){function t(e){if("undefined"==typeof e)return console.warn("Ladda button target must be defined."),void 0;e.querySelector(".ladda-label")||(e.innerHTML='<span class="ladda-label">'+e.innerHTML+"</span>");var t=i(e),n=document.createElement("span");n.className="ladda-spinner",e.appendChild(n);var r,s={start:function(){return e.setAttribute("disabled",""),e.setAttribute("data-loading",""),clearTimeout(r),t.spin(n),this.setProgress(0),this},startAfter:function(e){return clearTimeout(r),r=setTimeout(function(){s.start()},e),this},stop:function(){return e.removeAttribute("disabled"),e.removeAttribute("data-loading"),clearTimeout(r),r=setTimeout(function(){t.stop()},1e3),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(t){t=Math.max(Math.min(t,1),0);var n=e.querySelector(".ladda-progress");0===t&&n&&n.parentNode?n.parentNode.removeChild(n):(n||(n=document.createElement("div"),n.className="ladda-progress",e.appendChild(n)),n.style.width=(t||0)*e.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),e.setAttribute("disabled",""),this},isLoading:function(){return e.hasAttribute("data-loading")}};return o.push(s),s}function n(e,n){n=n||{};var r=[];"string"==typeof e?r=s(document.querySelectorAll(e)):"object"==typeof e&&"string"==typeof e.nodeName&&(r=[e]);for(var i=0,o=r.length;o>i;i++)!function(){var e=r[i];if("function"==typeof e.addEventListener){var s=t(e),o=-1;e.addEventListener("click",function(){s.startAfter(1),"number"==typeof n.timeout&&(clearTimeout(o),o=setTimeout(s.stop,n.timeout)),"function"==typeof n.callback&&n.callback.apply(null,[s])},!1)}}()}function r(){for(var e=0,t=o.length;t>e;e++)o[e].stop()}function i(t){var n,r=t.offsetHeight;r>32&&(r*=.8),t.hasAttribute("data-spinner-size")&&(r=parseInt(t.getAttribute("data-spinner-size"),10)),t.hasAttribute("data-spinner-color")&&(n=t.getAttribute("data-spinner-color"));var i=12,s=.2*r,o=.6*s,u=7>s?2:3;return new e({color:n||"#fff",lines:i,radius:s,length:o,width:u,zIndex:"auto",top:"auto",left:"auto",className:""})}function s(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}var o=[];return{bind:n,create:t,stopAll:r}}),define("views/layout/header/view",[],function(){return Backbone.View.extend({events:{},initialize:function(e){var t=this;$('a[href="/auth/logout"]').on("click",function(e){$.ajax({method:"POST",url:"/auth/logout"}).success(function(){document.location.href="/"}).error(function(){alertify.error("Ooops!")}),e.preventDefault()})},render:function(){var e=this}})}),define("views/layout/sidebar/view",[],function(){return Backbone.View.extend({events:{},initialize:function(e){var t=this,n=$('.sidebar input[name="q"]');n.size()&&n.get(0).focus(),n.on("keydown",function(e){13===e.keyCode&&e.preventDefault()}),n.on("keyup",function(e){var t=$(this).val(),n=$(".sidebar-menu a");if(""===t){n.each(function(e,t){var n=$(t);if(n.find(".pull-right").size())return;n.closest("li.treeview").removeClass("active").show().find(".treeview-menu").hide(),n.closest("li.treeview").find("i.fa.pull-right").removeClass("fa-angle-down").addClass("fa-angle-left"),n.show(),n.removeClass("bg-green")});return}n.each(function(e,t){var n=$(t),r=n.text();if(n.find(".pull-right").size())return;n.closest("li.treeview").removeClass("active").hide().find(".treeview-menu").hide(),n.closest("li.treeview").find("i.fa.pull-right").removeClass("fa-angle-down").addClass("fa-angle-left"),n.hide(),n.removeClass("bg-green")}),n.each(function(e,n){var r=$(n),i=r.text();if(r.find(".pull-right").size())return;i.match(new RegExp("("+t.split(" ").join("|")+")","i"))&&(r.closest("li.treeview").addClass("active").show().find(".treeview-menu").show(),r.closest("li.treeview").find("i.fa.pull-right").removeClass("fa-angle-left").addClass("fa-angle-down"),r.show(),r.addClass("bg-green"))}),e.preventDefault()})},render:function(){var e=this}})}),define("third-party/requirejs-text/text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("﻿")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("third-party/requirejs-text/text!views/dashboard/widget/collections-pie/view.html",[],function(){return'<div class="box">\n    <div class="box-header">\n        <h3 class="box-title">\n            Content Overview\n        </h3>\n    </div><!-- /.box-header -->\n    <div class="box-body">\n        <div class="row">\n            <div class="col-md-12">\n                <div class="chart" style="height:300px;"></div>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-md-12">\n                <table class="table table-stripped">\n                    <tr>\n                        <th><%= \'Content Type\' %></a></th>\n                        <th>Total</th>\n                    </tr>\n                    <% _(data).each(function (collection, i) { %>\n                    <tr>\n                        <td><%= collection.label %></td>\n                        <td><%= collection.value %></td>\n                    </tr>\n                    <% }) %>\n                </table>\n            </div>\n        </div>\n    </div><!-- /.box-body -->\n    <div class="box-footer clearfix">\n    </div>\n</div><!-- /.box -->\n'}),define("third-party/requirejs-plugins/src/async",[],function(){function n(e){var t,n;t=document.createElement("script"),t.type="text/javascript",t.async=!0,t.src=e,n=document.getElementsByTagName("script")[0],n.parentNode.insertBefore(t,n)}function r(t,n){var r=/!(.+)/,i=t.replace(r,""),s=r.test(t)?t.replace(/.+!/,""):e;return i+=i.indexOf("?")<0?"?":"&",i+s+"="+n}function i(){return t+=1,"__async_req_"+t+"__"}var e="callback",t=0;return{load:function(e,t,s,o){if(o.isBuild)s(null);else{var u=i();window[u]=s,n(r(e,u))}}}}),define("propertyParser",[],function(){function n(t){var n,i={};while(n=e.exec(t))i[n[1]]=r(n[2]||n[3]);return i}function r(e){return t.test(e)?e=e.replace(t,"$1").split(","):e==="null"?e=null:e==="false"?e=!1:e==="true"?e=!0:e===""||e==="''"||e==='""'?e="":isNaN(e)||(e=+e),e}var e=/([\w-]+)\s*:\s*(?:(\[[^\]]+\])|([^,]+)),?/g,t=/^\[([^\]]+)\]$/;return{parseProperties:n,typecastVal:r}}),define("third-party/requirejs-plugins/src/goog",["async","propertyParser"],function(e,t){function r(e){var r=n.exec(e),i={moduleName:r[1],version:r[2]||"1"};return i.settings=t.parseProperties(r[3]),i}var n=/^([^,]+)(?:,([^,]+))?(?:,(.+))?/;return{load:function(e,t,n,i){if(i.isBuild)n(null);else{var s=r(e),o=s.settings;o.callback=n,t(["async!"+(document.location.protocol==="https:"?"https":"http")+"://www.google.com/jsapi"],function(){google.load(s.moduleName,s.version,o)})}}}}),define("views/dashboard/widget/collections-pie/view",["text!./view.html","goog!visualization,1,packages:[corechart]"],function(e){return Backbone.View.extend({events:{},initialize:function(t){var n=this;n.setElement(t.el),n.collectionNames=n.$el.data("collection-names").split(",");var r=[];_(n.collectionNames).each(function(e){r.push("json!/config/"+e+".json","json!/api/"+e+"?ipp=0")}),require(r,function(){var t=[];for(var r=0;r<arguments.length;r+=2){var i=arguments[r];response=arguments[r+1],t.push({label:i.humanName,value:response.pager.total_count})}n.$el.html(_.template(e,{data:t}));var s=new google.visualization.DataTable;s.addColumn("string","Content Type"),s.addColumn("number","Amount"),s.addRows(_(t).map(function(e){return[e.label,e.value]}));var o={pieHole:.4},u=new google.visualization.PieChart(n.$(".chart").get(0));u.draw(s,o)}),n.delegateEvents()},render:function(){var e=this}})}),define("third-party/requirejs-text/text!views/dashboard/widget/editions-chart/view.html",[],function(){return'<div class="box">\n    <div class="box-header">\n        <h3 class="box-title">\n            Editions over Time\n        </h3>\n    </div><!-- /.box-header -->\n    <div class="box-body">\n        <div class="col-md-12">\n            <div class="chart" style="height:300px;"></div>\n        </div>\n    </div><!-- /.box-body -->\n    <div class="box-footer clearfix">\n    </div>\n</div><!-- /.box -->\n'}),define("views/dashboard/widget/editions-chart/view",["text!./view.html","goog!visualization,1,packages:[corechart]"],function(e){return Backbone.View.extend({events:{},initialize:function(t){var n=this;n.setElement(t.el),require(["json!/api/revision?ipp=30&sort[]=created=-1"],function(t){var r={};for(var i=0;i<t.data.length;i++){var s=t.data[i],o=(new Date(s.created)).toDateString(),u={label:s.user+" edited "+s.collectionName,created:s.created,step:o,is_draft:s.is_draft,first_revision:s.first_revision};r[o]?r[o].push(u):r[o]=[u]}n.$el.html(_.template(e,{data:r}));var u=new google.visualization.DataTable;u.addColumn("date","Day"),u.addColumn("number","drafts"),u.addColumn("number","editions"),u.addColumn("number","creations"),u.addRows(_(r).map(function(e){return[new Date(e[0].step),_(e).filter(function(e){return e.is_draft}).length,_(e).filter(function(e){return!e.first_revision}).length,_(e).filter(function(e){return e.first_revision}).length]}));var a={title:"Latest Editions",crosshair:{trigger:"both",orientation:"vertical",color:"#999",opacity:.2,focused:{color:"#999",opacity:.4}}},f=new google.visualization.LineChart(n.$(".chart").get(0));f.draw(u,a)}),n.delegateEvents()},render:function(){var e=this}})}),define("third-party/requirejs-text/text!views/dashboard/widget/recent/view.html",[],function(){return'<div class="box">\n    <div class="box-header">\n        <h3 class="box-title">\n            <%= config.humanName %>\n        </h3>\n        <div class="box-tools pull-right">\n            <a href="/search/<%= config.name %>" class="btn btn-default fa fa-search"></a>\n        </div>\n    </div><!-- /.box-header -->\n    <div class="box-body">\n        <% if (collection.models.length) { %>\n        <table class="table table-stripped">\n            <tr>\n                <th style="width: 10px">#</th>\n                <th><%= config.schema[ config.toStringField ].title || \'Title\' %></a></th>\n                <th style="width: 10px"></th>\n                <th>Modified <i class="fa fa-caret-down"></i></th>\n                <th>API Endpoint</th>\n            </tr>\n            <% _(collection.models).each(function (model, i) { %>\n            <tr>\n                <td style="width: 10px"><%= (i+1) + (pager.ipp * (pager.p-1)) %></td>\n                <td style="width: 50%">\n                    <a href="/edit/<%= config.name %>/<%= model.get(\'_id\') %>"><%= model.toString() %></a>\n                    <% if ((new Date(model.get(config.createdField.key))) > (new Date(Date.now() - 60*60*3000))) { %>\n                        &nbsp; <span class="label label-success">New &nbsp; <i class="fa fa-clock-o"></i></span>\n                    <% } else if ((new Date(model.get(config.updatedField.key))) > (new Date(Date.now() - 60*60*3000))) { %>\n                        &nbsp; <span class="label label-info">Recently edited &nbsp; <i class="fa fa-clock-o"></i></span>\n                    <% } %>\n                </td>\n                <td><a class="btn btn-default btn-xs" target="_blank" href="/preview/<%= config.name + \'/\' + model.get(\'_id\') %>"><i class="fa fa-eye"></i></a></td>\n                <td><time datetime="<%= model.get(config.updatedField.key) %>"></time></td>\n                <td><a target="_blank" href="/api/<%= config.name + \'/\' + model.get(\'_id\') %>"><i class="fa fa-link"></i></a></td>\n            </tr>\n            <% }) %>\n        </table>\n        <% } else { %>\n        <div class="alert alert-warning alert-dismissable">\n            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n            <strong>Oops!</strong> No content found.\n        </div>\n        <% } %>\n    </div><!-- /.box-body -->\n    <div class="box-footer clearfix">\n\n        <%\n            var getAttrPagerData = function (p) {\n                return JSON.stringify(_.extend({}, pager, { p: p })).replace(/"/g, \'&quot;\');\n            }\n        %>\n        <ul class="pagination pagination-sm no-margin pull-right">\n            <li><a href="#" data-pager="<%= getAttrPagerData(1) %>" class="fa fa-caret-left"></a></li>\n            <% for (var p = (pager.p < 3 ? 3 - pager.p : pager.p-2); p < pager.p; p++) { %>\n            <li><a href="#" data-pager="<%= getAttrPagerData(p) %>"><%= p %></a></li>\n            <% } %>\n            <li><a href="#" data-pager="<%= getAttrPagerData(pager.current) %>" class="bg-blue"><%= pager.p %></a></li>\n            <% for (var p = pager.p+1; p < (pager.total_pages - (pager.p+1) < 2 ? pager.total_pages+1 : pager.p+3); p++) { %>\n            <li><a href="#" data-pager="<%= getAttrPagerData(p) %>"><%= p %></a></li>\n            <% } %>\n            <li><a href="#" data-pager="<%= getAttrPagerData(pager.total_pages) %>" class="fa fa-caret-right"></a></li>\n        </ul>\n    </div>\n</div><!-- /.box -->\n'}),define("views/dashboard/widget/recent/view",["text!./view.html"],function(e){return Backbone.View.extend({events:{"click .pagination li a":"gotoPage"},initialize:function(t){var n=this;n.setElement(t.el),n.collectionName=n.$el.data("collection-name"),require(["json!/config/"+n.collectionName+".json","collections/"+n.collectionName],function(t,r){n.pager={p:1,ipp:5,"sort[]":function(e){return e[t.updatedField.key]=-1,$.param(e)}({})},n.collection=new r,n.collection.on("sync",function(r,i,s){n.$el.html(_.template(e,{config:t,collection:r,pager:r.pager})),n.$("time").humaneDates({lowercase:!0})},this),n.collection.fetch({data:n.pager})}),n.delegateEvents()},render:function(){var e=this},gotoPage:function(e){var t=this;$el=$(e.target);if($el.data("pager")){var n=$el.data("pager"),r={p:n.p,ipp:t.pager.ipp,filter:t.pager.filter,"sort[]":t.pager["sort[]"]};t.collection.fetch({data:r})}else t.collection.fetch({url:$(e.target).attr("href")});e.preventDefault()}})}),define("views/login/form",["third-party/ladda-bootstrap/dist/ladda.min"],function(e){return Backbone.View.extend({events:{submit:"submit","click #submit-guest":"signinAsGuest"},initialize:function(t){var n=this;n.setElement($("form").get(0)),n.$('[type="submit"]').removeAttr("disabled"),n.$("#submit-guest").removeAttr("disabled"),n.laddaSubmit=e.create(this.$el.find('[type="submit"]').get(0))},render:function(){},submit:function(e){var t=this;e.preventDefault(),t.laddaSubmit.start(),$.ajax({method:"POST",url:t.$el.attr("action"),data:t.$el.serialize()}).success(function(e){alertify.success('<i class="glyphicon glyphicon-ok"></i> <span class="col-sm-offset-1">Welcome, <strong>'+e.user.fullname+"</strong></span>!"),t.$el.fadeOut(1e3,function(){t.laddaSubmit.stop(),document.location="/dashboard"})}).error(function(e){t.laddaSubmit.stop(),t.$(".alert").remove(),t.$el.prepend('<div class="alert alert-danger"><i class="glyphicon glyphicon-remove"></i> Invalid credentials.</div>'),alertify.error('<i class="glyphicon glyphicon-remove"></i> <span class="col-sm-offset-1">Unable to perform login, please verify your credentials.</span>')})},signinAsGuest:function(e){var t=this;e.preventDefault(),t.$('[name="user"]').val("guest"),t.$('[name="pass"]').val(""),t.submit(e)}})}),function(e,t){function r(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return r(e.getFullYear(),e.getMonth(),e.getDate())}function s(e){return function(){return this[e].apply(this,arguments)}}function f(t,n){function u(e,t){return t.toLowerCase()}var r=e(t).data(),i={},s,o=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var a in r)n.test(a)&&(s=a.replace(o,u),i[s]=r[a]);return i}function l(t){var n={};if(!d[t]){t=t.split("-")[0];if(!d[t])return}var r=d[t];return e.each(p,function(e,t){t in r&&(n[t]=r[t])}),n}var n=e(window),o=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){var t=e&&e.valueOf();for(var n=0,r=this.length;n<r;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){if(!t)return;e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t)},clear:function(){this.splice(0)},copy:function(){var e=new o;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),u=function(t,n){this.dates=new o,this.viewDate=i(),this.focusDate=null,this._process_options(n),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=e(v.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};u.prototype={constructor:u,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o),r=n.language;d[r]||(r=r.split("-")[0],d[r]||(r=h.language)),n.language=r;switch(n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.multidate!==!0&&(n.multidate=Number(n.multidate)||!1,n.multidate!==!1?n.multidate=Math.max(0,n.multidate):n.multidate=1),n.multidateSeparator=String(n.multidateSeparator),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var i=v.parseFormat(n.format);n.startDate!==-Infinity&&(n.startDate?n.startDate instanceof Date?n.startDate=this._local_to_utc(this._zero_time(n.startDate)):n.startDate=v.parseDate(n.startDate,i,n.language):n.startDate=-Infinity),n.endDate!==Infinity&&(n.endDate?n.endDate instanceof Date?n.endDate=this._local_to_utc(this._zero_time(n.endDate)):n.endDate=v.parseDate(n.endDate,i,n.language):n.endDate=Infinity),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],e.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)});var s=String(n.orientation).toLowerCase().split(/\s+/g),o=n.orientation.toLowerCase();s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),n.orientation={x:"auto",y:"auto"};if(!!o&&o!=="auto")if(s.length===1)switch(s[0]){case"top":case"bottom":n.orientation.y=s[0];break;case"left":case"right":n.orientation.x=s[0]}else o=e.grep(s,function(e){return/^left|right$/.test(e)}),n.orientation.x=o[0]||"auto",o=e.grep(s,function(e){return/^top|bottom$/.test(e)}),n.orientation.y=o[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++)r=e[n][0],e[n].length===2?(i=t,s=e[n][1]):e[n].length===3&&(i=e[n][1],s=e[n][2]),r.on(s,i)},_unapplyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++)r=e[n][0],e[n].length===2?(s=t,i=e[n][1]):e[n].length===3&&(s=e[n][1],i=e[n][2]),r.off(i,s)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.dates.get(-1),i=this._utc_to_local(r);this.element.trigger({type:t,date:i,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){arguments.length===0?(e=this.dates.length-1,t=this.o.format):typeof e=="string"&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return v.formatDate(n,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){if(this.isInline)return;if(!this.picker.is(":visible"))return;this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide")},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return e&&new Date(e.getTime()+e.getTimezoneOffset()*6e4)},_local_to_utc:function(e){return e&&new Date(e.getTime()-e.getTimezoneOffset()*6e4)},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:s("setDates"),setUTCDate:s("setUTCDates"),setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(n){n===t&&(n=this.o.format);var r=this.o.language;return e.map(this.dates,function(e){return v.formatDate(e,n,r)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return;var t=this.picker.outerWidth(),r=this.picker.outerHeight(),i=10,s=n.width(),o=n.height(),u=n.scrollTop(),a=parseInt(this.element.parents().filter(function(){return e(this).css("z-index")!=="auto"}).first().css("z-index"))+10,f=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),c=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=f.left,p=f.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(h-=t-c)):(this.picker.addClass("datepicker-orient-left"),f.left<0?h-=f.left-i:f.left+t>s&&(h=s-t-i));var d=this.o.orientation.y,v,m;d==="auto"&&(v=-u+f.top-r,m=u+o-(f.top+l+r),Math.max(v,m)===m?d="top":d="bottom"),this.picker.addClass("datepicker-orient-"+d),d==="top"?p+=l:p-=r+parseInt(this.picker.css("padding-top")),this.picker.css({top:p,left:h,zIndex:a})},_allow_update:!0,update:function(){if(!this._allow_update)return;var t=this.dates.copy(),n=[],r=!1;arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),r=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n&&this.o.multidate?n=n.split(this.o.multidateSeparator):n=[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return v.parseDate(e,this.o.format,this.o.language)},this)),n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),r?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill()},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';t+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}while(e<this.o.weekStart+7)t+='<th class="dow">'+d[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+d[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){!t||!t.length?delete this.range:this.range=e.map(t,function(e){return e.valueOf()}),this.fill()},getClassNames:function(t){var n=[],r=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),s=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<i?n.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>i)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===s.getFullYear()&&t.getUTCMonth()===s.getMonth()&&t.getUTCDate()===s.getDate()&&n.push("today"),this.dates.contains(t)!==-1&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&n.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),e.inArray(t.valueOf(),this.range)!==-1&&n.push("selected")),n},fill:function(){var n=new Date(this.viewDate),i=n.getUTCFullYear(),s=n.getUTCMonth(),o=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,u=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,a=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,f=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,l=d[this.o.language].today||d.en.today||"",c=d[this.o.language].clear||d.en.clear||"",h;this.picker.find(".datepicker-days thead th.datepicker-switch").text(d[this.o.language].months[s]+" "+i),this.picker.find("tfoot th.today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(c).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=r(i,s-1,28),m=v.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(m),p.setUTCDate(m-(p.getUTCDay()-this.o.weekStart+7)%7);var g=new Date(p);g.setUTCDate(g.getUTCDate()+42),g=g.valueOf();var y=[],b;while(p.valueOf()<g){if(p.getUTCDay()===this.o.weekStart){y.push("<tr>");if(this.o.calendarWeeks){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),E=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),S=new Date(Number(S=r(E.getUTCFullYear(),0,1))+(11-S.getUTCDay())%7*864e5),x=(E-S)/864e5/7+1;y.push('<td class="cw">'+x+"</td>")}}b=this.getClassNames(p),b.push("day");if(this.o.beforeShowDay!==e.noop){var T=this.o.beforeShowDay(this._utc_to_local(p));T===t?T={}:typeof T=="boolean"?T={enabled:T}:typeof T=="string"&&(T={classes:T}),T.enabled===!1&&b.push("disabled"),T.classes&&(b=b.concat(T.classes.split(/\s+/))),T.tooltip&&(h=T.tooltip)}b=e.unique(b),y.push('<td class="'+b.join(" ")+'"'+(h?' title="'+h+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()===this.o.weekEnd&&y.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(y.join(""));var N=this.picker.find(".datepicker-months").find("th:eq(1)").text(i).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===i&&N.eq(t.getUTCMonth()).addClass("active")}),(i<o||i>a)&&N.addClass("disabled"),i===o&&N.slice(0,u).addClass("disabled"),i===a&&N.slice(f+1).addClass("disabled"),y="",i=parseInt(i/10,10)*10;var C=this.picker.find(".datepicker-years").find("th:eq(1)").text(i+"-"+(i+9)).end().find("td");i-=1;var k=e.map(this.dates,function(e){return e.getUTCFullYear()}),L;for(var A=-1;A<11;A++)L=["year"],A===-1?L.push("old"):A===10&&L.push("new"),e.inArray(i,k)!==-1&&L.push("active"),(i<o||i>a)&&L.push("disabled"),y+='<span class="'+L.join(" ")+'">'+i+"</span>",i+=1;C.html(y)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(t){t.preventDefault();var n=e(t.target).closest("span, td, th"),i,s,o;if(n.length===1)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var u=v.modes[this.viewMode].navStep*(n[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,u),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,u),this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var a=new Date;a=r(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2);var f=this.o.todayBtn==="linked"?null:"view";this._setDate(a,f);break;case"clear":var l;this.isInput?l=this.element:this.component&&(l=this.element.find("input")),l&&l.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":n.is(".disabled")||(this.viewDate.setUTCDate(1),n.is(".month")?(o=1,s=n.parent().find("span").index(n),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(r(i,s,o))):(o=1,s=0,i=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(r(i,s,o))),this.showMode(-1),this.fill());break;case"td":n.is(".day")&&!n.is(".disabled")&&(o=parseInt(n.text(),10)||1,i=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),n.is(".old")?s===0?(s=11,i-=1):s-=1:n.is(".new")&&(s===11?(s=0,i+=1):s+=1),this._setDate(r(i,s,o)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);e?t!==-1?this.dates.remove(t):this.dates.push(e):this.dates.clear();if(typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(e,t){(!t||t==="date")&&this._toggle_multidate(e&&new Date(e));if(!t||t==="view")this.viewDate=e&&new Date(e);this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(e,n){if(!e)return t;if(!n)return e;var r=new Date(e.valueOf()),i=r.getUTCDate(),s=r.getUTCMonth(),o=Math.abs(n),u,a;n=n>0?1:-1;if(o===1){a=n===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u},u=s+n,r.setUTCMonth(u);if(u<0||u>11)u=(u+12)%12}else{for(var f=0;f<o;f++)r=this.moveMonth(r,n);u=r.getUTCMonth(),r.setUTCDate(i),a=function(){return u!==r.getUTCMonth()}}while(a())r.setUTCDate(--i),r.setUTCMonth(u);return r},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){e.keyCode===27&&this.show();return}var t=!1,n,r,s,o=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;n=e.keyCode===37?-1:1,e.ctrlKey?(r=this.moveYear(this.dates.get(-1)||i(),n),s=this.moveYear(o,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(r=this.moveMonth(this.dates.get(-1)||i(),n),s=this.moveMonth(o,n),this._trigger("changeMonth",this.viewDate)):(r=new Date(this.dates.get(-1)||i()),r.setUTCDate(r.getUTCDate()+n),s=new Date(o),s.setUTCDate(o.getUTCDate()+n)),this.dateWithinRange(r)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;n=e.keyCode===38?-1:1,e.ctrlKey?(r=this.moveYear(this.dates.get(-1)||i(),n),s=this.moveYear(o,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(r=this.moveMonth(this.dates.get(-1)||i(),n),s=this.moveMonth(o,n),this._trigger("changeMonth",this.viewDate)):(r=new Date(this.dates.get(-1)||i()),r.setUTCDate(r.getUTCDate()+n*7),s=new Date(o),s.setUTCDate(o.getUTCDate()+n*7)),this.dateWithinRange(r)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(o),t=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(t){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var a=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,e(this.inputs).datepicker(n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};a.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(this.updating)return;this.updating=!0;var n=e(t.target).data("datepicker"),r=n.getUTCDate(),i=e.inArray(t.target,this.inputs),s=this.inputs.length;if(i===-1)return;e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(r)});if(r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<s&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates(),delete this.updating},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var c=e.fn.datepicker;e.fn.datepicker=function(n){var r=Array.apply(null,arguments);r.shift();var i;return this.each(function(){var s=e(this),o=s.data("datepicker"),c=typeof n=="object"&&n;if(!o){var p=f(this,"date"),d=e.extend({},h,p,c),v=l(d.language),m=e.extend({},h,v,p,c);if(s.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||s.find("input").toArray()};s.data("datepicker",o=new a(this,e.extend(m,g)))}else s.data("datepicker",o=new u(this,m))}if(typeof n=="string"&&typeof o[n]=="function"){i=o[n].apply(o,r);if(i!==t)return!1}}),i!==t?i:this};var h=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},p=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=u;var d=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,v.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length===0)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(n,i,s){function w(){var e=this.slice(0,a[c].length),t=a[c].slice(0,e.length);return e===t}if(!n)return t;if(n instanceof Date)return n;typeof i=="string"&&(i=v.parseFormat(i));var o=/([\-+]\d+)([dmwy])/,a=n.match(/([\-+]\d+)([dmwy])/g),f,l,c;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(n)){n=new Date;for(c=0;c<a.length;c++){f=o.exec(a[c]),l=parseInt(f[1]);switch(f[2]){case"d":n.setUTCDate(n.getUTCDate()+l);break;case"m":n=u.prototype.moveMonth.call(u.prototype,n,l);break;case"w":n.setUTCDate(n.getUTCDate()+l*7);break;case"y":n=u.prototype.moveYear.call(u.prototype,n,l)}}return r(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}a=n&&n.match(this.nonpunctuation)||[],n=new Date;var h={},p=["yyyy","yy","M","MM","m","mm","d","dd"],m={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;t-=1;while(t<0)t+=12;t%=12,e.setUTCMonth(t);while(e.getUTCMonth()!==t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},g,y;m.M=m.MM=m.mm=m.m,m.dd=m.d,n=r(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var b=i.parts.slice();a.length!==b.length&&(b=e(b).filter(function(t,n){return e.inArray(n,p)!==-1}).toArray());if(a.length===b.length){var E;for(c=0,E=b.length;c<E;c++){g=parseInt(a[c],10),f=b[c];if(isNaN(g))switch(f){case"MM":y=e(d[s].months).filter(w),g=e.inArray(y[0],d[s].months)+1;break;case"M":y=e(d[s].monthsShort).filter(w),g=e.inArray(y[0],d[s].monthsShort)+1}h[f]=g}var S,x;for(c=0;c<p.length;c++)x=p[c],x in h&&!isNaN(h[x])&&(S=new Date(n),m[x](S,h[x]),isNaN(S)||(n=S))}return n},formatDate:function(t,n,r){if(!t)return"";typeof n=="string"&&(n=v.parseFormat(n));var i={d:t.getUTCDate(),D:d[r].daysShort[t.getUTCDay()],DD:d[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:d[r].monthsShort[t.getUTCMonth()],MM:d[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m,t=[];var s=e.extend([],n.separators);for(var o=0,u=n.parts.length;o<=u;o++)s.length&&t.push(s.shift()),t.push(i[n.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table>"+"</div>"+"</div>",e.fn.datepicker.DPGlobal=v,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=c,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);if(n.data("datepicker"))return;t.preventDefault(),n.datepicker("show")}),e(function(){e('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),define("third-party/bootstrap-datepicker/js/bootstrap-datepicker",function(){}),!function(e){var t="[data-toggle=fancyfile]",n=function(t,n){var r=e(t);this.options=e.extend({},e.fn.fancyfile.defaults,n),this.makeFancy(r)};n.prototype={constructor:n,makeFancy:function(t){var r=e(this.options.container),i=t.clone(!0),s=i.attr("class"),o=e(this.options.fakeButton),u=e(this.options.fakeInput),f=!1;s&&s.split(" ").forEach(function(e){/input|span/i.test(e)&&r.find("div").addClass(e),/primary|info|success|warning|danger|inverse/.test(e)&&(f=!0,o.addClass(e))});var l=t.attr("data-text");l&&(this.options.text="false"===l?"":l);var h=t.attr("data-icon");h&&(this.options.icon="false"===h?"":'<i class="'+h+'"></i>');var p=t.attr("data-style");p&&(f="false"===p?!1:!0,this.options.style="false"===p?"":p);var d=this.options.icon?this.options.icon+" ":"";o.html(d+this.options.text),(f||/primary|info|success|warning|danger|inverse/.test(this.options.style))&&o.find("i").addClass("icon-white"),""!==this.options.style&&o.addClass(this.options.style);var v=t.attr("data-placeholder");v&&(this.options.placeholder="false"===v?"":v),u.attr("placeholder",this.options.placeholder),r.insertBefore(t),i.attr("type","file"),r.append(i),r.find("div").append(u).append(o);var m=r.find("div").width();i.width(m),t.remove(),u.width(m-o.width()-41).height(20),o.height(20),i.hover(function(){e(this).parent().find(".fake-input").addClass("active"),e(this).parent().find(".btn").addClass("active")},function(){e(this).parent().find(".fake-input").removeClass("active"),e(this).parent().find(".btn").removeClass("active")}),i.on("change.fancyfile.data-api",n.prototype.change)},change:function(){var t=this.files[0],n=t.name;e(this).parent().find(".fake-input").val(n)}};var r=e.fn.fancyfile;e.fn.fancyfile=function(t){return this.each(function(){var r=e(this),i=r.data("fancyfile");i||r.data("fancyfile",i=new n(this,t)),"string"==typeof t&&i[t].call(r)})},e.fn.fancyfile.defaults={container:'<div class="fancy-file"><div class="fake-file"></div></div>',fakeInput:'<input class="fake-input form-control" type="text" />',fakeButton:'<button class="btn"></button>',text:"Select File",icon:'<i class="icon-file glyphicon glyphicon-file"></i>',style:"",placeholder:"Select File…"},e.fn.fancyfile.Constructor=n,e.fn.fancyfile.noConflict=function(){return e.fn.fancyfile=r,this},e(window).on("load",function(){e(t).each(function(){e(this).fancyfile()})})}(window.jQuery),define("third-party/bs-fancyfile/js/bootstrap-fancyfile.min",function(){}),function(){if(!window.CKEDITOR||!window.CKEDITOR.dom)window.CKEDITOR||(window.CKEDITOR=function(){var e={timestamp:"E3O8",version:"4.3.5",revision:"61fd4ff",rnd:Math.floor(900*Math.random())+100,_:{pending:[]},status:"unloaded",basePath:function(){var e=window.CKEDITOR_BASEPATH||"";if(!e)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var r=t[n].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(r){e=r[1];break}}-1==e.indexOf(":/")&&"//"!=e.slice(0,2)&&(e=0===e.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+e:location.href.match(/^[^\?]*\/(?:)/)[0]+e);if(!e)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return e}(),getUrl:function(e){return-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"&":"?")+"t="+this.timestamp),e},domReady:function(){function e(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",e,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t())}catch(n){}}function t(){for(var e;e=n.shift();)e()}var n=[];return function(t){n.push(t),"complete"===document.readyState&&setTimeout(e,1);if(1==n.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e),t=!1;try{t=!window.frameElement}catch(r){}if(document.documentElement.doScroll&&t){var i=function(){try{document.documentElement.doScroll("left")}catch(t){setTimeout(i,1);return}e()};i()}}}}()},t=window.CKEDITOR_GETURL;if(t){var n=e.getUrl;e.getUrl=function(r){return t.call(e,r)||n.call(e,r)}}return e}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var t=CKEDITOR.event.prototype,n;for(n in t)e[n]==void 0&&(e[n]=t[n])},CKEDITOR.event.prototype=function(){function e(e){var r=t(this);return r[e]||(r[e]=new n(e))}var t=function(e){return e=e.getPrivate&&e.getPrivate()||e._||(e._={}),e.events||(e.events={})},n=function(e){this.name=e,this.listeners=[]};return n.prototype={getListenerIndex:function(e){for(var t=0,n=this.listeners;t<n.length;t++)if(n[t].fn==e)return t;return-1}},{define:function(t,n){var r=e.call(this,t);CKEDITOR.tools.extend(r,n,!0)},on:function(t,n,r,i,s){function o(e,s,o,a){return e={name:t,sender:this,editor:e,data:s,listenerData:i,stop:o,cancel:a,removeListener:u},n.call(r,e)===!1?!1:e.data}function u(){f.removeListener(t,n)}var a=e.call(this,t);if(a.getListenerIndex(n)<0){a=a.listeners,r||(r=this),isNaN(s)&&(s=10);var f=this;o.fn=n,o.priority=s;for(var l=a.length-1;l>=0;l--)if(a[l].priority<=s)return a.splice(l+1,0,o),{removeListener:u};a.unshift(o)}return{removeListener:u}},once:function(){var e=arguments[1];return arguments[1]=function(t){return t.removeListener(),e.apply(this,arguments)},this.on.apply(this,arguments)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,e},fire:function(){var e=0,n=function(){e=1},r=0,i=function(){r=1};return function(s,o,u){var f=t(this)[s],s=e,l=r;e=r=0;if(f){var h=f.listeners;if(h.length)for(var h=h.slice(0),p,v=0;v<h.length;v++){if(f.errorProof)try{p=h[v].call(this,u,o,n,i)}catch(m){}else p=h[v].call(this,u,o,n,i);p===!1?r=1:typeof p!="undefined"&&(o=p);if(e||r)break}}return o=r?!1:typeof o=="undefined"?!0:o,e=s,r=l,o}}(),fireOnce:function(e,n,r){return n=this.fire(e,n,r),delete t(this)[e],n},removeListener:function(e,n){var r=t(this)[e];if(r){var i=r.getListenerIndex(n);i>=0&&r.listeners.splice(i,1)}},removeAllListeners:function(){var e=t(this),n;for(n in e)delete e[n]},hasListeners:function(e){return(e=t(this)[e])&&e.listeners.length>0}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,n={ie:e.indexOf("trident/")>-1,opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,air:e.indexOf(" adobeair/")>-1,mac:e.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"&&(!document.documentMode||document.documentMode<10),mobile:e.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!="["+t+"]"},secure:location.protocol=="https:"};n.gecko=navigator.product=="Gecko"&&!n.webkit&&!n.opera&&!n.ie,n.webkit&&(e.indexOf("chrome")>-1?n.chrome=!0:n.safari=!0);var r=0;n.ie&&(r=n.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,n.ie9Compat=r==9,n.ie8Compat=r==8,n.ie7Compat=r==7,n.ie6Compat=r<7||n.quirks);if(n.gecko){var i=e.match(/rv:([\d\.]+)/);i&&(i=i[1].split("."),r=i[0]*1e4+(i[1]||0)*100+(i[2]||0)*1)}return n.opera&&(r=parseFloat(t.version())),n.air&&(r=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(r=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=r,n.isCompatible=n.iOS&&r>=534||!n.mobile&&(n.ie&&r>6||n.gecko&&r>=10801||n.opera&&r>=9.5||n.air&&r>=1||n.webkit&&r>=522||!1),n.hidpi=window.devicePixelRatio>=2,n.needsBrFiller=n.gecko||n.webkit||n.ie&&r>10,n.needsNbspFiller=n.ie&&r<11,n.cssClass="cke_browser_"+(n.ie?"ie":n.gecko?"gecko":n.opera?"opera":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass=n.cssClass+" cke_browser_quirks"),n.ie&&(n.cssClass=n.cssClass+(" cke_browser_ie"+(n.quirks||n.version<7?"6":n.version)),n.quirks&&(n.cssClass=n.cssClass+" cke_browser_iequirks")),n.gecko&&(r<10900?n.cssClass=n.cssClass+" cke_browser_gecko18":r<=11e3&&(n.cssClass=n.cssClass+" cke_browser_gecko19")),n.air&&(n.cssClass=n.cssClass+" cke_browser_air"),n.iOS&&(n.cssClass=n.cssClass+" cke_browser_ios"),n.hidpi&&(n.cssClass=n.cssClass+" cke_hidpi"),n}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if(CKEDITOR.status!="basic_ready")CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},function(){CKEDITOR.domReady(function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():t&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},t*1e3))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.dom={},function(){var e=[],t=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.opera?"-o-":CKEDITOR.env.ie?"-ms-":"";CKEDITOR.on("reset",function(){e=[]}),CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var n=0;n<e.length;n++)t[n]=CKEDITOR.tools.clone(e[n]);return t}if(e===null||typeof e!="object"||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date||e instanceof RegExp)return e;t=new e.constructor;for(n in e)t[n]=CKEDITOR.tools.clone(e[n]);return t},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t=arguments.length,n,r;typeof (n=arguments[t-1])=="boolean"?t--:typeof (n=arguments[t-2])=="boolean"&&(r=arguments[t-1],t-=2);for(var i=1;i<t;i++){var s=arguments[i],o;for(o in s)if(n===!0||e[o]==void 0)if(!r||o in r)e[o]=s[o]}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},copy:function(e){var t={},n;for(n in e)t[n]=e[n];return t},isArray:function(e){return Object.prototype.toString.call(e)=="[object Array]"},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(e,n,r){return r?t+e+":"+n+";"+e+":"+n:(r={},r[e]=n,r[t+e]=n,r)},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t=typeof e.cssFloat!="undefined"?"cssFloat":typeof e.styleFloat!="undefined"?"styleFloat":"float";return function(e){return e=="float"?t:e.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}}(),buildStyleHtml:function(e){for(var e=[].concat(e),t,n=[],r=0;r<e.length;r++)if(t=e[r])/@import|[{}]/.test(t)?n.push("<style>"+t+"</style>"):n.push('<link type="text/css" rel=stylesheet href="'+t+'">');return n.join("")},htmlEncode:function(e){return(""+e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},htmlEncodeAttr:function(e){return e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlDecodeAttr:function(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(e,t){var n=t(e);return n.prototype=e.prototype,n},setTimeout:function(e,t,n,r,i){return i||(i=window),n||(n=i),i.setTimeout(function(){r?e.apply(n,[].concat(r)):e.apply(n)},t||0)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,"")}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,"")}}(),indexOf:function(e,t){if(typeof t=="function"){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return n}else{if(e.indexOf)return e.indexOf(t);n=0;for(r=e.length;n<r;n++)if(e[n]===t)return n}return-1},search:function(e,t){var n=CKEDITOR.tools.indexOf(e,t);return n>=0?e[n]:null},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(e){var t=e.$,n=e.base,r=e.privates||e._,i=e.proto,e=e.statics;!t&&(t=function(){n&&this.base.apply(this,arguments)});if(r)var s=t,t=function(){var e=this._||(this._={}),t;for(t in r){var n=r[t];e[t]=typeof n=="function"?CKEDITOR.tools.bind(n,this):n}s.apply(this,arguments)};return n&&(t.prototype=this.prototypedCopy(n.prototype),t.prototype.constructor=t,t.base=n,t.baseProto=n.prototype,t.prototype.base=function(){this.base=n.prototype.base,n.apply(this,arguments),this.base=arguments.callee}),i&&this.extend(t.prototype,i,!0),e&&this.extend(t,e,!0),t},addFunction:function(t,n){return e.push(function(){return t.apply(n||this,arguments)})-1},removeFunction:function(t){e[t]=null},callFunction:function(t){var n=e[t];return n&&n.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e=/^-?\d+\.?\d*px$/,t;return function(n){return t=CKEDITOR.tools.trim(n+"")+"px",e.test(t)?t:n||""}}(),convertToPx:function(){var e;return function(t){return e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),/%$/.test(t)?t:(e.setStyle("width",t),e.$.clientWidth)}}(),repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var e,t=0,n=arguments.length;t<n;t++){var r=arguments[t];try{e=r();break}catch(i){}}return e},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(e){return function(){var t=arguments,n=this;window.setTimeout(function(){e.apply(n,t)},0)}},normalizeCssText:function(e,t){var n=[],r,i=CKEDITOR.tools.parseCssText(e,!0,t);for(r in i)n.push(r+":"+i[r]);return n.sort(),n.length?n.join(";")+";":""},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(e,t,n,r){e=[t,n,r];for(t=0;t<3;t++)e[t]=("0"+parseInt(e[t],10).toString(16)).slice(-2);return"#"+e.join("")})},parseCssText:function(e,t,n){var r={};return n&&(n=new CKEDITOR.dom.element("span"),n.setAttribute("style",e),e=CKEDITOR.tools.convertRgbToHex(n.getAttribute("style")||"")),!e||e==";"?r:(e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,n,i){t&&(n=n.toLowerCase(),n=="font-family"&&(i=i.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),i=CKEDITOR.tools.trim(i)),r[n]=i}),r)},writeCssText:function(e,t){var n,r=[];for(n in e)r.push(n+":"+e[n]);return t&&r.sort(),r.join("; ")},objectCompare:function(e,t,n){var r;if(!e&&!t)return!0;if(!e||!t)return!1;for(r in e)if(e[r]!=t[r])return!1;if(!n)for(r in t)if(e[r]!=t[r])return!1;return!0},objectKeys:function(e){var t=[],n;for(n in e)t.push(n);return t},convertArrayToObject:function(e,t){var n={};arguments.length==1&&(t=!0);for(var r=0,i=e.length;r<i;++r)n[e[r]]=t;return n},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){e=e?e.replace(/.+?(?:\.|$)/,""):document.domain;if(!e)break;document.domain=e}return!!e},eventsBuffer:function(e,t){function n(){i=(new Date).getTime(),r=!1,t()}var r,i=0;return{input:function(){if(!r){var t=(new Date).getTime()-i;t<e?r=setTimeout(n,e-t):n()}},reset:function(){r&&clearTimeout(r),r=i=0}}},enableHtml5Elements:function(e,t){for(var n=["abbr","article","aside","audio","bdi","canvas","data","datalist","details","figcaption","figure","footer","header","hgroup","mark","meter","nav","output","progress","section","summary","time","video"],r=n.length,i;r--;)i=e.createElement(n[r]),t&&e.appendChild(i)}}}(),CKEDITOR.dtd=function(){var e=CKEDITOR.tools.extend,t=function(e,t){for(var n=CKEDITOR.tools.clone(e),r=1;r<arguments.length;r++){var t=arguments[r],i;for(i in t)delete n[i]}return n},n={},r={},i={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},s={command:1,link:1,meta:1,noscript:1,script:1,style:1},o={},u={"#":1},a={center:1,dir:1,noframes:1};return e(n,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},u,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),e(r,i,n,a),t={a:t(n,{a:1,button:1}),abbr:n,address:r,area:o,article:e({style:1},r),aside:e({style:1},r),audio:e({source:1,track:1},r),b:n,base:o,bdi:n,bdo:n,blockquote:r,body:r,br:o,button:t(n,{a:1,button:1}),canvas:n,caption:r,cite:n,code:n,col:o,colgroup:{col:1},command:o,datalist:e({option:1},n),dd:r,del:n,details:e({summary:1},r),dfn:n,div:e({style:1},r),dl:{dt:1,dd:1},dt:r,em:n,embed:o,fieldset:e({legend:1},r),figcaption:r,figure:e({figcaption:1},r),footer:r,form:r,h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,head:e({title:1,base:1},s),header:r,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:o,html:e({head:1,body:1},r,s),i:n,iframe:u,img:o,input:o,ins:n,kbd:n,keygen:o,label:n,legend:n,li:r,link:o,map:r,mark:n,menu:e({li:1},r),meta:o,meter:t(n,{meter:1}),nav:r,noscript:e({link:1,meta:1,style:1},n),object:e({param:1},n),ol:{li:1},optgroup:{option:1},option:u,output:n,p:n,param:o,pre:n,progress:t(n,{progress:1}),q:n,rp:n,rt:n,ruby:e({rp:1,rt:1},n),s:n,samp:n,script:u,section:e({style:1},r),select:{optgroup:1,option:1},small:n,source:o,span:n,strong:n,style:u,sub:n,summary:n,sup:n,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:r,textarea:u,tfoot:{tr:1},th:r,thead:{tr:1},time:t(n,{time:1}),title:u,tr:{th:1,td:1},track:o,u:n,ul:{li:1},"var":n,video:e({source:1,track:1},r),wbr:o,acronym:n,applet:e({param:1},r),basefont:o,big:n,center:r,dialog:o,dir:{li:1},font:n,isindex:o,noframes:r,strike:n,tt:n},e(t,{$block:e({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},i,a),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:n,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:e({body:1,head:1,html:1},t.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),t}(),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();if(this.$.ctrlKey||this.$.metaKey)e+=CKEDITOR.CTRL;return this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=function(){var e=function(e,t){return function(n){typeof CKEDITOR!="undefined"&&e.fire(t,new CKEDITOR.dom.event(n))}};return{getPrivate:function(){var e;return(e=this.getCustomData("_"))||this.setCustomData("_",e={}),e},on:function(t){var n=this.getCustomData("_cke_nativeListeners");return n||(n={},this.setCustomData("_cke_nativeListeners",n)),n[t]||(n=n[t]=e(this,t),this.$.addEventListener?this.$.addEventListener(t,n,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,n)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(e)){var t=this.getCustomData("_cke_nativeListeners"),n=t&&t[e];n&&(this.$.removeEventListener?this.$.removeEventListener(e,n,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,n),delete t[e])}},removeAllListeners:function(){var e=this.getCustomData("_cke_nativeListeners"),t;for(t in e){var n=e[t];this.$.detachEvent?this.$.detachEvent("on"+t,n):this.$.removeEventListener&&this.$.removeEventListener(t,n,!1),delete e[t]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(e){var t={};CKEDITOR.on("reset",function(){t={}}),e.equals=function(e){try{return e&&e.$===this.$}catch(t){return!1}},e.setCustomData=function(e,n){var r=this.getUniqueId();return(t[r]||(t[r]={}))[e]=n,this},e.getCustomData=function(e){var n=this.$["data-cke-expando"];return(n=n&&t[n])&&e in n?n[e]:null},e.removeCustomData=function(e){var n=this.$["data-cke-expando"],n=n&&t[n],r,i;return n&&(r=n[e],i=e in n,delete n[e]),i?r:null},e.clearCustomData=function(){this.removeAllListeners();var e=this.$["data-cke-expando"];e&&delete t[e]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){return e.append(this,t),e},clone:function(e,t){var n=this.$.cloneNode(e),r=function(n){n["data-cke-expando"]&&(n["data-cke-expando"]=!1);if(n.nodeType==CKEDITOR.NODE_ELEMENT){t||n.removeAttribute("id",!1);if(e)for(var n=n.childNodes,i=0;i<n.length;i++)r(n[i])}};return r(n),new CKEDITOR.dom.node(n)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var t=[],n=this.getDocument().$.documentElement,r=this.$;r&&r!=n;){var i=r.parentNode;i&&t.unshift(this.getIndex.call({$:r},e)),r=i}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){var t=this.$,n=-1,r;if(!this.$.parentNode)return n;do if(!e||t==this.$||t.nodeType!=CKEDITOR.NODE_TEXT||!r&&!!t.nodeValue)n++,r=t.nodeType==CKEDITOR.NODE_TEXT;while(t=t.previousSibling);return n},getNextSourceNode:function(e,t,n){if(n&&!n.call)var r=n,n=function(e){return!e.equals(r)};var e=!e&&this.getFirst&&this.getFirst(),i;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&n(this,!0)===!1)return null;e=this.getNext()}for(;!e&&(i=(i||this).getParent());){if(n&&n(i,!0)===!1)return null;e=i.getNext()}return!e||n&&n(e)===!1?null:t&&t!=e.type?e.getNextSourceNode(!1,t,n):e},getPreviousSourceNode:function(e,t,n){if(n&&!n.call)var r=n,n=function(e){return!e.equals(r)};var e=!e&&this.getLast&&this.getLast(),i;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&n(this,!0)===!1)return null;e=this.getPrevious()}for(;!e&&(i=(i||this).getParent());){if(n&&n(i,!0)===!1)return null;e=i.getPrevious()}return!e||n&&n(e)===!1?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,n):e},getPrevious:function(e){var t=this.$,n;do n=(t=t.previousSibling)&&t.nodeType!=10&&new CKEDITOR.dom.node(t);while(n&&e&&!e(n));return n},getNext:function(e){var t=this.$,n;do n=(t=t.nextSibling)&&new CKEDITOR.dom.node(t);while(n&&e&&!e(n));return n},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){var t=this,n=[];do n[e?"push":"unshift"](t);while(t=t.getParent());return n},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do if(t.contains(e))return t;while(t=t.getParent());return null},getPosition:function(e){var t=this.$,n=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(n);if(t==n)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(n))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(n.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return t.sourceIndex<0||n.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<n.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}for(var t=this.getAddress(),e=e.getAddress(),n=Math.min(t.length,e.length),r=0;r<=n-1;r++)if(t[r]!=e[r]){if(r<n)return t[r]<e[r]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var n=this.$,r;t||(n=n.parentNode);for(;n;){if(n.nodeName&&(r=n.nodeName.toLowerCase(),typeof e=="string"?r==e:r in e))return new CKEDITOR.dom.node(n);try{n=n.parentNode}catch(i){n=null}}return null},hasAscendant:function(e,t){var n=this.$;t||(n=n.parentNode);for(;n;){if(n.nodeName&&n.nodeName.toLowerCase()==e)return!0;n=n.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,n=t.parentNode;if(n){if(e)for(;e=t.firstChild;)n.insertBefore(t.removeChild(e),t);n.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(n-t.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&e.type==1&&e.nodeName.toLowerCase()=="br"&&e.parentNode.removeChild(e)},isReadOnly:function(){var e=this;this.type!=CKEDITOR.NODE_ELEMENT&&(e=this.getParent());if(e&&typeof e.$.isContentEditable!="undefined")return!e.$.isContentEditable&&!e.data("cke-editable");for(;e;){if(e.data("cke-editable"))break;if(e.getAttribute("contentEditable")=="false")return!0;if(e.getAttribute("contentEditable")=="true")break;e=e.getParent()}return!e}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t=e.compatMode=="CSS1Compat";return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:(e=e.document,{x:e.documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0})},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=e}else{var n=new CKEDITOR.dom.element("style",this);n.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(n)}return t||n.$.sheet},createElement:function(e,t){var n=new CKEDITOR.dom.element(e,this);return t&&(t.attributes&&n.setAttributes(t.attributes),t.styles&&n.setStyles(t.styles)),n},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){return new CKEDITOR.dom.element(this.$.activeElement)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var n=this.$.documentElement,r=0;n&&r<e.length;r++){var i=e[r];if(t)for(var s=-1,o=0;o<n.childNodes.length;o++){var u=n.childNodes[o];if(t!==!0||u.nodeType!=3||!u.previousSibling||u.previousSibling.nodeType!=3){s++;if(s==i){n=u;break}}}else n=n.childNodes[i]}return n?new CKEDITOR.dom.node(n):null},getElementsByTag:function(e,t){return(!CKEDITOR.env.ie||document.documentMode>8)&&t&&(e=t+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e=e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return e<0||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null}},CKEDITOR.dom.element=function(e,t){typeof e=="string"&&(e=(t?t.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e=typeof e=="string"?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,t){var n=new CKEDITOR.dom.element("div",t);return n.setHtml(e),n.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,t,n,r){var i=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),s=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[i]=t,s[n]=1,t.setCustomData(n,r)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)},CKEDITOR.dom.element.clearMarkers=function(e,t,n){var r=t.getCustomData("list_marker_names"),i=t.getCustomData("list_marker_id"),s;for(s in r)t.removeCustomData(s);t.removeCustomData("list_marker_names"),n&&(t.removeCustomData("list_marker_id"),delete e[i])},function(){function e(e){var t=!0;return e.$.id||(e.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1),function(){t||e.removeAttribute("id")}}function t(e,t){return"#"+e.$.id+" "+t.split(/,\s*/).join(", #"+e.$.id+" ")}function n(e){for(var t=0,n=0,i=r[e].length;n<i;n++)t+=parseInt(this.getComputedStyle(r[e][n])||0,10)||0;return t}CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(e){var t=this.$.className;t&&(RegExp("(?:^|\\s)"+e+"(?:\\s|$)","").test(t)||(t+=" "+e)),this.$.className=t||e},removeClass:function(e){var t=this.getAttribute("class");return t&&(e=RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","i"),e.test(t)&&((t=t.replace(e,"").replace(/^\s+/,""))?this.setAttribute("class",t):this.removeAttribute("class"))),this},hasClass:function(e){return RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(e,t){return typeof e=="string"&&(e=this.getDocument().createElement(e)),t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$),e},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(e),t.moveChildren(this)}else this.setHtml(e)},appendText:function(e){this.$.text!=void 0?this.$.text=this.$.text+e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller||CKEDITOR.env.opera){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();if(!e||!e.is||!e.is("br"))e=CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br"),CKEDITOR.env.gecko&&e.setAttribute("type","_moz"),this.append(e)}},breakParent:function(e){var t=new CKEDITOR.dom.range(this.getDocument());t.setStartAfter(this),t.setEndAfter(e),e=t.extractContents(),t.insertNode(this.remove()),e.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)}:function(e){return!!(this.$.compareDocumentPosition(e.$)&16)},focus:function(){function e(){try{this.$.focus()}catch(e){}}return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,""):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},getClientRect:function(){var e=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!e.width&&(e.width=e.right-e.left),!e.height&&(e.height=e.bottom-e.top),e},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(e){try{var t=this.$;if(this.getParent())return t.innerHTML=e;var n=this.getDocument()._getHtml5ShivFrag();return n.appendChild(t),t.innerHTML=e,n.removeChild(t),e}catch(r){this.$.innerHTML="",t=new CKEDITOR.dom.element("body",this.getDocument()),t.$.innerHTML=e;for(t=t.getChildren();t.count();)this.append(t.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(e){return CKEDITOR.dom.element.prototype.setText=this.$.innerText!=void 0?function(e){return this.$.innerText=e}:function(e){return this.$.textContent=e},this.setText(e)},getAttribute:function(){var e=function(e){return this.$.getAttribute(e,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(e){switch(e){case"class":e="className";break;case"http-equiv":e="httpEquiv";break;case"name":return this.$.name;case"tabindex":return e=this.$.getAttribute(e,2),e!==0&&this.$.tabIndex===0&&(e=null),e;case"checked":return e=this.$.attributes.getNamedItem(e),(e.specified?e.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[e];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(e,2)}:e}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]}:function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):""},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return e},e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var e=this.$.tabIndex;return e===0&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0&&(e=-1),e}:CKEDITOR.env.webkit?function(){var e=this.$.tabIndex;return e==void 0&&(e=parseInt(this.getAttribute("tabindex"),10),isNaN(e)&&(e=-1)),e}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(document.documentMode>8)){var t=this.$.scopeName;t!="HTML"&&(e=t.toLowerCase()+":"+e)}return(this.getName=function(){return e})()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e)),t},getLast:function(e){var t=this.$.lastChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e)),t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(){var e=this.getName();if(typeof arguments[0]=="object")return!!arguments[0][e];for(var t=0;t<arguments.length;t++)if(arguments[t]==e)return!0;return!1},isEditable:function(e){var t=this.getName();return this.isReadOnly()||this.getComputedStyle("display")=="none"||this.getComputedStyle("visibility")=="hidden"||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:e!==!1?(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span,!!e&&!!e["#"]):!0},isIdentical:function(e){var t=this.clone(0,1),e=e.clone(0,1);t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);t=t.getOuterHtml(),e=e.getOuterHtml();if(CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&(n=n.clone(),n.setHtml(t),t=n.getHtml(),n.setHtml(e),e=n.getHtml())}return t==e},isVisible:function(){var e=(this.$.offsetHeight||this.$.offsetWidth)&&this.getComputedStyle("visibility")!="hidden",t,n;return e&&(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&(t=this.getWindow(),!t.equals(CKEDITOR.document.getWindow())&&(n=t.$.frameElement)&&(e=(new CKEDITOR.dom.element(n)).isVisible())),!!e},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var e=this.getChildren(),t=0,n=e.count();t<n;t++){var r=e.getItem(t);if((r.type!=CKEDITOR.NODE_ELEMENT||!r.data("cke-bookmark"))&&(r.type==CKEDITOR.NODE_ELEMENT&&!r.isEmptyInlineRemoveable()||r.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(r.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var n=e[t];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(n.specified)return!0}}return!1}:function(){var e=this.$.attributes,t=e.length,n={"data-cke-expando":1,_moz_dirty:1};return t>0&&(t>2||!n[e[0].nodeName]||t==2&&!n[e[1].nodeName])},hasAttribute:function(){function e(e){return e=this.$.attributes.getNamedItem(e),!!e&&!!e.specified}return CKEDITOR.env.ie&&CKEDITOR.env.version<8?function(t){return t=="name"?!!this.$.name:e.call(this,t)}:e}(),hide:function(){this.setStyle("display","none")},moveChildren:function(e,t){var n=this.$,e=e.$;if(n!=e){var r;if(t)for(;r=n.lastChild;)e.insertBefore(n.removeChild(r),e.firstChild);else for(;r=n.firstChild;)e.appendChild(n.removeChild(r))}},mergeSiblings:function(){function e(e,t,n){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var r=[];t.data("cke-bookmark")||t.isEmptyInlineRemoveable();){r.push(t),t=n?t.getNext():t.getPrevious();if(!t||t.type!=CKEDITOR.NODE_ELEMENT)return}if(e.isIdentical(t)){for(var i=n?e.getLast():e.getFirst();r.length;)r.shift().move(e,!n);t.moveChildren(e,!n),t.remove(),i&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings()}}}return function(t){if(t===!1||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))e(this,this.getNext(),!0),e(this,this.getPrevious())}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var e=function(e,t){return this.$.setAttribute(e,t),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(t,n){return t=="class"?this.$.className=n:t=="style"?this.$.style.cssText=n:t=="tabindex"?this.$.tabIndex=n:t=="checked"?this.$.checked=n:t=="contenteditable"?e.call(this,"contentEditable",n):e.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,n){if(t=="src"&&n.match(/^http:\/\//))try{e.apply(this,arguments)}catch(r){}else e.apply(this,arguments);return this}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){return this.$.value=e,this},removeAttribute:function(){var e=function(e){this.$.removeAttribute(e)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(e){e=="class"?e="className":e=="tabindex"?e="tabIndex":e=="contenteditable"&&(e="contentEditable"),this.$.removeAttribute(e)}:e}(),removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e)e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){var t=this.$.style;if(!!t.removeProperty||e!="border"&&e!="margin"&&e!="padding")t.removeProperty?t.removeProperty(e):t.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute("style");else{var n=["top","left","right","bottom"],r;e=="border"&&(r=["color","style","width"]);for(var t=[],i=0;i<n.length;i++)if(r)for(var s=0;s<r.length;s++)t.push([e,n[i],r[s]].join("-"));else t.push([e,n[i]].join("-"));for(e=0;e<t.length;e++)this.removeStyle(t[e])}},setStyle:function(e,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&CKEDITOR.env.version<9?(e=Math.round(e*100),this.setStyle("filter",e>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie||CKEDITOR.env.opera){this.setAttribute("unselectable","on");for(var e,t=this.getElementsByTag("*"),n=0,r=t.count();n<r;n++)e=t.getItem(n),e.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var e=this;e.getName()!="html";){if(e.getComputedStyle("position")!="static")return e;e=e.getParent()}return null},getDocumentPosition:function(e){var t=0,n=0,r=this.getDocument(),i=r.getBody(),s=r.$.compatMode=="BackCompat";if(document.documentElement.getBoundingClientRect){var o=this.$.getBoundingClientRect(),u=r.$.documentElement,a=u.clientTop||i.$.clientTop||0,f=u.clientLeft||i.$.clientLeft||0,l=!0;CKEDITOR.env.ie&&(l=r.getDocumentElement().contains(this),r=r.getBody().contains(this),l=s&&r||!s&&l),l&&(t=o.left+(!s&&u.scrollLeft||i.$.scrollLeft),t-=f,n=o.top+(!s&&u.scrollTop||i.$.scrollTop),n-=a)}else{i=this;for(r=null;i&&i.getName()!="body"&&i.getName()!="html";){t+=i.$.offsetLeft-i.$.scrollLeft,n+=i.$.offsetTop-i.$.scrollTop,i.equals(this)||(t+=i.$.clientLeft||0,n+=i.$.clientTop||0);for(;r&&!r.equals(i);)t-=r.$.scrollLeft,n-=r.$.scrollTop,r=r.getParent();r=i,i=(o=i.$.offsetParent)?new CKEDITOR.dom.element(o):null}}return e&&(i=this.getWindow(),r=e.getWindow(),!i.equals(r)&&i.$.frameElement&&(e=(new CKEDITOR.dom.element(i.$.frameElement)).getDocumentPosition(e),t+=e.x,n+=e.y)),!document.documentElement.getBoundingClientRect&&CKEDITOR.env.gecko&&!s&&(t+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0),{x:t,y:n}},scrollIntoView:function(e){var t=this.getParent();if(t)do{(t.$.clientWidth&&t.$.clientWidth<t.$.scrollWidth||t.$.clientHeight&&t.$.clientHeight<t.$.scrollHeight)&&!t.is("body")&&this.scrollIntoParent(t,e,1);if(t.is("html")){var n=t.getWindow();try{var r=n.$.frameElement;r&&(t=new CKEDITOR.dom.element(r))}catch(i){}}}while(t=t.getParent())},scrollIntoParent:function(e,t,n){function u(t,n){/body|html/.test(e.getName())?e.getWindow().$.scrollBy(t,n):(e.$.scrollLeft=e.$.scrollLeft+t,e.$.scrollTop=e.$.scrollTop+n)}function a(e,t){var n={x:0,y:0};if(!e.is(l?"body":"html")){var r=e.$.getBoundingClientRect();n.x=r.left,n.y=r.top}return r=e.getWindow(),r.equals(t)||(r=a(CKEDITOR.dom.element.get(r.$.frameElement),t),n.x=n.x+r.x,n.y=n.y+r.y),n}function f(e,t){return parseInt(e.getComputedStyle("margin-"+t)||0,10)||0}var r,i,s,o;!e&&(e=this.getWindow()),s=e.getDocument();var l=s.$.compatMode=="BackCompat";e instanceof CKEDITOR.dom.window&&(e=l?s.getBody():s.getDocumentElement()),s=e.getWindow(),i=a(this,s);var c=a(e,s),h=this.$.offsetHeight;r=this.$.offsetWidth;var p=e.$.clientHeight,d=e.$.clientWidth;s=i.x-f(this,"left")-c.x||0,o=i.y-f(this,"top")-c.y||0,r=i.x+r+f(this,"right")-(c.x+d)||0,i=i.y+h+f(this,"bottom")-(c.y+p)||0,(o<0||i>0)&&u(0,t===!0?o:t===!1?i:o<0?o:i),n&&(s<0||r>0)&&u(s<0?s:r,0)},setState:function(e,t,n){t=t||"cke";switch(e){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on"),this.removeClass(t+"_off"),this.removeClass(t+"_disabled"),n&&this.setAttribute("aria-pressed",!0),n&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled"),this.removeClass(t+"_off"),this.removeClass(t+"_on"),n&&this.setAttribute("aria-disabled",!0),n&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),n&&this.removeAttribute("aria-pressed"),n&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(e,t){for(var n=this.$.attributes,t=t||{},r=0;r<n.length;r++){var i=n[r],s=i.nodeName.toLowerCase(),o;if(!(s in t))if(s=="checked"&&(o=this.getAttribute(s)))e.setAttribute(s,o);else if(i.specified||CKEDITOR.env.ie&&i.nodeValue&&s=="value")o=this.getAttribute(s),o===null&&(o=i.nodeValue),e.setAttribute(s,o)}this.$.style.cssText!==""&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument(),e=new CKEDITOR.dom.element(e,t);this.copyAttributes(e),this.moveChildren(e),this.getParent()&&this.$.parentNode.replaceChild(e.$,this.$),e.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=e.$,delete this.getName}},getChild:function(){function e(e,t){var n=e.childNodes;if(t>=0&&t<n.length)return n[t]}return function(t){var n=this.$;if(t.slice)for(;t.length>0&&n;)n=e(n,t.shift());else n=e(n,t);return n?new CKEDITOR.dom.node(n):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(e){e.data.getTarget().hasClass("cke_enable_context_menu")||e.data.preventDefault()})},getDirection:function(e){return e?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(e,t){return e="data-"+e,t===void 0?this.getAttribute(e):(t===!1?this.removeAttribute(e):this.setAttribute(e,t),null)},getEditor:function(){var e=CKEDITOR.instances,t,n;for(t in e){n=e[t];if(n.element.equals(this)&&n.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return n}return null},find:function(n){var r=e(this),n=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(t(this,n)));return r(),n},findOne:function(n){var r=e(this),n=this.$.querySelector(t(this,n));return r(),n?new CKEDITOR.dom.element(n):null},forEach:function(e,t,n){if(!n&&(!t||this.type==t))var r=e(this);if(r!==!1)for(var n=this.getChildren(),i=0;i<n.count();i++)r=n.getItem(i),r.type==CKEDITOR.NODE_ELEMENT?r.forEach(e,t):(!t||r.type==t)&&e(r)}});var r={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(e,t,r){typeof t=="number"&&(r&&(!CKEDITOR.env.ie||!CKEDITOR.env.quirks)&&(t-=n.call(this,e)),this.setStyle(e,t+"px"))},CKEDITOR.dom.element.prototype.getSize=function(e,t){var r=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(e)],this.$["client"+CKEDITOR.tools.capitalize(e)])||0;return t&&(r-=n.call(this,e)),r}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){e=e.$,e.parentNode.insertBefore(this.$,e.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function e(e,t){var n=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(n.collapsed)return this.end(),null;n.optimize()}var r,i=n.startContainer;r=n.endContainer;var s=n.startOffset,o=n.endOffset,u,a=this.guard,f=this.type,l=e?"getPreviousSourceNode":"getNextSourceNode";if(!e&&!this._.guardLTR){var c=r.type==CKEDITOR.NODE_ELEMENT?r:r.getParent(),h=r.type==CKEDITOR.NODE_ELEMENT?r.getChild(o):r.getNext();this._.guardLTR=function(e,t){return(!t||!c.equals(e))&&(!h||!e.equals(h))&&(e.type!=CKEDITOR.NODE_ELEMENT||!t||!e.equals(n.root))}}if(e&&!this._.guardRTL){var p=i.type==CKEDITOR.NODE_ELEMENT?i:i.getParent(),d=i.type==CKEDITOR.NODE_ELEMENT?s?i.getChild(s-1):null:i.getPrevious();this._.guardRTL=function(e,t){return(!t||!p.equals(e))&&(!d||!e.equals(d))&&(e.type!=CKEDITOR.NODE_ELEMENT||!t||!e.equals(n.root))}}var v=e?this._.guardRTL:this._.guardLTR;u=a?function(e,t){return v(e,t)===!1?!1:a(e,t)}:v,this.current?r=this.current[l](!1,f,u):(e?r.type==CKEDITOR.NODE_ELEMENT&&(r=o>0?r.getChild(o-1):u(r,!0)===!1?null:r.getPreviousSourceNode(!0,f,u)):(r=i,r.type==CKEDITOR.NODE_ELEMENT&&!(r=r.getChild(s))&&(r=u(i,!0)===!1?null:i.getNextSourceNode(!0,f,u))),r&&u(r)===!1&&(r=null));for(;r&&!this._.end;){this.current=r;if(!this.evaluator||this.evaluator(r)!==!1){if(!t)return r}else if(t&&this.evaluator)return!1;r=r[l](!1,f,u)}return this.end(),this.current=null}function t(t){for(var n,r=null;n=e.call(this,t);)r=n;return r}function n(e){if(f(e))return!1;if(e.type==CKEDITOR.NODE_TEXT)return!0;if(e.type==CKEDITOR.NODE_ELEMENT){if(e.is(CKEDITOR.dtd.$inline)||e.getAttribute("contenteditable")=="false")return!0;var t;if(t=!CKEDITOR.env.needsBrFiller)if(t=e.is(l))e:{t=0;for(var n=e.getChildCount();t<n;++t)if(!f(e.getChild(t))){t=!1;break e}t=!0}if(t)return!0}return!1}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return e.call(this,0,1)!==!1},checkBackward:function(){return e.call(this,1,1)!==!1},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current,this._={}}}});var r={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},i={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return this.getComputedStyle("float")!="none"||this.getComputedStyle("position")in i||!r[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e)):!0},CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT||!t.isBlockBoundary(e)}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(e,t){function n(e){return e&&e.getName&&e.getName()=="span"&&e.data("cke-bookmark")}return function(r){var i,s;return i=r&&r.type!=CKEDITOR.NODE_ELEMENT&&(s=r.getParent())&&n(s),i=e?i:i||n(r),!!(t^i)}},CKEDITOR.dom.walker.whitespaces=function(e){return function(t){var n;return t&&t.type==CKEDITOR.NODE_TEXT&&(n=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&t.getText()=="​"),!!(e^n)}},CKEDITOR.dom.walker.invisible=function(e){var t=CKEDITOR.dom.walker.whitespaces();return function(n){return t(n)?n=1:(n.type==CKEDITOR.NODE_TEXT&&(n=n.getParent()),n=!n.$.offsetHeight),!!(e^n)}},CKEDITOR.dom.walker.nodeType=function(e,t){return function(n){return!!(t^n.type==e)}},CKEDITOR.dom.walker.bogus=function(e){function t(e){return!o(e)&&!u(e)}return function(n){var r=CKEDITOR.env.needsBrFiller?n.is&&n.is("br"):n.getText&&s.test(n.getText());return r&&(r=n.getParent(),n=n.getNext(t),r=r.isBlockBoundary()&&(!n||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())),!!(e^r)}},CKEDITOR.dom.walker.temp=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t=t&&t.hasAttribute("data-cke-temp"),!!(e^t)}};var s=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,o=CKEDITOR.dom.walker.whitespaces(),u=CKEDITOR.dom.walker.bookmark(),a=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(e){return function(t){return t=o(t)||u(t)||a(t),!!(e^t)}};var f=CKEDITOR.dom.walker.ignored(),l=function(e){var t={},n;for(n in e)CKEDITOR.dtd[n]["#"]&&(t[n]=1);return t}(CKEDITOR.dtd.$block);CKEDITOR.dom.walker.editable=function(e){return function(t){return!!(e^n(t))}},CKEDITOR.dom.element.prototype.getBogus=function(){var e=this;do e=e.getPreviousSourceNode();while(u(e)||o(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty));return e&&(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&s.test(e.getText()))?e:!1}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;this.document=t?e:e.getDocument(),this.root=t?e.getBody():e},function(){function e(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!0),r=CKEDITOR.dom.walker.bogus();return function(i){return n(i)||t(i)?!0:r(i)&&!e?e=!0:i.type==CKEDITOR.NODE_TEXT&&(i.hasAscendant("pre")||CKEDITOR.tools.trim(i.getText()).length)||i.type==CKEDITOR.NODE_ELEMENT&&!i.is(s)?!1:!0}}function t(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(1);return function(r){return n(r)||t(r)?!0:!e&&o(r)||r.type==CKEDITOR.NODE_ELEMENT&&r.is(CKEDITOR.dtd.$removeEmpty)}}function n(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"](function(e){return!t&&f(e)&&(t=e),a(e)&&(!o(e)||!e.equals(t))})}}var r=function(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset},i=function(e,t,n,r){e.optimizeBookmark();var i=e.startContainer,s=e.endContainer,o=e.startOffset,u=e.endOffset,a,f;s.type==CKEDITOR.NODE_TEXT?s=s.split(u):s.getChildCount()>0&&(u>=s.getChildCount()?(s=s.append(e.document.createText("")),f=!0):s=s.getChild(u)),i.type==CKEDITOR.NODE_TEXT?(i.split(o),i.equals(s)&&(s=i.getNext())):o?o>=i.getChildCount()?(i=i.append(e.document.createText("")),a=!0):i=i.getChild(o).getPrevious():(i=i.append(e.document.createText(""),1),a=!0);var o=i.getParents(),u=s.getParents(),l,c,h;for(l=0;l<o.length;l++){c=o[l],h=u[l];if(!c.equals(h))break}for(var p=n,d,v,m,g=l;g<o.length;g++){d=o[g],p&&!d.equals(i)&&(v=p.append(d.clone()));for(d=d.getNext();d;){if(d.equals(u[g])||d.equals(s))break;m=d.getNext(),t==2?p.append(d.clone(!0)):(d.remove(),t==1&&p.append(d)),d=m}p&&(p=v)}p=n;for(n=l;n<u.length;n++){d=u[n],t>0&&!d.equals(s)&&(v=p.append(d.clone()));if(!o[n]||d.$.parentNode!=o[n].$.parentNode)for(d=d.getPrevious();d;){if(d.equals(o[n])||d.equals(i))break;m=d.getPrevious(),t==2?p.$.insertBefore(d.$.cloneNode(!0),p.$.firstChild):(d.remove(),t==1&&p.$.insertBefore(d.$,p.$.firstChild)),d=m}p&&(p=v)}t==2?(c=e.startContainer,c.type==CKEDITOR.NODE_TEXT&&(c.$.data=c.$.data+c.$.nextSibling.data,c.$.parentNode.removeChild(c.$.nextSibling)),e=e.endContainer,e.type==CKEDITOR.NODE_TEXT&&e.$.nextSibling&&(e.$.data=e.$.data+e.$.nextSibling.data,e.$.parentNode.removeChild(e.$.nextSibling))):(c&&h&&(i.$.parentNode!=c.$.parentNode||s.$.parentNode!=h.$.parentNode)&&(t=h.getIndex(),a&&h.$.parentNode==i.$.parentNode&&t--,r&&c.type==CKEDITOR.NODE_ELEMENT?(r=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document),r.insertAfter(c),c.mergeSiblings(!1),e.moveToBookmark({startNode:r})):e.setStart(h.getParent(),t)),e.collapse(!0)),a&&i.remove(),f&&s.$.parentNode&&s.remove()},s={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},o=CKEDITOR.dom.walker.bogus(),u=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,a=CKEDITOR.dom.walker.editable(),f=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e.startContainer=this.startContainer,e.startOffset=this.startOffset,e.endContainer=this.endContainer,e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(){var e=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||i(this,2,e),e},deleteContents:function(e){this.collapsed||i(this,0,null,e)},extractContents:function(e){var t=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||i(this,1,t,e),t},createBookmark:function(e){var t,n,r,i,s=this.collapsed;return t=this.document.createElement("span"),t.data("cke-bookmark",1),t.setStyle("display","none"),t.setHtml("&nbsp;"),e&&(r="cke_bm_"+CKEDITOR.tools.getNextNumber(),t.setAttribute("id",r+(s?"C":"S"))),s||(n=t.clone(),n.setHtml("&nbsp;"),e&&n.setAttribute("id",r+"E"),i=this.clone(),i.collapse(),i.insertNode(n)),i=this.clone(),i.collapse(!0),i.insertNode(t),n?(this.setStartAfter(t),this.setEndBefore(n)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),{startNode:e?r+(s?"C":"S"):t,endNode:e?r+"E":n,serializable:e,collapsed:s}},createBookmark2:function(){function e(e){var t=e.container,n=e.offset,r;r=t;var i=n;r=r.type!=CKEDITOR.NODE_ELEMENT||i===0||i==r.getChildCount()?0:r.getChild(i-1).type==CKEDITOR.NODE_TEXT&&r.getChild(i).type==CKEDITOR.NODE_TEXT,r&&(t=t.getChild(n-1),n=t.getLength()),t.type==CKEDITOR.NODE_ELEMENT&&n>1&&(n=t.getChild(n-1).getIndex(!0)+1);if(t.type==CKEDITOR.NODE_TEXT){r=t;for(i=0;(r=r.getPrevious())&&r.type==CKEDITOR.NODE_TEXT;)i+=r.getLength();n+=i}e.container=t,e.offset=n}return function(t){var n=this.collapsed,r={container:this.startContainer,offset:this.startOffset},i={container:this.endContainer,offset:this.endOffset};return t&&(e(r),n||e(i)),{start:r.container.getAddress(t),end:n?null:i.container.getAddress(t),startOffset:r.offset,endOffset:i.offset,normalized:t,collapsed:n,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),n=e.startOffset,r=e.end&&this.document.getByAddress(e.end,e.normalized),e=e.endOffset;this.setStart(t,n),r?this.setEnd(r,e):this.collapse(!0)}else t=(n=e.serializable)?this.document.getById(e.startNode):e.startNode,e=n?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e=this.startContainer,t=this.endContainer,n=this.startOffset,r=this.endOffset,i;if(e.type==CKEDITOR.NODE_ELEMENT){i=e.getChildCount();if(i>n)e=e.getChild(n);else if(i<1)e=e.getPreviousSourceNode();else{for(e=e.$;e.lastChild;)e=e.lastChild;e=new CKEDITOR.dom.node(e),e=e.getNextSourceNode()||e}}if(t.type==CKEDITOR.NODE_ELEMENT){i=t.getChildCount();if(i>r)t=t.getChild(r).getPreviousSourceNode(!0);else if(i<1)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t)}}return e.getPosition(t)&CKEDITOR.POSITION_FOLLOWING&&(e=t),{startNode:e,endNode:t}},getCommonAncestor:function(e,t){var n=this.startContainer,r=this.endContainer,n=n.equals(r)?e&&n.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?n.getChild(this.startOffset):n:n.getCommonAncestor(r);return t&&!n.is?n.getParent():n},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),e=this.endContainer,t=this.endOffset,e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var n=this.startContainer,r=this.startOffset,i=this.collapsed;if((!e||i)&&n&&n.type==CKEDITOR.NODE_TEXT){if(r)if(r>=n.getLength())r=n.getIndex()+1,n=n.getParent();else{var s=n.split(r),r=n.getIndex()+1,n=n.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(s,this.endOffset-this.startOffset):n.equals(this.endContainer)&&(this.endOffset=this.endOffset+1)}else r=n.getIndex(),n=n.getParent();this.setStart(n,r);if(i){this.collapse(!0);return}}n=this.endContainer,r=this.endOffset,!t&&!i&&n&&n.type==CKEDITOR.NODE_TEXT&&(r?(r>=n.getLength()||n.split(r),r=n.getIndex()+1):r=n.getIndex(),n=n.getParent(),this.setEnd(n,r))},enlarge:function(e,t){function n(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")?null:e}var r=RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var i=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var s=this.getCommonAncestor(),o=this.root,u,a,f,l,c,h=!1,p,d;p=this.startContainer;var v=this.startOffset;p.type==CKEDITOR.NODE_TEXT?(v&&(p=!CKEDITOR.tools.trim(p.substring(0,v)).length&&p,h=!!p),p&&!(l=p.getPrevious())&&(f=p.getParent())):(v&&(l=p.getChild(v-1)||p.getLast()),l||(f=p));for(f=n(f);f||l;){if(f&&!l){!c&&f.equals(s)&&(c=!0);if(i?f.isBlockBoundary():!o.contains(f))break;if(!h||f.getComputedStyle("display")!="inline")h=!1,c?u=f:this.setStartBefore(f);l=f.getPrevious()}for(;l;){p=!1;if(l.type==CKEDITOR.NODE_COMMENT)l=l.getPrevious();else{if(l.type==CKEDITOR.NODE_TEXT)d=l.getText(),r.test(d)&&(l=null),p=/[\s\ufeff]$/.test(d);else if((l.$.offsetWidth>0||t&&l.is("br"))&&!l.data("cke-bookmark"))if(h&&CKEDITOR.dtd.$removeEmpty[l.getName()]){d=l.getText();if(r.test(d))l=null;else for(var v=l.$.getElementsByTagName("*"),m=0,g;g=v[m++];)if(!CKEDITOR.dtd.$removeEmpty[g.nodeName.toLowerCase()]){l=null;break}l&&(p=!!d.length)}else l=null;p&&(h?c?u=f:f&&this.setStartBefore(f):h=!0);if(l){p=l.getPrevious();if(!f&&!p){f=l,l=null;break}l=p}else f=null}}f&&(f=n(f.getParent()))}p=this.endContainer,v=this.endOffset,f=l=null,c=h=!1;var y=function(e,t){var n=new CKEDITOR.dom.range(o);n.setStart(e,t),n.setEndAt(o,CKEDITOR.POSITION_BEFORE_END);var n=new CKEDITOR.dom.walker(n),i;for(n.guard=function(e){return e.type!=CKEDITOR.NODE_ELEMENT||!e.isBlockBoundary()};i=n.next();){if(i.type!=CKEDITOR.NODE_TEXT)return!1;d=i!=e?i.getText():i.substring(t);if(r.test(d))return!1}return!0};p.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(p.substring(v)).length?h=!0:(h=!p.getLength(),v==p.getLength()?(l=p.getNext())||(f=p.getParent()):y(p,v)&&(f=p.getParent())):(l=p.getChild(v))||(f=p);for(;f||l;){if(f&&!l){!c&&f.equals(s)&&(c=!0);if(i?f.isBlockBoundary():!o.contains(f))break;if(!h||f.getComputedStyle("display")!="inline")h=!1,c?a=f:f&&this.setEndAfter(f);l=f.getNext()}for(;l;){p=!1;if(l.type==CKEDITOR.NODE_TEXT)d=l.getText(),y(l,0)||(l=null),p=/^[\s\ufeff]/.test(d);else if(l.type==CKEDITOR.NODE_ELEMENT){if((l.$.offsetWidth>0||t&&l.is("br"))&&!l.data("cke-bookmark"))if(h&&CKEDITOR.dtd.$removeEmpty[l.getName()]){d=l.getText();if(r.test(d))l=null;else{v=l.$.getElementsByTagName("*");for(m=0;g=v[m++];)if(!CKEDITOR.dtd.$removeEmpty[g.nodeName.toLowerCase()]){l=null;break}}l&&(p=!!d.length)}else l=null}else p=1;p&&h&&(c?a=f:this.setEndAfter(f));if(l){p=l.getNext();if(!f&&!p){f=l,l=null;break}l=p}else f=null}f&&(f=n(f.getParent()))}u&&a&&(s=u.contains(a)?a:u,this.setStartBefore(s),this.setEndAfter(s));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:f=new CKEDITOR.dom.range(this.root),o=this.root,f.setStartAt(o,CKEDITOR.POSITION_AFTER_START),f.setEnd(this.startContainer,this.startOffset),f=new CKEDITOR.dom.walker(f);var b,w,E=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),S=null,x=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&e.getAttribute("contenteditable")=="false")if(S){if(S.equals(e)){S=null;return}}else S=e;else if(S)return;var t=E(e);return t||(b=e),t},i=function(e){var t=x(e);return!t&&e.is&&e.is("br")&&(w=e),t};f.guard=x,f=f.lastBackward(),b=b||o,this.setStartAt(b,!b.is("br")&&(!f&&this.checkStartOfBlock()||f&&b.contains(f))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){f=this.clone(),f=new CKEDITOR.dom.walker(f);var T=CKEDITOR.dom.walker.whitespaces(),N=CKEDITOR.dom.walker.bookmark();f.evaluator=function(e){return!T(e)&&!N(e)};if((f=f.previous())&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("br"))break}f=this.clone(),f.collapse(),f.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),f=new CKEDITOR.dom.walker(f),f.guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?i:x,b=null,f=f.lastForward(),b=b||o,this.setEndAt(b,!f&&this.checkEndOfBlock()||f&&b.contains(f)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),w&&this.setEndAfter(w)}},shrink:function(e,t,n){if(!this.collapsed){var e=e||CKEDITOR.SHRINK_TEXT,r=this.clone(),i=this.startContainer,s=this.endContainer,o=this.startOffset,u=this.endOffset,a=1,f=1;i&&i.type==CKEDITOR.NODE_TEXT&&(o?o>=i.getLength()?r.setStartAfter(i):(r.setStartBefore(i),a=0):r.setStartBefore(i)),s&&s.type==CKEDITOR.NODE_TEXT&&(u?u>=s.getLength()?r.setEndAfter(s):(r.setEndAfter(s),f=0):r.setEndBefore(s));var r=new CKEDITOR.dom.walker(r),l=CKEDITOR.dom.walker.bookmark();r.evaluator=function(t){return t.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var c;return r.guard=function(t,r){return l(t)?!0:e==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||r&&t.equals(c)||n===!1&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable")?!1:(!r&&t.type==CKEDITOR.NODE_ELEMENT&&(c=t),!0)},a&&(i=r[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(i,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),f&&(r.reset(),(r=r[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(r,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!!a||!!f}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,n=t.getChild(this.startOffset);n?e.insertBefore(n):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(e,t){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(t=e.getIndex(),e=e.getParent()),this.startContainer=e,this.startOffset=t,this.endContainer||(this.endContainer=e,this.endOffset=t),r(this)},setEnd:function(e,t){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(t=e.getIndex()+1,e=e.getParent()),this.endContainer=e,this.endOffset=t,this.startContainer||(this.startContainer=e,this.startOffset=t),r(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(e,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setStart(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setStart(e,e.getLength()):this.setStart(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(e)}r(this)},setEndAt:function(e,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setEnd(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setEnd(e,e.getLength()):this.setEnd(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(e)}r(this)},fixBlock:function(e,t){var n=this.createBookmark(),r=this.document.createElement(t);return this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(r),r.trim(),r.appendBogus(),this.insertNode(r),this.moveToBookmark(n),r},splitBlock:function(e){var t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),n=new CKEDITOR.dom.elementPath(this.endContainer,this.root),r=t.block,i=n.block,s=null;return t.blockLimit.equals(n.blockLimit)?(e!="br"&&(r||(r=this.fixBlock(!0,e),i=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),i||(i=this.fixBlock(!1,e))),e=r&&this.checkStartOfBlock(),t=i&&this.checkEndOfBlock(),this.deleteContents(),r&&r.equals(i)&&(t?(s=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(i,CKEDITOR.POSITION_AFTER_END),i=null):e?(s=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),r=null):(i=this.splitElement(r),r.is("ul","ol")||r.appendBogus())),{previousBlock:r,nextBlock:i,wasStartOfBlock:e,wasEndOfBlock:t,elementPath:s}):null},splitElement:function(e){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var t=this.extractContents(),n=e.clone(!1);return t.appendTo(n),n.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),n},removeEmptyBlocksAtEnd:function(){function e(e){return function(r){return t(r)||n(r)||r.type==CKEDITOR.NODE_ELEMENT&&r.isEmptyInlineRemoveable()||e.is("table")&&r.is("caption")?!1:!0}}var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!1);return function(t){for(var n=this.createBookmark(),r=this[t?"endPath":"startPath"](),i=r.block||r.blockLimit,s;i&&!i.equals(r.root)&&!i.getFirst(e(i));)s=i.getParent(),this[t?"setEndAt":"setStartAt"](i,CKEDITOR.POSITION_AFTER_END),i.remove(1),i=s;this.moveToBookmark(n)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,n){var r=n==CKEDITOR.START,i=this.clone();return i.collapse(r),i[r?"setStartAt":"setEndAt"](e,r?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),i=new CKEDITOR.dom.walker(i),i.evaluator=t(r),i[r?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var t=this.startContainer,n=this.startOffset;return CKEDITOR.env.ie&&n&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.ltrim(t.substring(0,n)),u.test(t)&&this.trim(0,1)),this.trim(),t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),n=this.clone(),n.collapse(!0),n.setStartAt(t.block||t.blockLimit,CKEDITOR.POSITION_AFTER_START),t=new CKEDITOR.dom.walker(n),t.evaluator=e(),t.checkBackward()},checkEndOfBlock:function(){var t=this.endContainer,n=this.endOffset;return CKEDITOR.env.ie&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.rtrim(t.substring(n)),u.test(t)&&this.trim(1,0)),this.trim(),t=new CKEDITOR.dom.elementPath(this.endContainer,this.root),n=this.clone(),n.collapse(!1),n.setEndAt(t.block||t.blockLimit,CKEDITOR.POSITION_BEFORE_END),t=new CKEDITOR.dom.walker(n),t.evaluator=e(),t.checkForward()},getPreviousNode:function(e,t,n){var r=this.clone();return r.collapse(1),r.setStartAt(n||this.root,CKEDITOR.POSITION_AFTER_START),n=new CKEDITOR.dom.walker(r),n.evaluator=e,n.guard=t,n.previous()},getNextNode:function(e,t,n){var r=this.clone();return r.collapse(),r.setEndAt(n||this.root,CKEDITOR.POSITION_BEFORE_END),n=new CKEDITOR.dom.walker(r),n.evaluator=e,n.guard=t,n.next()},checkReadOnly:function(){function e(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if(e.getAttribute("contentEditable")=="false"&&!e.data("cke-editable"))return 0;if(e.is("html")||e.getAttribute("contentEditable")=="true"&&(e.contains(t)||e.equals(t)))break}e=e.getParent()}return 1}return function(){var t=this.startContainer,n=this.endContainer;return!e(t,n)||!e(n,t)}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var n=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&u.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),n=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),n=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if(e.getAttribute("contenteditable")=="false"&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var r=e,i=n,s=void 0;r.type==CKEDITOR.NODE_ELEMENT&&r.isEditable(!1)&&(s=r[t?"getLast":"getFirst"](f)),!i&&!s&&(s=r[t?"getPrevious":"getNext"](f)),e=s}return!!n},moveToClosestEditablePosition:function(e,t){var n=new CKEDITOR.dom.range(this.root),r=0,i,s=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];n.moveToPosition(e,s[t?0:1]);if(e.is(CKEDITOR.dtd.$block)){if(i=n[t?"getNextEditableNode":"getPreviousEditableNode"]())r=1,i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$block)&&i.getAttribute("contenteditable")=="false"?(n.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END)):n.moveToPosition(i,s[t?1:0])}else r=1;return r&&this.moveToRange(n),!!r},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){var e=this.clone();e.optimize();if(e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),t=CKEDITOR.dom.walker.bookmark(!1,!0),n=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return n(e)&&t(e)};var r=e.next();return e.reset(),r&&r.equals(e.previous())?r:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:n(),getPreviousEditableNode:n(1),scrollIntoView:function(){var e=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),t,n,r,i=this.clone();i.optimize(),(r=i.startContainer.type==CKEDITOR.NODE_TEXT)?(n=i.startContainer.getText(),t=i.startContainer.split(i.startOffset),e.insertAfter(i.startContainer)):i.insertNode(e),e.scrollIntoView(),r&&(i.startContainer.setText(n),t.remove()),e.remove()}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,"use strict",function(){function e(e){arguments.length<1||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function t(e,t,n){for(e=e.getNextSourceNode(t,null,n);!s(e);)e=e.getNextSourceNode(t,null,n);return e}function n(e){var t=[];return e.forEach(function(e){if(e.getAttribute("contenteditable")=="true")return t.push(e),!1},CKEDITOR.NODE_ELEMENT,!0),t}function r(e,t,i,s){e:{s==void 0&&(s=n(i));for(var o;o=s.shift();)if(o.getDtd().p){s={element:o,remaining:s};break e}s=null}return s?(o=CKEDITOR.filter.instances[s.element.data("cke-filter")])&&!o.check(t)?r(e,t,i,s.remaining):(t=new CKEDITOR.dom.range(s.element),t.selectNodeContents(s.element),t=t.createIterator(),t.enlargeBr=e.enlargeBr,t.enforceRealBlocks=e.enforceRealBlocks,t.activeFilter=t.filter=o,e._.nestedEditable={element:s.element,container:i,remaining:s.remaining,iterator:t},1):0}var i=/^[\r\n\t ]+$/,s=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.dom.walker.whitespaces(!0),u=function(e){return s(e)&&o(e)};e.prototype={getNextParagraph:function(e){var n,o,f,l,c,e=e||"p";if(this._.nestedEditable){if(n=this._.nestedEditable.iterator.getNextParagraph(e))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,n;this.activeFilter=this.filter;if(r(this,e,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(e);this._.nestedEditable=null}if(!this.range.root.getDtd()[e])return null;if(!this._.started){var p=this.range.clone();p.shrink(CKEDITOR.SHRINK_ELEMENT,!0),o=p.endContainer.hasAscendant("pre",!0)||p.startContainer.hasAscendant("pre",!0),p.enlarge(this.forceBrBreak&&!o||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(!p.collapsed){o=new CKEDITOR.dom.walker(p.clone());var d=CKEDITOR.dom.walker.bookmark(!0,!0);o.evaluator=d,this._.nextNode=o.next(),o=new CKEDITOR.dom.walker(p.clone()),o.evaluator=d,o=o.previous(),this._.lastNode=o.getNextSourceNode(!0),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(d=this.range.clone(),d.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),d.checkEndOfBlock()&&(d=new CKEDITOR.dom.elementPath(d.endContainer,d.root),this._.lastNode=(d.block||d.blockLimit).getNextSourceNode(!0)));if(!this._.lastNode||!p.root.contains(this._.lastNode))this._.lastNode=this._.docEndMarker=p.document.createText(""),this._.lastNode.insertAfter(o);p=null}this._.started=1,o=p}d=this._.nextNode,p=this._.lastNode;for(this._.nextNode=null;d;){var v=0,m=d.hasAscendant("pre"),g=d.type!=CKEDITOR.NODE_ELEMENT,y=0;if(g)d.type==CKEDITOR.NODE_TEXT&&i.test(d.getText())&&(g=0);else{var w=d.getName();if(CKEDITOR.dtd.$block[w]&&d.getAttribute("contenteditable")=="false"){n=d,r(this,e,n);break}if(d.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){if(w=="br")g=1;else if(!o&&!d.getChildCount()&&w!="hr"){n=d,f=d.equals(p);break}o&&(o.setEndAt(d,CKEDITOR.POSITION_BEFORE_START),w!="br"&&(this._.nextNode=d)),v=1}else{if(d.getFirst()){o||(o=this.range.clone(),o.setStartAt(d,CKEDITOR.POSITION_BEFORE_START)),d=d.getFirst();continue}g=1}}g&&!o&&(o=this.range.clone(),o.setStartAt(d,CKEDITOR.POSITION_BEFORE_START)),f=(!v||g)&&d.equals(p);if(o&&!v)for(;!d.getNext(u)&&!f;){w=d.getParent();if(w.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){v=1,g=0,f||w.equals(p),o.setEndAt(w,CKEDITOR.POSITION_BEFORE_END);break}d=w,g=1,f=d.equals(p),y=1}g&&o.setEndAt(d,CKEDITOR.POSITION_AFTER_END),d=t(d,y,p);if((f=!d)||v&&o)break}if(!n){if(!o)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;n=new CKEDITOR.dom.elementPath(o.startContainer,o.root),d=n.blockLimit,v={div:1,th:1,td:1},n=n.block;if(!n&&d&&!this.enforceRealBlocks&&v[d.getName()]&&o.checkStartOfBlock()&&o.checkEndOfBlock()&&!d.equals(o.root))n=d;else if(!n||this.enforceRealBlocks&&n.getName()=="li")n=this.range.document.createElement(e),o.extractContents().appendTo(n),n.trim(),o.insertNode(n),l=c=!0;else if(n.getName()!="li"){if(!o.checkStartOfBlock()||!o.checkEndOfBlock())n=n.clone(!1),o.extractContents().appendTo(n),n.trim(),c=o.splitBlock(),l=!c.wasStartOfBlock,c=!c.wasEndOfBlock,o.insertNode(n)}else f||(this._.nextNode=n.equals(p)?null:t(o.getBoundaryNodes().endNode,1,p))}return l&&(l=n.getPrevious())&&l.type==CKEDITOR.NODE_ELEMENT&&(l.getName()=="br"?l.remove():l.getLast()&&l.getLast().$.nodeName.toLowerCase()=="br"&&l.getLast().remove()),c&&(l=n.getLast())&&l.type==CKEDITOR.NODE_ELEMENT&&l.getName()=="br"&&(!CKEDITOR.env.needsBrFiller||l.getPrevious(s)||l.getNext(s))&&l.remove(),this._.nextNode||(this._.nextNode=f||n.equals(p)||!p?null:t(n,1,p)),n}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,t){this.uiItems=[],this.exec=function(n){return this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed()?!1:(this.editorFocus&&e.focus(),this.fire("exec")===!1?!0:t.exec.call(this,e,n)!==!1)},this.refresh=function(e,n){return!this.readOnly&&e.readOnly?!0:this.context&&!n.isContextFor(this.context)?(this.disable(),!0):this.checkAllowed(!0)?(this.startDisabled||this.enable(),this.modes&&!this.modes[e.mode]&&this.disable(),this.fire("refresh",{editor:e,path:n})===!1?!0:t.refresh&&t.refresh.apply(this,arguments)!==!1):(this.disable(),!0)};var n;this.checkAllowed=function(t){return!t&&typeof n=="boolean"?n:n=e.activeFilter.checkFeature(this)},CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(!this.preserveState||typeof this.previousState=="undefined"?CKEDITOR.TRISTATE_OFF:this.previousState)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()?!1:(this.previousState=this.state,this.state=e,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function e(e,n,r,s,o){var u=n.name;if((s||typeof e.elements!="function"||e.elements(u))&&(!e.match||e.match(n))){if(s=!o){e:if(e.nothingRequired)s=!0;else{if(o=e.requiredClasses){u=n.classes;for(s=0;s<o.length;++s)if(CKEDITOR.tools.indexOf(u,o[s])==-1){s=!1;break e}}s=i(n.styles,e.requiredStyles)&&i(n.attributes,e.requiredAttributes)}s=!s}if(!s){e.propertiesOnly||(r.valid=!0),r.allAttributes||(r.allAttributes=t(e.attributes,n.attributes,r.validAttributes)),r.allStyles||(r.allStyles=t(e.styles,n.styles,r.validStyles));if(!r.allClasses){e=e.classes,n=n.classes,s=r.validClasses;if(e)if(e===!0)n=!0;else{for(var o=0,u=n.length,a;o<u;++o)a=n[o],s[a]||(s[a]=e(a));n=!1}else n=!1;r.allClasses=n}}}}function t(e,t,n){if(!e)return!1;if(e===!0)return!0;for(var r in t)n[r]||(n[r]=e(r,t[r]));return!1}function n(e,t){if(!e)return!1;if(e===!0)return e;if(typeof e=="string")return e=S(e),e=="*"?!0:CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return e.length?CKEDITOR.tools.convertArrayToObject(e):!1;var n={},r=0,i;for(i in e)n[i]=e[i],r++;return r?n:!1}function r(t){if(t._.filterFunction)return t._.filterFunction;var n=/^cke:(object|embed|param)$/,r=/^(object|embed|param)$/;return t._.filterFunction=function(i,s,o,u,c,h,p){var d=i.name,m,g=!1;c&&(i.name=d=d.replace(n,"$1"));if(o=o&&o[d]){a(i);for(d=0;d<o.length;++d)v(t,i,o[d]);f(i)}if(s){var d=i.name,o=s.elements[d],y=s.generic,s={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1};if(!o&&!y)return u.push(i),!0;a(i);if(o){d=0;for(m=o.length;d<m;++d)e(o[d],i,s,!0,h)}if(y){d=0;for(m=y.length;d<m;++d)e(y[d],i,s,!1,h)}if(!s.valid)return u.push(i),!0;h=s.validAttributes,d=s.validStyles,o=s.validClasses,m=i.attributes;var y=i.styles,b=m["class"],w=m.style,E,S,x=[],T=[],N=/^data-cke-/,C=!1;delete m.style,delete m["class"];if(!s.allAttributes)for(E in m)h[E]||(N.test(E)?E!=(S=E.replace(/^data-cke-saved-/,""))&&!h[S]&&(delete m[E],C=!0):(delete m[E],C=!0));if(s.allStyles)w&&(m.style=w);else{for(E in y)d[E]?x.push(E+":"+y[E]):C=!0;x.length&&(m.style=x.sort().join("; "))}if(s.allClasses)b&&(m["class"]=b);else{for(E in o)o[E]&&T.push(E);T.length&&(m["class"]=T.sort().join(" ")),b&&T.length<b.split(/\s+/).length&&(C=!0)}C&&(g=!0);if(!p&&!l(i))return u.push(i),!0}return c&&(i.name=i.name.replace(r,"cke:$1")),g}}function i(e,t){if(!t)return!0;for(var n=0;n<t.length;++n)if(!(t[n]in e))return!1;return!0}function s(e){if(!e)return{};for(var e=e.split(/\s*,\s*/).sort(),t={};e.length;)t[e.shift()]=x;return t}function o(e){for(var t,n,r,i,s={},o=1,e=S(e);t=e.match(k);)(n=t[2])?(r=u(n,"styles"),i=u(n,"attrs"),n=u(n,"classes")):r=i=n=null,s["$"+o++]={elements:t[1],classes:n,styles:r,attributes:i},e=e.slice(t[0].length);return s}function u(e,t){var n=e.match(L[t]);return n?S(n[1]):null}function a(e){e.styles||(e.styles=CKEDITOR.tools.parseCssText(e.attributes.style||"",1)),e.classes||(e.classes=e.attributes["class"]?e.attributes["class"].split(/\s+/):[])}function f(e){var t=e.attributes,n;delete t.style,delete t["class"];if(n=CKEDITOR.tools.writeCssText(e.styles,!0))t.style=n;e.classes.length&&(t["class"]=e.classes.sort().join(" "))}function l(e){switch(e.name){case"a":if(!e.children.length&&!e.attributes.name)return!1;break;case"img":if(!e.attributes.src)return!1}return!0}function c(e){return e?e===!0?!0:function(t){return t in e}:!1}function h(){return new CKEDITOR.htmlParser.element("br")}function p(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.name=="br"||w.$block[e.name])}function d(e,t,n){var r=e.name;if(w.$empty[r]||!e.children.length)r=="hr"&&t=="br"?e.replaceWith(h()):(e.parent&&n.push({check:"it",el:e.parent}),e.remove());else if(w.$block[r]||r=="tr")if(t=="br")e.previous&&!p(e.previous)&&(t=h(),t.insertBefore(e)),e.next&&!p(e.next)&&(t=h(),t.insertAfter(e)),e.replaceWithChildren();else{var r=e.children,i;e:{i=w[t];for(var s=0,o=r.length,u;s<o;++s){u=r[s];if(u.type==CKEDITOR.NODE_ELEMENT&&!i[u.name]){i=!1;break e}}i=!0}if(i)e.name=t,e.attributes={},n.push({check:"parent-down",el:e});else{i=e.parent;for(var s=i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||i.name=="body",a,o=r.length;o>0;)u=r[--o],s&&(u.type==CKEDITOR.NODE_TEXT||u.type==CKEDITOR.NODE_ELEMENT&&w.$inline[u.name])?(a||(a=new CKEDITOR.htmlParser.element(t),a.insertAfter(e),n.push({check:"parent-down",el:a})),a.add(u,0)):(a=null,u.insertAfter(e),i.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&u.type==CKEDITOR.NODE_ELEMENT&&!w[i.name][u.name]&&n.push({check:"el-up",el:u}));e.remove()}}else r=="style"?e.remove():(e.parent&&n.push({check:"it",el:e.parent}),e.replaceWithChildren())}function v(e,t,n){var r,i;for(r=0;r<n.length;++r){i=n[r];if((!i.check||e.check(i.check,!1))&&(!i.left||i.left(t))){i.right(t,A);break}}}function m(e,t){var n=t.getDefinition(),r=n.attributes,i=n.styles,s,o,u,a;if(e.name!=n.element)return!1;for(s in r)if(s=="class"){n=r[s].split(/\s+/);for(u=e.classes.join("|");a=n.pop();)if(u.indexOf(a)==-1)return!1}else if(e.attributes[s]!=r[s])return!1;for(o in i)if(e.styles[o]!=i[o])return!1;return!0}function g(e,t){var n,r;return typeof e=="string"?n=e:e instanceof CKEDITOR.style?r=e:(n=e[0],r=e[1]),[{element:n,left:r,right:function(e,n){n.transform(e,t)}}]}function y(e){return function(t){return m(t,e)}}function b(e){return function(t,n){n[e](t)}}var w=CKEDITOR.dtd,E=CKEDITOR.tools.copy,S=CKEDITOR.tools.trim,x="cke-test",T=["","p","br","div"];CKEDITOR.filter=function(e){this.allowedContent=[],this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={rules:{},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this;if(e instanceof CKEDITOR.editor){e=this.editor=e,this.customConfig=!0;var t=e.config.allowedContent;t===!0?this.disabled=!0:(t||(this.customConfig=!1),this.allow(t,"config",1),this.allow(e.config.extraAllowedContent,"extra",1),this.allow(T[e.enterMode]+" "+T[e.shiftEnterMode],"default",1))}else this.customConfig=!1,this.allow(e,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(e,t,r){if(this.disabled||this.customConfig&&!r||!e)return!1;this._.cachedChecks={};var i,s;if(typeof e=="string")e=o(e);else if(e instanceof CKEDITOR.style)s=e.getDefinition(),r={},e=s.attributes,r[s.element]=s={styles:s.styles,requiredStyles:s.styles&&CKEDITOR.tools.objectKeys(s.styles)},e&&(e=E(e),s.classes=e["class"]?e["class"].split(/\s+/):null,s.requiredClasses=s.classes,delete e["class"],s.attributes=e,s.requiredAttributes=e&&CKEDITOR.tools.objectKeys(e)),e=r;else if(CKEDITOR.tools.isArray(e)){for(i=0;i<e.length;++i)s=this.allow(e[i],t,r);return s}var u,r=[];for(u in e){s=e[u],s=typeof s=="boolean"?{}:typeof s=="function"?{match:s}:E(s),u.charAt(0)!="$"&&(s.elements=u),t&&(s.featureName=t.toLowerCase());var a=s;a.elements=n(a.elements,/\s+/)||null,a.propertiesOnly=a.propertiesOnly||a.elements===!0;var f=/\s*,\s*/,l=void 0;for(l in N){a[l]=n(a[l],f)||null;var h=a,p=C[l],d=n(a[C[l]],f),v=a[l],m=[],g=!0,y=void 0;d?g=!1:d={};for(y in v)y.charAt(0)=="!"&&(y=y.slice(1),m.push(y),d[y]=!0,g=!1);for(;y=m.pop();)v[y]=v["!"+y],delete v["!"+y];h[p]=(g?!1:d)||null}a.match=a.match||null,this.allowedContent.push(s),r.push(s)}t=this._.rules,u=t.elements||{},e=t.generic||[],s=0;for(a=r.length;s<a;++s){f=E(r[s]),l=f.classes===!0||f.styles===!0||f.attributes===!0,h=f,p=void 0;for(p in N)h[p]=c(h[p]);d=!0;for(p in C)p=C[p],h[p]=CKEDITOR.tools.objectKeys(h[p]),h[p]&&(d=!1);h.nothingRequired=d;if(f.elements===!0||f.elements===null)f.elements=c(f.elements),e[l?"unshift":"push"](f);else{h=f.elements,delete f.elements;for(i in h)u[i]?u[i][l?"unshift":"push"](f):u[i]=[f]}}return t.elements=u,t.generic=e.length?e:null,!0},applyTo:function(e,t,n,i){if(this.disabled)return!1;var s=[],o=!n&&this._.rules,u=this._.transformations,a=r(this),f=this.editor&&this.editor.config.protectedSource,c=!1;e.forEach(function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if(e.attributes["data-cke-filter"]=="off")return!1;(!t||e.name!="span"||!~CKEDITOR.tools.objectKeys(e.attributes).join("|").indexOf("data-cke-"))&&a(e,o,u,s,t)&&(c=!0)}else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var n;e:{var r=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,""));n=[];var i,l,h;if(f)for(l=0;l<f.length;++l)if((h=r.match(f[l]))&&h[0].length==r.length){n=!0;break e}r=CKEDITOR.htmlParser.fragment.fromHtml(r),r.children.length==1&&(i=r.children[0]).type==CKEDITOR.NODE_ELEMENT&&a(i,o,u,n,t),n=!n.length}n||s.push(e)}},null,!0),s.length&&(c=!0);for(var h,e=[],i=T[i||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];n=s.pop();)n.type==CKEDITOR.NODE_ELEMENT?d(n,i,e):n.remove();for(;h=e.pop();){n=h.el;if(n.parent)switch(h.check){case"it":w.$removeEmpty[n.name]&&!n.children.length?d(n,i,e):l(n)||d(n,i,e);break;case"el-up":n.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!w[n.parent.name][n.name]&&d(n,i,e);break;case"parent-down":n.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!w[n.parent.name][n.name]&&d(n.parent,i,e)}}return c},checkFeature:function(e){return this.disabled||!e?!0:(e.toFeature&&(e=e.toFeature(this.editor)),!e.requiredContent||this.check(e.requiredContent))},disable:function(){this.disabled=!0},addContentForms:function(e){if(!this.disabled&&e){var t,n,r=[],i;for(t=0;t<e.length&&!i;++t)n=e[t],(typeof n=="string"||n instanceof CKEDITOR.style)&&this.check(n)&&(i=n);if(i){for(t=0;t<e.length;++t)r.push(g(e[t],i));this.addTransformations(r)}}},addFeature:function(e){return this.disabled||!e?!0:(e.toFeature&&(e=e.toFeature(this.editor)),this.allow(e.allowedContent,e.name),this.addTransformations(e.contentTransformations),this.addContentForms(e.contentForms),this.customConfig&&e.requiredContent?this.check(e.requiredContent):!0)},addTransformations:function(e){var t,n;if(!this.disabled&&e){var r=this._.transformations,i;for(i=0;i<e.length;++i){t=e[i];var s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0;n=[];for(o=0;o<t.length;++o)u=t[o],typeof u=="string"?(u=u.split(/\s*:\s*/),a=u[0],f=null,l=u[1]):(a=u.check,f=u.left,l=u.right),s||(s=u,s=s.element?s.element:a?a.match(/^([a-z0-9]+)/i)[0]:s.left.getDefinition().element),f instanceof CKEDITOR.style&&(f=y(f)),n.push({check:a==s?null:a,left:f,right:typeof l=="string"?b(l):l});t=s,r[t]||(r[t]=[]),r[t].push(n)}}},check:function(e,t,n){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var i=e.length;i--;)if(this.check(e[i],t,n))return!0;return!1}var u,a;if(typeof e=="string"){a=e+"<"+(t===!1?"0":"1")+(n?"1":"0")+">";if(a in this._.cachedChecks)return this._.cachedChecks[a];i=o(e).$1,u=i.styles;var l=i.classes;i.name=i.elements,i.classes=l=l?l.split(/\s*,\s*/):[],i.styles=s(u),i.attributes=s(i.attributes),i.children=[],l.length&&(i.attributes["class"]=l.join(" ")),u&&(i.attributes.style=CKEDITOR.tools.writeCssText(i.styles)),u=i}else i=e.getDefinition(),u=i.styles,l=i.attributes||{},u?(u=E(u),l.style=CKEDITOR.tools.writeCssText(u,!0)):u={},u={name:i.element,attributes:l,classes:l["class"]?l["class"].split(/\s+/):[],styles:u,children:[]};var l=CKEDITOR.tools.clone(u),c=[],h;if(t!==!1&&(h=this._.transformations[u.name])){for(i=0;i<h.length;++i)v(this,u,h[i]);f(u)}return r(this)(l,this._.rules,t===!1?!1:this._.transformations,c,!1,!n,!n),t=c.length>0?!1:CKEDITOR.tools.objectCompare(u.attributes,l.attributes,!0)?!0:!1,typeof e=="string"&&(this._.cachedChecks[a]=t),t},getAllowedEnterMode:function(){var e=["p","div","br"],t={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(n,r){var i=e.slice(),s;if(this.check(T[n]))return n;for(r||(i=i.reverse());s=i.pop();)if(this.check(s))return t[s];return CKEDITOR.ENTER_BR}}()};var N={styles:1,attributes:1,classes:1},C={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},k=/^([a-z0-9*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,L={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},A=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,"width"),this.lengthToStyle(e,"height")},sizeToAttribute:function(e){this.lengthToAttribute(e,"width"),this.lengthToAttribute(e,"height")},lengthToStyle:function(e,t,n){n=n||t;if(!(n in e.styles)){var r=e.attributes[t];r&&(/^\d+$/.test(r)&&(r+="px"),e.styles[n]=r)}delete e.attributes[t]},lengthToAttribute:function(e,t,n){n=n||t;if(!(n in e.attributes)){var r=e.styles[t],i=r&&r.match(/^(\d+)(?:\.\d*)?px$/);i?e.attributes[n]=i[1]:r==x&&(e.attributes[n]=x)}delete e.styles[t]},alignmentToStyle:function(e){if(!("float"in e.styles)){var t=e.attributes.align;if(t=="left"||t=="right")e.styles["float"]=t}delete e.attributes.align},alignmentToAttribute:function(e){if(!("align"in e.attributes)){var t=e.styles["float"];if(t=="left"||t=="right")e.attributes.align=t}delete e.styles["float"]},matchesStyle:m,transform:function(e,t){if(typeof t=="string")e.name=t;else{var n=t.getDefinition(),r=n.styles,i=n.attributes,s,o,u,a;e.name=n.element;for(s in i)if(s=="class"){n=e.classes.join("|");for(u=i[s].split(/\s+/);a=u.pop();)n.indexOf(a)==-1&&e.classes.push(a)}else e.attributes[s]=i[s];for(o in r)e.styles[o]=r[o]}}}}(),function(){CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),!this.hasFocus&&!this._.locked&&((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function t(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var n=CKEDITOR.focusManager._.blurDelay;e||!n?t.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,t.call(this)},n,this)}},add:function(e,t){var n=e.getCustomData("focusmanager");if(!n||n!=this){n&&n.remove(e);var n="focus",r="blur";t&&(CKEDITOR.env.ie?(n="focusin",r="focusout"):CKEDITOR.event.useCapture=1);var i={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(n,i.focus,this),e.on(r,i.blur,this),t&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",i)}},remove:function(e){e.removeCustomData("focusmanager");var t=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",t.blur),e.removeListener("focus",t.focus)}}}(),CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,t=function(t){var t=t.data,n=t.getKeystroke(),r=this.keystrokes[n],i=this._.editor;return e=i.fire("key",{keyCode:n})===!1,e||(r&&(e=i.execCommand(r,{from:"keystrokeHandler"})!==!1),e||(e=!!this.blockedKeystrokes[n])),e&&t.preventDefault(!0),!e},n=function(t){e&&(e=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",t,this),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&e.on("keypress",n,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,n){if(!e||!CKEDITOR.lang.languages[e])e=this.detect(t,e);this[e]?n(e,this[e]):CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),function(){this[e].dir=this.rtl[e]?"rtl":"ltr",n(e,this[e])},this)},detect:function(e,t){var n=this.languages,t=t||navigator.userLanguage||navigator.language||e,r=t.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),i=r[1],r=r[2];return n[i+"-"+r]?i=i+"-"+r:n[i]||(i=null),CKEDITOR.lang.detect=i?function(){return i}:function(e){return e},i||e}}}(),CKEDITOR.scriptLoader=function(){var e={},t={};return{load:function(n,r,i,s){var o=typeof n=="string";o&&(n=[n]),i||(i=CKEDITOR);var u=n.length,a=[],f=[],l=function(e){r&&(o?r.call(i,e):r.call(i,a,f))};if(u===0)l(!0);else{var c=function(e,t){(t?a:f).push(e),--u<=0&&(s&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),l(t))},h=function(n,r){e[n]=1;var i=t[n];delete t[n];for(var s=0;s<i.length;s++)i[s](n,r)},p=function(n){if(e[n])c(n,!0);else{var i=t[n]||(t[n]=[]);i.push(c);if(!(i.length>1)){var s=new CKEDITOR.dom.element("script");s.setAttributes({type:"text/javascript",src:n}),r&&(CKEDITOR.env.ie&&CKEDITOR.env.version<11?s.$.onreadystatechange=function(){if(s.$.readyState=="loaded"||s.$.readyState=="complete")s.$.onreadystatechange=null,h(n,!0)}:(s.$.onload=function(){setTimeout(function(){h(n,!0)},0)},s.$.onerror=function(){h(n,!1)})),s.appendTo(CKEDITOR.document.getHead())}}};s&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var v=0;v<u;v++)p(n[v])}},queue:function(){function e(){var e;(e=t[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)}var t=[];return function(n,r){var i=this;t.push({scriptUrl:n,callback:function(){r&&r.apply(this,arguments),t.shift(),e.call(i)}}),t.length==1&&e.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,t){this.basePath=e,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw'[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.';var n=this.registered[e]=t||{};return n.name=e,n.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",n),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+"/")},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+".js"))},addExternal:function(e,t,n){for(var e=e.split(","),r=0;r<e.length;r++){var i=e[r];n||(t=t.replace(/[^\/]+$/,function(e){return n=e,""})),this.externals[i]={dir:t,file:n||this.fileName+".js"}}},load:function(e,t,n){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var r=this.loaded,i=this.registered,s=[],o={},u={},a=0;a<e.length;a++){var f=e[a];if(f)if(!r[f]&&!i[f]){var l=this.getFilePath(f);s.push(l),l in o||(o[l]=[]),o[l].push(f)}else u[f]=this.get(f)}CKEDITOR.scriptLoader.load(s,function(e,i){if(i.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+o[i[0]].join(",")+'" was not found at "'+i[0]+'".';for(var s=0;s<e.length;s++)for(var a=o[e[s]],f=0;f<a.length;f++){var l=a[f];u[l]=this.get(l),r[l]=1}t.call(n,u)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){var t={};return function(n,r,i){var s={},o=function(n){e.call(this,n,function(e){CKEDITOR.tools.extend(s,e);var n=[],u;for(u in e){var f=e[u],l=f&&f.requires;if(!t[u]){if(f.icons)for(var c=f.icons.split(","),h=c.length;h--;)CKEDITOR.skin.addIcon(c[h],f.path+"icons/"+(CKEDITOR.env.hidpi&&f.hidpi?"hidpi/":"")+c[h]+".png");t[u]=1}if(l){l.split&&(l=l.split(","));for(f=0;f<l.length;f++)s[l[f]]||n.push(l[f])}}if(n.length)o.call(this,n);else{for(u in s)f=s[u],f.onLoad&&!f.onLoad._called&&(f.onLoad()===!1&&delete s[u],f.onLoad._called=1);r&&r.call(i||window,s)}},this)};o.call(this,n)}}),CKEDITOR.plugins.setLang=function(e,t,n){var r=this.get(e),e=r.langEntries||(r.langEntries={}),r=r.lang||(r.lang=[]);r.split&&(r=r.split(",")),CKEDITOR.tools.indexOf(r,t)==-1&&r.push(t),e[t]=n},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,t,n){n.name=e.toLowerCase();var r=this.items[e]={type:t,command:n.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(r,n)},get:function(e){return this.instances[e]},create:function(e){var t=this.items[e],n=t&&this._.handlers[t.type],r=t&&t.command&&this.editor.getCommand(t.command),n=n&&n.create.apply(this,t.args);return this.instances[e]=n,r&&r.uiItems.push(n),n&&!n.type&&(n.type=t.type),n},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(e,r,s){CKEDITOR.event.call(this),e=e&&CKEDITOR.tools.clone(e);if(r!==void 0){if(!(r instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!s)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!(s==CKEDITOR.ELEMENT_MODE_INLINE?r.is(CKEDITOR.dtd.$editable)||r.is("textarea"):s==CKEDITOR.ELEMENT_MODE_REPLACE?!r.is(CKEDITOR.dtd.$nonBodyContent):1))throw Error('The specified element mode is not supported on element: "'+r.getName()+'".');this.element=r,this.elementMode=s,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(r.getId()||r.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||t(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",n),this.on("selectionChange",function(e){i(this,e.data.path)}),this.on("activeFilterChange",function(){i(this,this.elementPath(),!0)}),this.on("mode",n),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){o(this,e)},0,this)}function t(){do var e="editor"+ ++h;while(CKEDITOR.instances[e]);return e}function n(){var e=this.commands,t;for(t in e)r(this,e[t])}function r(e,t){t[t.startDisabled?"disable":e.readOnly&&!t.readOnly?"disable":t.modes[e.mode]?"enable":"disable"]()}function i(e,t,n){if(t){var r,i,s=e.commands;for(i in s)r=s[i],(n||r.contextSensitive)&&r.refresh(e,t)}}function s(e){var t=e.config.customConfig;if(!t)return!1;var t=CKEDITOR.getUrl(t),n=p[t]||(p[t]={});return n.fn?(n.fn.call(e,e.config),(CKEDITOR.getUrl(e.config.customConfig)==t||!s(e))&&e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(t,function(){n.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},s(e)}),!0}function o(e,t){e.on("customConfigLoaded",function(){if(t){if(t.on)for(var n in t.on)e.on(n,t.on[n]);CKEDITOR.tools.extend(e.config,t,!0),delete e.config.on}n=e.config,e.readOnly=!!n.readOnly||!!(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&e.element.hasAttribute("disabled")),e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!e.element.is("textarea")&&!CKEDITOR.dtd[e.element.getName()].p:!1,e.tabIndex=n.tabIndex||e.element&&e.element.getAttribute("tabindex")||0,e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:n.enterMode,e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:n.shiftEnterMode,n.skin&&(CKEDITOR.skinName=n.skin),e.fireOnce("configLoaded"),e.dataProcessor=new CKEDITOR.htmlDataProcessor(e),e.filter=e.activeFilter=new CKEDITOR.filter(e),u(e)}),t&&t.customConfig!=void 0&&(e.config.customConfig=t.customConfig),s(e)||e.fireOnce("customConfigLoaded")}function u(e){CKEDITOR.skin.loadPart("editor",function(){a(e)})}function a(e){CKEDITOR.lang.load(e.config.language,e.config.defaultLanguage,function(t,n){var r=e.config.title;e.langCode=t,e.lang=CKEDITOR.tools.prototypedCopy(n),e.title=typeof r=="string"||r===!1?r:[e.lang.editor,e.name].join(", "),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&e.lang.dir=="rtl"&&(e.lang.dir="ltr"),e.config.contentsLangDirection||(e.config.contentsLangDirection=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.getDirection(1):e.lang.dir),e.fire("langLoaded"),f(e)})}function f(e){e.getStylesSet(function(t){e.once("loaded",function(){e.fire("stylesSet",{styles:t})},null,null,1),l(e)})}function l(e){var t=e.config,n=t.plugins,r=t.extraPlugins,i=t.removePlugins;if(r)var s=RegExp("(?:^|,)(?:"+r.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),n=n.replace(s,""),n=n+(","+r);if(i)var o=RegExp("(?:^|,)(?:"+i.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),n=n.replace(o,"");CKEDITOR.env.air&&(n+=",adobeair"),CKEDITOR.plugins.load(n.split(","),function(n){var r=[],i=[],s=[];e.plugins=n;for(var u in n){var a=n[u],f=a.lang,l=null,c=a.requires,h;CKEDITOR.tools.isArray(c)&&(c=c.join(","));if(c&&(h=c.match(o)))for(;c=h.pop();)CKEDITOR.tools.setTimeout(function(e,t){throw Error('Plugin "'+e.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+t+'" plugin.')},0,null,[c,u]);f&&!e.lang[u]&&(f.split&&(f=f.split(",")),CKEDITOR.tools.indexOf(f,e.langCode)>=0?l=e.langCode:(l=e.langCode.replace(/-.*/,""),l=l!=e.langCode&&CKEDITOR.tools.indexOf(f,l)>=0?l:CKEDITOR.tools.indexOf(f,"en")>=0?"en":f[0]),!a.langEntries||!a.langEntries[l]?s.push(CKEDITOR.getUrl(a.path+"lang/"+l+".js")):(e.lang[u]=a.langEntries[l],l=null)),i.push(l),r.push(a)}CKEDITOR.scriptLoader.load(s,function(){for(var n=["beforeInit","init","afterInit"],s=0;s<n.length;s++)for(var o=0;o<r.length;o++){var u=r[o];s===0&&i[o]&&u.lang&&u.langEntries&&(e.lang[u.name]=u.langEntries[i[o]]),u[n[s]]&&u[n[s]](e)}e.fireOnce("pluginsLoaded"),t.keystrokes&&e.setKeystroke(e.config.keystrokes);for(o=0;o<e.config.blockedKeystrokes.length;o++)e.keystrokeHandler.blockedKeystrokes[e.config.blockedKeystrokes[o]]=1;e.status="loaded",e.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,e)})})}function c(){var e=this.element;if(e&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();return this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t)),e.is("textarea")?e.setValue(t):e.setHtml(t),!0}return!1}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var h=0,p={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(e,t){t.name=e.toLowerCase();var n=new CKEDITOR.command(this,t);return this.mode&&r(this,n),this.commands[e]=n},_attachToForm:function(){var e=this,t=e.element,n=new CKEDITOR.dom.element(t.$.form);if(t.is("textarea")&&n){var r=function(n){e.updateElement(),e._.required&&!t.getValue()&&e.fire("required")===!1&&n.data.preventDefault()};n.on("submit",r),n.$.submit&&n.$.submit.call&&n.$.submit.apply&&(n.$.submit=CKEDITOR.tools.override(n.$.submit,function(e){return function(){r(),e.apply?e.apply(this):e()}})),e.on("destroy",function(){n.removeListener("submit",r)})}},destroy:function(e){this.fire("beforeDestroy"),!e&&c.call(this),this.editable(null),this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(e){if(!e){e=this.getSelection();if(!e)return null;e=e.getStartElement()}return e?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null},execCommand:function(e,t){var n=this.getCommand(e),r={name:e,commandData:t,command:n};if(n&&n.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",r)!==!1){r.returnValue=n.exec(r.commandData);if(!n.async&&this.fire("afterCommandExec",r)!==!1)return r.returnValue}return!1},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire("beforeGetData");var t=this._.data;return typeof t!="string"&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t={dataValue:t},!e&&this.fire("getData",t),t.dataValue},getSnapshot:function(){var e=this.fire("getSnapshot");if(typeof e!="string"){var t=this.element;t&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e=t.is("textarea")?t.getValue():t.getHtml())}return e},loadSnapshot:function(e){this.fire("loadSnapshot",e)},setData:function(e,t,n){t&&this.on("dataReady",function(e){e.removeListener(),t.call(e.editor)}),e={dataValue:e},!n&&this.fire("setData",e),this._.data=e.dataValue,!n&&this.fire("afterSetData",e)},setReadOnly:function(e){e=e==void 0||e,this.readOnly!=e&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire("readOnly"))},insertHtml:function(e,t){this.fire("insertHtml",{dataValue:e,mode:t})},insertText:function(e){this.fire("insertText",e)},insertElement:function(e){this.fire("insertElement",e)},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return this.status=="ready"&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return c.call(this)},setKeystroke:function(){for(var e=this.keystrokeHandler.keystrokes,t=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],n,r,i=t.length;i--;)n=t[i],r=0,CKEDITOR.tools.isArray(n)&&(r=n[1],n=n[0]),r?e[n]=r:delete e[n]},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter),this.activeFilter!==e&&(this.activeFilter=e,this.fire("activeFilterChange"),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode,t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode;if(this.activeEnterMode!=e||this.activeShiftEnterMode!=t)this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange")}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(n){for(var r,i,s=0,o;r=this._.htmlPartsRegex.exec(n);){i=r.index,i>s&&(s=n.substring(s,i),o?o.push(s):this.onText(s)),s=this._.htmlPartsRegex.lastIndex;if(i=r[1]){i=i.toLowerCase(),o&&CKEDITOR.dtd.$cdata[i]&&(this.onCDATA(o.join("")),o=null);if(!o){this.onTagClose(i);continue}}if(o)o.push(r[0]);else if(i=r[3]){i=i.toLowerCase();if(!/="/.test(i)){var u={},a;r=r[4];var f=!!r&&r.charAt(r.length-1)=="/";if(r)for(;a=e.exec(r);){var l=a[1].toLowerCase();a=a[2]||a[3]||a[4]||"",u[l]=!a&&t[l]?l:CKEDITOR.tools.htmlDecodeAttr(a)}this.onTagOpen(i,u,f),!o&&CKEDITOR.dtd.$cdata[i]&&(o=[])}}else(i=r[2])&&this.onComment(i)}n.length>s&&this.onText(n.substring(s,n.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,t){t?this._.output.push(" />"):this._.output.push(">")},attribute:function(e,t){typeof t=="string"&&(t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("<!--",e,"-->")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var t=this._.output.join("");return e&&this.reset(),t}}}),"use strict",function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,t=CKEDITOR.tools.indexOf(e,this),n=this.previous,r=this.next;n&&(n.next=r),r&&(r.previous=n),e.splice(t,1),this.parent=null},replaceWith:function(e){var t=this.parent.children,n=CKEDITOR.tools.indexOf(t,this),r=e.previous=this.previous,i=e.next=this.next;r&&(r.next=e),i&&(i.previous=e),t[n]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e),r=e.next;t.splice(n+1,0,this),this.next=e.next,this.previous=e,e.next=this,r&&(r.previous=this),this.parent=e.parent},insertBefore:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e);t.splice(n,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){var t=typeof e=="function"?e:typeof e=="string"?function(t){return t.name==e}:function(t){return t.name in e},n=this.parent;for(;n&&n.type==CKEDITOR.NODE_ELEMENT;){if(t(n))return n;n=n.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}}}(),"use strict",CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var n=this.value;return(n=e.onComment(t,n,this))?typeof n!="string"?(this.replaceWith(n),!1):(this.value=n,!0):(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.comment(this.value)}}),"use strict",function(){CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){if(!(this.value=e.onText(t,this.value,this)))return this.remove(),!1},writeHtml:function(e,t){t&&this.filter(t),e.text(this.value)}})}(),"use strict",function(){CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}})}(),"use strict",CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(e){return e.attributes["data-cke-survive"]?!1:e.name=="a"&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name]}var t=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),n={ol:1,ul:1},r=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),i={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(s,o,u){function f(e){var t;if(w.length>0)for(var n=0;n<w.length;n++){var r=w[n],i=r.name,s=CKEDITOR.dtd[i],o=S.name&&CKEDITOR.dtd[S.name];(!o||o[i])&&(!e||!s||s[e]||!CKEDITOR.dtd[e])?(t||(l(),t=1),r=r.clone(),r.parent=S,S=r,w.splice(n,1),n--):i==S.name&&(p(S,S.parent,1),n--)}}function l(){for(;E.length;)p(E.shift(),S)}function h(e){if(e._.isBlockLike&&e.name!="pre"&&e.name!="textarea"){var t=e.children.length,n=e.children[t-1],r;n&&n.type==CKEDITOR.NODE_TEXT&&((r=CKEDITOR.tools.rtrim(n.value))?n.value=r:e.children.length=t-1)}}function p(t,n,r){var n=n||S||y,i=S;t.previous===void 0&&(v(n,t)&&(S=n,g.onTagOpen(u,{}),t.returnPoint=n=S),h(t),(!e(t)||t.children.length)&&n.add(t),t.name=="pre"&&(T=!1),t.name=="textarea"&&(x=!1)),t.returnPoint?(S=t.returnPoint,delete t.returnPoint):S=r?n:i}function v(e,t){if((e==y||e.name=="body")&&u&&(!e.name||CKEDITOR.dtd[e.name][u])){var n,r;return(n=t.attributes&&(r=t.attributes["data-cke-real-element-type"])?r:t.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}}function m(e,t){return e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent?e==t||e=="dt"&&t=="dd"||e=="dd"&&t=="dt":!1}var g=new CKEDITOR.htmlParser,y=o instanceof CKEDITOR.htmlParser.element?o:typeof o=="string"?new CKEDITOR.htmlParser.element(o):new CKEDITOR.htmlParser.fragment,w=[],E=[],S=y,x=y.name=="textarea",T=y.name=="pre";g.onTagOpen=function(i,s,o,u){s=new CKEDITOR.htmlParser.element(i,s),s.isUnknown&&o&&(s.isEmpty=!0),s.isOptionalClose=u;if(e(s))w.push(s);else{if(i=="pre")T=!0;else{if(i=="br"&&T){S.add(new CKEDITOR.htmlParser.text("\n"));return}i=="textarea"&&(x=!0)}if(i=="br")E.push(s);else{for(;;){u=(o=S.name)?CKEDITOR.dtd[o]||(S._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):r;if(!(!s.isUnknown&&!S.isUnknown&&!u[i]))break;if(S.isOptionalClose)g.onTagClose(o);else if(i in n&&o in n)o=S.children,(o=o[o.length-1])&&o.name=="li"||p(o=new CKEDITOR.htmlParser.element("li"),S),!s.returnPoint&&(s.returnPoint=S),S=o;else if(i in CKEDITOR.dtd.$listItem&&!m(i,o))g.onTagOpen(i=="li"?"ul":"dl",{},0,1);else if(o in t&&!m(i,o))!s.returnPoint&&(s.returnPoint=S),S=S.parent;else{o in CKEDITOR.dtd.$inline&&w.unshift(S);if(!S.parent){s.isOrphan=1;break}p(S,S.parent,1)}}f(i),l(),s.parent=S,s.isEmpty?p(s):S=s}}},g.onTagClose=function(e){for(var t=w.length-1;t>=0;t--)if(e==w[t].name){w.splice(t,1);return}for(var n=[],r=[],i=S;i!=y&&i.name!=e;)i._.isBlockLike||r.unshift(i),n.push(i),i=i.returnPoint||i.parent;if(i!=y){for(t=0;t<n.length;t++){var s=n[t];p(s,s.parent)}S=i,i._.isBlockLike&&l(),p(i,i.parent),i==S&&(S=S.parent),w=w.concat(r)}e=="body"&&(u=!1)},g.onText=function(e){if((!S._.hasInlineStarted||E.length)&&!T&&!x){e=CKEDITOR.tools.ltrim(e);if(e.length===0)return}var n=S.name,s=n?CKEDITOR.dtd[n]||(S._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):r;!x&&!s["#"]&&n in t?(g.onTagOpen(i[n]||""),g.onText(e)):(l(),f(),!T&&!x&&(e=e.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),e=new CKEDITOR.htmlParser.text(e),v(S,e)&&this.onTagOpen(u,{},0,1),S.add(e))},g.onCDATA=function(e){S.add(new CKEDITOR.htmlParser.cdata(e))},g.onComment=function(e){l(),f(),S.add(new CKEDITOR.htmlParser.comment(e))},g.parse(s);for(l();S!=y;)p(S,S.parent,1);return h(y),y},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var n=t>0?this.children[t-1]:null;if(n){if(e._.isBlockLike&&n.type==CKEDITOR.NODE_TEXT){n.value=CKEDITOR.tools.rtrim(n.value);if(n.value.length===0){this.children.pop(),this.add(e);return}}n.next=e}e.previous=n,e.parent=this,this.children.splice(t,0,e),this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)},filter:function(e,t){t=this.getFilterContext(t),e.onRoot(t,this),this.filterChildren(e,!1,t)},filterChildren:function(e,t,n){if(this.childrenFilteredBy!=e.id){n=this.getFilterContext(n),t&&!this.parent&&e.onRoot(n,this),this.childrenFilteredBy=e.id;for(t=0;t<this.children.length;t++)this.children[t].filter(e,n)===!1&&t--}},writeHtml:function(e,t){t&&this.filter(t),this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,n){var r=this.getFilterContext();n&&!this.parent&&t&&t.onRoot(r,this),t&&this.filterChildren(t,!1,r),t=0,n=this.children;for(r=n.length;t<r;t++)n[t].writeHtml(e)},forEach:function(e,t,n){if(!n&&(!t||this.type==t))var r=e(this);if(r!==!1)for(var n=this.children,i=0;i<n.length;i++)r=n[i],r.type==CKEDITOR.NODE_ELEMENT?r.forEach(e,t):(!t||r.type==t)&&e(r)},getFilterContext:function(e){return e||{}}}}(),"use strict",function(){function e(){this.rules=[]}function t(t,n,r,i){var s,o;for(s in n)(o=t[s])||(o=t[s]=new e),o.add(n[s],r,i)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new e,this.attributeNameRules=new e,this.elementsRules={},this.attributesRules={},this.textRules=new e,this.commentRules=new e,this.rootRules=new e,t&&this.addRules(t,10)},proto:{addRules:function(e,n){var r;typeof n=="number"?r=n:n&&"priority"in n&&(r=n.priority),typeof r!="number"&&(r=10),typeof n!="object"&&(n={}),e.elementNames&&this.elementNameRules.addMany(e.elementNames,r,n),e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,r,n),e.elements&&t(this.elementsRules,e.elements,r,n),e.attributes&&t(this.attributesRules,e.attributes,r,n),e.text&&this.textRules.add(e.text,r,n),e.comment&&this.commentRules.add(e.comment,r,n),e.root&&this.rootRules.add(e.root,r,n)},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t,n){return this.textRules.exec(e,t,n)},onComment:function(e,t,n){return this.commentRules.exec(e,t,n)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var n=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],r,i=0;i<3;i++)if(r=n[i]){r=r.exec(e,t,this);if(r===!1)return null;if(r&&r!=t)return this.onNode(e,r);if(t.parent&&!t.name)break}return t},onNode:function(e,t){var n=t.type;return n==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):n==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value)):n==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value)):null},onAttribute:function(e,t,n,r){return(n=this.attributesRules[n])?n.exec(e,r,t,this):r}}}),CKEDITOR.htmlParser.filterRulesGroup=e,e.prototype={add:function(e,t,n){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:n})},addMany:function(e,t,n){for(var r=[this.findIndex(t),0],i=0,s=e.length;i<s;i++)r.push({value:e[i],priority:t,options:n});this.rules.splice.apply(this.rules,r)},findIndex:function(e){for(var t=this.rules,n=t.length-1;n>=0&&e<t[n].priority;)n--;return n+1},exec:function(e,t){var n=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,r=Array.prototype.slice.call(arguments,1),i=this.rules,s=i.length,o,u,a,f;for(f=0;f<s;f++){n&&(o=t.type,u=t.name),a=i[f];if(!(e.nonEditable&&!a.options.applyToAll||e.nestedEditable&&a.options.excludeNestedEditable)){a=a.value.apply(null,r);if(a===!1||n&&a&&(a.name!=u||a.type!=o))return a;a!=void 0&&(r[0]=t=a)}}return t},execOnName:function(e,t){for(var n=0,r=this.rules,i=r.length,s;t&&n<i;n++)s=r[n],!(e.nonEditable&&!s.options.applyToAll||e.nestedEditable&&s.options.excludeNestedEditable)&&(t=t.replace(s.value[0],s.value[1]));return t}}}(),function(){function e(e,t){function u(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function a(e,t){return function(i){if(i.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var o=[],a=n(i),l,h;if(a)for(f(a,1)&&o.push(a);a;)s(a)&&(l=r(a))&&f(l)&&((h=r(l))&&!s(h)?o.push(l):(u(c).insertAfter(l),l.remove())),a=a.previous;for(a=0;a<o.length;a++)o[a].remove();if(o=CKEDITOR.env.opera&&!e||(typeof t=="function"?t(i)!==!1:t))!c&&!CKEDITOR.env.needsBrFiller&&i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT?o=!1:!c&&!CKEDITOR.env.needsBrFiller&&(document.documentMode>7||i.name in CKEDITOR.dtd.tr||i.name in CKEDITOR.dtd.$listItem)?o=!1:(o=n(i),o=!o||i.name=="form"&&o.name=="input");o&&i.add(u(e))}}}function f(e,t){if((!c||CKEDITOR.env.needsBrFiller)&&e.type==CKEDITOR.NODE_ELEMENT&&e.name=="br"&&!e.attributes["data-cke-eol"])return!0;var n;if(e.type==CKEDITOR.NODE_TEXT&&(n=e.value.match(m))){n.index&&((new CKEDITOR.htmlParser.text(e.value.substring(0,n.index))).insertBefore(e),e.value=n[0]);if(!CKEDITOR.env.needsBrFiller&&c&&(!t||e.parent.name in h))return!0;if(!c)if((n=e.previous)&&n.name=="br"||!n||s(n))return!0}return!1}var l={elements:{}},c=t=="html",h=CKEDITOR.tools.extend({},w),p;for(p in h)"#"in y[p]||delete h[p];for(p in h)l.elements[p]=a(c,e.config.fillEmptyBlocks!==!1);return l.root=a(c),l.elements.br=function(e){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=t.attributes;if("data-cke-bogus"in n||"data-cke-eol"in n)delete n["data-cke-bogus"];else{for(n=t.next;n&&i(n);)n=n.next;var a=r(t);!n&&s(t.parent)?o(t.parent,u(e)):s(n)&&a&&!s(a)&&u(e).insertBefore(n)}}}}(c),l}function t(e,t){return e!=CKEDITOR.ENTER_BR&&t!==!1?e==CKEDITOR.ENTER_DIV?"div":"p":!1}function n(e){for(e=e.children[e.children.length-1];e&&i(e);)e=e.previous;return e}function r(e){for(e=e.previous;e&&i(e);)e=e.previous;return e}function i(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function s(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in w||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function o(e,t){var n=e.children[e.children.length-1];e.children.push(t),t.parent=e,n&&(n.next=t,t.previous=n)}function u(e){e=e.attributes,e.contenteditable!="false"&&(e["data-cke-editable"]=e.contenteditable?"true":1),e.contenteditable="false"}function a(e){e=e.attributes;switch(e["data-cke-editable"]){case"true":e.contenteditable="true";break;case"1":delete e.contenteditable}}function f(e){return e.replace(N,function(e,t,n){return"<"+t+n.replace(C,function(e,t){return k.test(t)&&n.indexOf("data-cke-saved-"+t)==-1?" data-cke-saved-"+e+" data-cke-"+CKEDITOR.rnd+"-"+e:e})+">"})}function l(e,t){return e.replace(t,function(e,t,n){return e.indexOf("<textarea")===0&&(e=t+p(n).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"})}function c(e){return e.replace(O,function(e,t){return decodeURIComponent(t)})}function h(e){return e.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(e){return"<!--"+g+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"-->"})}function p(e){return e.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(e,t){return decodeURIComponent(t)})}function d(e,t){var n=t._.dataStore;return e.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(e,t){return decodeURIComponent(t)}).replace(/\{cke_protected_(\d+)\}/g,function(e,t){return n&&n[t]||""})}function v(e,t){for(var n=[],r=t.config.protectedSource,i=t._.dataStore||(t._.dataStore={id:1}),s=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,r=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(r),e=e.replace(/<\!--[\s\S]*?--\>/g,function(e){return"<!--{cke_tempcomment}"+(n.push(e)-1)+"-->"}),o=0;o<r.length;o++)e=e.replace(r[o],function(e){return e=e.replace(s,function(e,t,r){return n[r]}),/cke_temp(comment)?/.test(e)?e:"<!--{cke_temp}"+(n.push(e)-1)+"-->"});return e=e.replace(s,function(e,t,r){return"<!--"+g+(t?"{C}":"")+encodeURIComponent(n[r]).replace(/--/g,"%2D%2D")+"-->"}),e.replace(/<\w([^'">]+|'[^']*'|"[^"]*")+>/g,function(e){return e.replace(/<\!--\{cke_protected\}([^>]*)--\>/g,function(e,t){return i[i.id]=decodeURIComponent(t),"{cke_protected_"+i.id++ +"}"})})}CKEDITOR.htmlDataProcessor=function(n){var r,i,s=this;this.editor=n,this.dataFilter=r=new CKEDITOR.htmlParser.filter,this.htmlFilter=i=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,r.addRules(E),r.addRules(S,{applyToAll:!0}),r.addRules(e(n,"data"),{applyToAll:!0}),i.addRules(x),i.addRules(T,{applyToAll:!0}),i.addRules(e(n,"html"),{applyToAll:!0}),n.on("toHtml",function(e){var e=e.data,r=e.dataValue,r=v(r,n),r=l(r,A),r=f(r),r=l(r,L),r=r.replace(M,"$1cke:$2"),r=r.replace(D,"<cke:$1$2></cke:$1>"),r=CKEDITOR.env.opera?r:r.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),r=r.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),i=e.context||n.editable().getName(),s;CKEDITOR.env.ie&&CKEDITOR.env.version<9&&i=="pre"&&(i="div",r="<pre>"+r+"</pre>",s=1),i=n.document.createElement(i),i.setHtml("a"+r),r=i.getHtml().substr(1),r=r.replace(RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),s&&(r=r.replace(/^<pre>|<\/pre>$/gi,"")),r=r.replace(_,"$1$2"),r=c(r),r=p(r),e.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(r,e.context,e.fixForBody===!1?!1:t(e.enterMode,n.config.autoParagraph))},null,null,5),n.on("toHtml",function(e){e.data.filter.applyTo(e.data.dataValue,!0,e.data.dontFilter,e.data.enterMode)&&n.fire("dataFiltered")},null,null,6),n.on("toHtml",function(e){e.data.dataValue.filterChildren(s.dataFilter,!0)},null,null,10),n.on("toHtml",function(e){var e=e.data,t=e.dataValue,n=new CKEDITOR.htmlParser.basicWriter;t.writeChildrenHtml(n),t=n.getHtml(!0),e.dataValue=h(t)},null,null,15),n.on("toDataFormat",function(e){var r=e.data.dataValue;e.data.enterMode!=CKEDITOR.ENTER_BR&&(r=r.replace(/^<br *\/?>/i,"")),e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(r,e.data.context,t(e.data.enterMode,n.config.autoParagraph))},null,null,5),n.on("toDataFormat",function(e){e.data.dataValue.filterChildren(s.htmlFilter,!0)},null,null,10),n.on("toDataFormat",function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)},null,null,11),n.on("toDataFormat",function(e){var t=e.data.dataValue,r=s.writer;r.reset(),t.writeChildrenHtml(r),t=r.getHtml(!0),t=p(t),t=d(t,n),e.data.dataValue=t},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,n,r){var i=this.editor,s,o,u;return t&&typeof t=="object"?(s=t.context,n=t.fixForBody,r=t.dontFilter,o=t.filter,u=t.enterMode):s=t,!s&&s!==null&&(s=i.editable().getName()),i.fire("toHtml",{dataValue:e,context:s,fixForBody:n,dontFilter:r,filter:o||i.filter,enterMode:u||i.enterMode}).dataValue},toDataFormat:function(e,t){var n,r,i;return t&&(n=t.context,r=t.filter,i=t.enterMode),!n&&n!==null&&(n=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:r||this.editor.filter,context:n,enterMode:i||this.editor.enterMode}).dataValue}};var m=/(?:&nbsp;|\xa0)$/,g="{cke_protected}",y=CKEDITOR.dtd,b=["caption","colgroup","col","thead","tfoot","tbody"],w=CKEDITOR.tools.extend({},y.$blockLimit,y.$block),E={elements:{input:u,textarea:u}},S={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},x={elements:{embed:function(e){var t=e.parent;if(t&&t.name=="object"){var n=t.attributes.width,t=t.attributes.height;n&&(e.attributes.width=n),t&&(e.attributes.height=t)}},a:function(e){if(!e.children.length&&!e.attributes.name&&!e.attributes["data-cke-saved-name"])return!1}}},T={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var n=["name","href","src"],r,i=0;i<n.length;i++)r="data-cke-saved-"+n[i],r in t&&delete t[n[i]]}return e},table:function(e){e.children.slice(0).sort(function(e,t){var n,r;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(n=CKEDITOR.tools.indexOf(b,e.name),r=CKEDITOR.tools.indexOf(b,t.name)),n>-1&&r>-1&&n!=r||(n=e.parent?e.getIndex():-1,r=t.parent?t.getIndex():-1),n>r?1:-1})},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){e.attributes["class"]=="Apple-style-span"&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes["class"]},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&o(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:a,textarea:a},attributes:{"class":function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(T.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,function(e){return e.toLowerCase()})});var N=/<(a|area|img|input|source)\b([^>]*)>/gi,C=/([\w-]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,k=/^(href|src|name)$/i,L=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,A=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,O=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,M=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,_=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,D=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),"use strict",CKEDITOR.htmlParser.element=function(e,t){this.name=e,this.attributes=t||{},this.children=[];var n=e||"",r=n.match(/^cke:(.*)/);r&&(n=r[1]),n=!(!CKEDITOR.dtd.$nonBodyContent[n]&&!CKEDITOR.dtd.$block[n]&&!CKEDITOR.dtd.$listItem[n]&&!CKEDITOR.dtd.$tableContent[n]&&!CKEDITOR.dtd.$nonEditable[n]&&n!="br"),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:n,hasInlineStarted:this.isEmpty||!n}},CKEDITOR.htmlParser.cssStyle=function(e){var t={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,n,r){n=="font-family"&&(r=r.replace(/["']/g,"")),t[n.toLowerCase()]=r}),{rules:t,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute("style",t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)},toString:function(){var e=[],n;for(n in t)t[n]&&e.push(n,":",t[n],";");return e.join("")}}},function(){function e(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&(typeof e=="string"?t.name==e:t.name in e)}}var t=function(e,t){return e=e[0],t=t[0],e<t?-1:e>t?1:0},n=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:n.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var n=this,r,i,t=n.getFilterContext(t);if(t.off)return!0;n.parent||e.onRoot(t,n);for(;;){r=n.name;if(!(i=e.onElementName(t,r)))return this.remove(),!1;n.name=i;if(!(n=e.onElement(t,n)))return this.remove(),!1;if(n!==this)return this.replaceWith(n),!1;if(n.name==r)break;if(n.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(n),!1;if(!n.name)return this.replaceWithChildren(),!1}r=n.attributes;var s,o;for(s in r){o=s;for(i=r[s];;){if(!(o=e.onAttributeName(t,s))){delete r[s];break}if(o==s)break;delete r[s],s=o}o&&((i=e.onAttribute(t,n,o,i))===!1?delete r[o]:r[o]=i)}return n.isEmpty||this.filterChildren(e,!1,t),!0},filterChildren:n.filterChildren,writeHtml:function(e,n){n&&this.filter(n);var r=this.name,i=[],s=this.attributes,o,u;e.openTag(r,s);for(o in s)i.push([o,s[o]]);e.sortAttributes&&i.sort(t),o=0;for(u=i.length;o<u;o++)s=i[o],e.attribute(s[0],s[1]);e.openTagClose(r,this.isEmpty),this.writeChildrenHtml(e),this.isEmpty||e.closeTag(r)},writeChildrenHtml:n.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:n.forEach,getFirst:function(t){if(!t)return this.children.length?this.children[0]:null;typeof t!="function"&&(t=e(t));for(var n=0,r=this.children.length;n<r;++n)if(t(this.children[n]))return this.children[n];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(e),e.getHtml()},setHtml:function(e){for(var e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children,t=0,n=e.length;t<n;++t)e[t].parent=this},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(e),e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),n=this.clone(),r=0;r<t.length;++r)t[r].parent=n;return n.children=t,t[0]&&(t[0].previous=null),e>0&&(this.children[e-1].next=null),this.parent.add(n,this.getIndex()+1),n},removeClass:function(e){var t=this.attributes["class"];t&&((t=CKEDITOR.tools.trim(t.replace(RegExp("(?:\\s+|^)"+e+"(?:\\s+|$)")," ")))?this.attributes["class"]=t:delete this.attributes["class"])},hasClass:function(e){var t=this.attributes["class"];return t?RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t):!1},getFilterContext:function(e){var t=[];e||(e={off:!1,nonEditable:!1,nestedEditable:!1}),!e.off&&this.attributes["data-cke-processor"]=="off"&&t.push("off",!0),!e.nonEditable&&this.attributes.contenteditable=="false"?t.push("nonEditable",!0):this.name!="body"&&!e.nestedEditable&&this.attributes.contenteditable=="true"&&t.push("nestedEditable",!0);if(t.length)for(var e=CKEDITOR.tools.copy(e),n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}},!0)}(),function(){var e={},t=/{([^}]+)}/g,n=/([\\'])/g,r=/\n/g,i=/\r/g;CKEDITOR.template=function(s){if(e[s])this.output=e[s];else{var o=s.replace(n,"\\$1").replace(r,"\\n").replace(i,"\\r").replace(t,function(e,t){return"',data['"+t+"']==undefined?'{"+t+"}':data['"+t+"'],'"});this.output=e[s]=Function("data","buffer","return buffer?buffer.push('"+o+"'):['"+o+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){CKEDITOR.instances[e.name]=e,e.on("focus",function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))}),e.on("blur",function(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(t,n){var r=e[t];return r?r:(r={name:t,source:n},CKEDITOR.fire("template",r),e[t]=new CKEDITOR.template(r.source))},CKEDITOR.getTemplate=function(t){return e[t]}}(),function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)},CKEDITOR.getCss=function(){return e.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(e,t){if(!CKEDITOR.env.isCompatible)return null;e=CKEDITOR.dom.element.get(e);if(e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var n=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),r=e.is("textarea")?e:null;return r?(n.setData(r.getValue(),null,!0),e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!n.readOnly+'" class="cke_textarea_inline">'+r.getValue()+"</div>",CKEDITOR.document),e.insertAfter(r),r.hide(),r.$.form&&n._attachToForm()):n.setData(e.getHtml(),null,!0),n.on("loaded",function(){n.fire("uiReady"),n.editable(e),n.container=e,n.setData(n.getData(1)),n.resetDirty(),n.fire("contentDom"),n.mode="wysiwyg",n.fire("mode"),n.status="ready",n.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,n)},null,null,1e4),n.on("destroy",function(){r&&(n.container.clearCustomData(),n.container.remove(),r.show()),n.element.clearCustomData(),delete n.element}),n},CKEDITOR.inlineAll=function(){var e,t,n;for(n in CKEDITOR.dtd.$editable)for(var r=CKEDITOR.document.getElementsByTag(n),i=0,s=r.count();i<s;i++)e=r.getItem(i),e.getAttribute("contenteditable")=="true"&&(t={element:e,config:{}},CKEDITOR.fire("inline",t)!==!1&&CKEDITOR.inline(e,t.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function e(e,r,i,s){if(!CKEDITOR.env.isCompatible)return null;e=CKEDITOR.dom.element.get(e);if(e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var o=new CKEDITOR.editor(r,e,s);return s==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle("visibility","hidden"),o._.required=e.hasAttribute("required"),e.removeAttribute("required")),i&&o.setData(i,null,!0),o.on("loaded",function(){n(o),s==CKEDITOR.ELEMENT_MODE_REPLACE&&o.config.autoUpdateElement&&e.$.form&&o._attachToForm(),o.setMode(o.config.startupMode,function(){o.resetDirty(),o.status="ready",o.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,o)})}),o.on("destroy",t),o}function t(){var e=this.container,t=this.element;e&&(e.clearCustomData(),e.remove()),t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)}function n(e){var t=e.name,n=e.element,i=e.elementMode,s=e.fire("uiSpace",{space:"top",html:""}).html,o=e.fire("uiSpace",{space:"bottom",html:""}).html;r||(r=CKEDITOR.addTemplate("maincontainer",'<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>')),t=CKEDITOR.dom.element.createFromHtml(r.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:[e.lang.editor,e.name].join(", "),topHtml:s?'<span id="'+e.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+s+"</span>":"",contentId:e.ui.spaceId("contents"),bottomHtml:o?'<span id="'+e.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+o+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),i==CKEDITOR.ELEMENT_MODE_REPLACE?(n.hide(),t.insertAfter(n)):n.append(t),e.container=t,s&&e.ui.space("top").unselectable(),o&&e.ui.space("bottom").unselectable(),n=e.config.width,i=e.config.height,n&&t.setStyle("width",CKEDITOR.tools.cssLength(n)),i&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(i)),t.disableContextMenu(),CKEDITOR.env.webkit&&t.on("focus",function(){e.focus()}),e.fireOnce("uiReady")}CKEDITOR.replace=function(t,n){return e(t,n,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(t,n,r){return e(t,n,r,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var n=null,r=e[t];if(r.name||r.id){if(typeof arguments[0]=="string"){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(r.className))continue}else if(typeof arguments[0]=="function"){n={};if(arguments[0](r,n)===!1)continue}this.replace(r,n)}}},CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t},CKEDITOR.editor.prototype.setMode=function(e,t){var n=this,r=this._.modes;if(e!=n.mode&&!!r&&!!r[e]){n.fire("beforeSetMode",e);if(n.mode){var i=n.checkDirty();n._.previousMode=n.mode,n.fire("beforeModeUnload"),n.editable(0),n.ui.space("contents").setHtml(""),n.mode=""}this._.modes[e](function(){n.mode=e,i!==void 0&&!i&&n.resetDirty(),setTimeout(function(){n.fire("mode"),t&&t.call(n)},0)})}},CKEDITOR.editor.prototype.resize=function(e,t,n,r){var i=this.container,s=this.ui.space("contents"),o=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement,r=r?i.getChild(1):i;r.setSize("width",e,!0),o&&(o.style.width="1%"),s.setStyle("height",Math.max(t-(n?0:(r.$.offsetHeight||0)-(s.$.clientHeight||0)),0)+"px"),o&&(o.style.width="100%"),this.fire("resize")},CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space("contents"):this.container};var r;CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function e(e){var n=e.editor,i=e.data.path,s=i.blockLimit,o=e.data.selection,u=o.getRanges()[0],a;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)if(o=t(o,i))o.appendBogus(),a=CKEDITOR.env.ie;if(n.config.autoParagraph!==!1&&n.activeEnterMode!=CKEDITOR.ENTER_BR&&n.editable().equals(s)&&!i.block&&u.collapsed&&!u.getCommonAncestor().isReadOnly()){i=u.clone(),i.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),s=new CKEDITOR.dom.walker(i),s.guard=function(e){return!r(e)||e.type==CKEDITOR.NODE_COMMENT||e.isReadOnly()};if(!s.checkForward()||i.checkStartOfBlock()&&i.checkEndOfBlock())n=u.fixBlock(!0,n.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(n=n.getFirst(r))&&n.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(n.getText()).match(/^(?:&nbsp;|\xa0)$/)&&n.remove(),a=1,e.cancel()}a&&u.select()}function t(e,t){if(e.isFake)return 0;var n=t.block||t.blockLimit,i=n&&n.getLast(r);if(n&&n.isBlockBoundary()&&(!i||i.type!=CKEDITOR.NODE_ELEMENT||!i.isBlockBoundary())&&!n.is("pre")&&!n.getBogus())return n}function n(e){var t=e.data.getTarget();t.is("input")&&(t=t.getAttribute("type"),(t=="submit"||t=="reset")&&e.data.preventDefault())}function r(e){return l(e)&&c(e)}function i(e,t){return function(n){var r=CKEDITOR.dom.element.get(n.data.$.toElement||n.data.$.fromElement||n.data.$.relatedTarget);(!r||!t.equals(r)&&!t.contains(r))&&e.call(this,n)}}function s(e){var t,n=e.getRanges()[0],i=e.root,s={table:1,ul:1,ol:1,dl:1};if(n.startPath().contains(s)){var e=function(e){return function(n,i){i&&n.type==CKEDITOR.NODE_ELEMENT&&n.is(s)&&(t=n);if(!i&&r(n)&&(!e||!a(n)))return!1}},o=n.clone();o.collapse(1),o.setStartAt(i,CKEDITOR.POSITION_AFTER_START),i=new CKEDITOR.dom.walker(o),i.guard=e(),i.checkBackward();if(t)return o=n.clone(),o.collapse(),o.setEndAt(t,CKEDITOR.POSITION_AFTER_END),i=new CKEDITOR.dom.walker(o),i.guard=e(!0),t=!1,i.checkForward(),t}return null}function o(e){e.editor.focus(),e.editor.fire("saveSnapshot")}function u(e,t){var n=e.editor;!t&&n.getSelection().scrollIntoView(),setTimeout(function(){n.fire("saveSnapshot")},0)}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t),this.editor=e,this.hasFocus=!1,this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus){e=this.editor._.previousActive||this.getDocument().getActive();if(this.contains(e)){e.focus();return}}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(t){if(!CKEDITOR.env.ie)throw t}CKEDITOR.env.safari&&!this.isInline()&&(e=CKEDITOR.document.getActive(),e.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(e,t){var n=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e=e=="focus"?"focusin":"focusout",t=i(t,this),n[0]=e,n[1]=t),CKEDITOR.dom.element.prototype.on.apply(this,n)},attachListener:function(e,t,n,r,i,s){!this._.listeners&&(this._.listeners=[]);var o=Array.prototype.slice.call(arguments,1),o=e.on.apply(e,o);return this._.listeners.push(o),o},clearListeners:function(){var e=this._.listeners;try{for(;e.length;)e.pop().removeListener()}catch(t){}},restoreAttrs:function(){var e=this._.attrChanges,t,n;for(n in e)e.hasOwnProperty(n)&&(t=e[n],t!==null?this.setAttribute(n,t):this.removeAttribute(n))},attachClass:function(e){var t=this.getCustomData("classes");this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData("classes",t),this.addClass(e))},changeAttr:function(e,t){var n=this.getAttribute(e);t!==n&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=n),this.setAttribute(e,t))},insertHtml:function(e,t){o(this),h(this,t||"html",e)},insertText:function(e){o(this);var t=this.editor,n=t.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:t.activeEnterMode,t=n==CKEDITOR.ENTER_BR,r=CKEDITOR.tools,e=r.htmlEncode(e.replace(/\r\n/g,"\n")),e=e.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),n=n==CKEDITOR.ENTER_P?"p":"div";if(!t){var i=/\n{2}/g;if(i.test(e))var s="<"+n+">",u="</"+n+">",e=s+e.replace(i,function(){return u+s})+u}e=e.replace(/\n/g,"<br>"),t||(e=e.replace(RegExp("<br>(?=</"+n+">)"),function(e){return r.repeat(e,2)})),e=e.replace(/^ | $/g,"&nbsp;"),e=e.replace(/(>|\s) /g,function(e,t){return t+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;"),h(this,"text",e)},insertElement:function(e,t){t?this.insertElementIntoRange(e,t):this.insertElementIntoSelection(e)},insertElementIntoRange:function(e,t){var n=this.editor,r=n.config.enterMode,i=e.getName(),s=CKEDITOR.dtd.$block[i];if(t.checkReadOnly())return!1;t.deleteContents(1),t.startContainer.type==CKEDITOR.NODE_ELEMENT&&t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&p(t);var o,u;if(s)for(;(o=t.getCommonAncestor(0,1))&&(u=CKEDITOR.dtd[o.getName()])&&(!u||!u[i]);)o.getName()in CKEDITOR.dtd.span?t.splitElement(o):t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(o),t.collapse(!0),o.remove()):t.splitBlock(r==CKEDITOR.ENTER_DIV?"div":"p",n.editable());return t.insertNode(e),!0},insertElementIntoSelection:function(e){var t=this.editor,n=t.activeEnterMode,t=t.getSelection(),i=t.getRanges()[0],s=e.getName(),s=CKEDITOR.dtd.$block[s];o(this),this.insertElementIntoRange(e,i)&&(i.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),s&&((s=e.getNext(function(e){return r(e)&&!a(e)}))&&s.type==CKEDITOR.NODE_ELEMENT&&s.is(CKEDITOR.dtd.$block)?s.getDtd()["#"]?i.moveToElementEditStart(s):i.moveToElementEditEnd(e):!s&&n!=CKEDITOR.ENTER_BR&&(s=i.fixBlock(!0,n==CKEDITOR.ENTER_DIV?"div":"p"),i.moveToElementEditStart(s)))),t.selectRanges([i]),u(this,CKEDITOR.env.opera)},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e)),this.setHtml(e),this.editor.fire("dataReady")},getData:function(e){var t=this.getHtml();return e||(t=this.editor.dataProcessor.toDataFormat(t)),t},setReadOnly:function(e){this.setAttribute("contenteditable",!e)},detach:function(){this.removeClass("cke_editable");var e=this.editor;this._.detach(),delete e.document,delete e.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},setup:function(){var e=this.editor;this.attachListener(e,"beforeGetData",function(){var t=this.getData();this.is("textarea")||e.config.ignoreEmptyParagraph!==!1&&(t=t.replace(f,function(e,t){return t})),e.setData(t,null,1)},this),this.attachListener(e,"getSnapshot",function(e){e.data=this.getData(1)},this),this.attachListener(e,"afterSetData",function(){this.setData(e.getData(1))},this),this.attachListener(e,"loadSnapshot",function(e){this.setData(e.data,1)},this),this.attachListener(e,"beforeFocus",function(){var t=e.getSelection();(t=t&&t.getNative())&&t.type=="Control"||this.focus()},this),this.attachListener(e,"insertHtml",function(e){this.insertHtml(e.data.dataValue,e.data.mode)},this),this.attachListener(e,"insertElement",function(e){this.insertElement(e.data)},this),this.attachListener(e,"insertText",function(e){this.insertText(e.data)},this),this.setReadOnly(e.readOnly),this.attachClass("cke_editable"),this.attachClass(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||e.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":""),this.attachClass("cke_contents_"+e.config.contentsLangDirection),e.keystrokeHandler.blockedKeystrokes[8]=+e.readOnly,e.keystrokeHandler.attach(this),this.on("blur",function(e){CKEDITOR.env.opera&&CKEDITOR.document.getActive().equals(this.isInline()?this:this.getWindow().getFrame())?e.cancel():this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),e.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,e.once("contentDom",function(){e.focusManager.focus()})),this.isInline()&&this.changeAttr("tabindex",e.tabIndex);if(!this.is("textarea")){e.document=this.getDocument(),e.window=this.getWindow();var t=e.document;this.changeAttr("spellcheck",!e.config.disableNativeSpellChecker);var i=e.config.contentsLangDirection;this.getDirection(1)!=i&&this.changeAttr("dir",i);var o=CKEDITOR.getCss();o&&(i=t.getHead(),i.getCustomData("stylesheet")||(o=t.appendStyleText(o),o=new CKEDITOR.dom.element(o.ownerNode||o.owningElement),i.setCustomData("stylesheet",o),o.data("cke-temp",1))),i=t.getCustomData("stylesheet_ref")||0,t.setCustomData("stylesheet_ref",i+1),this.setCustomData("cke_includeReadonly",!e.config.disableReadonlyStyling),this.attachListener(this,"click",function(e){var e=e.data,t=(new CKEDITOR.dom.elementPath(e.getTarget(),this)).contains("a");t&&e.$.button!=2&&t.isReadOnly()&&e.preventDefault()});var u={8:1,46:1};this.attachListener(e,"key",function(t){if(e.readOnly)return!0;var n=t.data.keyCode,r;if(n in u){var t=e.getSelection(),i,o=t.getRanges()[0],a=o.startPath(),f,c,h,n=n==8;CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(i=t.getSelectedElement())||(i=s(t))?(e.fire("saveSnapshot"),o.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i.remove(),o.select(),e.fire("saveSnapshot"),r=1):o.collapsed&&((f=a.block)&&(h=f[n?"getPrevious":"getNext"](l))&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("table")&&o[n?"checkStartOfBlock":"checkEndOfBlock"]()?(e.fire("saveSnapshot"),o[n?"checkEndOfBlock":"checkStartOfBlock"]()&&f.remove(),o["moveToElementEdit"+(n?"End":"Start")](h),o.select(),e.fire("saveSnapshot"),r=1):a.blockLimit&&a.blockLimit.is("td")&&(c=a.blockLimit.getAscendant("table"))&&o.checkBoundaryOfElement(c,n?CKEDITOR.START:CKEDITOR.END)&&(h=c[n?"getPrevious":"getNext"](l))?(e.fire("saveSnapshot"),o["moveToElementEdit"+(n?"End":"Start")](h),o.checkStartOfBlock()&&o.checkEndOfBlock()?h.remove():o.select(),e.fire("saveSnapshot"),r=1):(c=a.contains(["td","th","caption"]))&&o.checkBoundaryOfElement(c,n?CKEDITOR.START:CKEDITOR.END)&&(r=1))}return!r}),e.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(t){t.data.getKeystroke()in u&&!this.getFirst(r)&&(this.appendBogus(),t=e.createRange(),t.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())}),this.attachListener(this,"dblclick",function(t){if(e.readOnly)return!1;t={element:t.data.getTarget()},e.fire("doubleclick",t)}),CKEDITOR.env.ie&&this.attachListener(this,"click",n),!CKEDITOR.env.ie&&!CKEDITOR.env.opera&&this.attachListener(this,"mousedown",function(t){var n=t.data.getTarget();n.is("img","hr","input","textarea","select")&&(e.getSelection().selectElement(n),n.is("input","textarea","select")&&t.data.preventDefault())}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(t){if(t.data.$.button==2){t=t.data.getTarget();if(!t.getOuterHtml().replace(f,"")){var n=e.createRange();n.moveToElementEditStart(t),n.select(!0)}}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(e){e.data.getTarget().is("input","select")&&e.data.preventDefault()}),this.attachListener(this,"mouseup",function(e){e.data.getTarget().is("input","textarea")&&e.data.preventDefault()}))}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var e;if(e=this.removeCustomData("classes"))for(;e.length;)this.removeClass(e.pop());if(!this.is("textarea")){e=this.getDocument();var t=e.getHead();if(t.getCustomData("stylesheet")){var n=e.getCustomData("stylesheet_ref");--n?e.setCustomData("stylesheet_ref",n):(e.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;return t&&e?0:(arguments.length&&(t=this._.editable=e?e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),null)),t)};var a=CKEDITOR.dom.walker.bogus(),f=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,l=CKEDITOR.dom.walker.whitespaces(!0),c=CKEDITOR.dom.walker.bookmark(!1,!0);CKEDITOR.on("instanceLoaded",function(t){var n=t.editor;n.on("insertElement",function(e){e=e.data,e.type==CKEDITOR.NODE_ELEMENT&&(e.is("input")||e.is("textarea"))&&(e.getAttribute("contentEditable")!="false"&&e.data("cke-editable",e.hasAttribute("contenteditable")?"true":"1"),e.setAttribute("contentEditable",!1))}),n.on("selectionChange",function(t){if(!n.readOnly){var r=n.getSelection();r&&!r.isLocked&&(r=n.checkDirty(),n.fire("lockSnapshot"),e(t),n.fire("unlockSnapshot"),!r&&n.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(e){var t=e.editor;t.on("mode",function(){var e=t.editable();if(e&&e.isInline()){var n=t.title;e.changeAttr("role","textbox"),e.changeAttr("aria-label",n),n&&e.changeAttr("title",n);if(n=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents")){var r=CKEDITOR.tools.getNextId(),i=CKEDITOR.dom.element.createFromHtml('<span id="'+r+'" class="cke_voice_label">'+this.lang.common.editorHelp+"</span>");n.append(i),e.changeAttr("aria-describedby",r)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var h=function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT}function t(n,r){var i,s,o,u,f=[],l=r.range.startContainer;i=r.range.startPath();for(var l=a[l.getName()],c=0,h=n.getChildren(),p=h.count(),d=-1,v=-1,m=0,g=i.contains(a.$list);c<p;++c)i=h.getItem(c),e(i)?(o=i.getName(),g&&o in CKEDITOR.dtd.$list?f=f.concat(t(i,r)):(u=!!l[o],o=="br"&&i.data("cke-eol")&&(!c||c==p-1)&&(m=(s=c?f[c-1].node:h.getItem(c+1))&&(!e(s)||!s.is("br")),s=s&&e(s)&&a.$block[s.getName()]),d==-1&&!u&&(d=c),u||(v=c),f.push({isElement:1,isLineBreak:m,isBlock:i.isBlockBoundary(),hasBlockSibling:s,node:i,name:o,allowed:u}),s=m=0)):f.push({isElement:0,node:i,allowed:1});return d>-1&&(f[d].firstNotAllowed=1),v>-1&&(f[v].lastNotAllowed=1),f}function n(t,r){var i=[],s=t.getChildren(),o=s.count(),u,f=0,l=a[r],c=!t.is(a.$inline)||t.is("br");for(c&&i.push(" ");f<o;f++)u=s.getItem(f),e(u)&&!u.is(l)?i=i.concat(n(u,r)):i.push(u);return c&&i.push(" "),i}function i(t){return t&&e(t)&&(t.is(a.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function s(t,n,r,i){var o=t.clone(),u,a;o.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),(u=(new CKEDITOR.dom.walker(o)).next())&&e(u)&&f[u.getName()]&&(a=u.getPrevious())&&e(a)&&!a.getParent().equals(t.startContainer)&&r.contains(a)&&i.contains(u)&&u.isIdentical(a)&&(u.moveChildren(a),u.remove(),s(t,n,r,i))}function o(t,n){function r(t,n){if(n.isBlock&&n.isElement&&!n.node.is("br")&&e(t)&&t.is("br"))return t.remove(),1}var i=n.endContainer.getChild(n.endOffset),s=n.endContainer.getChild(n.endOffset-1);i&&r(i,t[t.length-1]),s&&r(s,t[0])&&(n.setEnd(n.endContainer,n.endOffset-1),n.collapse())}var a=CKEDITOR.dtd,f={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},l={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},c=CKEDITOR.tools.extend({},a.$inline);return delete c.br,function(f,h,p){var v=f.editor;f.getDocument();var m=v.getSelection().getRanges()[0],y=!1;h=="unfiltered_html"&&(h="html",y=!0);if(!m.checkReadOnly()){var w=(new CKEDITOR.dom.elementPath(m.startContainer,m.root)).blockLimit||m.root,h={type:h,dontFilter:y,editable:f,editor:v,range:m,blockLimit:w,mergeCandidates:[],zombies:[]},v=h.range,y=h.mergeCandidates,E,S,x,T;h.type=="text"&&v.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(E=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",v.document),v.insertNode(E),v.setStartAfter(E)),S=new CKEDITOR.dom.elementPath(v.startContainer),h.endPath=x=new CKEDITOR.dom.elementPath(v.endContainer);if(!v.collapsed){var w=x.block||x.blockLimit,N=v.getCommonAncestor();w&&!w.equals(N)&&!w.contains(N)&&v.checkEndOfBlock()&&h.zombies.push(w),v.deleteContents()}for(;(T=e(v.startContainer)&&v.startContainer.getChild(v.startOffset-1))&&e(T)&&T.isBlockBoundary()&&S.contains(T);)v.moveToPosition(T,CKEDITOR.POSITION_BEFORE_END);s(v,h.blockLimit,S,x),E&&(v.setEndBefore(E),v.collapse(),E.remove()),E=v.startPath();if(w=E.contains(i,!1,1))v.splitElement(w),h.inlineStylesRoot=w,h.inlineStylesPeak=E.lastElement;E=v.createBookmark(),(w=E.startNode.getPrevious(r))&&e(w)&&i(w)&&y.push(w),(w=E.startNode.getNext(r))&&e(w)&&i(w)&&y.push(w);for(w=E.startNode;(w=w.getParent())&&i(w);)y.push(w);v.moveToBookmark(E);if(E=p){E=h.range;if(h.type=="text"&&h.inlineStylesRoot){T=h.inlineStylesPeak,v=T.getDocument().createText("{cke-peak}");for(y=h.inlineStylesRoot.getParent();!T.equals(y);)v=v.appendTo(T.clone()),T=T.getParent();p=v.getOuterHtml().split("{cke-peak}").join(p)}T=h.blockLimit.getName();if(/^\s+|\s+$/.test(p)&&"span"in CKEDITOR.dtd[T])var C='<span data-cke-marker="1">&nbsp;</span>',p=C+p+C;p=h.editor.dataProcessor.toHtml(p,{context:null,fixForBody:!1,dontFilter:h.dontFilter,filter:h.editor.activeFilter,enterMode:h.editor.activeEnterMode}),T=E.document.createElement("body"),T.setHtml(p),C&&(T.getFirst().remove(),T.getLast().remove());if((C=E.startPath().block)&&(C.getChildCount()!=1||!C.getBogus()))e:{var k;if(T.getChildCount()==1&&e(k=T.getFirst())&&k.is(l)){C=k.getElementsByTag("*"),E=0;for(y=C.count();E<y;E++){v=C.getItem(E);if(!v.is(c))break e}k.moveChildren(k.getParent(1)),k.remove()}}h.dataWrapper=T,E=p}if(E){k=h.range;var C=k.document,L,p=h.blockLimit;E=0;var A;T=[];var O,M,y=v=0,_,D;S=k.startContainer;var w=h.endPath.elements[0],P;x=w.getPosition(S),N=!!w.getCommonAncestor(S)&&x!=CKEDITOR.POSITION_IDENTICAL&&!(x&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),S=t(h.dataWrapper,h);for(o(S,k);E<S.length;E++){x=S[E];if(L=x.isLineBreak){L=k,_=p;var H=void 0,B=void 0;x.hasBlockSibling?L=1:(H=L.startContainer.getAscendant(a.$block,1),!H||!H.is({div:1,p:1})?L=0:(B=H.getPosition(_),B==CKEDITOR.POSITION_IDENTICAL||B==CKEDITOR.POSITION_CONTAINS?L=0:(_=L.splitElement(H),L.moveToPosition(_,CKEDITOR.POSITION_AFTER_START),L=1)))}if(L)y=E>0;else{L=k.startPath(),!x.isBlock&&h.editor.config.autoParagraph!==!1&&h.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&h.editor.editable().equals(L.blockLimit)&&!L.block&&(M=h.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&h.editor.config.autoParagraph!==!1?h.editor.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1)&&(M=C.createElement(M),M.appendBogus(),k.insertNode(M),CKEDITOR.env.needsBrFiller&&(A=M.getBogus())&&A.remove(),k.moveToPosition(M,CKEDITOR.POSITION_BEFORE_END));if((L=k.startPath().block)&&!L.equals(O)){if(A=L.getBogus())A.remove(),T.push(L);O=L}x.firstNotAllowed&&(v=1);if(v&&x.isElement){L=k.startContainer;for(_=null;L&&!a[L.getName()][x.name];){if(L.equals(p)){L=null;break}_=L,L=L.getParent()}if(L)_&&(D=k.splitElement(_),h.zombies.push(D),h.zombies.push(_));else{_=p.getName(),P=!E,L=E==S.length-1,_=n(x.node,_);for(var H=[],B=_.length,j=0,F=void 0,I=0,q=-1;j<B;j++)F=_[j],F==" "?(!I&&(!P||j)&&(H.push(new CKEDITOR.dom.text(" ")),q=H.length),I=1):(H.push(F),I=0);L&&q==H.length&&H.pop(),P=H}}if(P){for(;L=P.pop();)k.insertNode(L);P=0}else k.insertNode(x.node);x.lastNotAllowed&&E<S.length-1&&((D=N?w:D)&&k.setEndAt(D,CKEDITOR.POSITION_AFTER_START),v=0),k.collapse()}}h.dontMoveCaret=y,h.bogusNeededBlocks=T}A=h.range;var R;D=h.bogusNeededBlocks;for(P=A.createBookmark();O=h.zombies.pop();)O.getParent()&&(M=A.clone(),M.moveToElementEditStart(O),M.removeEmptyBlocksAtEnd());if(D)for(;O=D.pop();)CKEDITOR.env.needsBrFiller?O.appendBogus():O.append(A.document.createText(" "));for(;O=h.mergeCandidates.pop();)O.mergeSiblings();A.moveToBookmark(P);if(!h.dontMoveCaret){for(O=e(A.startContainer)&&A.startContainer.getChild(A.startOffset-1);O&&e(O)&&!O.is(a.$empty);){if(O.isBlockBoundary())A.moveToPosition(O,CKEDITOR.POSITION_BEFORE_END);else{if(i(O)&&O.getHtml().match(/(\s|&nbsp;)$/g)){R=null;break}R=A.clone(),R.moveToPosition(O,CKEDITOR.POSITION_BEFORE_END)}O=O.getLast(r)}R&&A.moveToRange(R)}m.select(),u(f)}}}(),p=function(){function e(e){return e=new CKEDITOR.dom.walker(e),e.guard=function(e,t){if(t)return!1;if(e.type==CKEDITOR.NODE_ELEMENT)return e.is(CKEDITOR.dtd.$tableContent)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT},e}function t(e,t,n){return t=e.getDocument().createElement(t),e.append(t,n),t}function n(e){var t=e.count(),n;for(t;t-->0;)n=e.getItem(t),CKEDITOR.tools.trim(n.getHtml())||(n.appendBogus(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&n.getChildCount()&&n.getFirst().remove())}return function(r){var i=r.startContainer,s=i.getAscendant("table",1),o=!1;n(s.getElementsByTag("td")),n(s.getElementsByTag("th")),s=r.clone(),s.setStart(i,0),s=e(s).lastBackward(),s||(s=r.clone(),s.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),s=e(s).lastForward(),o=!0),s||(s=i),s.is("table")?(r.setStartAt(s,CKEDITOR.POSITION_BEFORE_START),r.collapse(!0),s.remove()):(s.is({tbody:1,thead:1,tfoot:1})&&(s=t(s,"tr",o)),s.is("tr")&&(s=t(s,s.getParent().is("thead")?"th":"td",o)),(i=s.getBogus())&&i.remove(),r.moveToPosition(s,o?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}()}(),function(){function e(){var e=this._.fakeSelection,t;if(e){t=this.getSelection(1);if(!t||!t.isHidden())e.reset(),e=0}if(!e){e=t||this.getSelection(1);if(!e||e.getType()==CKEDITOR.SELECTION_NONE)return}this.fire("selectionCheck",e),t=this.elementPath(),t.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=t,this.fire("selectionChange",{selection:e,path:t}))}function t(){h=!0,c||(n.call(this),c=CKEDITOR.tools.setTimeout(n,200,this))}function n(){c=null,h&&(CKEDITOR.tools.setTimeout(e,0,this),h=!1)}function r(e){function t(t,n){return!t||t.type==CKEDITOR.NODE_TEXT?!1:e.clone()["moveToElementEdit"+(n?"End":"Start")](t)}if(e.root instanceof CKEDITOR.editable){var n=e.startContainer,r=e.getPreviousNode(p,null,n),i=e.getNextNode(p,null,n);return t(r)||t(i,1)||!r&&!i&&(n.type!=CKEDITOR.NODE_ELEMENT||!n.isBlockBoundary()||!n.getBogus())?!0:!1}return!1}function i(e){return e.getCustomData("cke-fillingChar")}function s(e,t){var n=e&&e.removeCustomData("cke-fillingChar");if(n){if(t!==!1){var r,i=e.getDocument().getSelection().getNative(),s=i&&i.type!="None"&&i.getRangeAt(0);if(n.getLength()>1&&s&&s.intersectsNode(n.$)){r=[i.anchorOffset,i.focusOffset],s=i.focusNode==n.$&&i.focusOffset>0,i.anchorNode==n.$&&i.anchorOffset>0&&r[0]--,s&&r[1]--;var u;s=i,s.isCollapsed||(u=s.getRangeAt(0),u.setStart(s.anchorNode,s.anchorOffset),u.setEnd(s.focusNode,s.focusOffset),u=u.collapsed),u&&r.unshift(r.pop())}}n.setText(o(n.getText())),r&&(n=i.getRangeAt(0),n.setStart(n.startContainer,r[0]),n.setEnd(n.startContainer,r[1]),i.removeAllRanges(),i.addRange(n))}}function o(e){return e.replace(/\u200B( )?/g,function(e){return e[1]?" ":""})}function u(e,t,n){var r=e.on("focus",function(e){e.cancel()},null,null,-100);if(CKEDITOR.env.ie)var i=e.getDocument().on("selectionchange",function(e){e.cancel()},null,null,-100);else{var s=new CKEDITOR.dom.range(e);s.moveToElementEditStart(e);var o=e.getDocument().$.createRange();o.setStart(s.startContainer.$,s.startOffset),o.collapse(1),t.removeAllRanges(),t.addRange(o)}n&&e.focus(),r.removeListener(),i&&i.removeListener()}function a(e){var t=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',e.document);e.fire("lockSnapshot"),e.editable().append(t);var n=e.getSelection(1),r=e.createRange(),i=n.root.on("selectionchange",function(e){e.cancel()},null,null,0);r.setStartAt(t,CKEDITOR.POSITION_AFTER_START),r.setEndAt(t,CKEDITOR.POSITION_BEFORE_END),n.selectRanges([r]),i.removeListener(),e.fire("unlockSnapshot"),e._.hiddenSelectionContainer=t}function f(e){var t={37:1,39:1,8:1,46:1};return function(n){var r=n.data.getKeystroke();if(t[r]){var i=e.getSelection().getRanges(),s=i[0];i.length==1&&s.collapsed&&(r=s[r<38?"getPreviousEditableNode":"getNextEditableNode"]())&&r.type==CKEDITOR.NODE_ELEMENT&&r.getAttribute("contenteditable")=="false"&&(e.getSelection().fake(r),n.data.preventDefault(),n.cancel())}}}function l(e){for(var t=0;t<e.length;t++){var n=e[t];n.getCommonAncestor().isReadOnly()&&e.splice(t,1);if(!n.collapsed){if(n.startContainer.isReadOnly())for(var r=n.startContainer,i;r;){if((i=r.type==CKEDITOR.NODE_ELEMENT)&&r.is("body")||!r.isReadOnly())break;i&&r.getAttribute("contentEditable")=="false"&&n.setStartAfter(r),r=r.getParent()}r=n.startContainer,i=n.endContainer;var s=n.startOffset,o=n.endOffset,u=n.clone();r&&r.type==CKEDITOR.NODE_TEXT&&(s>=r.getLength()?u.setStartAfter(r):u.setStartBefore(r)),i&&i.type==CKEDITOR.NODE_TEXT&&(o?u.setEndAfter(i):u.setEndBefore(i)),r=new CKEDITOR.dom.walker(u),r.evaluator=function(r){if(r.type==CKEDITOR.NODE_ELEMENT&&r.isReadOnly()){var i=n.clone();return n.setEndBefore(r),n.collapsed&&e.splice(t--,1),r.getPosition(u.endContainer)&CKEDITOR.POSITION_CONTAINS||(i.setStartAfter(r),i.collapsed||e.splice(t+1,0,i)),!0}return!1},r.next()}}return e}var c,h,p=CKEDITOR.dom.walker.invisible(1),d=function(){function e(e){return function(t){var n=t.editor.createRange();return n.moveToClosestEditablePosition(t.selected,e)&&t.editor.getSelection().selectRanges([n]),!1}}function t(e){return function(t){var n=t.editor,r=n.createRange(),i;return(i=r.moveToClosestEditablePosition(t.selected,e))||(i=r.moveToClosestEditablePosition(t.selected,!e)),i&&n.getSelection().selectRanges([r]),n.fire("saveSnapshot"),t.selected.remove(),i||(r.moveToElementEditablePosition(n.editable()),n.getSelection().selectRanges([r])),n.fire("saveSnapshot"),!1}}var n=e(),r=e(1);return{37:n,38:n,39:r,40:r,8:t(),46:t(1)}}();CKEDITOR.on("instanceCreated",function(n){function r(){var e=i.getSelection();e&&e.removeAllRanges()}var i=n.editor;i.on("contentDom",function(){var n=i.document,r=CKEDITOR.document,o=i.editable(),u=n.getBody(),a=n.getDocumentElement(),l=o.isInline(),c,h;CKEDITOR.env.gecko&&o.attachListener(o,"focus",function(e){e.removeListener(),c!==0&&(e=i.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==o.$&&(e=i.createRange(),e.moveToElementEditStart(o),e.select())},null,null,-2),o.attachListener(o,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){c&&CKEDITOR.env.webkit&&(c=i._.previousActive&&i._.previousActive.equals(n.getActive())),i.unlockSelection(c),c=0},null,null,-1),o.attachListener(o,"mousedown",function(){c=0});if(CKEDITOR.env.ie||CKEDITOR.env.opera||l){var p=function(){h=new CKEDITOR.dom.selection(i.getSelection()),h.lock()};v?o.attachListener(o,"beforedeactivate",p,null,null,-1):o.attachListener(i,"selectionCheck",p,null,null,-1),o.attachListener(o,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){i.lockSelection(h),c=1},null,null,-1),o.attachListener(o,"mousedown",function(){c=0})}if(CKEDITOR.env.ie&&!l){var d;o.attachListener(o,"mousedown",function(e){if(e.data.$.button==2){e=i.document.getSelection();if(!e||e.getType()==CKEDITOR.SELECTION_NONE)d=i.window.getScrollPosition()}}),o.attachListener(o,"mouseup",function(e){e.data.$.button==2&&d&&(i.document.$.documentElement.scrollLeft=d.x,i.document.$.documentElement.scrollTop=d.y),d=null});if(n.$.compatMode!="BackCompat"){(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&a.on("mousedown",function(e){function t(e){e=e.data.$;if(i){var t=u.$.createTextRange();try{t.moveToPoint(e.x,e.y)}catch(n){}i.setEndPoint(o.compareEndPoints("StartToStart",t)<0?"EndToEnd":"StartToStart",t),i.select()}}function n(){a.removeListener("mousemove",t),r.removeListener("mouseup",n),a.removeListener("mouseup",n),i.select()}e=e.data;if(e.getTarget().is("html")&&e.$.y<a.$.clientHeight&&e.$.x<a.$.clientWidth){var i=u.$.createTextRange();try{i.moveToPoint(e.$.x,e.$.y)}catch(s){}var o=i.duplicate();a.on("mousemove",t),r.on("mouseup",n),a.on("mouseup",n)}});if(CKEDITOR.env.version>7&&CKEDITOR.env.version<11){a.on("mousedown",function(e){e.data.getTarget().is("html")&&(r.on("mouseup",m),a.on("mouseup",m))});var m=function(){r.removeListener("mouseup",m),a.removeListener("mouseup",m);var e=CKEDITOR.document.$.selection,t=e.createRange();e.type!="None"&&t.parentElement().ownerDocument==n.$&&t.select()}}}}o.attachListener(o,"selectionchange",e,i),o.attachListener(o,"keyup",t,i),o.attachListener(o,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){i.forceNextSelectionCheck(),i.selectionChange(1)});if(l?CKEDITOR.env.webkit||CKEDITOR.env.gecko:CKEDITOR.env.opera){var g;o.attachListener(o,"mousedown",function(){g=1}),o.attachListener(n.getDocumentElement(),"mouseup",function(){g&&t.call(i),g=0})}else o.attachListener(CKEDITOR.env.ie?o:n.getDocumentElement(),"mouseup",t,i);CKEDITOR.env.webkit&&o.attachListener(n,"keydown",function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:s(o)}},null,null,-1),o.attachListener(o,"keydown",f(i),null,null,-1)}),i.on("contentDomUnload",i.forceNextSelectionCheck,i),i.on("dataReady",function(){delete i._.fakeSelection,delete i._.hiddenSelectionContainer,i.selectionChange(1)}),i.on("loadSnapshot",function(){var e=i.editable().getLast(function(e){return e.type==CKEDITOR.NODE_ELEMENT});e&&e.hasAttribute("data-cke-hidden-sel")&&e.remove()},null,null,100),CKEDITOR.env.ie9Compat&&i.on("beforeDestroy",r,null,null,9),CKEDITOR.env.webkit&&i.on("setData",r),i.on("contentDomUnload",function(){i.unlockSelection()}),i.on("key",function(e){if(i.mode=="wysiwyg"){var t=i.getSelection();if(t.isFake){var n=d[e.data.keyCode];if(n)return n({editor:i,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}})}),CKEDITOR.on("instanceReady",function(e){var t=e.editor;if(CKEDITOR.env.webkit){t.on("selectionChange",function(){var e=t.editable(),n=i(e);n&&(n.getCustomData("ready")?s(e):n.setCustomData("ready",1))},null,null,-1),t.on("beforeSetMode",function(){s(t.editable())},null,null,-1);var n,r,e=function(){var e=t.editable();if(e)if(e=i(e)){var s=t.document.$.defaultView.getSelection();s.type=="Caret"&&s.anchorNode==e.$&&(r=1),n=e.getText(),e.setText(o(n))}},u=function(){var e=t.editable();e&&(e=i(e))&&(e.setText(n),r&&(t.document.$.defaultView.getSelection().setPosition(e.$,e.getLength()),r=0))};t.on("beforeUndoImage",e),t.on("afterUndoImage",u),t.on("beforeGetData",e,null,null,0),t.on("getData",u)}}),CKEDITOR.editor.prototype.selectionChange=function(n){(n?e:t).call(this)},CKEDITOR.editor.prototype.getSelection=function(e){return(this._.savedSelection||this._.fakeSelection)&&!e?this._.savedSelection||this._.fakeSelection:(e=this.editable())&&this.mode=="wysiwyg"?new CKEDITOR.dom.selection(e):null},CKEDITOR.editor.prototype.lockSelection=function(e){return e=e||this.getSelection(1),e.getType()!=CKEDITOR.SELECTION_NONE?(!e.isLocked&&e.lock(),this._.savedSelection=e,!0):!1},CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return t?(t.unlock(e),delete this._.savedSelection,!0):!1},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return e.selectRanges([this]),e},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var v=typeof window.getSelection!="function",m=1;CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection)var t=e,e=e.root;var n=e instanceof CKEDITOR.dom.element;this.rev=t?t.rev:m++,this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument(),this.root=e=n?e:this.document.getBody(),this.isLocked=0,this._={cache:{}};if(t)return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this;t=v?this.document.$.selection:this.document.getWindow().$.getSelection();if(CKEDITOR.env.webkit)(t.type=="None"&&this.document.getActive().equals(e)||t.type=="Caret"&&t.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&u(e,t);else if(CKEDITOR.env.gecko)t&&this.document.getActive().equals(e)&&t.anchorNode&&t.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT&&u(e,t,!0);else if(CKEDITOR.env.ie){var r;try{r=this.document.getActive()}catch(i){}v?t.type=="None"&&r&&r.equals(this.document.getDocumentElement())&&u(e,null,!0):((t=t&&t.anchorNode)&&(t=new CKEDITOR.dom.node(t)),r&&r.equals(this.document.getDocumentElement())&&t&&(e.equals(t)||e.contains(t))&&u(e,null,!0))}r=this.getNative();var s,o;if(r)if(r.getRangeAt)s=(o=r.rangeCount&&r.getRangeAt(0))&&new CKEDITOR.dom.node(o.commonAncestorContainer);else{try{o=r.createRange()}catch(a){}s=o&&CKEDITOR.dom.element.get(o.item&&o.item(0)||o.parentElement())}if(!s||s.type!=CKEDITOR.NODE_ELEMENT&&s.type!=CKEDITOR.NODE_TEXT||!this.root.equals(s)&&!this.root.contains(s))this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList;return this};var g={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return this._.cache.nativeSel!==void 0?this._.cache.nativeSel:this._.cache.nativeSel=v?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:v?function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_NONE;try{var n=this.getNative(),r=n.type;r=="Text"&&(t=CKEDITOR.SELECTION_TEXT),r=="Control"&&(t=CKEDITOR.SELECTION_ELEMENT),n.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(i){}return e.type=t}:function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_TEXT,n=this.getNative();if(!n||!n.rangeCount)t=CKEDITOR.SELECTION_NONE;else if(n.rangeCount==1){var n=n.getRangeAt(0),r=n.startContainer;r==n.endContainer&&r.nodeType==1&&n.endOffset-n.startOffset==1&&g[r.childNodes[n.startOffset].nodeName.toLowerCase()]&&(t=CKEDITOR.SELECTION_ELEMENT)}return e.type=t},getRanges:function(){var e=v?function(){function e(e){return(new CKEDITOR.dom.node(e)).getIndex()}var t=function(t,n){t=t.duplicate(),t.collapse(n);var r=t.parentElement();if(!r.hasChildNodes())return{container:r,offset:0};for(var i=r.children,s,o,u=t.duplicate(),a=0,f=i.length-1,l=-1,c,h;a<=f;){l=Math.floor((a+f)/2),s=i[l],u.moveToElementText(s),c=u.compareEndPoints("StartToStart",t);if(c>0)f=l-1;else{if(!(c<0))return{container:r,offset:e(s)};a=l+1}}if(l==-1||l==i.length-1&&c<0){u.moveToElementText(r),u.setEndPoint("StartToStart",t),u=u.text.replace(/(\r\n|\r)/g,"\n").length,i=r.childNodes;if(!u)return s=i[i.length-1],s.nodeType!=CKEDITOR.NODE_TEXT?{container:r,offset:i.length}:{container:s,offset:s.nodeValue.length};for(r=i.length;u>0&&r>0;)o=i[--r],o.nodeType==CKEDITOR.NODE_TEXT&&(h=o,u-=o.nodeValue.length);return{container:h,offset:-u}}u.collapse(c>0?!0:!1),u.setEndPoint(c>0?"StartToStart":"EndToStart",t),u=u.text.replace(/(\r\n|\r)/g,"\n").length;if(!u)return{container:r,offset:e(s)+(c>0?0:1)};for(;u>0;)try{o=s[c>0?"previousSibling":"nextSibling"],o.nodeType==CKEDITOR.NODE_TEXT&&(u-=o.nodeValue.length,h=o),s=o}catch(p){return{container:r,offset:e(s)}}return{container:h,offset:c>0?-u:h.nodeValue.length+u}};return function(){var e=this.getNative(),n=e&&e.createRange(),r=this.getType();if(!e)return[];if(r==CKEDITOR.SELECTION_TEXT)return e=new CKEDITOR.dom.range(this.root),r=t(n,!0),e.setStart(new CKEDITOR.dom.node(r.container),r.offset),r=t(n),e.setEnd(new CKEDITOR.dom.node(r.container),r.offset),e.endContainer.getPosition(e.startContainer)&CKEDITOR.POSITION_PRECEDING&&e.endOffset<=e.startContainer.getIndex()&&e.collapse(),[e];if(r==CKEDITOR.SELECTION_ELEMENT){for(var r=[],i=0;i<n.length;i++){for(var s=n.item(i),o=s.parentNode,u=0,e=new CKEDITOR.dom.range(this.root);u<o.childNodes.length&&o.childNodes[u]!=s;u++);e.setStart(new CKEDITOR.dom.node(o),u),e.setEnd(new CKEDITOR.dom.node(o),u+1),r.push(e)}return r}return[]}}():function(){var e=[],t,n=this.getNative();if(!n)return e;for(var r=0;r<n.rangeCount;r++){var i=n.getRangeAt(r);t=new CKEDITOR.dom.range(this.root),t.setStart(new CKEDITOR.dom.node(i.startContainer),i.startOffset),t.setEnd(new CKEDITOR.dom.node(i.endContainer),i.endOffset),e.push(t)}return e};return function(t){var n=this._.cache,r=n.ranges;return r||(n.ranges=r=new CKEDITOR.dom.rangeList(e.call(this))),t?l(new CKEDITOR.dom.rangeList(r.slice())):r}}(),getStartElement:function(){var e=this._.cache;if(e.startElement!==void 0)return e.startElement;var t;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var n=this.getRanges()[0];if(n){if(n.collapsed)t=n.startContainer,t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());else{for(n.optimize();;){t=n.startContainer;if(n.startOffset!=(t.getChildCount?t.getChildCount():t.getLength())||!!t.isBlockBoundary())break;n.setStartAfter(t)}t=n.startContainer;if(t.type!=CKEDITOR.NODE_ELEMENT)return t.getParent();t=t.getChild(n.startOffset);if(!t||t.type!=CKEDITOR.NODE_ELEMENT)t=n.startContainer;else for(n=t.getFirst();n&&n.type==CKEDITOR.NODE_ELEMENT;)t=n,n=n.getFirst()}t=t.$}}return e.startElement=t?new CKEDITOR.dom.element(t):null},getSelectedElement:function(){var e=this._.cache;if(e.selectedElement!==void 0)return e.selectedElement;var t=this,n=CKEDITOR.tools.tryThese(function(){return t.getNative().createRange().item(0)},function(){for(var e=t.getRanges()[0].clone(),n,r,i=2;i&&(!(n=e.getEnclosedNode())||n.type!=CKEDITOR.NODE_ELEMENT||!g[n.getName()]||!(r=n));i--)e.shrink(CKEDITOR.SHRINK_ELEMENT);return r&&r.$});return e.selectedElement=n?new CKEDITOR.dom.element(n):null},getSelectedText:function(){var e=this._.cache;if(e.selectedText!==void 0)return e.selectedText;var t=this.getNative(),t=v?t.type=="Control"?"":t.createRange().text:t.toString();return e.selectedText=t},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var t=this.getSelectedElement(),n=!t&&this.getRanges(),r=this.isFake;this.isLocked=0,this.reset(),e&&(e=t||n[0]&&n[0].getCommonAncestor())&&e.getAscendant("body",1)&&(r?this.fake(t):t?this.selectElement(t):this.selectRanges(n))}},reset:function(){this._.cache={},this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection&&this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;t&&(e.fire("lockSnapshot"),t.remove(),e.fire("unlockSnapshot")),delete e._.hiddenSelectionContainer}this.rev=m++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e),t.setEndAfter(e),this.selectRanges([t])},selectRanges:function(e){var t=this.root.editor,t=t&&t._.hiddenSelectionContainer;this.reset();if(t)for(var t=this.root,n,i=0;i<e.length;++i)n=e[i],n.endContainer.equals(t)&&(n.endOffset=Math.min(n.endOffset,t.getChildCount()));if(e.length)if(this.isLocked){var o=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(e),this.lock(),!o.equals(this.root)&&o.focus()}else{var u;e:{var a,f;if(e.length==1&&!(f=e[0]).collapsed&&(u=f.getEnclosedNode())&&u.type==CKEDITOR.NODE_ELEMENT){f=f.clone(),f.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(a=f.getEnclosedNode())&&a.type==CKEDITOR.NODE_ELEMENT&&(u=a);if(u.getAttribute("contenteditable")=="false")break e}u=void 0}if(u)this.fake(u);else{if(v){f=CKEDITOR.dom.walker.whitespaces(!0),a=/\ufeff|\u00a0/,t={table:1,tbody:1,tr:1},e.length>1&&(u=e[e.length-1],e[0].setEnd(u.endContainer,u.endOffset)),u=e[0];var e=u.collapsed,l,c,h;if((n=u.getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in g&&(!n.is("a")||!n.getText()))try{h=n.$.createControlRange(),h.addElement(n.$),h.select();return}catch(p){}(u.startContainer.type==CKEDITOR.NODE_ELEMENT&&u.startContainer.getName()in t||u.endContainer.type==CKEDITOR.NODE_ELEMENT&&u.endContainer.getName()in t)&&u.shrink(CKEDITOR.NODE_ELEMENT,!0),h=u.createBookmark(),t=h.startNode,e||(o=h.endNode),h=u.document.$.body.createTextRange(),h.moveToElementText(t.$),h.moveStart("character",1),o?(a=u.document.$.body.createTextRange(),a.moveToElementText(o.$),h.setEndPoint("EndToEnd",a),h.moveEnd("character",-1)):(l=t.getNext(f),c=t.hasAscendant("pre"),l=!(l&&l.getText&&l.getText().match(a))&&(c||!t.hasPrevious()||t.getPrevious().is&&t.getPrevious().is("br")),c=u.document.createElement("span"),c.setHtml("&#65279;"),c.insertBefore(t),l&&u.document.createText("﻿").insertBefore(t)),u.setStartBefore(t),t.remove(),e?(l?(h.moveStart("character",-1),h.select(),u.document.$.selection.clear()):h.select(),u.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START),c.remove()):(u.setEndBefore(o),o.remove(),h.select())}else{o=this.getNative();if(!o)return;CKEDITOR.env.opera&&(h=this.document.$.createRange(),h.selectNodeContents(this.root.$),o.addRange(h)),this.removeAllRanges();for(h=0;h<e.length;h++){if(h<e.length-1){u=e[h],l=e[h+1],a=u.clone(),a.setStart(u.endContainer,u.endOffset),a.setEnd(l.startContainer,l.startOffset);if(!a.collapsed){a.shrink(CKEDITOR.NODE_ELEMENT,!0),c=a.getCommonAncestor(),a=a.getEnclosedNode();if(c.isReadOnly()||a&&a.isReadOnly()){l.setStart(u.startContainer,u.startOffset),e.splice(h--,1);continue}}}u=e[h],c=this.document.$.createRange(),l=u.startContainer;if(CKEDITOR.env.opera&&u.collapsed&&l.type==CKEDITOR.NODE_ELEMENT){a=l.getChild(u.startOffset-1),f=l.getChild(u.startOffset);if(!a&&!f&&l.is(CKEDITOR.dtd.$removeEmpty)||a&&a.type==CKEDITOR.NODE_ELEMENT||f&&f.type==CKEDITOR.NODE_ELEMENT)u.insertNode(this.document.createText("")),u.collapse(1)}u.collapsed&&CKEDITOR.env.webkit&&r(u)&&(l=this.root,s(l,!1),a=l.getDocument().createText("​"),l.setCustomData("cke-fillingChar",a),u.insertNode(a),(l=a.getNext())&&!a.getPrevious()&&l.type==CKEDITOR.NODE_ELEMENT&&l.getName()=="br"?(s(this.root),u.moveToPosition(l,CKEDITOR.POSITION_BEFORE_START)):u.moveToPosition(a,CKEDITOR.POSITION_AFTER_END)),c.setStart(u.startContainer.$,u.startOffset);try{c.setEnd(u.endContainer.$,u.endOffset)}catch(d){if(!(d.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0))throw d;u.collapse(1),c.setEnd(u.endContainer.$,u.endOffset)}o.addRange(c)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(e){var t=this.root.editor;this.reset(),a(t);var n=this._.cache,r=new CKEDITOR.dom.range(this.root);r.setStartBefore(e),r.setEndAfter(e),n.ranges=new CKEDITOR.dom.rangeList(r),n.selectedElement=n.startElement=e,n.type=CKEDITOR.SELECTION_ELEMENT,n.selectedText=n.nativeSel=null,this.isFake=1,this.rev=m++,t._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var e=this.getCommonAncestor();return e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!!e&&!!e.data("cke-hidden-sel")},createBookmarks:function(e){return e=this.getRanges().createBookmarks(e),this.isFake&&(e.isFake=1),e},createBookmarks2:function(e){return e=this.getRanges().createBookmarks2(e),this.isFake&&(e.isFake=1),e},selectBookmarks:function(e){for(var t=[],n=0;n<e.length;n++){var r=new CKEDITOR.dom.range(this.root);r.moveToBookmark(e[n]),t.push(r)}return e.isFake?this.fake(t[0].getEnclosedNode()):this.selectRanges(t),this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var e=this.getNative();try{e&&e[v?"empty":"removeAllRanges"]()}catch(t){}this.reset()}}}}(),"use strict",CKEDITOR.editor.prototype.attachStyleStateChange=function(e,t){var n=this._.styleStateChangeCallbacks;n||(n=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(e){for(var t=0;t<n.length;t++){var r=n[t],i=r.style.checkActive(e.data.path)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;r.fn.call(this,i)}})),n.push({style:e,fn:t})},CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function e(e,t){for(var n,r;e=e.getParent();){if(e.equals(t))break;if(e.getAttribute("data-nostyle"))n=e;else if(!r){var i=e.getAttribute("contentEditable");i=="false"?n=e:i=="true"&&(r=1)}}return n}function t(n){var i=n.document;if(n.collapsed)i=m(this,i),n.insertNode(i),n.moveToPosition(i,CKEDITOR.POSITION_BEFORE_END);else{var s=this.element,o=this._.definition,u,a=o.ignoreReadonly,f=a||o.includeReadonly;f==void 0&&(f=n.root.getCustomData("cke_includeReadonly"));var l=CKEDITOR.dtd[s];l||(u=!0,l=CKEDITOR.dtd.span),n.enlarge(CKEDITOR.ENLARGE_INLINE,1),n.trim();var c=n.createBookmark(),h=c.startNode,d=c.endNode,v=h,g;if(!a){var y=n.getCommonAncestor(),a=e(h,y),y=e(d,y);a&&(v=a.getNextSourceNode(!0)),y&&(d=y)}for(v.getPosition(d)==CKEDITOR.POSITION_FOLLOWING&&(v=0);v;){a=!1;if(v.equals(d))v=null,a=!0;else{var b=v.type==CKEDITOR.NODE_ELEMENT?v.getName():null,y=b&&v.getAttribute("contentEditable")=="false",w=b&&v.getAttribute("data-nostyle");if(b&&v.data("cke-bookmark")){v=v.getNextSourceNode(!0);continue}if(y&&f&&CKEDITOR.dtd.$block[b])for(var E=v,S=r(E),x=void 0,T=S.length,N=0,E=T&&new CKEDITOR.dom.range(E.getDocument());N<T;++N){var x=S[N],k=CKEDITOR.filter.instances[x.data("cke-filter")];if(k?k.check(this):1)E.selectNodeContents(x),t.call(this,E)}S=b?!l[b]||w?0:y&&!f?0:(v.getPosition(d)|L)==L&&(!o.childRule||o.childRule(v)):1;if(S)if((S=v.getParent())&&((S.getDtd()||CKEDITOR.dtd.span)[s]||u)&&(!o.parentRule||o.parentRule(S))){!g&&(!b||!CKEDITOR.dtd.$removeEmpty[b]||(v.getPosition(d)|L)==L)&&(g=n.clone(),g.setStartBefore(v)),b=v.type;if(b==CKEDITOR.NODE_TEXT||y||b==CKEDITOR.NODE_ELEMENT&&!v.getChildCount()){for(var b=v,O;(a=!b.getNext(C))&&(O=b.getParent(),l[O.getName()])&&(O.getPosition(h)|A)==A&&(!o.childRule||o.childRule(O));)b=O;g.setEndAfter(b)}}else a=!0;else a=!0;v=v.getNextSourceNode(w||y)}if(a&&g&&!g.collapsed){for(var a=m(this,i),y=a.hasAttributes(),w=g.getCommonAncestor(),b={},S={},x={},T={},M,_,D;a&&w;){if(w.getName()==s){for(M in o.attributes)!T[M]&&(D=w.getAttribute(_))&&(a.getAttribute(M)==D?S[M]=1:T[M]=1);for(_ in o.styles)!x[_]&&(D=w.getStyle(_))&&(a.getStyle(_)==D?b[_]=1:x[_]=1)}w=w.getParent()}for(M in S)a.removeAttribute(M);for(_ in b)a.removeStyle(_);y&&!a.hasAttributes()&&(a=null),a?(g.extractContents().appendTo(a),g.insertNode(a),p.call(this,a),a.mergeSiblings(),CKEDITOR.env.ie||a.$.normalize()):(a=new CKEDITOR.dom.element("span"),g.extractContents().appendTo(a),g.insertNode(a),p.call(this,a),a.remove(!0)),g=null}}n.moveToBookmark(c),n.shrink(CKEDITOR.SHRINK_TEXT),n.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function n(e){function t(){for(var e=new CKEDITOR.dom.elementPath(r.getParent()),t=new CKEDITOR.dom.elementPath(f.getParent()),n=null,i=null,s=0;s<e.elements.length;s++){var o=e.elements[s];if(o==e.block||o==e.blockLimit)break;l.checkElementRemovable(o)&&(n=o)}for(s=0;s<t.elements.length;s++){o=t.elements[s];if(o==t.block||o==t.blockLimit)break;l.checkElementRemovable(o)&&(i=o)}i&&f.breakParent(i),n&&r.breakParent(n)}e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var n=e.createBookmark(),r=n.startNode;if(e.collapsed){for(var i=new CKEDITOR.dom.elementPath(r.getParent(),e.root),s,o=0,u;o<i.elements.length&&(u=i.elements[o]);o++){if(u==i.block||u==i.blockLimit)break;if(this.checkElementRemovable(u)){var a;e.collapsed&&(e.checkBoundaryOfElement(u,CKEDITOR.END)||(a=e.checkBoundaryOfElement(u,CKEDITOR.START)))?(s=u,s.match=a?"start":"end"):(u.mergeSiblings(),u.is(this.element)?h.call(this,u):d(u,b(this)[u.getName()]))}}if(s){u=r;for(o=0;;o++){a=i.elements[o];if(a.equals(s))break;if(a.match)continue;a=a.clone(),a.append(u),u=a}u[s.match=="start"?"insertBefore":"insertAfter"](s)}}else{var f=n.endNode,l=this;t();for(i=r;!i.equals(f);)s=i.getNextSourceNode(),i.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(i)&&(i.getName()==this.element?h.call(this,i):d(i,b(this)[i.getName()]),s.type==CKEDITOR.NODE_ELEMENT&&s.contains(r)&&(t(),s=r.getNext())),i=s}e.moveToBookmark(n),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}function r(e){var t=[];return e.forEach(function(e){if(e.getAttribute("contenteditable")=="true")return t.push(e),!1},CKEDITOR.NODE_ELEMENT,!0),t}function i(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=(new CKEDITOR.dom.elementPath(t,e.root)).contains(this.element,1))&&!e.isReadOnly()&&g(e,this)}function s(e){var t=e.getCommonAncestor(!0,!0);if(e=(new CKEDITOR.dom.elementPath(t,e.root)).contains(this.element,1)){var t=this._.definition,n=t.attributes;if(n)for(var r in n)e.removeAttribute(r,n[r]);if(t.styles)for(var i in t.styles)t.styles.hasOwnProperty(i)&&e.removeStyle(i)}}function o(e){var t=e.createBookmark(!0),n=e.createIterator();n.enforceRealBlocks=!0,this._.enterMode&&(n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var r,i=e.document,s;r=n.getNextParagraph();)!r.isReadOnly()&&(n.activeFilter?n.activeFilter.check(this):1)&&(s=m(this,i,r),a(r,s));e.moveToBookmark(t)}function u(e){var t=e.createBookmark(1),n=e.createIterator();n.enforceRealBlocks=!0,n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var r,i;r=n.getNextParagraph();)this.checkElementRemovable(r)&&(r.is("pre")?((i=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&r.copyAttributes(i),a(r,i)):h.call(this,r));e.moveToBookmark(t)}function a(e,t){var n=!t;n&&(t=e.getDocument().createElement("div"),e.copyAttributes(t));var r=t&&t.is("pre"),i=e.is("pre"),s=!r&&i;if(r&&!i){i=t,(s=e.getBogus())&&s.remove(),s=e.getHtml(),s=l(s,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),s=s.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),s=s.replace(/([ \t\n\r]+|&nbsp;)/g," "),s=s.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var o=e.getDocument().createElement("div");o.append(i),i.$.outerHTML="<pre>"+s+"</pre>",i.copyAttributes(o.getFirst()),i=o.getFirst().remove()}else i.setHtml(s);t=i}else s?t=c(n?[e.getHtml()]:f(e),t):e.moveChildren(t);t.replace(e);if(r){var n=t,u;(u=n.getPrevious(k))&&u.type==CKEDITOR.NODE_ELEMENT&&u.is("pre")&&(r=l(u.getHtml(),/\n$/,"")+"\n\n"+l(n.getHtml(),/^\n/,""),CKEDITOR.env.ie?n.$.outerHTML="<pre>"+r+"</pre>":n.setHtml(r),u.remove())}else n&&v(t)}function f(e){e.getName();var t=[];return l(e.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(e,t,n){return t+"</pre>"+n+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(e,n){t.push(n)}),t}function l(e,t,n){var r="",i="",e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(e,t,n){return t&&(r=t),n&&(i=n),""});return r+e.replace(t,n)+i}function c(e,t){var n;e.length>1&&(n=new CKEDITOR.dom.documentFragment(t.getDocument()));for(var r=0;r<e.length;r++){var i=e[r],i=i.replace(/(\r\n|\r)/g,"\n"),i=l(i,/^[ \t]*\n/,""),i=l(i,/\n$/,""),i=l(i,/^[ \t]+|[ \t]+$/g,function(e,t){return e.length==1?"&nbsp;":t?" "+CKEDITOR.tools.repeat("&nbsp;",e.length-1):CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "}),i=i.replace(/\n/g,"<br>"),i=i.replace(/[ \t]{2,}/g,function(e){return CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "});if(n){var s=t.clone();s.setHtml(i),n.append(s)}else t.setHtml(i)}return n||t}function h(e,t){var n=this._.definition,r=n.attributes,n=n.styles,i=b(this)[e.getName()],s=CKEDITOR.tools.isEmpty(r)&&CKEDITOR.tools.isEmpty(n),o;for(o in r)(o!="class"&&!this._.definition.fullMatch||e.getAttribute(o)==w(o,r[o]))&&(!t||o.slice(0,5)!="data-")&&(s=e.hasAttribute(o),e.removeAttribute(o));for(var u in n)if(!this._.definition.fullMatch||e.getStyle(u)==w(u,n[u],true))s=s||!!e.getStyle(u),e.removeStyle(u);d(e,i,S[e.getName()]),s&&(this._.definition.alwaysRemoveElement?v(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?v(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function p(e){for(var t=b(this),n=e.getElementsByTag(this.element),r,i=n.count();--i>=0;)r=n.getItem(i),r.isReadOnly()||h.call(this,r,!0);for(var s in t)if(s!=this.element){n=e.getElementsByTag(s);for(i=n.count()-1;i>=0;i--)r=n.getItem(i),r.isReadOnly()||d(r,t[s])}}function d(e,t,n){if(t=t&&t.attributes)for(var r=0;r<t.length;r++){var i=t[r][0],s;if(s=e.getAttribute(i)){var o=t[r][1];(o===null||o.test&&o.test(s)||typeof o=="string"&&s==o)&&e.removeAttribute(i)}}n||v(e)}function v(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var n=e.getPrevious(k),r=e.getNext(k);n&&(n.type==CKEDITOR.NODE_TEXT||!n.isBlockBoundary({br:1}))&&e.append("br",1),r&&(r.type==CKEDITOR.NODE_TEXT||!r.isBlockBoundary({br:1}))&&e.append("br"),e.remove(!0)}else n=e.getFirst(),r=e.getLast(),e.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),r&&!n.equals(r)&&r.type==CKEDITOR.NODE_ELEMENT&&r.mergeSiblings())}function m(e,t,n){var r;return r=e.element,r=="*"&&(r="span"),r=new CKEDITOR.dom.element(r,t),n&&n.copyAttributes(r),r=g(r,e),t.getCustomData("doc_processing_style")&&r.hasAttribute("id")?r.removeAttribute("id"):t.setCustomData("doc_processing_style",1),r}function g(e,t){var n=t._.definition,r=n.attributes,n=CKEDITOR.style.getStyleText(n);if(r)for(var i in r)e.setAttribute(i,r[i]);return n&&e.setAttribute("style",n),e}function y(e,t){for(var n in e)e[n]=e[n].replace(N,function(e,n){return t[n]})}function b(e){if(e._.overrides)return e._.overrides;var t=e._.overrides={},n=e._.definition.overrides;if(n){CKEDITOR.tools.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var i=n[r],s,o;typeof i=="string"?s=i.toLowerCase():(s=i.element?i.element.toLowerCase():e.element,o=i.attributes),i=t[s]||(t[s]={});if(o){var i=i.attributes=i.attributes||[],u;for(u in o)i.push([u.toLowerCase(),o[u]])}}}return t}function w(e,t,n){var r=new CKEDITOR.dom.element("span");return r[n?"setStyle":"setAttribute"](e,t),r[n?"getStyle":"getAttribute"](e)}function E(e,t){for(var n=e.document,r=e.getRanges(),i=t?this.removeFromRange:this.applyToRange,s,o=r.createIterator();s=o.getNextRange();)i.call(this,s);e.selectRanges(r),n.removeCustomData("doc_processing_style")}var S={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},x={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},T=/\s*(?:;\s*|$)/,N=/#\((.+?)\)/g,C=CKEDITOR.dom.walker.bookmark(0,1),k=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,t){var n=e.attributes;n&&n.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(n.style)),delete n.style),t&&(e=CKEDITOR.tools.clone(e),y(e.attributes,t),y(e.styles,t)),n=this.element=e.element?typeof e.element=="string"?e.element.toLowerCase():e.element:"*",this.type=e.type||(S[n]?CKEDITOR.STYLE_BLOCK:x[n]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),typeof this.element=="object"&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:e}},CKEDITOR.editor.prototype.applyStyle=function(e){e.checkApplicable(this.elementPath())&&E.call(e,this.getSelection())},CKEDITOR.editor.prototype.removeStyle=function(e){e.checkApplicable(this.elementPath())&&E.call(e,this.getSelection(),1)},CKEDITOR.style.prototype={apply:function(e){E.call(this,e.getSelection())},remove:function(e){E.call(this,e.getSelection(),1)},applyToRange:function(e){return(this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?t:this.type==CKEDITOR.STYLE_BLOCK?o:this.type==CKEDITOR.STYLE_OBJECT?i:null).call(this,e)},removeFromRange:function(e){return(this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?n:this.type==CKEDITOR.STYLE_BLOCK?u:this.type==CKEDITOR.STYLE_OBJECT?s:null).call(this,e)},applyToObject:function(e){g(e,this)},checkActive:function(e){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var t=e.elements,n=0,r;n<t.length;n++){r=t[n];if(this.type!=CKEDITOR.STYLE_INLINE||r!=e.block&&r!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var i=r.getName();if(!(typeof this.element=="string"?i==this.element:i in this.element))continue}if(this.checkElementRemovable(r,!0))return!0}}}return!1},checkApplicable:function(e,t){if(t&&!t.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(e,t){var n=this._.definition;if(!e||!n.ignoreReadonly&&e.isReadOnly())return!1;var r=e.getName();if(typeof this.element=="string"?r==this.element:r in this.element){if(!t&&!e.hasAttributes())return!0;if(r=n._AC)n=r;else{var r={},i=0,s=n.attributes;if(s)for(var o in s)i++,r[o]=s[o];if(o=CKEDITOR.style.getStyleText(n))r.style||i++,r.style=o;r._length=i,n=n._AC=r}if(!n._length)return!0;for(var u in n)if(u!="_length"){i=e.getAttribute(u)||"";if(u=="style")e:{r=n[u],typeof r=="string"&&(r=CKEDITOR.tools.parseCssText(r)),typeof i=="string"&&(i=CKEDITOR.tools.parseCssText(i,!0)),o=void 0;for(o in r)if(!(o in i)||i[o]!=r[o]&&r[o]!="inherit"&&i[o]!="inherit"){r=!1;break e}r=!0}else r=n[u]==i;if(r){if(!t)return!0}else if(t)return!1}if(t)return!0}return!1},checkElementRemovable:function(e,t){if(this.checkElementMatch(e,t))return!0;var n=b(this)[e.getName()];if(n){var r;if(!(n=n.attributes))return!0;for(var i=0;i<n.length;i++){r=n[i][0];if(r=e.getAttribute(r)){var s=n[i][1];if(s===null||typeof s=="string"&&r==s||s.test(r))return!0}}}return!1},buildPreview:function(e){var t=this._.definition,n=[],r=t.element;r=="bdo"&&(r="span");var n=["<",r],i=t.attributes;if(i)for(var s in i)n.push(" ",s,'="',i[s],'"');return(i=CKEDITOR.style.getStyleText(t))&&n.push(' style="',i,'"'),n.push(">",e||t.name,"</",r,">"),n.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(e){var t=e._ST;if(t)return t;var t=e.styles,n=e.attributes&&e.attributes.style||"",r="";n.length&&(n=n.replace(T,";"));for(var i in t){var s=t[i],o=(i+":"+s).replace(T,";");s=="inherit"?r+=o:n+=o}return n.length&&(n=CKEDITOR.tools.normalizeCssText(n,!0)),e._ST=n+r};var L=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,A=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,t,n){CKEDITOR.stylesSet.addExternal(e,t,""),CKEDITOR.stylesSet.load(e,n)},CKEDITOR.editor.prototype.getStylesSet=function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var t=this,n=t.config.stylesCombo_stylesSet||t.config.stylesSet;if(n===!1)e(null);else if(n instanceof Array)t._.stylesDefinitions=n,e(n);else{n||(n="default");var n=n.split(":"),r=n[0];CKEDITOR.stylesSet.addExternal(r,n[1]?n.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(r,function(n){t._.stylesDefinitions=n[r],e(t._.stylesDefinitions)})}}},CKEDITOR.dom.comment=function(e,t){typeof e=="string"&&(e=(t?t.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),"use strict",function(){var e={},t={},n;for(n in CKEDITOR.dtd.$blockLimit)n in CKEDITOR.dtd.$list||(e[n]=1);for(n in CKEDITOR.dtd.$block)n in CKEDITOR.dtd.$blockLimit||n in CKEDITOR.dtd.$empty||(t[n]=1);CKEDITOR.dom.elementPath=function(n,r){var i=null,s=null,o=[],u=n,a,r=r||n.getDocument().getBody();do if(u.type==CKEDITOR.NODE_ELEMENT){o.push(u);if(!this.lastElement){this.lastElement=u;if(u.is(CKEDITOR.dtd.$object)||u.getAttribute("contenteditable")=="false")continue}if(u.equals(r))break;if(!s){a=u.getName(),u.getAttribute("contenteditable")=="true"?s=u:!i&&t[a]&&(i=u);if(e[a]){var f;if(f=!i){if(a=a=="div"){e:{a=u.getChildren(),f=0;for(var l=a.count();f<l;f++){var c=a.getItem(f);if(c.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[c.getName()]){a=!0;break e}}a=!1}a=!a}f=a}f?i=u:s=u}}}while(u=u.getParent());s||(s=r),this.block=i,this.blockLimit=s,this.root=r,this.elements=o}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var t=this.elements,e=e&&e.elements;if(!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0},contains:function(e,t,n){var r;typeof e=="string"&&(r=function(t){return t.getName()==e}),e instanceof CKEDITOR.dom.element?r=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?r=function(t){return CKEDITOR.tools.indexOf(e,t.getName())>-1}:typeof e=="function"?r=e:typeof e=="object"&&(r=function(t){return t.getName()in e});var i=this.elements,s=i.length;t&&s--,n&&(i=Array.prototype.slice.call(i,0),i.reverse());for(t=0;t<s;t++)if(r(i[t]))return i[t];return null},isContextFor:function(e){var t;return e in CKEDITOR.dtd.$block?(t=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!t.getDtd()[e]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,t){typeof e=="string"&&(e=(t?t.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var t=this.$.parentNode,n=t.childNodes.length,r=this.getLength(),i=this.getDocument(),s=new CKEDITOR.dom.text(this.$.splitText(e),i);return t.childNodes.length==n&&(e>=r?(s=i.createText(""),s.insertAfter(this)):(e=i.createText(""),e.insertAfter(s),e.remove())),s},substring:function(e,t){return typeof t!="number"?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),function(){function e(e,t,n){var r=e.serializable,i=t[n?"endContainer":"startContainer"],s=n?"endOffset":"startOffset",o=r?t.document.getById(e.startNode):e.startNode,e=r?t.document.getById(e.endNode):e.endNode;return i.equals(o.getPrevious())?(t.startOffset=t.startOffset-i.getLength()-e.getPrevious().getLength(),i=e.getNext()):i.equals(e.getPrevious())&&(t.startOffset=t.startOffset-i.getLength(),i=e.getNext()),i.equals(o.getParent())&&t[s]++,i.equals(e.getParent())&&t[s]++,t[n?"endContainer":"startContainer"]=i,t}CKEDITOR.dom.rangeList=function(e){return e instanceof CKEDITOR.dom.rangeList?e:(e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[],CKEDITOR.tools.extend(e,t))};var t={createIterator:function(){var e=this,t=CKEDITOR.dom.walker.bookmark(),n=[],r;return{getNextRange:function(i){r=r==void 0?0:r+1;var s=e[r];if(s&&e.length>1){if(!r)for(var o=e.length-1;o>=0;o--)n.unshift(e[o].createBookmark(!0));if(i)for(var u=0;e[r+u+1];){for(var f=s.document,i=0,o=f.getById(n[u].endNode),f=f.getById(n[u+1].startNode);;){o=o.getNextSourceNode(!1);if(f.equals(o))i=1;else if(t(o)||o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary())continue;break}if(!i)break;u++}for(s.moveToBookmark(n.shift());u--;)o=e[++r],o.moveToBookmark(n.shift()),s.setEnd(o.endContainer,o.endOffset)}return s}}},createBookmarks:function(t){for(var n=[],r,i=0;i<this.length;i++){n.push(r=this[i].createBookmark(t,!0));for(var s=i+1;s<this.length;s++)this[s]=e(r,this[s]),this[s]=e(r,this[s],!0)}return n},createBookmarks2:function(e){for(var t=[],n=0;n<this.length;n++)t.push(this[n].createBookmark2(e));return t},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function t(t){var n=CKEDITOR.skin["ua_"+t],r=CKEDITOR.env;if(n)for(var n=n.split(",").sort(function(e,t){return e>t?-1:1}),i=0,s;i<n.length;i++){s=n[i],r.ie&&(s.replace(/^ie/,"")==r.version||r.quirks&&s=="iequirks")&&(s="ie");if(r[s]){t+="_"+n[i];break}}return CKEDITOR.getUrl(e()+t+".css")}function n(e,n){s[e]||(CKEDITOR.document.appendStyleSheet(t(e)),s[e]=1),n&&n()}function r(e){var t=e.getById(o);return t||(t=e.getHead().append("style"),t.setAttribute("id",o),t.setAttribute("type","text/css")),t}function i(e,t,n){var r,i,s;if(CKEDITOR.env.webkit){t=t.split("}").slice(0,-1);for(i=0;i<t.length;i++)t[i]=t[i].split("{")}for(var o=0;o<e.length;o++)if(CKEDITOR.env.webkit)for(i=0;i<t.length;i++){s=t[i][1];for(r=0;r<n.length;r++)s=s.replace(n[r][0],n[r][1]);e[o].$.sheet.addRule(t[i][0],s)}else{s=t;for(r=0;r<n.length;r++)s=s.replace(n[r][0],n[r][1]);CKEDITOR.env.ie&&CKEDITOR.env.version<11?e[o].$.styleSheet.cssText=e[o].$.styleSheet.cssText+s:e[o].$.innerHTML=e[o].$.innerHTML+s}}var s={};CKEDITOR.skin={path:e,loadPart:function(t,r){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),function(){n(t,r)}):n(t,r)},getPath:function(e){return CKEDITOR.getUrl(t(e))},icons:{},addIcon:function(e,t,n,r){e=e.toLowerCase(),this.icons[e]||(this.icons[e]={path:t,offset:n||0,bgsize:r||"16px"})},getIconStyle:function(e,t,n,r,i){var s;return e&&(e=e.toLowerCase(),t&&(s=this.icons[e+"-rtl"]),s||(s=this.icons[e])),e=n||s&&s.path||"",r=r||s&&s.offset,i=i||s&&s.bgsize||"16px",e&&"background-image:url("+CKEDITOR.getUrl(e)+");background-position:0 "+r+"px;background-size:"+i+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var t=r(CKEDITOR.document);return(this.setUiColor=function(e){var n=CKEDITOR.skin.chameleon,r=[[a,e]];this.uiColor=e,i([t],n(this,"editor"),r),i(u,n(this,"panel"),r)}).call(this,e)}});var o="cke_ui_color",u=[],a=/\$color/g;CKEDITOR.on("instanceLoaded",function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=e.editor,e=function(e){e=(e.data[0]||e.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!e.getById("cke_ui_color")){e=r(e),u.push(e);var n=t.getUiColor();n&&i([e],CKEDITOR.skin.chameleon(t,"panel"),[[a,n]])}};t.on("panelShow",e),t.on("menuShow",e),t.config.uiColor&&t.setUiColor(t.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var t=e.getComputedStyle("border-top-color"),n=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!!t&&t==n}catch(r){CKEDITOR.env.hc=!1}e.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded");if(e=CKEDITOR._.pending){delete CKEDITOR._.pending;for(t=0;t<e.length;t++)CKEDITOR.editor.prototype.constructor.apply(e[t][0],e[t][1]),CKEDITOR.add(e[t][0])}}(),CKEDITOR.skin.name="moono",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8,opera",CKEDITOR.skin.chameleon=function(){var e=function(){return function(e,t){for(var n=e.match(/[^#]./g),r=0;r<3;r++){var i=n,s=r,o;o=parseInt(n[r],16),o=("0"+(t<0?0|o*(1+t):0|o+(255-o)*t).toString(16)).slice(-2),i[s]=o}return"#"+n.join("")}}(),t=function(){var e=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(t,n){return e.output({from:t,to:n})}}(),n={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(r,i){var s=r.uiColor,s={id:"."+r.id,defaultBorder:e(s,-0.1),defaultGradient:t(e(s,.9),s),lightGradient:t(e(s,1),e(s,.7)),mediumGradient:t(e(s,.8),e(s,.5)),ckeButtonOn:t(e(s,.6),e(s,.7)),ckeResizer:e(s,-0.4),ckeToolbarSeparator:e(s,.5),ckeColorauto:e(s,.8),dialogBody:e(s,.7),dialogTabSelected:t("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:e(s,-0.6),elementsPathBg:s,menubuttonIcon:e(s,.5),menubuttonIconHover:e(s,.3)};return n[i].output(s).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(e){this._||(this._={}),this._["default"]=this._.initValue=e["default"]||"",this._.required=e.required||!1;for(var t=[this._],n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,t),this._},t={build:function(e,t,n){return new CKEDITOR.ui.dialog.textInput(e,t,n)}},n={build:function(e,t,n){return new CKEDITOR.ui.dialog[t.type](e,t,n)}},r={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},i=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on("load",function(){this.getInputElement().on("change",function(){e.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},!0),s=/^on([A-Z]\w+)/,o=function(e){for(var t in e)(s.test(t)||t=="title"||t=="type")&&delete e[t];return e};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(t,n,r,i){if(!(arguments.length<4)){var s=e.call(this,n);s.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[],CKEDITOR.ui.dialog.uiElement.call(this,t,n,r,"div",null,{role:"presentation"},function(){var e=[],r=n.required?" cke_required":"";return n.labelLayout!="horizontal"?e.push('<label class="cke_dialog_ui_labeled_label'+r+'" ',' id="'+s.labelId+'"',s.inputId?' for="'+s.inputId+'"':"",(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",n.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',n.controlStyle?' style="'+n.controlStyle+'"':"",' role="radiogroup" aria-labelledby="'+s.labelId+'">',i.call(this,t,n),"</div>"):(r={type:"hbox",widths:n.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+r+'" id="'+s.labelId+'" for="'+s.inputId+'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(n.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(n.controlStyle?' style="'+n.controlStyle+'"':"")+">"+i.call(this,t,n)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(t,r,e)),e.join("")})}},textInput:function(t,n,r){if(!(arguments.length<3)){e.call(this,n);var i=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",s={"class":"cke_dialog_ui_input_"+n.type,id:i,type:n.type};n.validate&&(this.validate=n.validate),n.maxLength&&(s.maxlength=n.maxLength),n.size&&(s.size=n.size),n.inputStyle&&(s.style=n.inputStyle);var o=this,u=!1;t.on("load",function(){o.getInputElement().on("keydown",function(e){e.data.getKeystroke()==13&&(u=!0)}),o.getInputElement().on("keyup",function(e){e.data.getKeystroke()==13&&u&&(t.getButton("ok")&&setTimeout(function(){t.getButton("ok").click()},0),u=!1)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,r,function(){var e=['<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'];n.width&&e.push('style="width:'+n.width+'" '),e.push("><input "),s["aria-labelledby"]=this._.labelId,this._.required&&(s["aria-required"]=this._.required);for(var t in s)e.push(t+'="'+s[t]+'" ');return e.push(" /></div>"),e.join("")})}},textarea:function(t,n,r){if(!(arguments.length<3)){e.call(this,n);var i=this,s=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",o={};n.validate&&(this.validate=n.validate),o.rows=n.rows||5,o.cols=n.cols||20,o["class"]="cke_dialog_ui_input_textarea "+(n["class"]||""),typeof n.inputStyle!="undefined"&&(o.style=n.inputStyle),n.dir&&(o.dir=n.dir),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,r,function(){o["aria-labelledby"]=this._.labelId,this._.required&&(o["aria-required"]=this._.required);var e=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',s,'" '],t;for(t in o)e.push(t+'="'+CKEDITOR.tools.htmlEncode(o[t])+'" ');return e.push(">",CKEDITOR.tools.htmlEncode(i._["default"]),"</textarea></div>"),e.join("")})}},checkbox:function(t,n,r){if(!(arguments.length<3)){var i=e.call(this,n,{"default":!!n["default"]});n.validate&&(this.validate=n.validate),CKEDITOR.ui.dialog.uiElement.call(this,t,n,r,"span",null,null,function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),r=[],s=CKEDITOR.tools.getNextId()+"_label",u={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":s};return o(e),n["default"]&&(u.checked="checked"),typeof e.inputStyle!="undefined"&&(e.style=e.inputStyle),i.checkbox=new CKEDITOR.ui.dialog.uiElement(t,e,r,"input",null,u),r.push(' <label id="',s,'" for="',u.id,'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(n.label),"</label>"),r.join("")})}},radio:function(t,n,r){if(!(arguments.length<3)){e.call(this,n),this._["default"]||(this._["default"]=this._.initValue=n.items[0][1]),n.validate&&(this.validate=n.valdiate);var i=[],s=this;CKEDITOR.ui.dialog.labeledElement.call(this,t,n,r,function(){for(var e=[],r=[],u=(n.id?n.id:CKEDITOR.tools.getNextId())+"_radio",f=0;f<n.items.length;f++){var l=n.items[f],c=l[2]!==void 0?l[2]:l[0],h=l[1]!==void 0?l[1]:l[0],p=CKEDITOR.tools.getNextId()+"_radio_input",d=p+"_label",p=CKEDITOR.tools.extend({},n,{id:p,title:null,type:null},!0),c=CKEDITOR.tools.extend({},p,{title:c},!0),v={type:"radio","class":"cke_dialog_ui_radio_input",name:u,value:h,"aria-labelledby":d},m=[];s._["default"]==h&&(v.checked="checked"),o(p),o(c),typeof p.inputStyle!="undefined"&&(p.style=p.inputStyle),p.keyboardFocusable=!0,i.push(new CKEDITOR.ui.dialog.uiElement(t,p,m,"input",null,v)),m.push(" "),new CKEDITOR.ui.dialog.uiElement(t,c,m,"label",null,{id:d,"for":v.id},l[0]),e.push(m.join(""))}return new CKEDITOR.ui.dialog.hbox(t,i,e,r),r.join("")}),this._.children=i}},button:function(t,n,r){if(arguments.length){typeof n=="function"&&(n=n(t.getParentEditor())),e.call(this,n,{disabled:n.disabled||!1}),CKEDITOR.event.implementOn(this);var i=this;t.on("load",function(){var e=this.getElement();(function(){e.on("click",function(e){i.click(),e.data.preventDefault()}),e.on("keydown",function(e){e.data.getKeystroke()in{32:1}&&(i.click(),e.data.preventDefault())})})(),e.unselectable()},this);var s=CKEDITOR.tools.extend({},n);delete s.style;var o=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,s,r,"a",null,{style:n.style,href:"javascript:void(0)",title:n.label,hidefocus:"true","class":n["class"],role:"button","aria-labelledby":o},'<span id="'+o+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(n.label)+"</span>")}},select:function(t,n,r){if(!(arguments.length<3)){var i=e.call(this,n);n.validate&&(this.validate=n.validate),i.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,t,n,r,function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),r=[],s=[],u={id:i.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};r.push('<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'),n.width&&r.push('style="width:'+n.width+'" '),r.push(">"),n.size!=void 0&&(u.size=n.size),n.multiple!=void 0&&(u.multiple=n.multiple),o(e);for(var f=0,l;f<n.items.length&&(l=n.items[f]);f++)s.push('<option value="',CKEDITOR.tools.htmlEncode(l[1]!==void 0?l[1]:l[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(l[0]));return typeof e.inputStyle!="undefined"&&(e.style=e.inputStyle),i.select=new CKEDITOR.ui.dialog.uiElement(t,e,r,"select",null,u,s.join("")),r.push("</div>"),r.join("")})}},file:function(t,n,r){if(!(arguments.length<3)){n["default"]===void 0&&(n["default"]="");var i=CKEDITOR.tools.extend(e.call(this,n),{definition:n,buttons:[]});n.validate&&(this.validate=n.validate),t.on("load",function(){CKEDITOR.document.getById(i.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,r,function(){i.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',i.frameId,'" title="',n.label,'" src="javascript:void('];return e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),e.push(')"></iframe>'),e.join("")})}},fileButton:function(t,n,r){if(!(arguments.length<3)){e.call(this,n);var i=this;n.validate&&(this.validate=n.validate);var s=CKEDITOR.tools.extend({},n),o=s.onClick;s.className=(s.className?s.className+" ":"")+"cke_dialog_ui_button",s.onClick=function(e){var r=n["for"];if(!o||o.call(this,e)!==!1)t.getContentElement(r[0],r[1]).submit(),this.disable()},t.on("load",function(){t.getContentElement(n["for"][0],n["for"][1])._.buttons.push(i)}),CKEDITOR.ui.dialog.button.call(this,t,s,r)}},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,n=/\/$/;return function(r,i,s){if(!(arguments.length<3)){var o=[],u=i.html;u.charAt(0)!="<"&&(u="<span>"+u+"</span>");var f=i.focus;if(f){var l=this.focus;this.focus=function(){(typeof f=="function"?f:l).call(this),this.fire("focus")},i.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,r,i,o,"span",null,null,""),o=o.join("").match(e),u=u.match(t)||["","",""],n.test(u[1])&&(u[1]=u[1].slice(0,-1),u[2]="/"+u[2]),s.push([u[1]," ",o[1]||"",u[2]].join(""))}}}(),fieldset:function(e,t,n,r,i){var s=i.label;this._={children:t},CKEDITOR.ui.dialog.uiElement.call(this,e,i,r,"fieldset",null,null,function(){var e=[];s&&e.push("<legend"+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">"+s+"</legend>");for(var t=0;t<n.length;t++)e.push(n[t]);return e.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);return t.getChildCount()<1?(new CKEDITOR.dom.text(e,CKEDITOR.document)).appendTo(t):t.getChild(0).$.nodeValue=e,this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||e.getChildCount()<1?"":e.getChild(0).getText()},eventProcessors:i},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on("click",function(){t.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&t.$.focus()},0)},select:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(e){return!e&&(e=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},r,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,n){var r=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),i=this.getInputElement().$;return r.$.text=e,r.$.value=t===void 0||t===null?e:t,n===void 0||n===null?CKEDITOR.env.ie?i.add(r.$):i.add(r.$,null):i.add(r.$,n),this},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;e.length>0;)e.remove(0);return this},keyboardFocusable:!0},r,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e,!t&&this.fire("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||CKEDITOR.env.version>8?i.onChange.apply(this,arguments):(e.on("load",function(){var e=this._.checkbox.getElement();e.on("propertychange",function(t){t=t.data.$,t.propertyName=="checked"&&this.fire("change",{value:e.$.checked})},this)},this),this.on("change",t),null)}},keyboardFocusable:!0},r,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var n=this._.children,r,i=0;i<n.length&&(r=n[i]);i++)r.getElement().$.checked=r.getValue()==e;!t&&this.fire("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},accessKeyUp:function(){var e=this._.children,t;for(t=0;t<e.length;t++)if(e[t].getElement().$.checked){e[t].getElement().focus();return}e[0].getElement().focus()},eventProcessors:{onChange:function(e,t){return CKEDITOR.env.ie?(e.on("load",function(){for(var e=this._.children,t=this,n=0;n<e.length;n++)e[n].getElement().on("propertychange",function(e){e=e.data.$,e.propertyName=="checked"&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",t),null):i.onChange.apply(this,arguments)}}},r,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,r,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return e.$.forms.length>0?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var t=/^on([A-Z]\w+)/,n,r=function(e,t,n,r){e.on("formLoaded",function(){e.getInputElement().on(n,r,e)})},i;for(i in e)if(n=i.match(t))this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,e[i]):r(this,this._.dialog,n[1].toLowerCase(),e[i]);return this},reset:function(){function e(){n.$.open();var e="";r.size&&(e=r.size-(CKEDITOR.env.ie?7:0));var f=t.frameId+"_input";n.$.write(['<html dir="'+u+'" lang="'+a+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+u+'" lang="'+a+'" action="',CKEDITOR.tools.htmlEncode(r.action),'"><label id="',t.labelId,'" for="',f,'" style="display:none">',CKEDITOR.tools.htmlEncode(r.label),'</label><input style="width:100%" id="',f,'" aria-labelledby="',t.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(r.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(e>0?e:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+s+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+o+")}","</script>"].join("")),n.$.close();for(e=0;e<i.length;e++)i[e].enable()}var t=this._,n=CKEDITOR.document.getById(t.frameId).getFrameDocument(),r=t.definition,i=t.buttons,s=this.formLoadedNumber,o=this.formUnloadNumber,u=t.dialog._.editor.lang.dir,a=t.dialog._.editor.langCode;s||(s=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),o=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(s),CKEDITOR.tools.removeFunction(o)})),CKEDITOR.env.gecko?setTimeout(e,500):e()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",t),CKEDITOR.dialog.addUIElement("password",t),CKEDITOR.dialog.addUIElement("textarea",n),CKEDITOR.dialog.addUIElement("checkbox",n),CKEDITOR.dialog.addUIElement("radio",n),CKEDITOR.dialog.addUIElement("button",n),CKEDITOR.dialog.addUIElement("select",n),CKEDITOR.dialog.addUIElement("file",n),CKEDITOR.dialog.addUIElement("fileButton",n),CKEDITOR.dialog.addUIElement("html",n),CKEDITOR.dialog.addUIElement("fieldset",{build:function(e,t,n){for(var r=t.children,i,s=[],o=[],u=0;u<r.length&&(i=r[u]);u++){var a=[];s.push(a),o.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,a))}return new CKEDITOR.ui.dialog[t.type](e,o,s,n,t)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,function(){function e(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,n=t-1;n>t-e;n--)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function t(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),n=t+1;n<t+e;n++)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function n(e,t){for(var n=e.$.getElementsByTagName("input"),r=0,i=n.length;r<i;r++){var s=new CKEDITOR.dom.element(n[r]);s.getAttribute("type").toLowerCase()=="text"&&(t?(s.setAttribute("value",s.getCustomData("fake_value")||""),s.removeCustomData("fake_value")):(s.setCustomData("fake_value",s.getAttribute("value")),s.setAttribute("value","")))}}function r(e,t){var n=this.getInputElement();n&&(e?n.removeAttribute("aria-invalid"):n.setAttribute("aria-invalid",!0)),e||(this.select?this.select():this.focus()),t&&alert(t),this.fire("validated",{valid:e,msg:t})}function i(){var e=this.getInputElement();e&&e.removeAttribute("aria-invalid")}function s(e){var e=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",v).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:"cke_editor_"+e.name.replace(/\./g,"\\.")+"_dialog",closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),t=e.getChild([0,0,0,0,0]),n=t.getChild(0),r=t.getChild(1);if(CKEDITOR.env.ie&&!CKEDITOR.env.ie6Compat){var i="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+i+'" tabIndex="-1"></iframe>').appendTo(t.getParent())}return n.unselectable(),r.unselectable(),{element:e,parts:{dialog:e.getChild(0),title:n,close:r,tabs:t.getChild(2),contents:t.getChild([3,0,0,0]),footer:t.getChild([3,0,1,0])}}}function o(e,t,n){this.element=t,this.focusIndex=n,this.tabIndex=0,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.currentFocusIndex=this.focusIndex,this.element.focus()},t.on("keydown",function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),t.on("focus",function(){this.fire("mouseover")}),t.on("blur",function(){this.fire("mouseout")})}function u(e){function t(){e.layout()}var n=CKEDITOR.document.getWindow();n.on("resize",t),e.on("hide",function(){n.removeListener("resize",t)})}function a(e,t){this._={dialog:e},CKEDITOR.tools.extend(this,t)}function f(e){function t(t){var n=e.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize(),f=t.data.$.screenX,l=t.data.$.screenY,c=f-r.x,h=l-r.y;r={x:f,y:l},i.x=i.x+c,i.y=i.y+h,e.move(i.x+u[3]<o?-u[3]:i.x-u[1]>a.width-n.width-o?a.width-n.width+(s.lang.dir=="rtl"?0:u[1]):i.x,i.y+u[0]<o?-u[0]:i.y-u[2]>a.height-n.height-o?a.height-n.height+u[2]:i.y,1),t.data.preventDefault()}function n(){CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",n);if(CKEDITOR.env.ie6Compat){var e=x.getChild(0).getFrameDocument();e.removeListener("mousemove",t),e.removeListener("mouseup",n)}}var r=null,i=null;e.getElement().getFirst();var s=e.getParentEditor(),o=s.config.dialog_magnetDistance,u=CKEDITOR.skin.margins||[0,0,0,0];typeof o=="undefined"&&(o=20),e.parts.title.on("mousedown",function(s){r={x:s.data.$.screenX,y:s.data.$.screenY},CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),i=e.getPosition();if(CKEDITOR.env.ie6Compat){var o=x.getChild(0).getFrameDocument();o.on("mousemove",t),o.on("mouseup",n)}s.data.preventDefault()},e)}function l(e){function r(r){var i=u.lang.dir=="rtl",h=c.width,p=c.height,d=h+(r.data.$.screenX-t)*(i?-1:1)*(e._.moved?1:2),v=p+(r.data.$.screenY-n)*(e._.moved?1:2),m=e._.element.getFirst(),m=i&&m.getComputedStyle("right"),g=e.getPosition();g.y+v>l.height&&(v=l.height-g.y),(i?m:g.x)+d>l.width&&(d=l.width-(i?m:g.x));if(o==CKEDITOR.DIALOG_RESIZE_WIDTH||o==CKEDITOR.DIALOG_RESIZE_BOTH)h=Math.max(s.minWidth||0,d-a);if(o==CKEDITOR.DIALOG_RESIZE_HEIGHT||o==CKEDITOR.DIALOG_RESIZE_BOTH)p=Math.max(s.minHeight||0,v-f);e.resize(h,p),e._.moved||e.layout(),r.data.preventDefault()}function i(){CKEDITOR.document.removeListener("mouseup",i),CKEDITOR.document.removeListener("mousemove",r),h&&(h.remove(),h=null);if(CKEDITOR.env.ie6Compat){var e=x.getChild(0).getFrameDocument();e.removeListener("mouseup",i),e.removeListener("mousemove",r)}}var t,n,s=e.definition,o=s.resizable;if(o!=CKEDITOR.DIALOG_RESIZE_NONE){var u=e.getParentEditor(),a,f,l,c,h,p=CKEDITOR.tools.addFunction(function(s){c=e.getSize();var o=e.parts.contents;o.$.getElementsByTagName("iframe").length&&(h=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),o.append(h)),f=c.height-e.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),a=c.width-e.parts.contents.getSize("width",1),t=s.screenX,n=s.screenY,l=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",r),CKEDITOR.document.on("mouseup",i),CKEDITOR.env.ie6Compat&&(o=x.getChild(0).getFrameDocument(),o.on("mousemove",r),o.on("mouseup",i)),s.preventDefault&&s.preventDefault()});e.on("load",function(){var t="";o==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":o==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical"),t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+u.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(u.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event )">'+(u.lang.dir=="ltr"?"◢":"◣")+"</div>"),e.parts.footer.append(t,1)}),u.on("destroy",function(){CKEDITOR.tools.removeFunction(p)})}}function c(e){e.data.preventDefault(1)}function h(e){var t=CKEDITOR.document.getWindow(),n=e.config,r=n.dialog_backgroundCoverColor||"white",i=n.dialog_backgroundCoverOpacity,s=n.baseFloatZIndex,n=CKEDITOR.tools.genKey(r,i,s),o=S[n];o?o.show():(s=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",s,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+r,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(r="<html><body style=\\'background-color:"+r+";\\'></body></html>",s.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),s.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+r+"' );document.close();")+"})())"),s.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),s.push("</div>"),o=CKEDITOR.dom.element.createFromHtml(s.join("")),o.setOpacity(i!=void 0?i:.5),o.on("keydown",c),o.on("keypress",c),o.on("keyup",c),o.appendTo(CKEDITOR.document.getBody()),S[n]=o),e.focusManager.add(o),x=o;var e=function(){var e=t.getViewPaneSize();o.setStyles({width:e.width+"px",height:e.height+"px"})},u=function(){var e=t.getScrollPosition(),n=CKEDITOR.dialog._.currentTop;o.setStyles({left:e.x+"px",top:e.y+"px"});if(n)do e=n.getPosition(),n.move(e.x,e.y);while(n=n._.parentDialog)};E=e,t.on("resize",e),e(),(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&o.focus();if(CKEDITOR.env.ie6Compat){var a=function(){u(),arguments.callee.prevScrollHandler.apply(this,arguments)};t.$.setTimeout(function(){a.prevScrollHandler=window.onscroll||function(){},window.onscroll=a},0),u()}}function p(e){x&&(e.focusManager.remove(x),e=CKEDITOR.document.getWindow(),x.hide(),e.removeListener("resize",E),CKEDITOR.env.ie6Compat&&e.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),E=null)}var d=CKEDITOR.tools.cssLength,v='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(n,o){function u(){var e=x._.focusList;e.sort(function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex});for(var t=e.length,n=0;n<t;n++)e[n].focusIndex=n}function a(e){var t=x._.focusList,e=e||0;if(!(t.length<1)){var n=x._.currentFocusIndex;try{t[n].getInputElement().$.blur()}catch(r){}for(var i=n=(n+e+t.length)%t.length;e&&!t[i].isFocusable();){i=(i+e+t.length)%t.length;if(i==n)break}t[i].focus(),t[i].type=="text"&&t[i].select()}}function c(r){if(x==CKEDITOR.dialog._.currentTop){var i=r.data.getKeystroke(),s=n.lang.dir=="rtl";b=E=0;if(i==9||i==CKEDITOR.SHIFT+9)i=i==CKEDITOR.SHIFT+9,x._.tabBarMode?(i=i?e.call(x):t.call(x),x.selectPage(i),x._.tabs[i][0].focus()):a(i?-1:1),b=1;else if(i==CKEDITOR.ALT+121&&!x._.tabBarMode&&x.getPageCount()>1)x._.tabBarMode=!0,x._.tabs[x._.currentTabId][0].focus(),b=1;else if(i!=37&&i!=39||!x._.tabBarMode)if(i!=13&&i!=32||!x._.tabBarMode)if(i==13)i=r.data.getTarget(),!i.is("a","button","select","textarea")&&(!i.is("input")||i.$.type!="button")&&((i=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(i.click,0,i),b=1),E=1;else{if(i!=27)return;(i=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(i.click,0,i):this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),E=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,a(1),b=1;else i=i==(s?39:37)?e.call(x):t.call(x),x.selectPage(i),x._.tabs[i][0].focus(),b=1;h(r)}}function h(e){b?e.data.preventDefault(1):E&&e.data.stopPropagation()}var p=CKEDITOR.dialog._.dialogDefinitions[o],d=CKEDITOR.tools.clone(m),v=n.config.dialog_buttonsOrder||"OS",g=n.lang.dir,y={},b,E;(v=="OS"&&CKEDITOR.env.mac||v=="rtl"&&g=="ltr"||v=="ltr"&&g=="rtl")&&d.buttons.reverse(),p=CKEDITOR.tools.extend(p(n),d),p=CKEDITOR.tools.clone(p),p=new w(this,p),d=s(n),this._={editor:n,element:d.element,name:o,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=d.parts,CKEDITOR.tools.setTimeout(function(){n.fire("ariaWidget",this.parts.contents)},0,this),d={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},d[g=="rtl"?"right":"left"]=0,this.parts.dialog.setStyles(d),CKEDITOR.event.call(this),this.definition=p=CKEDITOR.fire("dialogDefinition",{name:o,definition:p},n).definition;if(!("removeDialogTabs"in n._)&&n.config.removeDialogTabs){d=n.config.removeDialogTabs.split(";");for(g=0;g<d.length;g++){v=d[g].split(":");if(v.length==2){var S=v[0];y[S]||(y[S]=[]),y[S].push(v[1])}}n._.removeDialogTabs=y}if(n._.removeDialogTabs&&(y=n._.removeDialogTabs[o]))for(g=0;g<y.length;g++)p.removeContents(y[g]);p.onLoad&&this.on("load",p.onLoad),p.onShow&&this.on("show",p.onShow),p.onHide&&this.on("hide",p.onHide),p.onOk&&this.on("ok",function(e){n.fire("saveSnapshot"),setTimeout(function(){n.fire("saveSnapshot")},0),p.onOk.call(this,e)===!1&&(e.data.hide=!1)}),p.onCancel&&this.on("cancel",function(e){p.onCancel.call(this,e)===!1&&(e.data.hide=!1)});var x=this,T=function(e){var t=x._.contents,n=!1,r;for(r in t)for(var i in t[r])if(n=e.call(this,t[r][i]))return};this.on("ok",function(e){T(function(t){if(t.validate){var n=t.validate(this),i=typeof n=="string"||n===!1;return i&&(e.data.hide=!1,e.stop()),r.call(t,!i,typeof n=="string"?n:void 0),i}})},this,null,0),this.on("cancel",function(e){T(function(t){if(t.isChanged())return!n.config.dialog_noConfirmCancel&&!confirm(n.lang.common.confirmCancel)&&(e.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(e){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),e.data.preventDefault()},this),this.changeFocus=a;var N=this._.element;n.focusManager.add(N,1),this.on("show",function(){N.on("keydown",c,this),(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&N.on("keypress",h,this)}),this.on("hide",function(){N.removeListener("keydown",c),(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&N.removeListener("keypress",h),T(function(e){i.apply(e)})}),this.on("iframeAdded",function(e){(new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document)).on("keydown",c,this,null,0)}),this.on("show",function(){u();if(n.config.dialog_startupFocusTab&&x._.pageCount>1)x._.tabBarMode=!0,x._.tabs[x._.currentTabId][0].focus();else if(!this._.hasFocus){this._.currentFocusIndex=-1;if(p.onFocus){var e=p.onFocus.call(this);e&&e.focus()}else a(1)}},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var e=this.getElement(),t=e.getFirst();t.remove(),t.appendTo(e)},this),f(this),l(this),(new CKEDITOR.dom.text(p.title,CKEDITOR.document)).appendTo(this.parts.title);for(g=0;g<p.contents.length;g++)(y=p.contents[g])&&this.addPage(y);this.parts.tabs.on("click",function(e){var t=e.data.getTarget();t.hasClass("cke_dialog_tab")&&(t=t.$.id,this.selectPage(t.substring(4,t.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,a(1)),e.data.preventDefault())},this),g=[],y=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:p.buttons},g).getChild(),this.parts.footer.setHtml(g.join(""));for(g=0;g<y.length;g++)this._.buttons[y[g].id]=y[g]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(e,t){if(!this._.contentSize||this._.contentSize.width!=e||this._.contentSize.height!=t)CKEDITOR.dialog.fire("resize",{dialog:this,width:e,height:t},this._.editor),this.fire("resize",{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+"px",height:t+"px"}),this._.editor.lang.dir=="rtl"&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:e,height:t}}}(),getSize:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,n){var r=this._.element.getFirst(),i=this._.editor.lang.dir=="rtl",s=r.getComputedStyle("position")=="fixed";CKEDITOR.env.ie&&r.setStyle("zoom","100%");if(!s||!this._.position||this._.position.x!=e||this._.position.y!=t)this._.position={x:e,y:t},s||(s=CKEDITOR.document.getWindow().getScrollPosition(),e+=s.x,t+=s.y),i&&(s=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize().width-s.width-e),t={top:(t>0?t:0)+"px"},t[i?"right":"left"]=(e>0?e:0)+"px",r.setStyles(t),n&&(this._.moved=1)},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,t=this.definition;!e.getParent()||!e.getParent().equals(CKEDITOR.document.getBody())?e.appendTo(CKEDITOR.document.getBody()):e.setStyle("display","block");if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900){var n=this.parts.dialog;n.setStyle("position","absolute"),setTimeout(function(){n.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||t.width||t.minWidth,this._.contentSize&&this._.contentSize.height||t.height||t.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),CKEDITOR.dialog._.currentZIndex===null&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex+10),CKEDITOR.dialog._.currentTop===null?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,h(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),e.on("keydown",N),e.on(CKEDITOR.env.opera?"keypress":"keyup",C),this._.hasFocus=!1;for(var r in t.contents)if(t.contents[r]){var e=t.contents[r],i=this._.tabs[e.id],s=e.requiredContent,o=0;if(i){for(var a in this._.contents[e.id]){var f=this._.contents[e.id][a];f.type!="hbox"&&f.type!="vbox"&&!!f.getInputElement()&&(f.requiredContent&&!this._.editor.activeFilter.check(f.requiredContent)?f.disable():(f.enable(),o++))}!o||s&&!this._.editor.activeFilter.check(s)?i[0].addClass("cke_dialog_tab_disabled"):i[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),u(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(e){e.setInitValue&&e.setInitValue()})},100,this)},layout:function(){var e=this.parts.dialog,t=this.getSize(),n=CKEDITOR.document.getWindow().getViewPaneSize(),r=(n.width-t.width)/2,i=(n.height-t.height)/2;CKEDITOR.env.ie6Compat||(t.height+(i>0?i:0)>n.height||t.width+(r>0?r:0)>n.width?e.setStyle("position","absolute"):e.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:r,this._.moved?this._.position.y:i)},foreach:function(e){for(var t in this._.contents)for(var n in this._.contents[t])e.call(this,this._.contents[t][n]);return this},reset:function(){var e=function(e){e.reset&&e.reset(1)};return function(){return this.foreach(e),this}}(),setupContent:function(){var e=arguments;this.foreach(function(t){t.setup&&t.setup.apply(t,e)})},commitContent:function(){var e=arguments;this.foreach(function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur(),t.commit&&t.commit.apply(t,e)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var e=this._.element;e.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden");for(L(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var t=this._.parentDialog.getElement().getFirst();t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else p(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex-10;else{CKEDITOR.dialog._.currentZIndex=null,e.removeListener("keydown",N),e.removeListener(CKEDITOR.env.opera?"keypress":"keyup",C);var n=this._.editor;n.focus(),setTimeout(function(){n.focusManager.unlock()},0)}delete this._.parentDialog,this.foreach(function(e){e.resetInitValue&&e.resetInitValue()})}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var t=[],n=e.label?' title="'+CKEDITOR.tools.htmlEncode(e.label)+'"':"",r=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||"width: 100%;"},t),i=this._.contents[e.id]={},s=r.getChild(),o=0;r=s.shift();)!r.notAllowed&&r.type!="hbox"&&r.type!="vbox"&&o++,i[r.id]=r,typeof r.getChild=="function"&&s.push.apply(s,r.getChild());o||(e.hidden=!0),t=CKEDITOR.dom.element.createFromHtml(t.join("")),t.setAttribute("role","tabpanel"),r=CKEDITOR.env,i="cke_"+e.id+"_"+CKEDITOR.tools.getNextNumber(),n=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',this._.pageCount>0?" cke_last":"cke_first",n,e.hidden?' style="display:none"':"",' id="',i,'"',r.gecko&&r.version>=10900&&!r.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',e.label,"</a>"].join("")),t.setAttribute("aria-labelledby",i),this._.tabs[e.id]=[n,t],this._.tabIdList.push(e.id),!e.hidden&&this._.pageCount++,this._.lastTab=n,this.updateStyle(),t.setAttribute("name",e.id),t.appendTo(this.parts.contents),n.unselectable(),this.parts.tabs.append(n),e.accessKey&&(k(this,this,"CTRL+"+e.accessKey,O,A),this._.accessKeyMap["CTRL+"+e.accessKey]=e.id)}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass("cke_dialog_tab_disabled")&&this.fire("selectPage",{page:e,currentPage:this._.currentTabId})!==!1){for(var t in this._.tabs){var r=this._.tabs[t][0],i=this._.tabs[t][1];t!=e&&(r.removeClass("cke_dialog_tab_selected"),i.hide()),i.setAttribute("aria-hidden",t!=e)}var s=this._.tabs[e];s[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(n(s[1]),s[1].show(),setTimeout(function(){n(s[1],1)},0)):s[1].show(),this._.currentTabId=e,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(t){var n=this._.tabs[t]&&this._.tabs[t][0];n&&this._.pageCount!=1&&n.isVisible()&&(t==this._.currentTabId&&this.selectPage(e.call(this)),n.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){if(e=this._.tabs[e]&&this._.tabs[e][0])e.show(),this._.pageCount++,this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var n=this._.contents[e];return n&&n[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,n){return this.getContentElement(e,t).setValue(n)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if(typeof t=="undefined")t=this._.focusList.length,this._.focusList.push(new o(this,e,t));else{this._.focusList.splice(t,0,new o(this,e,t));for(var n=t+1;n<this._.focusList.length;n++)this._.focusList[n].focusIndex++}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(e,t){if(!this._.dialogDefinitions[e]||typeof t=="function")this._.dialogDefinitions[e]=t},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,n){return e=e.config.removeDialogTabs,!e||!e.match(RegExp("(?:^|;)"+t+":"+n+"(?:$|;)","i"))},okButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:e.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(e){e=e.data.dialog,e.fire("ok",{hide:!0}).hide!==!1&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend(function(n){return e(n,t)},{type:"button"},!0)},e}(),cancelButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:e.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(e){e=e.data.dialog,e.fire("cancel",{hide:!0}).hide!==!1&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend(function(n){return e(n,t)},{type:"button"},!0)},e}(),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var m={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},g=function(e,t,n){for(var r=0,i;i=e[r];r++){if(i.id==t)return i;if(n&&i[n])if(i=g(i[n],t,n))return i}return null},y=function(e,t,n,r,i){if(n){for(var s=0,o;o=e[s];s++){if(o.id==n)return e.splice(s,0,t),t;if(r&&o[r])if(o=y(o[r],t,n,r,!0))return o}if(i)return null}return e.push(t),t},b=function(e,t,n){for(var r=0,i;i=e[r];r++){if(i.id==t)return e.splice(r,1);if(n&&i[n])if(i=b(i[n],t,n))return i}return null},w=function(e,t){this.dialog=e;for(var n=t.contents,r=0,i;i=n[r];r++)n[r]=i&&new a(e,i);CKEDITOR.tools.extend(this,t)};w.prototype={getContents:function(e){return g(this.contents,e)},getButton:function(e){return g(this.buttons,e)},addContents:function(e,t){return y(this.contents,e,t)},addButton:function(e,t){return y(this.buttons,e,t)},removeContents:function(e){b(this.contents,e)},removeButton:function(e){b(this.buttons,e)}},a.prototype={get:function(e){return g(this.elements,e,"children")},add:function(e,t){return y(this.elements,e,t,"children")},remove:function(e){b(this.elements,e,"children")}};var E,S={},x,T={},N=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,r=e.data.$.shiftKey,i=String.fromCharCode(e.data.$.keyCode);(t=T[(t?"CTRL+":"")+(n?"ALT+":"")+(r?"SHIFT+":"")+i])&&t.length&&(t=t[t.length-1],t.keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},C=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,r=e.data.$.shiftKey,i=String.fromCharCode(e.data.$.keyCode);(t=T[(t?"CTRL+":"")+(n?"ALT+":"")+(r?"SHIFT+":"")+i])&&t.length&&(t=t[t.length-1],t.keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),e.data.preventDefault()))},k=function(e,t,n,r,i){(T[n]||(T[n]=[])).push({uiElement:e,dialog:t,key:n,keyup:i||e.accessKeyUp,keydown:r||e.accessKeyDown})},L=function(e){for(var t in T){for(var n=T[t],r=n.length-1;r>=0;r--)(n[r].dialog==e||n[r].uiElement==e)&&n.splice(r,1);n.length===0&&delete T[t]}},A=function(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])},O=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(e,t,n,r,i,s,o){if(!(arguments.length<4)){var u=(r.call?r(t):r)||"div",a=["<",u," "],f=(i&&i.call?i(t):i)||{},l=(s&&s.call?s(t):s)||{},c=(o&&o.call?o.call(this,e,t):o)||"",h=this.domId=l.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=t.id,t.requiredContent&&!e.getParentEditor().filter.check(t.requiredContent)&&(f.display="none",this.notAllowed=!0),l.id=h;var p={};t.type&&(p["cke_dialog_ui_"+t.type]=1),t.className&&(p[t.className]=1),t.disabled&&(p.cke_disabled=1);for(var d=l["class"]&&l["class"].split?l["class"].split(" "):[],h=0;h<d.length;h++)d[h]&&(p[d[h]]=1);d=[];for(h in p)d.push(h);l["class"]=d.join(" "),t.title&&(l.title=t.title),p=(t.style||"").split(";"),t.align&&(d=t.align,f["margin-left"]=d=="left"?0:"auto",f["margin-right"]=d=="right"?0:"auto");for(h in f)p.push(h+":"+f[h]);t.hidden&&p.push("display:none");for(h=p.length-1;h>=0;h--)p[h]===""&&p.splice(h,1);p.length>0&&(l.style=(l.style?l.style+"; ":"")+p.join("; "));for(h in l)a.push(h+'="'+CKEDITOR.tools.htmlEncode(l[h])+'" ');a.push(">",c,"</",u,">"),n.push(a.join("")),(this._||(this._={})).dialog=e,typeof t.isChanged=="boolean"&&(this.isChanged=function(){return t.isChanged}),typeof t.isChanged=="function"&&(this.isChanged=t.isChanged),typeof t.setValue=="function"&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(e){return function(n){e.call(this,t.setValue.call(this,n))}})),typeof t.getValue=="function"&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(e){return function(){return t.getValue.call(this,e.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(t),this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&k(this,e,"CTRL+"+t.accessKey);var v=this;e.on("load",function(){var t=v.getInputElement();if(t){var n=v.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";t.on("focus",function(){e._.tabBarMode=!1,e._.hasFocus=!0,v.fire("focus"),n&&this.addClass(n)}),t.on("blur",function(){v.fire("blur"),n&&this.removeClass(n)})}}),CKEDITOR.tools.extend(this,t),this.keyboardFocusable&&(this.tabIndex=t.tabIndex||0,this.focusIndex=e._.focusList.push(this)-1,this.on("focus",function(){e._.currentFocusIndex=v.focusIndex}))}},hbox:function(e,t,n,r,i){if(!(arguments.length<4)){this._||(this._={});var s=this._.children=t,o=i&&i.widths||null,u=i&&i.height||null,a,f={role:"presentation"};i&&i.align&&(f.align=i.align),CKEDITOR.ui.dialog.uiElement.call(this,e,i||{type:"hbox"},r,"table",{},f,function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(a=0;a<n.length;a++){var t="cke_dialog_ui_hbox_child",r=[];a===0&&(t="cke_dialog_ui_hbox_first"),a==n.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" role="presentation" '),o?o[a]&&r.push("width:"+d(o[a])):r.push("width:"+Math.floor(100/n.length)+"%"),u&&r.push("height:"+d(u)),i&&i.padding!=void 0&&r.push("padding:"+d(i.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[a].align&&r.push("text-align:"+s[a].align),r.length>0&&e.push('style="'+r.join("; ")+'" '),e.push(">",n[a],"</td>")}return e.push("</tr></tbody>"),e.join("")})}},vbox:function(e,t,n,r,i){if(!(arguments.length<3)){this._||(this._={});var s=this._.children=t,o=i&&i.width||null,u=i&&i.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,e,i||{type:"vbox"},r,"div",null,{role:"presentation"},function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="'),i&&i.expand&&t.push("height:100%;"),t.push("width:"+d(o||"100%"),";"),CKEDITOR.env.webkit&&t.push("float:none;"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(i&&i.align||(e.getParentEditor().lang.dir=="ltr"?"left":"right")),'" '),t.push("><tbody>");for(var r=0;r<n.length;r++){var a=[];t.push('<tr><td role="presentation" '),o&&a.push("width:"+d(o||"100%")),u?a.push("height:"+d(u[r])):i&&i.expand&&a.push("height:"+Math.floor(100/n.length)+"%"),i&&i.padding!=void 0&&a.push("padding:"+d(i.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[r].align&&a.push("text-align:"+s[r].align),a.length>0&&t.push('style="',a.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',n[r],"</td></tr>")}return t.push("</tbody></table>"),t.join("")})}}}})(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){return this.getInputElement().setValue(e),!t&&this.fire("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&e.$.className.search("cke_dialog_page_contents")==-1;);return e?(e=e.getAttribute("name"),this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(e){var t=/^on([A-Z]\w+)/,n,r=function(e,t,n,r){t.on("load",function(){e.getInputElement().on(n,r,e)})},i;for(i in e)if(n=i.match(t))this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,e[i]):r(this,this._.dialog,n[1].toLowerCase(),e[i]);return this},eventProcessors:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute("disabled","true"),e.addClass("cke_disabled")},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!this.isEnabled()||!this.isVisible()?!1:!0}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){return arguments.length<1?this._.children.concat():(e.splice||(e=[e]),e.length<2?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var e={build:function(e,t,n){for(var r=t.children,i,s=[],o=[],u=0;u<r.length&&(i=r[u]);u++){var a=[];s.push(a),o.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,a))}return new CKEDITOR.ui.dialog[t.type](e,o,s,n,t)}};CKEDITOR.dialog.addUIElement("hbox",e),CKEDITOR.dialog.addUIElement("vbox",e)}(),CKEDITOR.dialogCommand=function(e,t){this.dialogName=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.dialogCommand.prototype={exec:function(e){CKEDITOR.env.opera?CKEDITOR.tools.setTimeout(function(){e.openDialog(this.dialogName)},0,this):e.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var e=/^([a]|[^a])+$/,t=/^\d*$/,n=/^\d*(?:\.\d+)?$/,r=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,i=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,s=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var e=arguments;return function(){var t=this&&this.getValue?this.getValue():e[0],n=void 0,r=CKEDITOR.VALIDATE_AND,i=[],s;for(s=0;s<e.length;s++){if(typeof e[s]!="function")break;i.push(e[s])}s<e.length&&typeof e[s]=="string"&&(n=e[s],s++),s<e.length&&typeof e[s]=="number"&&(r=e[s]);var o=r==CKEDITOR.VALIDATE_AND?!0:!1;for(s=0;s<i.length;s++)o=r==CKEDITOR.VALIDATE_AND?o&&i[s](t):o||i[s](t);return o?!0:n}},regex:function(e,t){return function(n){return n=this&&this.getValue?this.getValue():n,e.test(n)?!0:t}},notEmpty:function(t){return this.regex(e,t)},integer:function(e){return this.regex(t,e)},number:function(e){return this.regex(n,e)},cssLength:function(e){return this.functions(function(e){return i.test(CKEDITOR.tools.trim(e))},e)},htmlLength:function(e){return this.functions(function(e){return r.test(CKEDITOR.tools.trim(e))},e)},inlineStyle:function(e){return this.functions(function(e){return s.test(CKEDITOR.tools.trim(e))},e)},equals:function(e,t){return this.functions(function(t){return t==e},t)},notEqual:function(e,t){return this.functions(function(t){return t!=e},t)}},CKEDITOR.on("instanceDestroyed",function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var n in S)S[n].remove();S={}}var e=e.editor._.storedDialogs,r;for(r in e)e[r].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t){var n=null,r=CKEDITOR.dialog._.dialogDefinitions[e];CKEDITOR.dialog._.currentTop===null&&h(this);if(typeof r=="function")n=this._.storedDialogs||(this._.storedDialogs={}),n=n[e]||(n[e]=new CKEDITOR.dialog(this,e)),t&&t.call(n,n),n.show();else{if(r=="failed")throw p(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');typeof r=="string"&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(r),function(){typeof CKEDITOR.dialog._.dialogDefinitions[e]!="function"&&(CKEDITOR.dialog._.dialogDefinitions[e]="failed"),this.openDialog(e,t)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),n}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",function(t){t.data.dialog&&e.openDialog(t.data.dialog)},null,null,999)}}),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var t=this;e.addCommand("a11yHelp",{exec:function(){var n=e.langCode,n=t.availableLangs[n]?n:t.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+n+".js"),function(){e.lang.a11yhelp=t.langEntries[n],e.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js")}})}(),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(e){var t=e.addCommand("about",new CKEDITOR.dialogCommand("about"));t.modes={wysiwyg:1,source:1},t.canUndo=!1,t.readOnly=1,e.ui.addButton&&e.ui.addButton("About",{label:e.lang.about.title,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(e){var t=0,n=function(n,i,s,o){if(o){var o=new CKEDITOR.style(o),u=r[s];u.unshift(o),e.attachStyleStateChange(o,function(t){!e.readOnly&&e.getCommand(s).setState(t)}),e.addCommand(s,new CKEDITOR.styleCommand(o,{contentForms:u})),e.ui.addButton&&e.ui.addButton(n,{label:i,command:s,toolbar:"basicstyles,"+(t+=10)})}},r={bold:["strong","b",["span",function(e){return e=e.styles["font-weight"],e=="bold"||+e>=700}]],italic:["em","i",["span",function(e){return e.styles["font-style"]=="italic"}]],underline:["u",["span",function(e){return e.styles["text-decoration"]=="underline"}]],strike:["s","strike",["span",function(e){return e.styles["text-decoration"]=="line-through"}]],subscript:["sub"],superscript:["sup"]},i=e.config,s=e.lang.basicstyles;n("Bold",s.bold,"bold",i.coreStyles_bold),n("Italic",s.italic,"italic",i.coreStyles_italic),n("Underline",s.underline,"underline",i.coreStyles_underline),n("Strike",s.strike,"strike",i.coreStyles_strike),n("Subscript",s.subscript,"subscript",i.coreStyles_subscript),n("Superscript",s.superscript,"superscript",i.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var e={exec:function(e){var t=e.getCommand("blockquote").state,n=e.getSelection(),r=n&&n.getRanges()[0];if(r){var i=n.createBookmarks();if(CKEDITOR.env.ie){var s=i[0].startNode,o=i[0].endNode,u;if(s&&s.getParent().getName()=="blockquote")for(u=s;u=u.getNext();)if(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){s.move(u,!0);break}if(o&&o.getParent().getName()=="blockquote")for(u=o;u=u.getPrevious();)if(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){o.move(u);break}}var a=r.createIterator();a.enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR;if(t==CKEDITOR.TRISTATE_OFF){for(s=[];t=a.getNextParagraph();)s.push(t);s.length<1&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),o=i.shift(),r.insertNode(t),t.append(new CKEDITOR.dom.text("﻿",e.document)),r.moveToBookmark(o),r.selectNodeContents(t),r.collapse(!0),o=r.createBookmark(),s.push(t),i.unshift(o)),u=s[0].getParent(),r=[];for(o=0;o<s.length;o++)t=s[o],u=u.getCommonAncestor(t.getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[u.getName()];)u=u.getParent();for(o=null;s.length>0;){for(t=s.shift();!t.getParent().equals(u);)t=t.getParent();t.equals(o)||r.push(t),o=t}for(;r.length>0;){t=r.shift();if(t.getName()=="blockquote"){for(o=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)o.append(t.getFirst().remove()),s.push(o.getLast());o.replace(t)}else s.push(t)}r=e.document.createElement("blockquote");for(r.insertBefore(s[0]);s.length>0;)t=s.shift(),r.append(t)}else if(t==CKEDITOR.TRISTATE_ON){o=[];for(u={};t=a.getNextParagraph();){for(s=r=null;t.getParent();){if(t.getParent().getName()=="blockquote"){r=t.getParent(),s=t;break}t=t.getParent()}r&&s&&!s.getCustomData("blockquote_moveout")&&(o.push(s),CKEDITOR.dom.element.setMarker(u,s,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(u),t=[],s=[];for(u={};o.length>0;)a=o.shift(),r=a.getParent(),a.getPrevious()?a.getNext()?(a.breakParent(a.getParent()),s.push(a.getNext())):a.remove().insertAfter(r):a.remove().insertBefore(r),r.getCustomData("blockquote_processed")||(s.push(r),CKEDITOR.dom.element.setMarker(u,r,"blockquote_processed",!0)),t.push(a);CKEDITOR.dom.element.clearAllMarkers(u);for(o=s.length-1;o>=0;o--){r=s[o];e:{u=r;for(var a=0,f=u.getChildCount(),l=void 0;a<f&&(l=u.getChild(a));a++)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){u=!1;break e}u=!0}u&&r.remove()}if(e.config.enterMode==CKEDITOR.ENTER_BR)for(r=!0;t.length;){a=t.shift();if(a.getName()=="div"){o=new CKEDITOR.dom.documentFragment(e.document),r&&a.getPrevious()&&(a.getPrevious().type!=CKEDITOR.NODE_ELEMENT||!a.getPrevious().isBlockBoundary())&&o.append(e.document.createElement("br"));for(r=a.getNext()&&(a.getNext().type!=CKEDITOR.NODE_ELEMENT||!a.getNext().isBlockBoundary());a.getFirst();)a.getFirst().remove().appendTo(o);r&&o.append(e.document.createElement("br")),o.replace(a),r=!1}}}n.selectBookmarks(i),e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(t){t.blockless||(t.addCommand("blockquote",e),t.ui.addButton&&t.ui.addButton("Blockquote",{label:t.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),"use strict",function(){function e(e){function t(){var t=e.editable();t.on(y,function(e){(!CKEDITOR.env.ie||!v)&&h(e)}),CKEDITOR.env.ie&&t.on("paste",function(t){m||(i(),t.data.preventDefault(),h(t),o("paste")||e.openDialog("paste"))}),CKEDITOR.env.ie&&(t.on("contextmenu",s,null,null,0),t.on("beforepaste",function(e){e.data&&!e.data.$.ctrlKey&&s()},null,null,0)),t.on("beforecut",function(){!v&&a(e)});var n;t.attachListener(CKEDITOR.env.ie?t:e.document.getDocumentElement(),"mouseup",function(){n=setTimeout(function(){p()},0)}),e.on("destroy",function(){clearTimeout(n)}),t.on("keyup",p)}function n(t){return{type:t,canUndo:t=="cut",startDisabled:!0,exec:function(){this.type=="cut"&&a();var t,n=this.type;if(CKEDITOR.env.ie)t=o(n);else try{t=e.document.$.execCommand(n,!1,null)}catch(r){t=!1}return t||alert(e.lang.clipboard[this.type+"Error"]),t}}}function r(){return{canUndo:!1,async:!0,exec:function(e,t){var n=function(t,n){t&&u(t.type,t.dataValue,!!n),e.fire("afterCommandExec",{name:"paste",command:r,returnValue:!!t})},r=this;typeof t=="string"?n({type:"auto",dataValue:t},1):e.getClipboardData(n)}}}function i(){m=1,setTimeout(function(){m=0},100)}function s(){v=1,setTimeout(function(){v=0},10)}function o(t){var n=e.document,r=n.getBody(),i=!1,s=function(){i=!0};return r.on(t,s),(CKEDITOR.env.version>7?n.$:n.$.selection.createRange()).execCommand(t),r.removeListener(t,s),i}function u(t,n,r){return t={type:t},r&&e.fire("beforePaste",t)===!1||!n?!1:(t.dataValue=n,e.fire("paste",t))}function a(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var t=e.getSelection(),n,r,i;t.getType()==CKEDITOR.SELECTION_ELEMENT&&(n=t.getSelectedElement())&&(r=t.getRanges()[0],i=e.document.createText(""),i.insertBefore(n),r.setStartBefore(i),r.setEndAfter(n),t.selectRanges([r]),setTimeout(function(){n.getParent()&&(i.remove(),t.selectElement(n))},0))}}function f(t,n){var r=e.document,i=e.editable(),s=function(e){e.cancel()},o=CKEDITOR.env.gecko&&CKEDITOR.env.version<=10902,u;if(!r.getById("cke_pastebin")){var a=e.getSelection(),f=a.createBookmarks(),l=new CKEDITOR.dom.element((CKEDITOR.env.webkit||i.is("body"))&&!CKEDITOR.env.ie&&!CKEDITOR.env.opera?"body":"div",r);l.setAttributes({id:"cke_pastebin","data-cke-temp":"1"}),CKEDITOR.env.opera&&l.appendBogus();var c=0,r=r.getWindow();o?(l.insertAfter(f[0].startNode),l.setStyle("display","inline")):(CKEDITOR.env.webkit?(i.append(l),l.addClass("cke_editable"),i.is("body")||(o=i.getComputedStyle("position")!="static"?i:CKEDITOR.dom.element.get(i.$.offsetParent),c=o.getDocumentPosition().y)):i.getAscendant(CKEDITOR.env.ie||CKEDITOR.env.opera?"body":"html",1).append(l),l.setStyles({position:"absolute",top:r.getScrollPosition().y-c+10+"px",width:"1px",height:Math.max(1,r.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0})),(o=l.getParent().isReadOnly())?(l.setOpacity(0),l.setAttribute("contenteditable",!0)):l.setStyle(e.config.contentsLangDirection=="ltr"?"left":"right","-1000px"),e.on("selectionChange",s,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)u=i.once("blur",s,null,null,-100);o&&l.focus(),o=new CKEDITOR.dom.range(l),o.selectNodeContents(l);var h=o.select();CKEDITOR.env.ie&&(u=i.once("blur",function(){e.lockSelection(h)}));var p=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){if(CKEDITOR.env.webkit||CKEDITOR.env.opera)CKEDITOR.document[CKEDITOR.env.webkit?"getBody":"getDocumentElement"]().$.scrollTop=p;u&&u.removeListener(),CKEDITOR.env.ie&&i.focus(),a.selectBookmarks(f),l.remove();var t;CKEDITOR.env.webkit&&(t=l.getFirst())&&t.is&&t.hasClass("Apple-style-span")&&(l=t),e.removeListener("selectionChange",s),n(l.getHtml())},0)}}function l(){if(CKEDITOR.env.ie){e.focus(),i();var t=e.focusManager;t.lock();if(e.editable().fire(y)&&!o("paste"))return t.unlock(),!1;t.unlock()}else try{if(e.editable().fire(y)&&!e.document.$.execCommand("Paste",!1,null))throw 0}catch(n){return!1}return!0}function c(t){if(e.mode=="wysiwyg")switch(t.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:t=e.editable(),i(),!CKEDITOR.env.ie&&t.fire("beforepaste"),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)&&t.fire("paste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:e.fire("saveSnapshot"),setTimeout(function(){e.fire("saveSnapshot")},50)}}function h(t){var n={type:"auto"},r=e.fire("beforePaste",n);f(t,function(e){e=e.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,""),r&&u(n.type,e,0,1)})}function p(){if(e.mode=="wysiwyg"){var t=d("paste");e.getCommand("cut").setState(d("cut")),e.getCommand("copy").setState(d("copy")),e.getCommand("paste").setState(t),e.fire("pasteState",t)}}function d(t){if(g&&t in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if(t=="paste")return CKEDITOR.TRISTATE_OFF;var t=e.getSelection(),n=t.getRanges();return t.getType()==CKEDITOR.SELECTION_NONE||n.length==1&&n[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var v=0,m=0,g=0,y=CKEDITOR.env.ie?"beforepaste":"paste";(function(){e.on("key",c),e.on("contentDom",t),e.on("selectionChange",function(e){g=e.data.selection.getRanges()[0].checkReadOnly(),p()}),e.contextMenu&&e.contextMenu.addListener(function(e,t){return g=t.getRanges()[0].checkReadOnly(),{cut:d("cut"),copy:d("copy"),paste:d("paste")}})})(),function(){function t(t,n,r,i,s){var o=e.lang.clipboard[n];e.addCommand(n,r),e.ui.addButton&&e.ui.addButton(t,{label:o,command:n,toolbar:"clipboard,"+i}),e.addMenuItems&&e.addMenuItem(n,{label:o,command:n,group:"clipboard",order:s})}t("Cut","cut",n("cut"),10,1),t("Copy","copy",n("copy"),20,4),t("Paste","paste",r(),30,8)}(),e.getClipboardData=function(t,n){function r(e){e.removeListener(),e.cancel(),n(e.data)}function i(e){e.removeListener(),e.cancel(),a=!0,n({type:u,dataValue:e.data})}function s(){this.customTitle=t&&t.title}var o=!1,u="auto",a=!1;n||(n=t,t=null),e.on("paste",r,null,null,0),e.on("beforePaste",function(e){e.removeListener(),o=!0,u=e.data.type},null,null,1e3),l()===!1&&(e.removeListener("paste",r),o&&e.fire("pasteDialog",s)?(e.on("pasteDialogCommit",i),e.on("dialogHide",function(e){e.removeListener(),e.data.removeListener("pasteDialogCommit",i),setTimeout(function(){a||n(null)},10)})):n(null))}}function t(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko&&!CKEDITOR.env.opera)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function n(e,t){function n(e){return CKEDITOR.tools.repeat("</p><p>",~~(e/2))+(e%2==1?"<br>":"")}return t=t.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),t=t.replace(/<\/?[A-Z]+>/g,function(e){return e.toLowerCase()}),t.match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&t.indexOf("<div>")>-1&&(t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),t.match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,function(e){return n(e.split("</div><div>").length+1)})+"</p>"),t=t.replace(/<\/div><div>/g,"<br>"),t=t.replace(/<\/?div>/g,"")),(CKEDITOR.env.gecko||CKEDITOR.env.opera)&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),t.indexOf("<br><br>")>-1&&(t="<p>"+t.replace(/(<br>){2,}/g,function(e){return n(e.length/4)})+"</p>")),s(e,t))}function r(){var e=new CKEDITOR.htmlParser.filter,t={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},n=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),r={p:1,br:1,"cke:br":1},i=CKEDITOR.dtd,s=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),o=function(e){delete e.name,e.add(new CKEDITOR.htmlParser.text(" "))},u=function(e){for(var t=e,n;(t=t.next)&&t.name&&t.name.match(/^h\d$/);){n=new CKEDITOR.htmlParser.element("cke:br"),n.isEmpty=!0;for(e.add(n);n=t.children.shift();)e.add(n)}};return e.addRules({elements:{h1:u,h2:u,h3:u,h4:u,h5:u,h6:u,img:function(e){var e=CKEDITOR.tools.trim(e.attributes.alt||""),t=" ";return e&&!e.match(/(^http|\.(jpe?g|gif|png))/i)&&(t=" ["+e+"] "),new CKEDITOR.htmlParser.text(t)},td:o,th:o,$:function(e){var o=e.name,u;if(s[o])return!1;e.attributes={};if(o=="br")return e;if(t[o])e.name="p";else if(n[o])delete e.name;else if(i[o]){u=new CKEDITOR.htmlParser.element("cke:br"),u.isEmpty=!0;if(CKEDITOR.dtd.$empty[o])return u;e.add(u,0),u=u.clone(),u.isEmpty=!0,e.add(u),delete e.name}return r[e.name]||delete e.name,e}}},{applyToAll:!0}),e}function i(e,t,n){var t=new CKEDITOR.htmlParser.fragment.fromHtml(t),r=new CKEDITOR.htmlParser.basicWriter;t.writeHtml(r,n);var t=r.getHtml(),t=t.replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,""),i=0,t=t.replace(/<\/?p>/g,function(e){if(e=="<p>"){if(++i>1)return"</p><p>"}else if(--i>0)return"</p><p>";return e}).replace(/<p><\/p>/g,"");return s(e,t)}function s(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,function(e){return CKEDITOR.tools.repeat("<br>",e.length/7*2)}).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(s){var o;e(s),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),s.on("paste",function(e){var t=e.data.dataValue,n=CKEDITOR.dtd.$block;t.indexOf("Apple-")>-1&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),e.data.type!="html"&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(e,t){return t.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),t.indexOf('<br class="Apple-interchange-newline">')>-1&&(e.data.startsWithEOL=1,e.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(t.match(/^<[^<]+cke_(editable|contents)/i)){var r,i,s=new CKEDITOR.dom.element("div");for(s.setHtml(t);s.getChildCount()==1&&(r=s.getFirst())&&r.type==CKEDITOR.NODE_ELEMENT&&(r.hasClass("cke_editable")||r.hasClass("cke_contents"));)s=i=r;i&&(t=i.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(t,r){return r.toLowerCase()in n?(e.data.preSniffing="html","<"+r):t}):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,function(t,r){return r in n?(e.data.endsWithEOL=1,"</"+r+">"):t}):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1")),e.data.dataValue=t},null,null,3),s.on("paste",function(e){var e=e.data,u=e.type,f=e.dataValue,l,p=s.config.clipboard_defaultContentType||"html";l=u=="html"||e.preSniffing=="html"?"html":t(f),l=="htmlifiedtext"?f=n(s.config,f):u=="text"&&l=="html"&&(f=i(s.config,f,o||(o=r(s)))),e.startsWithEOL&&(f='<br data-cke-eol="1">'+f),e.endsWithEOL&&(f+='<br data-cke-eol="1">'),u=="auto"&&(u=l=="html"||p=="html"?"html":"text"),e.type=u,e.dataValue=f,delete e.preSniffing,delete e.startsWithEOL,delete e.endsWithEOL},null,null,6),s.on("paste",function(e){e=e.data,s.insertHtml(e.dataValue,e.type),setTimeout(function(){s.fire("afterPaste")},0)},null,null,1e3),s.on("pasteDialog",function(e){setTimeout(function(){s.openDialog("paste",e.data)},0)})}})}(),function(){CKEDITOR.plugins.add("panel",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=e,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),t=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),n=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(r,i){this.getHolderElement=function(){var e=this._.holder;if(!e){if(this.isFramed){var e=this.document.getById(this.id+"_frame"),t=e.getParent(),e=e.getFrameDocument();CKEDITOR.env.iOS&&t.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),t=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),e.write(n.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+t+");"},s))),e.getWindow().$.CKEDITOR=CKEDITOR,e.on("key"+(CKEDITOR.env.opera?"press":"down"),function(e){var t=e.data.getKeystroke(),n=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&this._.onKeyDown(t)===!1?e.data.preventDefault():(t==27||t==(n=="rtl"?39:37))&&this.onEscape&&this.onEscape(t)===!1&&e.data.preventDefault()},this),e=e.getBody(),e.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(t)}else e=this.document.getById(this.id);this._.holder=e}return e};var s={editorId:r.id,id:this.id,langCode:r.langCode,dir:r.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":r.config.baseFloatZIndex+1};if(this.isFramed){var o=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";s.frame=t.output({id:this.id+"_frame",src:o})}return o=e.output(s),i&&i.push(o),o},addBlock:function(e,t){return t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t),this._.currentBlock||this.showBlock(e),t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){var e=this._.blocks[e],t=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return t&&t.hide(),this._.currentBlock=e,CKEDITOR.fire("ariaWidget",n),e._.focusIndex=-1,this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e),e.show(),e},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}})),t&&CKEDITOR.tools.extend(this,t),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(e){e!=-1&&(e=this.element.getElementsByTag("a").getItem(this._.focusIndex=e),(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||this.onHide.call(this)!==!0)&&this.element.setStyle("display","none")},onKeyDown:function(e,t){var n=this.keys[e];switch(n){case"next":for(var r=this._.focusIndex,n=this.element.getElementsByTag("a"),i;i=n.getItem(++r);)if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=r,i.focus();break}if(!i&&!t)return this._.focusIndex=-1,this.onKeyDown(e,1);return!1;case"prev":r=this._.focusIndex;for(n=this.element.getElementsByTag("a");r>0&&(i=n.getItem(--r));){if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=r,i.focus();break}i=null}if(!i&&!t)return this._.focusIndex=n.count(),this.onKeyDown(e,1);return!1;case"click":case"mouseup":return r=this._.focusIndex,(i=r>=0&&this.element.getElementsByTag("a").getItem(r))&&(i.$[n]?i.$[n]():i.$["on"+n]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function e(e,n,r,i,s){var s=CKEDITOR.tools.genKey(n.getUniqueId(),r.getUniqueId(),e.lang.dir,e.uiColor||"",i.css||"",s||""),o=t[s];return o||(o=t[s]=new CKEDITOR.ui.panel(n,i),o.element=r.append(CKEDITOR.dom.element.createFromHtml(o.render(e),n)),o.element.setStyles({display:"none",position:"absolute"})),o}var t={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(t,n,r,i){function s(){f.hide()}r.forceIFrame=1,r.toolbarRelated&&t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(n=CKEDITOR.document.getById("cke_"+t.name));var o=n.getDocument(),i=e(t,o,n,r,i||0),u=i.element,a=u.getFirst(),f=this;u.disableContextMenu(),this.element=u,this._={editor:t,panel:i,parentElement:n,definition:r,document:o,iframe:a,children:[],dir:t.lang.dir},t.on("mode",s),t.on("resize",s),o.getWindow().on("resize",s)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,n,r,i,s){var o=this._.panel,u=o.showBlock(e);this.allowBlur(!1),e=this._.editor.editable(),this._.returnFocus=e.hasFocus?e:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);var a=this.element,e=this._.iframe,e=CKEDITOR.env.ie?e:new CKEDITOR.dom.window(e.$.contentWindow),f=a.getDocument(),l=this._.parentElement.getPositionedAncestor(),c=t.getDocumentPosition(f),f=l?l.getDocumentPosition(f):{x:0,y:0},h=this._.dir=="rtl",p=c.x+(r||0)-f.x,d=c.y+(i||0)-f.y;!h||n!=1&&n!=4?!h&&(n==2||n==3)&&(p+=t.$.offsetWidth-1):p+=t.$.offsetWidth;if(n==3||n==4)d+=t.$.offsetHeight-1;this._.panel._.offsetParentId=t.getId(),a.setStyles({top:d+"px",left:0,display:""}),a.setOpacity(0),a.getFirst().removeStyle("width"),this._.editor.focusManager.add(e),this._.blurSet||(CKEDITOR.event.useCapture=!0,e.on("blur",function(e){this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(delete this._.returnFocus,this.hide())},this),e.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.event.useCapture=!1,this._.blurSet=1),o.onEscape=CKEDITOR.tools.bind(function(e){if(this.onEscape&&this.onEscape(e)===!1)return!1},this),CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.tools.bind(function(){a.removeStyle("width");if(u.autoSize){var e=u.element.getDocument(),e=(CKEDITOR.env.webkit?u.element:e.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e>0&&(e+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3),a.setStyle("width",e+10+"px"),e=u.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e>0&&(e+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3),a.setStyle("height",e+"px"),o._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");h&&(p-=a.$.offsetWidth),a.setStyle("left",p+"px");var t=o.element.getWindow(),e=a.$.getBoundingClientRect(),t=t.getViewPaneSize(),n=e.width||e.right-e.left,r=e.height||e.bottom-e.top,i=h?e.right:t.width-e.left,f=h?t.width-e.right:e.left;h?i<n&&(p=f>n?p+n:t.width>n?p-e.left:p-e.right+t.width):i<n&&(p=f>n?p-n:t.width>n?p-e.right+t.width:p-e.left),n=e.top,t.height-e.top<r&&(d=n>r?d-r:t.height>r?d-e.bottom+t.height:d-e.top),CKEDITOR.env.ie&&(t=e=new CKEDITOR.dom.element(a.$.offsetParent),t.getName()=="html"&&(t=t.getDocument().getBody()),t.getComputedStyle("direction")=="rtl"&&(p=CKEDITOR.env.ie8Compat?p-a.getDocument().getDocumentElement().$.scrollLeft*2:p-(e.$.scrollWidth-e.$.clientWidth)));var e=a.getFirst(),l;(l=e.getCustomData("activePanel"))&&l.onHide&&l.onHide.call(this,1),e.setCustomData("activePanel",this),a.setStyles({top:d+"px",left:p+"px"}),a.setOpacity(1),s&&s()},this);o.isLoaded?e():o.onLoad=e,CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),u.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();!e.equals(this._.iframe)&&e.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e.is("a")&&(this._.lastFocused=e)},hide:function(e){if(this.visible&&(!this.onHide||this.onHide.call(this)!==!0)){this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel");if(e=e&&this._.returnFocus)CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus();delete this._.lastFocused,this._.editor.fire("panelHide",this)}},allowBlur:function(e){var t=this._.panel;return e!=void 0&&(t.allowBlur=e),t.allowBlur},showAsChild:function(e,t,n,r,i,s){if(this._.activeChild!=e||e._.panel._.offsetParentId!=n.getId())this.hideChild(),e.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,n,r,i,s),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){e.element.getChild(0).$.style.cssText+=""},100)},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var e=CKEDITOR.tools.isEmpty(CKEDITOR.instances),n;for(n in t){var r=t[n];e?r.destroy():r.element.hide()}e&&(t={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var t=e.config.menu_groups.split(","),n=e._.menuGroups={},r=e._.menuItems={},i=0;i<t.length;i++)n[t[i]]=i+1;e.addMenuGroup=function(e,t){n[e]=t||100},e.addMenuItem=function(e,t){n[t.group]&&(r[e]=new CKEDITOR.menuItem(this,e,t))},e.addMenuItems=function(e){for(var t in e)this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return r[e]},e.removeMenuItem=function(e){delete r[e]}}}),function(){function e(e){e.sort(function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.order<t.order?-1:e.order>t.order?1:0})}var t='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)t+=' onkeypress="return false;"';CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var t=t+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),n=CKEDITOR.addTemplate("menuItem",t+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),r=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,t){t=this._.definition=t||{},this.id=CKEDITOR.tools.getNextId(),this.editor=e,this.items=[],this._.listeners=[],this._.level=t.level||1;var n=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),r=n.block.attributes=n.attributes||{};!r.role&&(r.role="menu"),this._.panelDefinition=n},_:{onShow:function(){var e=this.editor.getSelection(),t=e&&e.getStartElement(),n=this.editor.elementPath(),r=this._.listeners;this.removeAll();for(var i=0;i<r.length;i++){var s=r[i](t,e,n);if(s)for(var o in s){var u=this.editor.getMenuItem(o);u&&(!u.command||this.editor.getCommand(u.command).state)&&(u.state=s[o],this.add(u))}}},onClick:function(e){this.hide(),e.onClick?e.onClick():e.command&&this.editor.execCommand(e.command)},onEscape:function(e){var t=this.parent;return t?t._.panel.hideChild(1):e==27&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(e){var t=this._.subMenu,n=this.items[e];if(n=n.getItems&&n.getItems()){t?t.removeAll():(t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),t.parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var r in n){var i=this.editor.getMenuItem(r);i&&(i.state=n[r],t.add(i))}var s=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+e));setTimeout(function(){t.show(s,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(e){e.order||(e.order=this.items.length),this.items.push(e)},removeAll:function(){this.items=[]},show:function(t,n,r,i){if(!this.parent){this._.onShow();if(!this.items.length)return}var n=n||(this.editor.lang.dir=="rtl"?2:1),s=this.items,o=this.editor,u=this._.panel,a=this._.element;if(!u){u=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),u.onEscape=CKEDITOR.tools.bind(function(e){if(this._.onEscape(e)===!1)return!1},this),u.onShow=function(){u._.panel.getHolderElement().getParent().addClass("cke cke_reset_all")},u.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),a=u.addBlock(this.id,this._.panelDefinition.block),a.autoSize=!0;var f=a.keys;f[40]="next",f[9]="next",f[38]="prev",f[CKEDITOR.SHIFT+9]="prev",f[o.lang.dir=="rtl"?37:39]=CKEDITOR.env.ie?"mouseup":"click",f[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(f[13]="mouseup"),a=this._.element=a.element,f=a.getDocument(),f.getBody().setStyle("overflow","hidden"),f.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(e){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,o.config.menu_subMenuDelay||400,this,[e])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(e){var t=this.items[e];t.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):t.getItems?this._.showSubMenu(e):this._.onClick(t)},this)}e(s);for(var f=o.elementPath(),f=['<div class="cke_menu'+(f&&f.direction()!=o.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],l=s.length,c=l&&s[0].group,h=0;h<l;h++){var p=s[h];c!=p.group&&(f.push('<div class="cke_menuseparator" role="separator"></div>'),c=p.group),p.render(this,h,f)}f.push("</div>"),a.setHtml(f.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(u,this.id,t,n,r,i):u.showBlock(this.id,t,n,r,i),o.fire("menuShow",[u])},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(e)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,t,n){CKEDITOR.tools.extend(this,n,{order:0,className:"cke_menubutton__"+t}),this.group=e._.menuGroups[this.group],this.editor=e,this.name=t},proto:{render:function(e,t,i){var s=e.id+(""+t),o=typeof this.state=="undefined"?CKEDITOR.TRISTATE_OFF:this.state,u="",f=o==CKEDITOR.TRISTATE_ON?"on":o==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(u=' aria-checked="'+(o==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var l=this.getItems,h="&#"+(this.editor.lang.dir=="rtl"?"9668":"9658")+";",p=this.name;this.icon&&!/\./.test(this.icon)&&(p=this.icon),e={id:s,name:this.name,iconName:p,label:this.label,cls:this.className||"",state:f,hasPopup:l?"true":"false",disabled:o==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:e._.itemOverFn,moveOutFn:e._.itemOutFn,clickFn:e._.itemClickFn,index:t,iconStyle:CKEDITOR.skin.getIconStyle(p,this.editor.lang.dir=="rtl",p==this.icon?null:this.icon,this.iconOffset),arrowHtml:l?r.output({label:h}):"",role:this.role?this.role:"menuitem",ariaChecked:u},n.output(e,i)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})},proto:{addTarget:function(e,t){e.on("contextmenu",function(e){var e=e.data,r=CKEDITOR.env.webkit?n:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!t||!r){e.preventDefault();var i=e.getTarget().getDocument(),s=e.getTarget().getDocument().getDocumentElement(),r=!i.equals(CKEDITOR.document),i=i.getWindow().getScrollPosition(),o=r?e.$.clientX:e.$.pageX||i.x+e.$.clientX,u=r?e.$.clientY:e.$.pageY||i.y+e.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(s,null,o,u)},CKEDITOR.env.ie?200:0,this)}},this);if(CKEDITOR.env.webkit){var n,r=function(){n=0};e.on("keydown",function(e){n=CKEDITOR.env.mac?e.data.$.metaKey:e.data.$.ctrlKey}),e.on("keyup",r),e.on("contextmenu",r)}},open:function(e,t,n,r){this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,t,n,r)}}})},beforeInit:function(e){var t=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",function(){t.addTarget(e.editable(),e.config.browserContextMenuOnCtrl!==!1)}),e.addCommand("contextMenu",{exec:function(){e.contextMenu.open(e.document.getBody())}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function t(t,r){function s(e){e=f.list[e];if(e.equals(t.editable())||e.getAttribute("contenteditable")=="true"){var n=t.createRange();n.selectNodeContents(e),n.select()}else t.getSelection().selectElement(e);t.focus()}function o(){a&&a.setHtml(n),delete f.list}var u=t.ui.spaceId("path"),a,f=t._.elementsPath,l=f.idBase;r.html=r.html+('<span id="'+u+'_label" class="cke_voice_label">'+t.lang.elementspath.eleLabel+'</span><span id="'+u+'" class="cke_path" role="group" aria-labelledby="'+u+'_label">'+n+"</span>"),t.on("uiReady",function(){var e=t.ui.space("path");e&&t.focusManager.add(e,1)}),f.onClick=s;var h=CKEDITOR.tools.addFunction(s),p=CKEDITOR.tools.addFunction(function(e,n){var r=f.idBase,i,n=new CKEDITOR.dom.event(n);i=t.lang.dir=="rtl";switch(n.getKeystroke()){case i?39:37:case 9:return(i=CKEDITOR.document.getById(r+(e+1)))||(i=CKEDITOR.document.getById(r+"0")),i.focus(),!1;case i?37:39:case CKEDITOR.SHIFT+9:return(i=CKEDITOR.document.getById(r+(e-1)))||(i=CKEDITOR.document.getById(r+(f.list.length-1))),i.focus(),!1;case 27:return t.focus(),!1;case 13:case 32:return s(e),!1}return!0});t.on("selectionChange",function(){t.editable();for(var e=[],r=f.list=[],s=[],o=f.filters,d=!0,v=t.elementPath().elements,g,y=v.length;y--;){var w=v[y],E=0;g=w.data("cke-display-name")?w.data("cke-display-name"):w.data("cke-real-element-type")?w.data("cke-real-element-type"):w.getName(),d=w.hasAttribute("contenteditable")?w.getAttribute("contenteditable")=="true":d,!d&&!w.hasAttribute("contenteditable")&&(E=1);for(var S=0;S<o.length;S++){var x=o[S](w,g);if(x===!1){E=1;break}g=x||g}E||(r.unshift(w),s.unshift(g))}r=r.length;for(o=0;o<r;o++)g=s[o],d=t.lang.elementspath.eleTitle.replace(/%1/,g),g=i.output({id:l+o,label:d,text:g,jsTitle:"javascript:void('"+g+"')",index:o,keyDownFn:p,clickFn:h}),e.unshift(g);a||(a=CKEDITOR.document.getById(u)),s=a,s.setHtml(e.join("")+n),t.fire("elementsPathUpdate",{space:s})}),t.on("readOnly",o),t.on("contentDomUnload",o),t.addCommand("elementsPathFocus",e),t.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var e;e={editorFocus:!1,readOnly:1,exec:function(e){(e=CKEDITOR.document.getById(e._.elementsPath.idBase+"0"))&&e.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}};var n='<span class="cke_path_empty">&nbsp;</span>',r="";if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)r+=' onkeypress="return false;"';CKEDITOR.env.gecko&&(r+=' onblur="this.style.cssText = this.style.cssText;"');var i=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900?' onfocus="event.preventBubble();"':"")+r+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(e){e._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},e.on("uiSpace",function(n){n.data.space=="bottom"&&t(e,n.data)})}})}(),function(){function e(e,r){var i,s;r.on("refresh",function(e){var r=[t],i;for(i in e.data.states)r.push(e.data.states[i]);this.setState(CKEDITOR.tools.search(r,n)?n:t)},r,null,100),r.on("exec",function(t){i=e.getSelection(),s=i.createBookmarks(1),t.data||(t.data={}),t.data.done=!1},r,null,0),r.on("exec",function(){e.forceNextSelectionCheck(),i.selectBookmarks(s)},r,null,100)}var t=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(t){var n=CKEDITOR.plugins.indent.genericDefinition;e(t,t.addCommand("indent",new n(!0))),e(t,t.addCommand("outdent",new n)),t.ui.addButton&&(t.ui.addButton("Indent",{label:t.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),t.ui.addButton("Outdent",{label:t.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),t.on("dirChanged",function(e){var n=t.createRange(),r=e.data.node;n.setStartBefore(r),n.setEndAfter(r);for(var i=new CKEDITOR.dom.walker(n),s;s=i.next();)if(s.type==CKEDITOR.NODE_ELEMENT)if(!s.equals(r)&&s.getDirection())n.setStartAfter(s),i=new CKEDITOR.dom.walker(n);else{var o=t.config.indentClasses;if(o)for(var u=e.data.dir=="ltr"?["_rtl",""]:["","_rtl"],f=0;f<o.length;f++)s.hasClass(o[f]+u[0])&&(s.removeClass(o[f]+u[0]),s.addClass(o[f]+u[1]));o=s.getStyle("margin-right"),u=s.getStyle("margin-left"),o?s.setStyle("margin-left",o):s.removeStyle("margin-left"),u?s.setStyle("margin-right",u):s.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e,this.startDisabled=!this.isIndent},specificDefinition:function(e,t,n){this.name=t,this.editor=e,this.jobs={},this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!n,this.relatedGlobal=n?"indent":"outdent",this.indentKey=n?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(e,t){e.on("pluginsLoaded",function(){for(var e in t)(function(e,t){var n=e.getCommand(t.relatedGlobal),r;for(r in t.jobs)n.on("exec",function(n){n.data.done||(e.fire("lockSnapshot"),t.execJob(e,r)&&(n.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(t.database))},this,null,r),n.on("refresh",function(n){n.data.states||(n.data.states={}),n.data.states[t.name+"@"+r]=t.refreshJob(e,r,n.data.path)},this,null,r);e.addFeature(t)})(this,t[e])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(e,n){var r=this.jobs[n];if(r.state!=t)return r.exec.call(this,e)},refreshJob:function(e,n,r){return n=this.jobs[n],n.state=e.activeFilter.checkFeature(this)?n.refresh.call(this,e,r):t,n.state},getContext:function(e){return e.contains(this.context)}}}(),function(){function e(e){function t(t){for(var n=f.startContainer,u=f.endContainer;n&&!n.getParent().equals(t);)n=n.getParent();for(;u&&!u.getParent().equals(t);)u=u.getParent();if(!n||!u)return!1;for(var l=n,n=[],c=!1;!c;)l.equals(u)&&(c=!0),n.push(l),l=l.getNext();if(n.length<1)return!1;l=t.getParents(!0);for(u=0;u<l.length;u++)if(l[u].getName&&o[l[u].getName()]){t=l[u];break}for(var l=i.isIndent?1:-1,u=n[0],n=n[n.length-1],c=CKEDITOR.plugins.list.listToArray(t,s),h=c[n.getCustomData("listarray_index")].indent,u=u.getCustomData("listarray_index");u<=n.getCustomData("listarray_index");u++){c[u].indent=c[u].indent+l;if(l>0){var p=c[u].parent;c[u].parent=new CKEDITOR.dom.element(p.getName(),p.getDocument())}}for(u=n.getCustomData("listarray_index")+1;u<c.length&&c[u].indent>h;u++)c[u].indent=c[u].indent+l;n=CKEDITOR.plugins.list.arrayToList(c,s,null,e.config.enterMode,t.getDirection());if(!i.isIndent){var d;if((d=t.getParent())&&d.is("li"))for(var l=n.listNode.getChildren(),v=[],m,u=l.count()-1;u>=0;u--)(m=l.getItem(u))&&m.is&&m.is("li")&&v.push(m)}n&&n.listNode.replace(t);if(v&&v.length)for(u=0;u<v.length;u++){for(m=t=v[u];(m=m.getNext())&&m.is&&m.getName()in o;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(r)&&t.append(f.document.createText(" ")),t.append(m);t.insertAfter(d)}return n&&e.fire("contentDomInvalidated"),!0}for(var i=this,s=this.database,o=this.context,u=e.getSelection(),u=(u&&u.getRanges()).createIterator(),f;f=u.getNextRange();){for(var l=f.getCommonAncestor();l&&(l.type!=CKEDITOR.NODE_ELEMENT||!o[l.getName()]);)l=l.getParent();l||(l=f.startPath().contains(o))&&f.setEndAt(l,CKEDITOR.POSITION_BEFORE_END);if(!l){var h=f.getEnclosedNode();h&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in o&&(f.setStartAt(h,CKEDITOR.POSITION_AFTER_START),f.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),l=h)}l&&f.startContainer.type==CKEDITOR.NODE_ELEMENT&&f.startContainer.getName()in o&&(h=new CKEDITOR.dom.walker(f),h.evaluator=n,f.startContainer=h.next()),l&&f.endContainer.type==CKEDITOR.NODE_ELEMENT&&f.endContainer.getName()in o&&(h=new CKEDITOR.dom.walker(f),h.evaluator=n,f.endContainer=h.previous());if(l)return t(l)}return 0}function t(e,t){return t||(t=e.contains(this.context)),t&&e.block&&e.block.equals(t.getFirst(n))}function n(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}function r(e){return i(e)&&s(e)}var i=CKEDITOR.dom.walker.whitespaces(!0),s=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.TRISTATE_DISABLED,u=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(n){function r(n,r){i.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],n.on("key",function(e){if(n.mode=="wysiwyg"&&e.data.keyCode==this.indentKey){var r=this.getContext(n.elementPath());r&&(!this.isIndent||!t.call(this,n.elementPath(),r))&&(n.execCommand(this.relatedGlobal),e.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,n){var r=this.getContext(n),i=t.call(this,n,r);return!r||!this.isIndent||i?o:u}:function(e,t){return!this.getContext(t)||this.isIndent?o:u},exec:CKEDITOR.tools.bind(e,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(n,{indentlist:new r(n,"indentlist",!0),outdentlist:new r(n,"outdentlist")}),CKEDITOR.tools.extend(r.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}})}(),function(){function e(e,t,n){function r(n){(f=a[n?"getFirst":"getLast"]())&&(!f.is||!f.isBlockBoundary())&&(l=t.root[n?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))&&(!l.is||!l.isBlockBoundary({br:1}))&&e.document.createElement("br")[n?"insertBefore":"insertAfter"](f)}for(var i=CKEDITOR.plugins.list.listToArray(t.root,n),s=[],o=0;o<t.contents.length;o++){var u=t.contents[o];(u=u.getAscendant("li",!0))&&!u.getCustomData("list_item_processed")&&(s.push(u),CKEDITOR.dom.element.setMarker(n,u,"list_item_processed",!0))}u=null;for(o=0;o<s.length;o++)u=s[o].getCustomData("listarray_index"),i[u].indent=-1;for(o=u+1;o<i.length;o++)if(i[o].indent>i[o-1].indent+1){s=i[o-1].indent+1-i[o].indent;for(u=i[o].indent;i[o]&&i[o].indent>=u;)i[o].indent=i[o].indent+s,o++;o--}var a=CKEDITOR.plugins.list.arrayToList(i,n,null,e.config.enterMode,t.root.getAttribute("dir")).listNode,f,l;r(!0),r(),a.replace(t.root),e.fire("contentDomInvalidated")}function t(e,t){this.name=e,this.context=this.type=t,this.allowedContent=t+" li",this.requiredContent=t}function n(e,t,n,r){for(var i,s;i=e[r?"getLast":"getFirst"](p);)(s=i.getDirection(1))!==t.getDirection(1)&&i.setAttribute("dir",s),i.remove(),n?i[r?"insertBefore":"insertAfter"](n):t.append(i,r)}function r(e){var t;(t=function(t){var r=e[t?"getPrevious":"getNext"](l);r&&r.type==CKEDITOR.NODE_ELEMENT&&r.is(e.getName())&&(n(e,r,null,!t),e.remove(),e=r)})(),t(1)}function i(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]["#"]}function s(e,t,i){e.fire("saveSnapshot"),i.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var s=i.extractContents();t.trim(!1,!0);var u=t.createBookmark(),a=new CKEDITOR.dom.elementPath(t.startContainer),f=a.block,a=a.lastElement.getAscendant("li",1)||f,h=new CKEDITOR.dom.elementPath(i.startContainer),p=h.contains(CKEDITOR.dtd.$listItem),h=h.contains(CKEDITOR.dtd.$list);f?(f=f.getBogus())&&f.remove():h&&(f=h.getPrevious(l))&&c(f)&&f.remove(),(f=s.getLast())&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("br")&&f.remove(),(f=t.startContainer.getChild(t.startOffset))?s.insertBefore(f):t.startContainer.append(s),p&&(s=o(p))&&(a.contains(p)?(n(s,p.getParent(),p),s.remove()):a.append(s));for(;i.checkStartOfBlock()&&i.checkEndOfBlock();){h=i.startPath(),s=h.block;if(!s)break;s.is("li")&&(a=s.getParent(),s.equals(a.getLast(l))&&s.equals(a.getFirst(l))&&(s=a)),i.moveToPosition(s,CKEDITOR.POSITION_BEFORE_START),s.remove()}i=i.clone(),s=e.editable(),i.setEndAt(s,CKEDITOR.POSITION_BEFORE_END),i=new CKEDITOR.dom.walker(i),i.evaluator=function(e){return l(e)&&!c(e)},(i=i.next())&&i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in CKEDITOR.dtd.$list&&r(i),t.moveToBookmark(u),t.select(),e.fire("saveSnapshot")}function o(e){return(e=e.getLast(l))&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in u?e:null}var u={ol:1,ul:1},a=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(),l=function(e){return!a(e)&&!f(e)},c=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,t,n,r,i){if(!u[e.getName()])return[];r||(r=0),n||(n=[]);for(var s=0,o=e.getChildCount();s<o;s++){var a=e.getChild(s);a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(a,t,n,r+1);if(a.$.nodeName.toLowerCase()=="li"){var f={parent:e,indent:r,element:a,contents:[]};i?f.grandparent=i:(f.grandparent=e.getParent(),f.grandparent&&f.grandparent.$.nodeName.toLowerCase()=="li"&&(f.grandparent=f.grandparent.getParent())),t&&CKEDITOR.dom.element.setMarker(t,a,"listarray_index",n.length),n.push(f);for(var l=0,c=a.getChildCount(),h;l<c;l++)h=a.getChild(l),h.type==CKEDITOR.NODE_ELEMENT&&u[h.getName()]?CKEDITOR.plugins.list.listToArray(h,t,n,r+1,f.grandparent):f.contents.push(h)}}return n},arrayToList:function(e,t,n,r,i){n||(n=0);if(!e||e.length<n+1)return null;for(var s,o=e[n].parent.getDocument(),a=new CKEDITOR.dom.documentFragment(o),c=null,h=n,p=Math.max(e[n].indent,0),d=null,v,m,g=r==CKEDITOR.ENTER_P?"p":"div";;){var y=e[h];s=y.grandparent,v=y.element.getDirection(1);if(y.indent==p){if(!c||e[h].parent.getName()!=c.getName())c=e[h].parent.clone(!1,1),i&&c.setAttribute("dir",i),a.append(c);d=c.append(y.element.clone(0,1)),v!=c.getDirection(1)&&d.setAttribute("dir",v);for(s=0;s<y.contents.length;s++)d.append(y.contents[s].clone(1,1));h++}else if(y.indent==Math.max(p,0)+1)y=e[h-1].element.getDirection(1),h=CKEDITOR.plugins.list.arrayToList(e,null,h,r,y!=v?v:null),!d.getChildCount()&&CKEDITOR.env.needsNbspFiller&&!(o.$.documentMode>7)&&d.append(o.createText(" ")),d.append(h.listNode),h=h.nextIndex;else{if(y.indent!=-1||!!n||!s)return null;u[s.getName()]?(d=y.element.clone(!1,!0),v!=s.getDirection(1)&&d.setAttribute("dir",v)):d=new CKEDITOR.dom.documentFragment(o);var c=s.getDirection(1)!=v,b=y.element,w=b.getAttribute("class"),E=b.getAttribute("style"),S=d.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(r!=CKEDITOR.ENTER_BR||c||E||w),x,T=y.contents.length,N;for(s=0;s<T;s++){x=y.contents[s];if(f(x)&&T>1)S?N=x.clone(1,1):d.append(x.clone(1,1));else if(x.type==CKEDITOR.NODE_ELEMENT&&x.isBlockBoundary()){c&&!x.getDirection()&&x.setAttribute("dir",v),m=x;var C=b.getAttribute("style");C&&m.setAttribute("style",C.replace(/([^;])$/,"$1;")+(m.getAttribute("style")||"")),w&&x.addClass(w),m=null,N&&(d.append(N),N=null),d.append(x.clone(1,1))}else S?(m||(m=o.createElement(g),d.append(m),c&&m.setAttribute("dir",v)),E&&m.setAttribute("style",E),w&&m.setAttribute("class",w),N&&(m.append(N),N=null),m.append(x.clone(1,1))):d.append(x.clone(1,1))}N&&((m||d).append(N),N=null),d.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&h!=e.length-1&&(CKEDITOR.env.needsBrFiller&&(v=d.getLast())&&v.type==CKEDITOR.NODE_ELEMENT&&v.is("br")&&v.remove(),v=d.getLast(l),(!v||v.type!=CKEDITOR.NODE_ELEMENT||!v.is(CKEDITOR.dtd.$block))&&d.append(o.createElement("br"))),v=d.$.nodeName.toLowerCase(),(v=="div"||v=="p")&&d.appendBogus(),a.append(d),c=null,h++}m=null;if(e.length<=h||Math.max(e[h].indent,0)<p)break}if(t)for(e=a.getFirst();e;){if(e.type==CKEDITOR.NODE_ELEMENT){CKEDITOR.dom.element.clearMarkers(t,e);if(e.getName()in CKEDITOR.dtd.$listItem){n=e,o=i=r=void 0;if(r=n.getDirection()){for(i=n.getParent();i&&!(o=i.getDirection());)i=i.getParent();r==o&&n.removeAttribute("dir")}}}e=e.getNextSourceNode()}return{listNode:a,nextIndex:h}}};var h=/^h[1-6]$/,p=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);t.prototype={exec:function(t){this.refresh(t,t.elementPath());var n=t.config,i=t.getSelection(),s=i&&i.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var o=t.editable();if(o.getFirst(l)){var a=s.length==1&&s[0];(n=a&&a.getEnclosedNode())&&n.is&&this.type==n.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else n.enterMode==CKEDITOR.ENTER_BR?o.appendBogus():s[0].fixBlock(1,n.enterMode==CKEDITOR.ENTER_P?"p":"div"),i.selectRanges(s)}for(var n=i.createBookmarks(!0),o=[],f={},s=s.createIterator(),c=0;(a=s.getNextRange())&&++c;){var p=a.getBoundaryNodes(),v=p.startNode,g=p.endNode;v.type==CKEDITOR.NODE_ELEMENT&&v.getName()=="td"&&a.setStartAt(p.startNode,CKEDITOR.POSITION_AFTER_START),g.type==CKEDITOR.NODE_ELEMENT&&g.getName()=="td"&&a.setEndAt(p.endNode,CKEDITOR.POSITION_BEFORE_END),a=a.createIterator();for(a.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;p=a.getNextParagraph();)if(!p.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(f,p,"list_block",1);for(var y=t.elementPath(p),v=y.elements,g=0,y=y.blockLimit,b,w=v.length-1;w>=0&&(b=v[w]);w--)if(u[b.getName()]&&y.contains(b)){y.removeCustomData("list_group_object_"+c),(v=b.getCustomData("list_group_object"))?v.contents.push(p):(v={root:b,contents:[p]},o.push(v),CKEDITOR.dom.element.setMarker(f,b,"list_group_object",v)),g=1;break}g||(g=y,g.getCustomData("list_group_object_"+c)?g.getCustomData("list_group_object_"+c).contents.push(p):(v={root:g,contents:[p]},CKEDITOR.dom.element.setMarker(f,g,"list_group_object_"+c,v),o.push(v)))}}for(b=[];o.length>0;){v=o.shift();if(this.state==CKEDITOR.TRISTATE_OFF)if(u[v.root.getName()]){s=t,c=v,v=f,a=b,g=CKEDITOR.plugins.list.listToArray(c.root,v),y=[];for(p=0;p<c.contents.length;p++)w=c.contents[p],(w=w.getAscendant("li",!0))&&!w.getCustomData("list_item_processed")&&(y.push(w),CKEDITOR.dom.element.setMarker(v,w,"list_item_processed",!0));for(var w=c.root.getDocument(),E=void 0,S=void 0,p=0;p<y.length;p++){var x=y[p].getCustomData("listarray_index"),E=g[x].parent;E.is(this.type)||(S=w.createElement(this.type),E.copyAttributes(S,{start:1,type:1}),S.removeStyle("list-style-type"),g[x].parent=S)}v=CKEDITOR.plugins.list.arrayToList(g,v,null,s.config.enterMode),g=void 0,y=v.listNode.getChildCount();for(p=0;p<y&&(g=v.listNode.getChild(p));p++)g.getName()==this.type&&a.push(g);v.listNode.replace(c.root),s.fire("contentDomInvalidated")}else{g=t,p=v,a=b,y=p.contents,s=p.root.getDocument(),c=[],y.length==1&&y[0].equals(p.root)&&(v=s.createElement("div"),y[0].moveChildren&&y[0].moveChildren(v),y[0].append(v),y[0]=v),p=p.contents[0].getParent();for(w=0;w<y.length;w++)p=p.getCommonAncestor(y[w].getParent());E=g.config.useComputedState,g=v=void 0,E=E===void 0||E;for(w=0;w<y.length;w++)for(S=y[w];x=S.getParent();){if(x.equals(p)){c.push(S),!g&&S.getDirection()&&(g=1),S=S.getDirection(E),v!==null&&(v=v&&v!=S?null:S);break}S=x}if(!(c.length<1)){y=c[c.length-1].getNext(),w=s.createElement(this.type),a.push(w);for(E=a=void 0;c.length;)a=c.shift(),E=s.createElement("li"),a.is("pre")||h.test(a.getName())||a.getAttribute("contenteditable")=="false"?a.appendTo(E):(a.copyAttributes(E),v&&a.getDirection()&&(E.removeStyle("direction"),E.removeAttribute("dir")),a.moveChildren(E),a.remove()),E.appendTo(w);v&&g&&w.setAttribute("dir",v),y?w.insertBefore(y):w.appendTo(p)}}else this.state==CKEDITOR.TRISTATE_ON&&u[v.root.getName()]&&e.call(this,t,v,f)}for(w=0;w<b.length;w++)r(b[w]);CKEDITOR.dom.element.clearAllMarkers(f),i.selectBookmarks(n),t.focus()},refresh:function(e,t){var n=t.contains(u,1),r=t.blockLimit||t.root;n&&r.contains(n)?this.setState(n.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(e){e.blockless||(e.addCommand("numberedlist",new t("numberedlist","ol")),e.addCommand("bulletedlist",new t("bulletedlist","ul")),e.ui.addButton&&(e.ui.addButton("NumberedList",{label:e.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),e.ui.addButton("BulletedList",{label:e.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),e.on("key",function(t){var n=t.data.keyCode;if(e.mode=="wysiwyg"&&n in{8:1,46:1}){var r=e.getSelection().getRanges()[0],a=r&&r.startPath();if(r&&r.collapsed){var f=n==8,h=e.editable(),p=new CKEDITOR.dom.walker(r.clone());p.evaluator=function(e){return l(e)&&!c(e)},p.guard=function(e,t){return!t||e.type!=CKEDITOR.NODE_ELEMENT||!e.is("table")},n=r.clone();if(f){var d,v;(d=a.contains(u))&&r.checkBoundaryOfElement(d,CKEDITOR.START)&&(d=d.getParent())&&d.is("li")&&(d=o(d))?(v=d,d=d.getPrevious(l),n.moveToPosition(d&&c(d)?d:v,CKEDITOR.POSITION_BEFORE_START)):(p.range.setStartAt(h,CKEDITOR.POSITION_AFTER_START),p.range.setEnd(r.startContainer,r.startOffset),(d=p.previous())&&d.type==CKEDITOR.NODE_ELEMENT&&(d.getName()in u||d.is("li"))&&(d.is("li")||(p.range.selectNodeContents(d),p.reset(),p.evaluator=i,d=p.previous()),v=d,n.moveToElementEditEnd(v))),v?(s(e,n,r),t.cancel()):(n=a.contains(u))&&r.checkBoundaryOfElement(n,CKEDITOR.START)&&(v=n.getFirst(l),r.checkBoundaryOfElement(v,CKEDITOR.START)&&(d=n.getPrevious(l),o(v)?d&&(r.moveToElementEditEnd(d),r.select()):e.execCommand("outdent"),t.cancel()))}else(v=a.contains("li"))?(p.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),h=(a=v.getLast(l))&&i(a)?a:v,v=0,(d=p.next())&&d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in u&&d.equals(a)?(v=1,d=p.next()):r.checkBoundaryOfElement(h,CKEDITOR.END)&&(v=1),v&&d&&(r=r.clone(),r.moveToElementEditStart(d),s(e,n,r),t.cancel())):(p.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(d=p.next())&&d.type==CKEDITOR.NODE_ELEMENT&&d.is(u)&&(d=d.getFirst(l),a.block&&r.checkStartOfBlock()&&r.checkEndOfBlock()?(a.block.remove(),r.moveToElementEditStart(d),r.select()):o(d)?(r.moveToElementEditStart(d),r.select()):(r=r.clone(),r.moveToElementEditStart(d),s(e,n,r)),t.cancel()));setTimeout(function(){e.selectionChange(1)})}}}))}})}(),function(){function e(e,t,n){n=e.config.forceEnterMode||n,e.mode=="wysiwyg"&&(t||(t=e.activeEnterMode),e.elementPath().isContextFor("p")||(t=CKEDITOR.ENTER_BR,n=1),e.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?s(e,t,null,n):o(e,t,null,n),e.fire("saveSnapshot"))}function t(e){for(var e=e.getSelection().getRanges(!0),t=e.length-1;t>0;t--)e[t].deleteContents();return e[0]}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var n=CKEDITOR.dom.walker.whitespaces(),r=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,i,o,f){if(o=o||t(e)){var l=o.document,p=o.checkStartOfBlock(),d=o.checkEndOfBlock(),v=e.elementPath(o.startContainer).block,m=i==CKEDITOR.ENTER_DIV?"div":"p",g;if(p&&d){if(v&&(v.is("li")||v.getParent().is("li"))){o=v.getParent(),g=o.getParent();var f=!v.hasPrevious(),y=!v.hasNext(),m=e.getSelection(),b=m.createBookmarks(),p=v.getDirection(1),d=v.getAttribute("class"),w=v.getAttribute("style"),E=g.getDirection(1)!=p,e=e.enterMode!=CKEDITOR.ENTER_BR||E||w||d;if(g.is("li"))f||y?v[f?"insertBefore":"insertAfter"](g):v.breakParent(g);else{if(e)g=l.createElement(i==CKEDITOR.ENTER_P?"p":"div"),E&&g.setAttribute("dir",p),w&&g.setAttribute("style",w),d&&g.setAttribute("class",d),v.moveChildren(g),f||y?g[f?"insertBefore":"insertAfter"](o):(v.breakParent(o),g.insertAfter(o));else{v.appendBogus(!0);if(f||y)for(;l=v[f?"getFirst":"getLast"]();)l[f?"insertBefore":"insertAfter"](o);else for(v.breakParent(o);l=v.getLast();)l.insertAfter(o)}v.remove()}m.selectBookmarks(b);return}if(v&&v.getParent().is("blockquote")){v.breakParent(v.getParent()),v.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||v.getPrevious().remove(),v.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||v.getNext().remove(),o.moveToElementEditStart(v),o.select();return}}else if(v&&v.is("pre")&&!d){s(e,i,o,f);return}if(d=o.splitBlock(m)){i=d.previousBlock,v=d.nextBlock,e=d.wasStartOfBlock,p=d.wasEndOfBlock,v?(b=v.getParent(),b.is("li")&&(v.breakParent(b),v.move(v.getNext(),1))):i&&(b=i.getParent())&&b.is("li")&&(i.breakParent(b),b=i.getNext(),o.moveToElementEditStart(b),i.move(i.getPrevious()));if(!e&&!p)v.is("li")&&(g=o.clone(),g.selectNodeContents(v),g=new CKEDITOR.dom.walker(g),g.evaluator=function(e){return!(r(e)||n(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(b=g.next())&&b.type==CKEDITOR.NODE_ELEMENT&&b.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?l.createElement("br"):l.createText(" ")).insertBefore(b)),v&&o.moveToElementEditStart(v);else{if(i){if(i.is("li")||!u.test(i.getName())&&!i.is("pre"))g=i.clone()}else v&&(g=v.clone());g?f&&!g.is("li")&&g.renameNode(m):b&&b.is("li")?g=b:(g=l.createElement(m),i&&(y=i.getDirection())&&g.setAttribute("dir",y));if(l=d.elementPath){f=0;for(m=l.elements.length;f<m;f++){b=l.elements[f];if(b.equals(l.block)||b.equals(l.blockLimit))break;CKEDITOR.dtd.$removeEmpty[b.getName()]&&(b=b.clone(),g.moveChildren(b),g.append(b))}}g.appendBogus(),g.getParent()||o.insertNode(g),g.is("li")&&g.removeAttribute("value"),CKEDITOR.env.ie&&e&&(!p||!i.getChildCount())&&(o.moveToElementEditStart(p?i:g),o.select()),o.moveToElementEditStart(e&&!p?v:g)}o.select(),o.scrollIntoView()}}},enterBr:function(e,n,r,i){if(r=r||t(e)){var s=r.document,a=r.checkEndOfBlock(),f=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),l=f.block,f=l&&f.block.getName();!i&&f=="li"?o(e,n,r,i):(!i&&a&&u.test(f)?(a=l.getDirection())?(s=s.createElement("div"),s.setAttribute("dir",a),s.insertAfter(l),r.setStart(s,0)):(s.createElement("br").insertAfter(l),CKEDITOR.env.gecko&&s.createText("").insertAfter(l),r.setStartAt(l.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(l=f=="pre"&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?s.createText("\r"):s.createElement("br"),r.deleteContents(),r.insertNode(l),CKEDITOR.env.needsBrFiller?(s.createText("﻿").insertAfter(l),a&&l.getParent().appendBogus(),l.getNext().$.nodeValue="",r.setStartAt(l.getNext(),CKEDITOR.POSITION_AFTER_START)):r.setStartAt(l,CKEDITOR.POSITION_AFTER_END)),r.collapse(!0),r.select(),r.scrollIntoView())}}};var i=CKEDITOR.plugins.enterkey,s=i.enterBr,o=i.enterBlock,u=/^h[1-6]$/}(),function(){function e(e,t){var n={},r=[],i={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},e=e.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(e,s){var o=t?"&"+s+";":i[s];return n[o]=t?i[s]:"&"+s+";",r.push(o),""});if(!t&&e){var e=e.split(","),s=document.createElement("div"),o;s.innerHTML="&"+e.join(";&")+";",o=s.innerHTML,s=null;for(s=0;s<o.length;s++){var u=o.charAt(s);n[u]="&"+e[s]+";",r.push(u)}}return n.regex=r.join(t?"|":""),n}CKEDITOR.plugins.add("entities",{afterInit:function(t){var n=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var r=[];n.basicEntities!==!1&&r.push("nbsp,gt,lt,amp"),n.entities&&(r.length&&r.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),n.entities_latin&&r.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),n.entities_greek&&r.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),n.entities_additional&&r.push(n.entities_additional));var i=e(r.join(",")),s=i.regex?"["+i.regex+"]":"a^";delete i.regex,n.entities&&n.entities_processNumerical&&(s="[^ -~]|"+s);var s=RegExp(s,"g"),o=function(e){return n.entities_processNumerical=="force"||!i[e]?"&#"+e.charCodeAt(0)+";":i[e]},u=e("nbsp,gt,lt,amp,shy",!0),a=RegExp(u.regex,"g"),f=function(e){return u[e]};t.addRules({text:function(e){return e.replace(a,f).replace(s,o)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,n,r){t=t||"80%",n=n||"70%",typeof t=="string"&&t.length>1&&t.substr(t.length-1,1)=="%"&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),typeof n=="string"&&n.length>1&&n.substr(n.length-1,1)=="%"&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10)),t<640&&(t=640),n<420&&(n=420);var i=parseInt((window.screen.height-n)/2,10),s=parseInt((window.screen.width-t)/2,10),r=(r||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+n+",top="+i+",left="+s,o=window.open("",null,r,!0);if(!o)return!1;try{navigator.userAgent.toLowerCase().indexOf(" chrome/")==-1&&(o.moveTo(s,i),o.resizeTo(t,n)),o.focus(),o.location.href=e}catch(u){window.open(e,null,r,!0)}return!0}}),function(){function e(e,t){var n=[];if(!t)return e;for(var r in t)n.push(r+"="+encodeURIComponent(t[r]));return e+(e.indexOf("?")!=-1?"&":"?")+n.join("&")}function t(e){return e+="",e.charAt(0).toUpperCase()+e.substr(1)}function n(){var n=this.getDialog(),r=n.getParentEditor();r._.filebrowserSe=this;var i=r.config["filebrowser"+t(n.getName())+"WindowWidth"]||r.config.filebrowserWindowWidth||"80%",n=r.config["filebrowser"+t(n.getName())+"WindowHeight"]||r.config.filebrowserWindowHeight||"70%",s=this.filebrowser.params||{};s.CKEditor=r.name,s.CKEditorFuncNum=r._.filebrowserFn,s.langCode||(s.langCode=r.langCode),s=e(this.filebrowser.url,s),r.popup(s,i,n,r.config.filebrowserWindowFeatures||r.config.fileBrowserWindowFeatures)}function r(){var e=this.getDialog();return e.getParentEditor()._.filebrowserSe=this,!e.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value||!e.getContentElement(this["for"][0],this["for"][1]).getAction()?!1:!0}function i(t,n,r){var i=r.params||{};i.CKEditor=t.name,i.CKEditorFuncNum=t._.filebrowserFn,i.langCode||(i.langCode=t.langCode),n.action=e(r.url,i),n.filebrowser=r}function s(e,o,u,f){if(f&&f.length)for(var l,h=f.length;h--;){l=f[h],(l.type=="hbox"||l.type=="vbox"||l.type=="fieldset")&&s(e,o,u,l.children);if(l.filebrowser){typeof l.filebrowser=="string"&&(l.filebrowser={action:l.type=="fileButton"?"QuickUpload":"Browse",target:l.filebrowser});if(l.filebrowser.action=="Browse"){var p=l.filebrowser.url;p===void 0&&(p=e.config["filebrowser"+t(o)+"BrowseUrl"],p===void 0&&(p=e.config.filebrowserBrowseUrl)),p&&(l.onClick=n,l.filebrowser.url=p,l.hidden=!1)}else if(l.filebrowser.action=="QuickUpload"&&l["for"]){p=l.filebrowser.url,p===void 0&&(p=e.config["filebrowser"+t(o)+"UploadUrl"],p===void 0&&(p=e.config.filebrowserUploadUrl));if(p){var d=l.onClick;l.onClick=function(e){var t=e.sender;return d&&d.call(t,e)===!1?!1:r.call(t,e)},l.filebrowser.url=p,l.hidden=!1,i(e,u.getContents(l["for"][0]).get(l["for"][1]),l.filebrowser)}}}}}function o(e,t,n){if(n.indexOf(";")!==-1){for(var n=n.split(";"),r=0;r<n.length;r++)if(o(e,t,n[r]))return!0;return!1}return(e=e.getContents(t).get(n).filebrowser)&&e.url}function u(e,t){var n=this._.filebrowserSe.getDialog(),r=this._.filebrowserSe["for"],i=this._.filebrowserSe.filebrowser.onSelect;r&&n.getContentElement(r[0],r[1]).reset();if((typeof t!="function"||t.call(this._.filebrowserSe)!==!1)&&(!i||i.call(this._.filebrowserSe,e,t)!==!1)){typeof t=="string"&&t&&alert(t);if(e){r=this._.filebrowserSe,n=r.getDialog();if(r=r.filebrowser.target||null){r=r.split(":");if(i=n.getContentElement(r[0],r[1]))i.setValue(e),n.selectPage(r[0])}}}}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(e){e._.filebrowserFn=CKEDITOR.tools.addFunction(u,e),e.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(e){if(e.editor.plugins.filebrowser)for(var t=e.data.definition,n,r=0;r<t.contents.length;++r)if(n=t.contents[r])s(e.editor,e.data.name,t,n.elements),n.hidden&&n.filebrowser&&(n.hidden=!o(t,n.id,n.filebrowser))})}(),function(){function e(e){var i=e.config,s=e.fire("uiSpace",{space:"top",html:""}).html,o=function(){function t(e,t,n){u.setStyle(t,r(n)),u.setStyle("position",e)}function s(e){var n=l.getDocumentPosition();switch(e){case"top":t("absolute","top",n.y-g-E);break;case"pin":t("fixed","top",x);break;case"bottom":t("absolute","top",n.y+(v.height||v.bottom-v.top)+E)}f=e}var f,l,p,v,m,g,y,w=i.floatSpaceDockedOffsetX||0,E=i.floatSpaceDockedOffsetY||0,S=i.floatSpacePinnedOffsetX||0,x=i.floatSpacePinnedOffsetY||0;return function(t){if(l=e.editable()){t&&t.name=="focus"&&u.show(),u.removeStyle("left"),u.removeStyle("right"),p=u.getClientRect(),v=l.getClientRect(),m=n.getViewPaneSize(),g=p.height,y="pageXOffset"in n.$?n.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;if(f){g+E<=v.top?s("top"):g+E>m.height-v.bottom?s("pin"):s("bottom");var t=m.width/2,t=v.left>0&&v.right<m.width&&v.width>p.width?e.config.contentsLangDirection=="rtl"?"right":"left":t-v.left>v.right-t?"left":"right",i;p.width>m.width?(t="left",i=0):(i=t=="left"?v.left>0?v.left:0:v.right<m.width?m.width-v.right:0,i+p.width>m.width&&(t=t=="left"?"right":"left",i=0)),u.setStyle(t,r((f=="pin"?S:w)+i+(f=="pin"?0:t=="left"?y:-y)))}else f="pin",s("pin"),o(t)}}}();if(s){var u=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(t.output({content:s,id:e.id,langDir:e.lang.dir,langCode:e.langCode,name:e.name,style:"display:none;z-index:"+(i.baseFloatZIndex-1),topId:e.ui.spaceId("top"),voiceLabel:e.lang.editorPanel+", "+e.name}))),f=CKEDITOR.tools.eventsBuffer(500,o),l=CKEDITOR.tools.eventsBuffer(100,o);u.unselectable(),u.on("mousedown",function(e){e=e.data,e.getTarget().hasAscendant("a",1)||e.preventDefault()}),e.on("focus",function(t){o(t),e.on("change",f.input),n.on("scroll",l.input),n.on("resize",l.input)}),e.on("blur",function(){u.hide(),e.removeListener("change",f.input),n.removeListener("scroll",l.input),n.removeListener("resize",l.input)}),e.on("destroy",function(){n.removeListener("scroll",l.input),n.removeListener("resize",l.input),u.clearCustomData(),u.remove()}),e.focusManager.hasFocus&&u.show(),e.focusManager.add(u,1)}}var t=CKEDITOR.addTemplate("floatcontainer",'<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),n=CKEDITOR.document.getWindow(),r=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(t){t.on("loaded",function(){e(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),t=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),n=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),r=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){var t=t||{},n=t.attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(n["aria-multiselectable"]=!0),!n.role&&(n.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",n.role),n=this.keys,n[40]="next",n[9]="next",n[38]="prev",n[CKEDITOR.SHIFT+9]="prev",n[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(n[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(t),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(e){var t=this.toggle(e);this.onClick&&this.onClick(e,t)},this)),this._.click}},proto:{add:function(e,n,i){var s=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[e]=s;var o;o=CKEDITOR.tools.htmlEncodeAttr(e).replace(r,"\\'"),e={id:s,val:o,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(i||e),text:n||e},this._.pendingList.push(t.output(e))},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t,this._.pendingHtml.push(n.output({id:t,label:e}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);return t?this.unmark(e):this.mark(e),!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),t&&t.getName()=="ul"&&t.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var e=this._.items,t=this._.groups,n=this.element.getDocument(),r;for(r in e)n.getById(e[r]).setStyle("display","");for(var i in t)e=n.getById(t[i]),r=e.getNext(),e.setStyle("display",""),r&&r.getName()=="ul"&&r.setStyle("display","")},mark:function(e){this.multiSelect||this.unmarkAll();var e=this._.items[e],t=this.element.getDocument().getById(e);t.addClass("cke_selected"),this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(t)},unmark:function(e){var t=this.element.getDocument(),e=this._.items[e],n=t.getById(e);n.removeClass("cke_selected"),t.getById(e+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(n)},unmarkAll:function(){var e=this._.items,t=this.element.getDocument(),n;for(n in e){var r=e[n];t.getById(r).removeClass("cke_selected"),t.getById(r+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var t=this.element.getElementsByTag("a"),n,r=-1;if(e){for(n=this.element.getDocument().getById(this._.items[e]).getFirst();e=t.getItem(++r);)if(e.equals(n)){this._.focusIndex=r;break}}else this.element.focus();n&&setTimeout(function(){n.focus()},0)}}})}}),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)e+=' onkeypress="return false;"';CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);"  onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),e=e+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',t=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),n=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}},CKEDITOR.ui.button.prototype={render:function(e,r){var i=CKEDITOR.env,s=this._.id=CKEDITOR.tools.getNextId(),o="",u=this.command,a;this._.editor=e;var f={id:s,button:this,editor:e,focus:function(){CKEDITOR.document.getById(s).focus()},execute:function(){this.button.click(e)},attach:function(e){this.button.attach(e)}},l=CKEDITOR.tools.addFunction(function(e){if(f.onkey)return e=new CKEDITOR.dom.event(e),f.onkey(f,e.getKeystroke())!==!1}),h=CKEDITOR.tools.addFunction(function(e){var t;return f.onfocus&&(t=f.onfocus(f,new CKEDITOR.dom.event(e))!==!1),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&e.preventBubble(),t}),p=0,d=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var t=e.editable();t.isInline()&&t.hasFocus&&(e.lockSelection(),p=1)}});f.clickFn=a=CKEDITOR.tools.addFunction(function(){p&&(e.unlockSelection(1),p=0),f.execute()});if(this.modes){var v={},m=function(){var t=e.mode;t&&(t=this.modes[t]?v[t]!=void 0?v[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=e.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())};e.on("beforeModeUnload",function(){e.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(v[e.mode]=this._.state)},this),e.on("activeFilterChange",m,this),e.on("mode",m,this),!this.readOnly&&e.on("readOnly",m,this)}else u&&(u=e.getCommand(u))&&(u.on("state",function(){this.setState(u.state)},this),o+=u.state==CKEDITOR.TRISTATE_ON?"on":u.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&e.on("contentDirChanged",function(t){var n=CKEDITOR.document.getById(this._.id),r=n.getFirst(),t=t.data;t!=e.lang.dir?n.addClass("cke_"+t):n.removeClass("cke_ltr").removeClass("cke_rtl"),r.setAttribute("style",CKEDITOR.skin.getIconStyle(g,t=="rtl",this.icon,this.iconOffset))},this),u||(o+="off");var g=m=this.name||this.command;return this.icon&&!/\./.test(this.icon)&&(g=this.icon,this.icon=null),i={id:s,name:m,iconName:g,label:this.label,cls:this.className||"",state:o,ariaDisabled:o=="disabled"?"true":"false",title:this.title,titleJs:i.gecko&&i.version>=10900&&!i.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:l,mousedownFn:d,focusFn:h,clickFn:a,style:CKEDITOR.skin.getIconStyle(g,e.lang.dir=="rtl",this.icon,this.iconOffset),arrowHtml:this.hasArrow?t.output():""},n.output(i,r),this.onRender&&this.onRender(),f},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);return t?(t.setState(e,"cke_button"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this.hasArrow?(e=e==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(e)):e==CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;return!this.allowedContent&&!this.requiredContent&&this.command&&(t=e.getCommand(this.command)||t),this._.feature=t}},CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)}}(),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" hidefocus=true title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900&&!CKEDITOR.env.hc?"":'" href="javascript:void(\'{titleJs}\')"')+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)e+=' onkeypress="return false;"';CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);"  onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),t=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1}),e=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document,e.className="cke_combopanel",e.block={multiSelect:e.multiSelect,attributes:e.attributes},e.toolbarRelated=!0,this._={panelDefinition:e,items:{}}},proto:{renderHtml:function(e){var t=[];return this.render(e,t),t.join("")},render:function(e,n){function r(){var t=this.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED),this.setState(t),this.setValue(""),t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}var i=CKEDITOR.env,s="cke_"+this.id,o=CKEDITOR.tools.addFunction(function(t){c&&(e.unlockSelection(1),c=0),a.execute(t)},this),u=this,a={id:s,combo:this,focus:function(){CKEDITOR.document.getById(s).getChild(1).focus()},execute:function(t){var n=u._;if(n.state!=CKEDITOR.TRISTATE_DISABLED){u.createPanel(e);if(n.on)n.panel.hide();else{u.commit();var r=u.getValue();r?n.list.mark(r):n.list.unmarkAll(),n.panel.showBlock(u.id,new CKEDITOR.dom.element(t),4)}}},clickFn:o};e.on("activeFilterChange",r,this),e.on("mode",r,this),e.on("selectionChange",r,this),!this.readOnly&&e.on("readOnly",r,this);var f=CKEDITOR.tools.addFunction(function(t,n){var t=new CKEDITOR.dom.event(t),r=t.getKeystroke();r==40&&e.once("panelShow",function(e){e.data._.panel._.currentBlock.onKeyDown(40)});switch(r){case 13:case 32:case 40:CKEDITOR.tools.callFunction(o,n);break;default:a.onkey(a,r)}t.preventDefault()}),l=CKEDITOR.tools.addFunction(function(){a.onfocus&&a.onfocus()}),c=0,h=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var t=e.editable();t.isInline()&&t.hasFocus&&(e.lockSelection(),c=1)}});return a.keyDownFn=f,i={id:s,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:i.gecko&&i.version>=10900&&!i.hc?"":(this.title||"").replace("'",""),keydownFn:f,mousedownFn:h,focusFn:l,clickFn:o},t.output(i,n),this.onRender&&this.onRender(),a},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition,n=this._.panelDefinition.block,r=t.parent||CKEDITOR.document.getBody(),i="cke_combopanel__"+this.name,s=new CKEDITOR.ui.floatPanel(e,r,t),o=s.addListBlock(this.id,n),u=this;s.onShow=function(){this.element.addClass(i),u.setState(CKEDITOR.TRISTATE_ON),u._.on=1,u.editorFocus&&!e.focusManager.hasFocus&&e.focus(),u.onOpen&&u.onOpen(),e.once("panelShow",function(){o.focus(!o.multiSelect&&u.getValue())})},s.onHide=function(t){this.element.removeClass(i),u.setState(u.modes&&u.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),u._.on=0,!t&&u.onClose&&u.onClose()},s.onEscape=function(){s.hide(1)},o.onClick=function(e,t){u.onClick&&u.onClick.call(u,e,t),s.hide()},this._.panel=s,this._.list=o,s.getBlock(this.id).onHide=function(){u._.on=0,u.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(e,t){this._.value=e;var n=this.document.getById("cke_"+this.id+"_text");n&&(!e&&!t?(t=this.label,n.addClass("cke_combo_inlinelabel")):n.removeClass("cke_combo_inlinelabel"),n.setText(typeof t!="undefined"?t:e))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()},add:function(e,t,n){this._.items[e]=n||e,this._.list.add(e,t,n)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById("cke_"+this.id);t.setState(e,"cke_combo"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(e){if(!e.blockless){for(var t=e.config,n=e.lang.format,r=t.format_tags.split(";"),i={},s=0,o=[],u=0;u<r.length;u++){var a=r[u],f=new CKEDITOR.style(t["format_"+a]);if(!e.filter.customConfig||e.filter.check(f))s++,i[a]=f,i[a]._.enterMode=e.config.enterMode,o.push(f)}s!==0&&e.ui.addRichCombo("Format",{label:n.label,title:n.panelTitle,toolbar:"styles,20",allowedContent:o,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){this.startGroup(n.panelTitle);for(var e in i){var t=n["tag_"+e];this.add(e,i[e].buildPreview(t),t)}},onClick:function(t){e.focus(),e.fire("saveSnapshot");var t=i[t],n=e.elementPath();e[t.checkActive(n)?"removeStyle":"applyStyle"](t),setTimeout(function(){e.fire("saveSnapshot")},0)},onRender:function(){e.on("selectionChange",function(t){var n=this.getValue(),t=t.data.path;this.refresh();for(var r in i)if(i[r].checkActive(t)){r!=n&&this.setValue(r,e.lang.format["tag_"+r]);return}this.setValue("")},this)},onOpen:function(){this.showAll();for(var t in i)e.activeFilter.check(i[t])||this.hideItem(t)},refresh:function(){var t=e.elementPath();if(t){if(t.isContextFor("p"))for(var n in i)if(e.activeFilter.check(i[n]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var e={canUndo:!1,exec:function(e){var t=e.document.createElement("hr");e.insertElement(t)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",e),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=e.config.forceSimpleAmpersand,t.indentationChars=e.config.dataIndentationChars||"	",e.dataProcessor.writer=t}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="	",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e=CKEDITOR.dtd,t;for(t in CKEDITOR.tools.extend({},e.$nonBodyContent,e.$block,e.$listItem,e.$tableContent))this.setRules(t,{indent:!e[t]["#"],breakBeforeOpen:1,breakBeforeClose:!e[t]["#"],breakAfterClose:1,needsSpace:t in e.$block&&!(t in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var t=this._.rules[e];this._.afterCloser&&t&&t.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0},openTagClose:function(e,t){var n=this._.rules[e];t?(this._.output.push(this.selfClosingEnd),n&&n.breakAfterClose&&(this._.needsSpace=n.needsSpace)):(this._.output.push(">"),n&&n.indent&&(this._.indentation=this._.indentation+this.indentationChars)),n&&n.breakAfterOpen&&this.lineBreak(),e=="pre"&&(this._.inPre=1)},attribute:function(e,t){typeof t=="string"&&(this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,"&")),t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){var t=this._.rules[e];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",e,">"),e=="pre"&&(this._.inPre=0),t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace),this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("<!--",e,"-->")},lineBreak:function(){!this._.inPre&&this._.output.length>0&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(e,t){var n=this._.rules[e];n?CKEDITOR.tools.extend(n,t,!0):this._.rules[e]=t}}}),function(){function e(e,t){t||(t=e.getSelection().getSelectedElement());if(t&&t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly())return t}function t(e){var t=e.getStyle("float");if(t=="inherit"||t=="none")t=0;return t||(t=e.getAttribute("align")),t}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(t){if(!t.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var n="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(t,"image","advanced")&&(n="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),t.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:n,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),t.ui.addButton&&t.ui.addButton("Image",{label:t.lang.common.image,command:"image",toolbar:"insert,10"}),t.on("doubleclick",function(e){var t=e.data.element;t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly()&&(e.data.dialog="image")}),t.addMenuItems&&t.addMenuItems({image:{label:t.lang.image.menu,command:"image",group:"image"}}),t.contextMenu&&t.contextMenu.addListener(function(n){if(e(t,n))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(n){function r(r){var i=n.getCommand("justify"+r);i&&((r=="left"||r=="right")&&i.on("exec",function(i){var s=e(n),o;s&&(o=t(s),o==r?(s.removeStyle("float"),r==t(s)&&s.removeAttribute("align")):s.setStyle("float",r),i.cancel())}),i.on("refresh",function(i){var s=e(n);s&&(s=t(s),this.setState(s==r?CKEDITOR.TRISTATE_ON:r=="right"||r=="left"?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),i.cancel())}))}n.plugins.image2||(r("left"),r("right"),r("center"),r("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function e(e,t){var n=r.exec(e),i=r.exec(t);if(n){if(!n[2]&&i[2]=="px")return i[1];if(n[2]=="px"&&!i[2])return i[1]+"px"}return t}var t=CKEDITOR.htmlParser.cssStyle,n=CKEDITOR.tools.cssLength,r=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,i={elements:{$:function(n){var r=n.attributes;if((r=(r=(r=r&&r["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(r)))&&r.children[0])&&n.attributes["data-cke-resizable"]){var i=(new t(n)).rules,n=r.attributes,s=i.width,i=i.height;s&&(n.width=e(n.width,s)),i&&(n.height=e(n.height,i))}return r}}},s=CKEDITOR.plugins.add("fakeobjects",{init:function(e){e.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(e){(e=(e=e.dataProcessor)&&e.htmlFilter)&&e.addRules(i)}});CKEDITOR.editor.prototype.createFakeElement=function(e,r,i,o){var u=this.lang.fakeobjects,u=u[i]||u.unknown,r={"class":r,"data-cke-realelement":encodeURIComponent(e.getOuterHtml()),"data-cke-real-node-type":e.type,alt:u,title:u,align:e.getAttribute("align")||""};return CKEDITOR.env.hc||(r.src=CKEDITOR.getUrl(s.path+"images/spacer.gif")),i&&(r["data-cke-real-element-type"]=i),o&&(r["data-cke-resizable"]=o,i=new t,o=e.getAttribute("width"),e=e.getAttribute("height"),o&&(i.rules.width=n(o)),e&&(i.rules.height=n(e)),i.populate(r)),this.document.createElement("img",{attributes:r})},CKEDITOR.editor.prototype.createFakeParserElement=function(e,r,i,o){var u=this.lang.fakeobjects,u=u[i]||u.unknown,a;return a=new CKEDITOR.htmlParser.basicWriter,e.writeHtml(a),a=a.getHtml(),r={"class":r,"data-cke-realelement":encodeURIComponent(a),"data-cke-real-node-type":e.type,alt:u,title:u,align:e.attributes.align||""},CKEDITOR.env.hc||(r.src=CKEDITOR.getUrl(s.path+"images/spacer.gif")),i&&(r["data-cke-real-element-type"]=i),o&&(r["data-cke-resizable"]=o,o=e.attributes,e=new t,i=o.width,o=o.height,i!=void 0&&(e.rules.width=n(i)),o!=void 0&&(e.rules.height=n(o)),e.populate(r)),new CKEDITOR.htmlParser.element("img",r)},CKEDITOR.editor.prototype.restoreRealElement=function(t){if(t.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var n=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(t.data("cke-realelement")),this.document);if(t.data("cke-resizable")){var r=t.getStyle("width"),t=t.getStyle("height");r&&n.setAttribute("width",e(n.getAttribute("width"),r)),t&&n.setAttribute("height",e(n.getAttribute("height"),t))}return n}}(),CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function e(e){return n.replace(/%1/g,e=="rtl"?"right":"left").replace(/%2/g,"cke_contents_"+e)}var t="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",n=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+t+"padding-%1:18px;cursor:auto;}"+(CKEDITOR.plugins.link.synAnchorSelector?"a.cke_anchor_empty{display:inline-block;"+(CKEDITOR.env.ie&&CKEDITOR.env.version>10?"min-height:16px;vertical-align:middle":"")+"}":"")+".%2 img.cke_anchor{"+t+"width:16px;min-height:15px;height:1.15em;vertical-align:"+(CKEDITOR.env.opera?"middle":"text-bottom")+";}";CKEDITOR.addCss(e("ltr")+e("rtl"))},init:function(e){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(e,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(e,"link","target")&&(t=t.replace("]",",target,onclick]")),e.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"})),e.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),e.addCommand("unlink",new CKEDITOR.unlinkCommand),e.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),e.setKeystroke(CKEDITOR.CTRL+76,"link"),e.ui.addButton&&(e.ui.addButton("Link",{label:e.lang.link.toolbar,command:"link",toolbar:"links,10"}),e.ui.addButton("Unlink",{label:e.lang.link.unlink,command:"unlink",toolbar:"links,20"}),e.ui.addButton("Anchor",{label:e.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),e.on("doubleclick",function(t){var n=CKEDITOR.plugins.link.getSelectedLink(e)||t.data.element;n.isReadOnly()||(n.is("a")?(t.data.dialog=n.getAttribute("name")&&(!n.getAttribute("href")||!n.getChildCount())?"anchor":"link",e.getSelection().selectElement(n)):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,n)&&(t.data.dialog="anchor"))}),e.addMenuItems&&e.addMenuItems({anchor:{label:e.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:e.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:e.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:e.lang.link.unlink,command:"unlink",group:"link",order:5}}),e.contextMenu&&e.contextMenu.addListener(function(t){if(!t||t.isReadOnly())return null;t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t);if(!t&&!(t=CKEDITOR.plugins.link.getSelectedLink(e)))return null;var n={};return t.getAttribute("href")&&t.getChildCount()&&(n={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),t&&t.hasAttribute("name")&&(n.anchor=n.removeAnchor=CKEDITOR.TRISTATE_OFF),n})},afterInit:function(e){var t=e.dataProcessor,n=t&&t.dataFilter,t=t&&t.htmlFilter,r=e._.elementsPath&&e._.elementsPath.filters;n&&n.addRules({elements:{a:function(t){var n=t.attributes;if(!n.name)return null;var r=!t.children.length;if(CKEDITOR.plugins.link.synAnchorSelector){var t=r?"cke_anchor_empty":"cke_anchor",i=n["class"];n.name&&(!i||i.indexOf(t)<0)&&(n["class"]=(i||"")+" "+t),r&&CKEDITOR.plugins.link.emptyAnchorFix&&(n.contenteditable="false",n["data-cke-editable"]=1)}else if(CKEDITOR.plugins.link.fakeAnchor&&r)return e.createFakeParserElement(t,"cke_anchor","anchor");return null}}}),CKEDITOR.plugins.link.emptyAnchorFix&&t&&t.addRules({elements:{a:function(e){delete e.attributes.contenteditable}}}),r&&r.push(function(t,n){if(n=="a"&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t)||t.getAttribute("name")&&(!t.getAttribute("href")||!t.getChildCount())))return"anchor"})}}),CKEDITOR.plugins.link={getSelectedLink:function(e){var t=e.getSelection(),n=t.getSelectedElement();return n&&n.is("a")?n:(t=t.getRanges()[0])?(t.shrink(CKEDITOR.SHRINK_TEXT),e.elementPath(t.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(e){for(var t=e.editable(),n=t.isInline()&&!e.plugins.divarea?e.document:t,r=n.getElementsByTag("a"),t=[],i=0,s;s=r.getItem(i++);)(s.data("cke-saved-name")||s.hasAttribute("name"))&&t.push({name:s.data("cke-saved-name")||s.getAttribute("name"),id:s.getAttribute("id")});if(this.fakeAnchor){n=n.getElementsByTag("img");for(i=0;s=n.getItem(i++);)(s=this.tryRestoreFakeAnchor(e,s))&&t.push({name:s.getAttribute("name"),id:s.getAttribute("id")})}return t},fakeAnchor:CKEDITOR.env.opera||CKEDITOR.env.webkit,synAnchorSelector:CKEDITOR.env.ie,emptyAnchorFix:CKEDITOR.env.ie&&8>CKEDITOR.env.version,tryRestoreFakeAnchor:function(e,t){if(t&&t.data("cke-real-element-type")&&t.data("cke-real-element-type")=="anchor"){var n=e.restoreRealElement(t);if(n.data("cke-saved-name"))return n}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(e){var t=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});e.removeStyle(t)},refresh:function(e,t){var n=t.lastElement&&t.lastElement.getAscendant("a",!0);n&&n.getName()=="a"&&n.getAttribute("href")&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(e){var t=e.getSelection(),n=t.createBookmarks(),r;if(t&&(r=t.getSelectedElement())&&(CKEDITOR.plugins.link.fakeAnchor&&!r.getChildCount()?CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,r):r.is("a")))r.remove(1);else if(r=CKEDITOR.plugins.link.getSelectedLink(e))r.hasAttribute("href")?(r.removeAttributes({name:1,"data-cke-saved-name":1}),r.removeClass("cke_anchor")):r.remove(1);t.selectBookmarks(n)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0}),"use strict",function(){function e(e,t,n){return l(t)&&l(n)&&n.equals(t.getNext(function(e){return!(J(e)||K(e)||c(e))}))}function t(e){this.upper=e[0],this.lower=e[1],this.set.apply(this,e.slice(2))}function n(e){var t=e.element;if(t&&l(t)&&(t=t.getAscendant(e.triggers,!0))&&e.editable.contains(t)){var n=s(t,!0);if(n.getAttribute("contenteditable")=="true")return t;if(n.is(e.triggers))return n}return null}function r(e,t,n){return b(e,t),b(e,n),e=t.size.bottom,n=n.size.top,e&&n?0|(e+n)/2:e||n}function i(e,t,n){return t=t[n?"getPrevious":"getNext"](function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!J(t)||l(t)&&!c(t)&&!f(e,t)})}function s(e,t){if(e.data("cke-editable"))return null;for(t||(e=e.getParent());e;){if(e.data("cke-editable"))break;if(e.hasAttribute("contenteditable"))return e;e=e.getParent()}return null}function o(e){var t=e.doc,n=N('<span contenteditable="false" style="'+W+"position:absolute;border-top:1px dashed "+e.boxColor+'"></span>',t),r=this.path+"images/"+(C.hidpi?"hidpi/":"")+"icon.png";x(n,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(e.editable,!0),this},lineChildren:[x(N('<span title="'+e.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',t),{base:W+"height:17px;width:17px;"+(e.rtl?"left":"right")+":17px;background:url("+r+") center no-repeat "+e.boxColor+";cursor:pointer;"+(C.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(C.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),x(N(V,t),{base:X+"left:0px;border-left-color:"+e.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),x(N(V,t),{base:X+"right:0px;border-right-color:"+e.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){b(e,this);var t=e.holdDistance,n=this.size;return n&&e.mouse.y>n.top-t&&e.mouse.y<n.bottom+t&&e.mouse.x>n.left-t&&e.mouse.x<n.right+t?!0:!1},place:function(){var t=e.view,n=e.editable,r=e.trigger,i=r.upper,s=r.lower,o=i||s,u=o.getParent(),a={};this.trigger=r,i&&b(e,i,!0),s&&b(e,s,!0),b(e,u,!0),e.inInlineMode&&w(e,!0),u.equals(n)?(a.left=t.scroll.x,a.right=-t.scroll.x,a.width=""):(a.left=o.size.left-o.size.margin.left+t.scroll.x-(e.inInlineMode?t.editable.left+t.editable.border.left:0),a.width=o.size.outerWidth+o.size.margin.left+o.size.margin.right+t.scroll.x,a.right=""),i&&s?a.top=i.size.margin.bottom===s.size.margin.top?0|i.size.bottom+i.size.margin.bottom/2:i.size.margin.bottom<s.size.margin.top?i.size.bottom+i.size.margin.bottom:i.size.bottom+i.size.margin.bottom-s.size.margin.top:i?s||(a.top=i.size.bottom+i.size.margin.bottom):a.top=s.size.top-s.size.margin.top,r.is(H)||a.top>t.scroll.y-15&&a.top<t.scroll.y+5?(a.top=e.inInlineMode?0:t.scroll.y,this.look(H)):r.is(B)||a.top>t.pane.bottom-5&&a.top<t.pane.bottom+15?(a.top=e.inInlineMode?t.editable.height+t.editable.padding.top+t.editable.padding.bottom:t.pane.bottom-1,this.look(B)):(e.inInlineMode&&(a.top=a.top-(t.editable.top+t.editable.border.top)),this.look(j)),e.inInlineMode&&(a.top--,a.top=a.top+t.editable.scroll.top,a.left=a.left+t.editable.scroll.left);for(var f in a)a[f]=CKEDITOR.tools.cssLength(a[f]);this.setStyles(a)},look:function(e){if(this.oldLook!=e){for(var t=this.lineChildren.length,n;t--;)(n=this.lineChildren[t]).setAttribute("style",n.base+n.looks[0|e/2]);this.oldLook=e}},wrap:new T("span",e.doc)});for(t=n.lineChildren.length;t--;)n.lineChildren[t].appendTo(n);n.look(j),n.appendTo(n.wrap),n.unselectable(),n.lineChildren[0].on("mouseup",function(t){n.detach(),u(e,function(t){var n=e.line.trigger;t[n.is(O)?"insertBefore":"insertAfter"](n.is(O)?n.lower:n.upper)},!0),e.editor.focus(),!C.ie&&e.enterMode!=CKEDITOR.ENTER_BR&&e.hotNode.scrollIntoView(),t.data.preventDefault(!0)}),n.on("mousedown",function(e){e.data.preventDefault(!0)}),e.line=n}function u(e,t,n){var r=new CKEDITOR.dom.range(e.doc),i=e.editor,o;C.ie&&e.enterMode==CKEDITOR.ENTER_BR?o=e.doc.createText(F):(o=(o=s(e.element,!0))&&o.data("cke-enter-mode")||e.enterMode,o=new T(A[o],e.doc),o.is("br")||e.doc.createText(F).appendTo(o)),n&&i.fire("saveSnapshot"),t(o),r.moveToPosition(o,CKEDITOR.POSITION_AFTER_START),i.getSelection().selectRanges([r]),e.hotNode=o,n&&i.fire("saveSnapshot")}function a(e,t){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function r(n){var r=C.ie&&C.version<9?" ":F,i=e.hotNode&&e.hotNode.getText()==r&&e.element.equals(e.hotNode)&&e.lastCmdDirection===!!t;u(e,function(r){i&&e.hotNode&&e.hotNode.remove(),r[t?"insertAfter":"insertBefore"](n),r.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!t}),e.lastCmdDirection=!!t}),!C.ie&&e.enterMode!=CKEDITOR.ENTER_BR&&e.hotNode.scrollIntoView(),e.line.detach()}return function(o){var o=o.getSelection().getStartElement(),u,o=o.getAscendant(U,1);if(!d(e,o)&&o&&!o.equals(e.editable)&&!o.contains(e.editable)){(u=s(o))&&u.getAttribute("contenteditable")=="false"&&(o=u),e.element=o,u=i(e,o,!t);var a;l(u)&&u.is(e.triggers)&&u.is(R)&&(!i(e,u,!t)||(a=i(e,u,!t))&&l(a)&&a.is(e.triggers))?r(u):(a=n(e,o),l(a)&&(i(e,a,!t)?(o=i(e,a,!t))&&l(o)&&o.is(e.triggers)&&r(a):r(a)))}}}()}}function f(e,t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||!t.$)return!1;var n=e.line;return n.wrap.equals(t)||n.wrap.contains(t)}function l(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.$}function c(e){if(!l(e))return!1;var t;return(t=h(e))||(l(e)?(t={left:1,right:1,center:1},t=!!t[e.getComputedStyle("float")]||!!t[e.getAttribute("align")]):t=!1),t}function h(e){return!!{absolute:1,fixed:1}[e.getComputedStyle("position")]}function p(e,t){return l(t)?t.is(e.triggers):null}function d(e,t){if(!t)return!1;for(var n=t.getParents(1),r=n.length;r--;)for(var i=e.tabuList.length;i--;)if(n[r].hasAttribute(e.tabuList[i]))return!0;return!1}function v(e,t,n){return t=t[n?"getLast":"getFirst"](function(t){return e.isRelevant(t)&&!t.is(q)}),t?(b(e,t),n?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y):!1}function m(e){var n=e.editable,r=e.mouse,i=e.view,s=e.triggerOffset;w(e);var o=r.y>(e.inInlineMode?i.editable.top+i.editable.height/2:Math.min(i.editable.height,i.pane.height)/2),n=n[o?"getLast":"getFirst"](function(e){return!J(e)&&!K(e)});return n?(f(e,n)&&(n=e.line.wrap[o?"getPrevious":"getNext"](function(e){return!J(e)&&!K(e)})),!l(n)||c(n)||!p(e,n)?null:(b(e,n),!o&&n.size.top>=0&&r.y>0&&r.y<n.size.top+s?(e=e.inInlineMode||i.scroll.y===0?H:j,new t([null,n,O,D,e])):o&&n.size.bottom<=i.pane.height&&r.y>n.size.bottom-s&&r.y<i.pane.height?(e=e.inInlineMode||n.size.bottom>i.pane.height-s&&n.size.bottom<i.pane.height?B:j,new t([n,null,M,D,e])):null)):null}function g(e){var r=e.mouse,s=e.view,o=e.triggerOffset,u=n(e);if(!u)return null;b(e,u);var o=Math.min(o,0|u.size.outerHeight/2),a=[],f,h;if(r.y>u.size.top-1&&r.y<u.size.top+o)h=!1;else{if(!(r.y>u.size.bottom-o&&r.y<u.size.bottom+1))return null;h=!0}if(c(u)||v(e,u,h)||u.getParent().is(I))return null;var d=i(e,u,!h);if(d){if(d&&d.type==CKEDITOR.NODE_TEXT)return null;if(l(d)){if(c(d)||!p(e,d)||d.getParent().is(I))return null;a=[d,u][h?"reverse":"concat"]().concat([_,D])}}else u.equals(e.editable[h?"getLast":"getFirst"](e.isRelevant))?(w(e),h&&r.y>u.size.bottom-o&&r.y<s.pane.height&&u.size.bottom>s.pane.height-o&&u.size.bottom<s.pane.height?f=B:r.y>0&&r.y<u.size.top+o&&(f=H)):f=j,a=[null,u][h?"reverse":"concat"]().concat([h?M:O,D,f,u.equals(e.editable[h?"getLast":"getFirst"](e.isRelevant))?h?B:H:j]);return 0 in a?new t(a):null}function y(e,t,n,r){for(var i=function(){var n=C.ie?t.$.currentStyle:e.win.$.getComputedStyle(t.$,"");return C.ie?function(e){return n[CKEDITOR.tools.cssStyleToDomStyle(e)]}:function(e){return n.getPropertyValue(e)}}(),s=t.getDocumentPosition(),o={},u={},a={},f={},l=G.length;l--;)o[G[l]]=parseInt(i("border-"+G[l]+"-width"),10)||0,a[G[l]]=parseInt(i("padding-"+G[l]),10)||0,u[G[l]]=parseInt(i("margin-"+G[l]),10)||0;return(!n||r)&&E(e,r),f.top=s.y-(n?0:e.view.scroll.y),f.left=s.x-(n?0:e.view.scroll.x),f.outerWidth=t.$.offsetWidth,f.outerHeight=t.$.offsetHeight,f.height=f.outerHeight-(a.top+a.bottom+o.top+o.bottom),f.width=f.outerWidth-(a.left+a.right+o.left+o.right),f.bottom=f.top+f.outerHeight,f.right=f.left+f.outerWidth,e.inInlineMode&&(f.scroll={top:t.$.scrollTop,left:t.$.scrollLeft}),x({border:o,padding:a,margin:u,ignoreScroll:n},f,!0)}function b(e,t,n){if(!l(t))return t.size=null;if(t.size){if(t.size.ignoreScroll==n&&t.size.date>new Date-z)return null}else t.size={};return x(t.size,y(e,t,n),{date:+(new Date)},!0)}function w(e,t){e.view.editable=y(e,e.editable,t,!0)}function E(e,t){e.view||(e.view={});var n=e.view;if(t||!(n&&n.date>new Date-z)){var r=e.win,n=r.getScrollPosition(),r=r.getViewPaneSize();x(e.view,{scroll:{x:n.x,y:n.y,width:e.doc.$.documentElement.scrollWidth-r.width,height:e.doc.$.documentElement.scrollHeight-r.height},pane:{width:r.width,height:r.height,bottom:r.height+n.y},date:+(new Date)},!0)}}function S(e,n,r,i){for(var s=i,o=i,u=0,a=!1,f=!1,l=e.view.pane.height,c=e.mouse;c.y+u<l&&c.y-u>0;){a||(a=n(s,i)),f||(f=n(o,i)),!a&&c.y-u>0&&(s=r(e,{x:c.x,y:c.y-u})),!f&&c.y+u<l&&(o=r(e,{x:c.x,y:c.y+u}));if(a&&f)break;u+=2}return new t([s,o,null,null])}CKEDITOR.plugins.add("magicline",{init:function(e){var r=e.config,s=r.magicline_triggerOffset||30,p={editor:e,enterMode:r.enterMode,triggerOffset:s,holdDistance:0|s*(r.magicline_holdDistance||.5),boxColor:r.magicline_color||"#ff0000",rtl:r.contentsLangDirection=="rtl",tabuList:["data-cke-hidden-sel"].concat(r.magicline_tabuList||[]),triggers:r.magicline_everywhere?U:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},v,b,S;p.isRelevant=function(e){return l(e)&&!f(p,e)&&!c(e)},e.on("contentDom",function(){var s=e.editable(),l=e.document,c=e.window;x(p,{editable:s,inInlineMode:s.isInline(),doc:l,win:c,hotNode:null},!0),p.boundary=p.inInlineMode?p.editable:p.doc.getDocumentElement(),s.is(L.$inline)||(p.inInlineMode&&!h(s)&&s.setStyles({position:"relative",top:null,left:null}),o.call(this,p),E(p),s.attachListener(e,"beforeUndoImage",function(){p.line.detach()}),s.attachListener(e,"beforeGetData",function(){p.line.wrap.getParent()&&(p.line.detach(),e.once("getData",function(){p.line.attach()},null,null,1e3))},null,null,0),s.attachListener(p.inInlineMode?l:l.getWindow().getFrame(),"mouseout",function(t){if(e.mode=="wysiwyg")if(p.inInlineMode){var n=t.data.$.clientX,t=t.data.$.clientY;E(p),w(p,!0);var r=p.view.editable,i=p.view.scroll;if(!(n>r.left-i.x&&n<r.right-i.x)||!(t>r.top-i.y&&t<r.bottom-i.y))clearTimeout(S),S=null,p.line.detach()}else clearTimeout(S),S=null,p.line.detach()}),s.attachListener(s,"keyup",function(){p.hiddenMode=0}),s.attachListener(s,"keydown",function(t){if(e.mode=="wysiwyg"){t=t.data.getKeystroke(),e.getSelection().getStartElement();switch(t){case 2228240:case 16:p.hiddenMode=1,p.line.detach()}}}),s.attachListener(p.inInlineMode?s:l,"mousemove",function(t){b=!0;if(e.mode=="wysiwyg"&&!e.readOnly&&!S){var n={x:t.data.$.clientX,y:t.data.$.clientY};S=setTimeout(function(){p.mouse=n,S=p.trigger=null,E(p),b&&!p.hiddenMode&&e.focusManager.hasFocus&&!p.line.mouseNear()&&(p.element=$(p,!0))&&((p.trigger=m(p)||g(p)||Q(p))&&!d(p,p.trigger.upper||p.trigger.lower)?p.line.attach().place():(p.trigger=null,p.line.detach()),b=!1)},30)}}),s.attachListener(c,"scroll",function(){e.mode=="wysiwyg"&&(p.line.detach(),C.webkit&&(p.hiddenMode=1,clearTimeout(v),v=setTimeout(function(){p.mouseDown||(p.hiddenMode=0)},50)))}),s.attachListener(k?l:c,"mousedown",function(){e.mode=="wysiwyg"&&(p.line.detach(),p.hiddenMode=1,p.mouseDown=1)}),s.attachListener(k?l:c,"mouseup",function(){p.hiddenMode=0,p.mouseDown=0}),e.addCommand("accessPreviousSpace",a(p)),e.addCommand("accessNextSpace",a(p,!0)),e.setKeystroke([[r.magicline_keystrokePrevious,"accessPreviousSpace"],[r.magicline_keystrokeNext,"accessNextSpace"]]),e.on("loadSnapshot",function(){var t,n,r,i;for(i in{p:1,br:1,div:1}){t=e.document.getElementsByTag(i);for(r=t.count();r--;)if((n=t.getItem(r)).data("cke-magicline-hot")){p.hotNode=n,p.lastCmdDirection=n.data("cke-magicline-dir")==="true"?!0:!1;return}}}),this.backdoor={accessFocusSpace:u,boxTrigger:t,isLine:f,getAscendantTrigger:n,getNonEmptyNeighbour:i,getSize:y,that:p,triggerEdge:g,triggerEditable:m,triggerExpand:Q})},this)}});var x=CKEDITOR.tools.extend,T=CKEDITOR.dom.element,N=T.createFromHtml,C=CKEDITOR.env,k=CKEDITOR.env.ie&&CKEDITOR.env.version<9,L=CKEDITOR.dtd,A={},O=128,M=64,_=32,D=16,P=8,H=4,B=2,j=1,F=" ",I=L.$listItem,q=L.$tableContent,R=x({},L.$nonEditable,L.$empty),U=L.$block,z=100,W="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",X=W+"border-color:transparent;display:block;border-style:solid;",V="<span>"+F+"</span>";A[CKEDITOR.ENTER_BR]="br",A[CKEDITOR.ENTER_P]="p",A[CKEDITOR.ENTER_DIV]="div",t.prototype={set:function(e,t,n){return this.properties=e+t+(n||j),this},is:function(e){return(this.properties&e)==e}};var $=function(){return function(e,t,n){if(!e.mouse)return null;var r=e.doc,i=e.line.wrap,n=n||e.mouse,s=new CKEDITOR.dom.element(r.$.elementFromPoint(n.x,n.y));return t&&f(e,s)&&(i.hide(),s=new CKEDITOR.dom.element(r.$.elementFromPoint(n.x,n.y)),i.show()),!s||s.type!=CKEDITOR.NODE_ELEMENT||!s.$||C.ie&&C.version<9&&!e.boundary.equals(s)&&!e.boundary.contains(s)?null:s}}(),J=CKEDITOR.dom.walker.whitespaces(),K=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Q=function(){function t(t){var i=t.element,s,o,u;if(!l(i)||i.contains(t.editable)||i.isReadOnly())return null;u=S(t,function(e,t){return!t.equals(e)},function(e,t){return $(e,!0,t)},i),s=u.upper,o=u.lower;if(e(t,s,o))return u.set(_,P);if(s&&i.contains(s))for(;!s.getParent().equals(i);)s=s.getParent();else s=i.getFirst(function(e){return n(t,e)});if(o&&i.contains(o))for(;!o.getParent().equals(i);)o=o.getParent();else o=i.getLast(function(e){return n(t,e)});if(!s||!o)return null;b(t,s),b(t,o);if(t.mouse.y>s.size.top&&t.mouse.y<o.size.bottom){for(var i=Number.MAX_VALUE,a,f,c,h;o&&!o.equals(s);){if(!(f=s.getNext(t.isRelevant)))break;a=Math.abs(r(t,s,f)-t.mouse.y),a<i&&(i=a,c=s,h=f),s=f,b(t,s)}return!!c&&!!h&&t.mouse.y>c.size.top&&t.mouse.y<h.size.bottom?(u.upper=c,u.lower=h,u.set(_,P)):null}return null}function n(e,t){return!(t&&t.type==CKEDITOR.NODE_TEXT||K(t)||c(t)||f(e,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is("br"))}return function(n){var r=t(n),i;if(i=r){i=r.upper;var s=r.lower;i=!i||!s||c(s)||c(i)||s.equals(i)||i.equals(s)||s.contains(i)||i.contains(s)?!1:p(n,i)&&p(n,s)&&e(n,i,s)?!0:!1}return i?r:null}}(),G=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function e(e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||e.getName()!="form")return[];for(var t=[],n=["style","className"],r=0;r<n.length;r++){var i=e.$.elements.namedItem(n[r]);i&&(i=new CKEDITOR.dom.element(i),t.push([i,i.nextSibling]),i.remove())}return t}function t(e,t){if(e&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()=="form"&&t.length>0)for(var n=t.length-1;n>=0;n--){var r=t[n][0],i=t[n][1];i?r.insertBefore(i):r.appendTo(e)}}function n(n,r){var i=e(n),s={},o=n.$;return r||(s["class"]=o.className||"",o.className=""),s.inline=o.style.cssText||"",r||(o.style.cssText="position: static; overflow: visible"),t(i),s}function r(n,r){var i=e(n),s=n.$;"class"in r&&(s.className=r["class"]),"inline"in r&&(s.style.cssText=r.inline),t(i)}function i(e){if(!e.editable().isInline()){var t=CKEDITOR.instances,n;for(n in t){var r=t[n];r.mode=="wysiwyg"&&!r.readOnly&&(r=r.document.getBody(),r.setAttribute("contentEditable",!1),r.setAttribute("contentEditable",!0))}e.editable().hasFocus&&(e.toolbox.focus(),e.focus())}}CKEDITOR.plugins.add("maximize",{init:function(e){function t(){var t=u.getViewPaneSize();e.resize(t.width,t.height,null,!0)}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var s=e.lang,o=CKEDITOR.document,u=o.getWindow(),f,l,h,p=CKEDITOR.TRISTATE_OFF;e.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var v=e.container.getChild(1),g=e.ui.space("contents");if(e.mode=="wysiwyg"){var y=e.getSelection();f=y&&y.getRanges(),l=u.getScrollPosition()}else{var w=e.editable().$;f=!CKEDITOR.env.ie&&[w.selectionStart,w.selectionEnd],l=[w.scrollLeft,w.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){u.on("resize",t),h=u.getScrollPosition();for(y=e.container;y=y.getParent();)y.setCustomData("maximize_saved_styles",n(y)),y.setStyle("z-index",e.config.baseFloatZIndex-5);g.setCustomData("maximize_saved_styles",n(g,!0)),v.setCustomData("maximize_saved_styles",n(v,!0)),g={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},o.getDocumentElement().setStyles(g),!CKEDITOR.env.gecko&&o.getDocumentElement().setStyle("position","fixed"),(!CKEDITOR.env.gecko||!CKEDITOR.env.quirks)&&o.getBody().setStyles(g),CKEDITOR.env.ie?setTimeout(function(){u.$.scrollTo(0,0)},0):u.$.scrollTo(0,0),v.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),v.$.offsetLeft,v.setStyles({"z-index":e.config.baseFloatZIndex-5,left:"0px",top:"0px"}),v.addClass("cke_maximized"),t(),g=v.getDocumentPosition(),v.setStyles({left:-1*g.x+"px",top:-1*g.y+"px"}),CKEDITOR.env.gecko&&i(e)}else if(this.state==CKEDITOR.TRISTATE_ON){u.removeListener("resize",t),g=[g,v];for(y=0;y<g.length;y++)r(g[y],g[y].getCustomData("maximize_saved_styles")),g[y].removeCustomData("maximize_saved_styles");for(y=e.container;y=y.getParent();)r(y,y.getCustomData("maximize_saved_styles")),y.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){u.$.scrollTo(h.x,h.y)},0):u.$.scrollTo(h.x,h.y),v.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(v.setStyle("display","inline"),setTimeout(function(){v.setStyle("display","block")},0)),e.fire("resize")}this.toggleState();if(y=this.uiItems[0])g=this.state==CKEDITOR.TRISTATE_OFF?s.maximize.maximize:s.maximize.minimize,y=CKEDITOR.document.getById(y._.id),y.getChild(1).setHtml(g),y.setAttribute("title",g),y.setAttribute("href",'javascript:void("'+g+'");');e.mode=="wysiwyg"?f?(CKEDITOR.env.gecko&&i(e),e.getSelection().selectRanges(f),(w=e.getSelection().getStartElement())&&w.scrollIntoView(!0)):u.$.scrollTo(l.x,l.y):(f&&(w.selectionStart=f[0],w.selectionEnd=f[1]),w.scrollLeft=l[0],w.scrollTop=l[1]),f=l=null,p=this.state,e.fire("maximize",this.state)},canUndo:!1}),e.ui.addButton&&e.ui.addButton("Maximize",{label:s.maximize.maximize,command:"maximize",toolbar:"tools,10"}),e.on("mode",function(){var t=e.getCommand("maximize");t.setState(t.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:p)},null,null,100)}}})}(),function(){function e(e,t,n){var r=CKEDITOR.cleanWord;return r?n():(e=CKEDITOR.getUrl(e.config.pasteFromWordCleanupFile||t+"filter/default.js"),CKEDITOR.scriptLoader.load(e,n,null,!0)),!r}function t(e){e.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(n){var r=0,i=this.path;n.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e){var n=this;r=1,e.once("beforePaste",t),e.getClipboardData({title:e.lang.pastefromword.title},function(t){t&&e.fire("paste",{type:"html",dataValue:t.dataValue}),e.fire("afterCommandExec",{name:"pastefromword",command:n,returnValue:!!t})})}}),n.ui.addButton&&n.ui.addButton("PasteFromWord",{label:n.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),n.on("pasteState",function(e){n.getCommand("pastefromword").setState(e.data)}),n.on("paste",function(t){var s=t.data,o=s.dataValue;if(o&&(r||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(o))){var u=e(n,i,function(){if(u)n.fire("paste",s);else if(!n.config.pasteFromWordPromptCleanup||r||confirm(n.lang.pastefromword.confirmCleanup))s.dataValue=CKEDITOR.cleanWord(o,n)});u&&t.cancel()}},null,null,3)}})}(),function(){var e={canUndo:!1,async:!0,exec:function(t){t.getClipboardData({title:t.lang.pastetext.title},function(n){n&&t.fire("paste",{type:"text",dataValue:n.dataValue}),t.fire("afterCommandExec",{name:"pastetext",command:e,returnValue:!!n})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(t){t.addCommand("pastetext",e),t.ui.addButton&&t.ui.addButton("PasteText",{label:t.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),t.config.forcePasteAsPlainText&&t.on("beforePaste",function(e){e.data.type!="html"&&(e.data.type="text")}),t.on("pasteState",function(e){t.getCommand("pastetext").setState(e.data)})}})}(),CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var t=e._.removeFormatRegex||(e._.removeFormatRegex=RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),n=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),r=CKEDITOR.plugins.removeformat.filter,i=e.getSelection().getRanges(1),s=i.createIterator(),o;o=s.getNextRange();){o.collapsed||o.enlarge(CKEDITOR.ENLARGE_ELEMENT);var u=o.createBookmark(),a=u.startNode,f=u.endNode,l=function(n){for(var i=e.elementPath(n),s=i.elements,o=1,u;u=s[o];o++){if(u.equals(i.block)||u.equals(i.blockLimit))break;t.test(u.getName())&&r(e,u)&&n.breakParent(u)}};l(a);if(f){l(f);for(a=a.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);a;){if(a.equals(f))break;l=a.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),(a.getName()!="img"||!a.data("cke-realelement"))&&r(e,a)&&(t.test(a.getName())?a.remove(1):(a.removeAttributes(n),e.fire("removeFormatCleanup",a))),a=l}}o.moveToBookmark(u)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(i)}}},filter:function(e,t){for(var n=e._.removeFormatFilters||[],r=0;r<n.length;r++)if(n[r](t)===!1)return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(e){var t,n,r,i,s=e.config,o=e.ui.spaceId("resizer"),u=e.element?e.element.getDirection(1):"ltr";!s.resize_dir&&(s.resize_dir="vertical"),s.resize_maxWidth==void 0&&(s.resize_maxWidth=3e3),s.resize_maxHeight==void 0&&(s.resize_maxHeight=3e3),s.resize_minWidth==void 0&&(s.resize_minWidth=750),s.resize_minHeight==void 0&&(s.resize_minHeight=250);if(s.resize_enabled!==!1){var a=null,f=(s.resize_dir=="both"||s.resize_dir=="horizontal")&&s.resize_minWidth!=s.resize_maxWidth,l=(s.resize_dir=="both"||s.resize_dir=="vertical")&&s.resize_minHeight!=s.resize_maxHeight,c=function(o){var a=t,c=n,h=a+(o.data.$.screenX-r)*(u=="rtl"?-1:1),o=c+(o.data.$.screenY-i);f&&(a=Math.max(s.resize_minWidth,Math.min(h,s.resize_maxWidth))),l&&(c=Math.max(s.resize_minHeight,Math.min(o,s.resize_maxHeight))),e.resize(f?a:null,c)},h=function(){CKEDITOR.document.removeListener("mousemove",c),CKEDITOR.document.removeListener("mouseup",h),e.document&&(e.document.removeListener("mousemove",c),e.document.removeListener("mouseup",h))},p=CKEDITOR.tools.addFunction(function(o){a||(a=e.getResizable()),t=a.$.offsetWidth||0,n=a.$.offsetHeight||0,r=o.screenX,i=o.screenY,s.resize_minWidth>t&&(s.resize_minWidth=t),s.resize_minHeight>n&&(s.resize_minHeight=n),CKEDITOR.document.on("mousemove",c),CKEDITOR.document.on("mouseup",h),e.document&&(e.document.on("mousemove",c),e.document.on("mouseup",h)),o.preventDefault&&o.preventDefault()});e.on("destroy",function(){CKEDITOR.tools.removeFunction(p)}),e.on("uiSpace",function(t){if(t.data.space=="bottom"){var n="";f&&!l&&(n=" cke_resizer_horizontal"),!f&&l&&(n=" cke_resizer_vertical");var r='<span id="'+o+'" class="cke_resizer'+n+" cke_resizer_"+u+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event)">'+(u=="ltr"?"◢":"◣")+"</span>";u=="ltr"&&n=="ltr"?t.data.html=t.data.html+r:t.data.html=r+t.data.html}},e,null,100),e.on("maximize",function(t){e.ui.space("resizer")[t.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var e=function(e){var t=this._,n=t.menu;t.state!==CKEDITOR.TRISTATE_DISABLED&&(t.on&&n?n.hide():(t.previousState=t.state,n||(n=t.menu=new CKEDITOR.menu(e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.common.options}}}),n.onHide=CKEDITOR.tools.bind(function(){var n=this.command?e.getCommand(this.command).modes:this.modes;this.setState(!n||n[e.mode]?t.previousState:CKEDITOR.TRISTATE_DISABLED),t.on=0},this),this.onMenu&&n.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),t.on=1,setTimeout(function(){n.show(CKEDITOR.document.getById(t.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){delete t.panel,this.base(t),this.hasArrow=!0,this.click=e},statics:{handler:{create:function(e){return new CKEDITOR.ui.menuButton(e)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",function(){function e(e,t){var n=0,r;for(r in t)if(t[r]==e){n=1;break}return n}var t="",n=function(){function e(){i.once("focus",s),i.once("blur",n)}function n(t){var t=t.editor,n=r.getScayt(t),i=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE;n&&(r.setPaused(t,!n.disabled),r.setControlId(t,n.id),n.destroy(!0),delete r.instances[t.name],i&&e())}var i=this,s=function(){if(typeof r.instances[i.name]=="undefined"&&r.instances[i.name]==null){var e=i.config,t={};t.srcNodeRef=i.editable().$.nodeName=="BODY"?i.document.getWindow().$.frameElement:i.editable().$,t.assocApp="CKEDITOR."+CKEDITOR.version+"@"+CKEDITOR.revision,t.customerid=e.scayt_customerid||"1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2",t.customDictionaryIds=e.scayt_customDictionaryIds||"",t.userDictionaryName=e.scayt_userDictionaryName||"",t.sLang=e.scayt_sLang||"en_US",t.onLoad=function(){CKEDITOR.env.ie&&CKEDITOR.env.version<8||this.addStyle(this.selectorCss(),"padding-bottom: 2px !important;"),i.editable().hasFocus&&!r.isControlRestored(i)&&this.focus()},e=window.scayt_custom_params;if(typeof e=="object")for(var n in e)t[n]=e[n];r.getControlId(i)&&(t.id=r.getControlId(i));var s=new window.scayt(t);s.afterMarkupRemove.push(function(e){(new CKEDITOR.dom.element(e,s.document)).mergeSiblings()});if(t=r.instances[i.name])s.sLang=t.sLang,s.option(t.option()),s.paused=t.paused;r.instances[i.name]=s;try{s.setDisabled(r.isPaused(i)===!1)}catch(o){}i.fire("showScaytState")}};i.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e():i.on("contentDom",s),i.on("contentDomUnload",function(){for(var e=CKEDITOR.document.getElementsByTag("script"),t=/^dojoIoScript(\d+)$/i,n=/^https?:\/\/svc\.webspellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i,r=0;r<e.count();r++){var i=e.getItem(r),s=i.getId(),o=i.getAttribute("src");s&&o&&s.match(t)&&o.match(n)&&i.remove()}}),i.on("beforeCommandExec",function(e){e.data.name=="source"&&i.mode=="source"&&r.markControlRestore(i)}),i.on("afterCommandExec",function(e){r.isScaytEnabled(i)&&i.mode=="wysiwyg"&&(e.data.name=="undo"||e.data.name=="redo")&&(r.getScayt(i).setDisabled(!0),r.refresh_timeout&&window.clearTimeout(r.refresh_timeout),r.refresh_timeout=window.setTimeout(function(){r.getScayt(i).setDisabled(!1),r.getScayt(i).focus(),r.getScayt(i).refresh()},10))}),i.on("destroy",n),i.on("setData",n),i.on("insertElement",function(){var e=r.getScayt(i);r.isScaytEnabled(i)&&(CKEDITOR.env.ie&&i.getSelection().unlock(!0),window.setTimeout(function(){e.focus(),e.refresh()},10))},this,null,50),i.on("insertHtml",function(){var e=r.getScayt(i);r.isScaytEnabled(i)&&(CKEDITOR.env.ie&&i.getSelection().unlock(!0),window.setTimeout(function(){e.focus(),e.refresh()},10))},this,null,50),i.on("scaytDialog",function(e){e.data.djConfig=window.djConfig,e.data.scayt_control=r.getScayt(i),e.data.tab=t,e.data.scayt=window.scayt});var o=i.dataProcessor;(o=o&&o.htmlFilter)&&o.addRules({elements:{span:function(e){if(e.attributes["data-scayt_word"]&&e.attributes["data-scaytid"])return delete e.name,e}}});var o=CKEDITOR.plugins.undo.Image.prototype,u=typeof o.equalsContent=="function"?"equalsContent":"equals";o[u]=CKEDITOR.tools.override(o[u],function(e){return function(t){var n=this.contents,i=t.contents,s=r.getScayt(this.editor);return s&&r.isScaytReady(this.editor)&&(this.contents=s.reset(n)||"",t.contents=s.reset(i)||""),s=e.apply(this,arguments),this.contents=n,t.contents=i,s}}),o=CKEDITOR.editor.prototype,o.checkDirty=CKEDITOR.tools.override(o.checkDirty,function(e){return function(){var t=null,n=r.getScayt(this);return n&&r.isScaytReady(this)?(t=n.reset(this.getSnapshot()),n=n.reset(this._.previousValue),t=t!==n):t=e.apply(this),t}}),i.document&&(i.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE||i.focusManager.hasFocus)&&s()};CKEDITOR.plugins.scayt={engineLoaded:!1,instances:{},controlInfo:{},setControlInfo:function(e,t){e&&e.name&&typeof this.controlInfo[e.name]!="object"&&(this.controlInfo[e.name]={});for(var n in t)this.controlInfo[e.name][n]=t[n]},isControlRestored:function(e){return e&&e.name&&this.controlInfo[e.name]?this.controlInfo[e.name].restored:!1},markControlRestore:function(e){this.setControlInfo(e,{restored:!0})},setControlId:function(e,t){this.setControlInfo(e,{id:t})},getControlId:function(e){return e&&e.name&&this.controlInfo[e.name]&&this.controlInfo[e.name].id?this.controlInfo[e.name].id:null},setPaused:function(e,t){this.setControlInfo(e,{paused:t})},isPaused:function(e){if(e&&e.name&&this.controlInfo[e.name])return this.controlInfo[e.name].paused},getScayt:function(e){return this.instances[e.name]},isScaytReady:function(e){return this.engineLoaded===!0&&"undefined"!=typeof window.scayt&&this.getScayt(e)},isScaytEnabled:function(e){return(e=this.getScayt(e))?e.disabled===!1:!1},getUiTabs:function(e){var t=[],n=e.config.scayt_uiTabs||"1,1,1",n=n.split(",");n[3]="1";for(var r=0;r<4;r++)t[r]=typeof window.scayt!="undefined"&&typeof window.scayt.uiTags!="undefined"?parseInt(n[r],10)&&window.scayt.uiTags[r]:parseInt(n[r],10);return typeof e.plugins.wsc=="object"?t.push(1):t.push(0),t},loadEngine:function(e){if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900||CKEDITOR.env.opera||CKEDITOR.env.air)return e.fire("showScaytState");if(this.engineLoaded===!0)return n.apply(e);if(this.engineLoaded==-1)return CKEDITOR.on("scaytReady",function(){n.apply(e)});CKEDITOR.on("scaytReady",n,e),CKEDITOR.on("scaytReady",function(){this.engineLoaded=!0},this,null,0),this.engineLoaded=-1;var t=document.location.protocol,t=t.search(/https?:/)!=-1?t:"http:",t=e.config.scayt_srcUrl||t+"//svc.webspellchecker.net/scayt26/loader__base.js",i=r.parseUrl(t).path+"/";return window.scayt==void 0?(CKEDITOR._djScaytConfig={baseUrl:i,addOnLoad:[function(){CKEDITOR.fireOnce("scaytReady")}],isDebug:!1},CKEDITOR.document.getHead().append(CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",async:"true",src:t}}))):CKEDITOR.fireOnce("scaytReady"),null},parseUrl:function(e){var t;return e.match&&(t=e.match(/(.*)[\/\\](.*?\.\w+)$/))?{path:t[1],file:t[2]}:e}};var r=CKEDITOR.plugins.scayt,i=function(e,t,n,r,i,s,o){e.addCommand(r,i),e.addMenuItem(r,{label:n,command:r,group:s,order:o})},s={preserveState:!0,editorFocus:!1,canUndo:!1,exec:function(e){if(r.isScaytReady(e)){var t=r.isScaytEnabled(e);this.setState(t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_ON),e=r.getScayt(e),e.focus(),e.setDisabled(t)}else!e.config.scayt_autoStartup&&r.engineLoaded>=0&&(e.focus(),this.setState(CKEDITOR.TRISTATE_DISABLED),r.loadEngine(e))}};CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",beforeInit:function(e){var t=e.config.scayt_contextMenuItemsOrder||"suggest|moresuggest|control",n="";if((t=t.split("|"))&&t.length)for(var r=0;r<t.length;r++)n+="scayt_"+t[r]+(t.length!=parseInt(r,10)+1?",":"");e.config.menu_groups=n+","+e.config.menu_groups},checkEnvironment:function(){return CKEDITOR.env.opera||CKEDITOR.env.air?0:1},init:function(n){var o=n.dataProcessor&&n.dataProcessor.dataFilter,u={elements:{span:function(e){var t=e.attributes;t&&t["data-scaytid"]&&delete e.name}}};o&&o.addRules(u);var f={},l={},c=n.addCommand("scaytcheck",s);CKEDITOR.dialog.add("scaytcheck",CKEDITOR.getUrl(this.path+"dialogs/options.js")),o=r.getUiTabs(n),n.addMenuGroup("scaytButton"),n.addMenuGroup("scayt_suggest",-10),n.addMenuGroup("scayt_moresuggest",-9),n.addMenuGroup("scayt_control",-8);var u={},h=n.lang.scayt;u.scaytToggle={label:h.enable,command:"scaytcheck",group:"scaytButton"},o[0]==1&&(u.scaytOptions={label:h.options,group:"scaytButton",onClick:function(){t="options",n.openDialog("scaytcheck")}}),o[1]==1&&(u.scaytLangs={label:h.langs,group:"scaytButton",onClick:function(){t="langs",n.openDialog("scaytcheck")}}),o[2]==1&&(u.scaytDict={label:h.dictionariesTab,group:"scaytButton",onClick:function(){t="dictionaries",n.openDialog("scaytcheck")}}),u.scaytAbout={label:n.lang.scayt.about,group:"scaytButton",onClick:function(){t="about",n.openDialog("scaytcheck")}},o[4]==1&&(u.scaytWSC={label:n.lang.wsc.toolbar,group:"scaytButton",command:"checkspell"}),n.addMenuItems(u),n.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:h.title,title:CKEDITOR.env.opera?h.opera_title:h.title,modes:{wysiwyg:this.checkEnvironment()},toolbar:"spellchecker,20",onRender:function(){c.on("state",function(){this.setState(c.state)},this)},onMenu:function(){var e=r.isScaytEnabled(n);n.getMenuItem("scaytToggle").label=h[e?"disable":"enable"];var t=r.getUiTabs(n);return{scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:e&&t[0]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:e&&t[1]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:e&&t[2]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:e&&t[3]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytWSC:t[4]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}}),n.contextMenu&&n.addMenuItems&&n.contextMenu.addListener(function(t,s){if(!r.isScaytEnabled(n)||s.getRanges()[0].checkReadOnly())return null;var o=r.getScayt(n),u=o.getScaytNode();if(!u)return null;var c=o.getWord(u);if(!c)return null;var p=o.getLang(),v=n.config.scayt_contextCommands||"all",c=window.scayt.getSuggestion(c,p),v=v.split("|"),g;for(g in f)delete n._.menuItems[g],delete n.commands[g];for(g in l)delete n._.menuItems[g],delete n.commands[g];if(!c||!c.length)i(n,"no_sugg",h.noSuggestions,"scayt_no_sugg",{exec:function(){}},"scayt_control",1,!0),l.scayt_no_sugg=CKEDITOR.TRISTATE_OFF;else{f={},l={},g=n.config.scayt_moreSuggestions||"on";var p=!1,y=n.config.scayt_maxSuggestions;typeof y!="number"&&(y=5),!y&&(y=c.length);for(var w=0,E=c.length;w<E;w+=1){var S="scayt_suggestion_"+c[w].replace(" ","_"),x=function(e,t){return{exec:function(){o.replace(e,t)}}}(u,c[w]);w<y?(i(n,"button_"+S,c[w],S,x,"scayt_suggest",w+1),l[S]=CKEDITOR.TRISTATE_OFF):g=="on"&&(i(n,"button_"+S,c[w],S,x,"scayt_moresuggest",w+1),f[S]=CKEDITOR.TRISTATE_OFF,p=!0)}p&&(n.addMenuItem("scayt_moresuggest",{label:h.moreSuggestions,group:"scayt_moresuggest",order:10,getItems:function(){return f}}),l.scayt_moresuggest=CKEDITOR.TRISTATE_OFF)}if(e("all",v)||e("ignore",v))i(n,"ignore",h.ignore,"scayt_ignore",{exec:function(){o.ignore(u)}},"scayt_control",2),l.scayt_ignore=CKEDITOR.TRISTATE_OFF;if(e("all",v)||e("ignoreall",v))i(n,"ignore_all",h.ignoreAll,"scayt_ignore_all",{exec:function(){o.ignoreAll(u)}},"scayt_control",3),l.scayt_ignore_all=CKEDITOR.TRISTATE_OFF;if(e("all",v)||e("add",v))i(n,"add_word",h.addWord,"scayt_add_word",{exec:function(){window.scayt.addWordToUserDictionary(u)}},"scayt_control",4),l.scayt_add_word=CKEDITOR.TRISTATE_OFF;return o.fireOnContextMenu&&o.fireOnContextMenu(n),l}),o=function(e){e.removeListener(),CKEDITOR.env.opera||CKEDITOR.env.air?c.setState(CKEDITOR.TRISTATE_DISABLED):c.setState(r.isScaytEnabled(n)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},n.on("showScaytState",o),n.on("instanceReady",o),n.config.scayt_autoStartup&&n.on("instanceReady",function(){r.loadEngine(n)})},afterInit:function(e){var t,n=function(e){if(e.hasAttribute("data-scaytid"))return!1};e._.elementsPath&&(t=e._.elementsPath.filters)&&t.push(n),e.addRemoveFormatFilter&&e.addRemoveFormatFilter(n)}})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(t){function n(){this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show()}if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var r=CKEDITOR.plugins.sourcearea;t.addMode("source",function(r){var i=t.ui.space("contents").getDocument().createElement("textarea");i.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",t.config.sourceAreaTabSize||4))),i.setAttribute("dir","ltr"),i.addClass("cke_source cke_reset cke_enable_context_menu"),t.ui.space("contents").append(i),i=t.editable(new e(t,i)),i.setData(t.getData(1)),CKEDITOR.env.ie&&(i.attachListener(t,"resize",n,i),i.attachListener(CKEDITOR.document.getWindow(),"resize",n,i),CKEDITOR.tools.setTimeout(n,0,i)),t.fire("ariaWidget",this),r()}),t.addCommand("source",r.commands.source),t.ui.addButton&&t.ui.addButton("Source",{label:t.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),t.on("mode",function(){t.getCommand("source").setState(t.mode=="source"?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)})}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(e){this.setValue(e),this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(e){this[(e?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){e.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){e.mode=="wysiwyg"&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode(e.mode=="source"?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,de:1,el:1,en:1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var t=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var n=e.langCode,n=t.availableLangs[n]?n:t.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+n+".js"),function(){CKEDITOR.tools.extend(e.lang.specialchar,t.langEntries[n]),e.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(e){var t=e.config,n=e.lang.stylescombo,r={},i=[],s=[];e.on("stylesSet",function(n){if(n=n.data.styles){for(var o,u,f=0,l=n.length;f<l;f++){o=n[f];if(!(e.blockless&&o.element in CKEDITOR.dtd.$block)){u=o.name,o=new CKEDITOR.style(o);if(!e.filter.customConfig||e.filter.check(o))o._name=u,o._.enterMode=t.enterMode,o._.weight=f+(o.type==CKEDITOR.STYLE_OBJECT?1:o.type==CKEDITOR.STYLE_BLOCK?2:3)*1e3,r[u]=o,i.push(o),s.push(o)}}i.sort(function(e,t){return e._.weight-t._.weight})}}),e.ui.addRichCombo("Styles",{label:n.label,title:n.panelTitle,toolbar:"styles,10",allowedContent:s,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":n.panelTitle}},init:function(){var e,t,r,s,o,u;o=0;for(u=i.length;o<u;o++)e=i[o],t=e._name,s=e.type,s!=r&&(this.startGroup(n["panelTitle"+s]),r=s),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(t){e.focus(),e.fire("saveSnapshot");var t=r[t],n=e.elementPath();e[t.checkActive(n)?"removeStyle":"applyStyle"](t),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",function(e){for(var t=this.getValue(),e=e.data.path.elements,n=0,i=e.length,s;n<i;n++){s=e[n];for(var o in r)if(r[o].checkElementRemovable(s,!0)){o!=t&&this.setValue(o);return}}this.setValue("")},this)},onOpen:function(){var t=e.getSelection().getSelectedElement(),t=e.elementPath(t),i=[0,0,0,0];this.showAll(),this.unmarkAll();for(var s in r){var o=r[s],u=o.type;o.checkApplicable(t,e.activeFilter)?i[u]++:this.hideItem(s),o.checkActive(t)&&this.mark(s)}i[CKEDITOR.STYLE_BLOCK]||this.hideGroup(n["panelTitle"+CKEDITOR.STYLE_BLOCK]),i[CKEDITOR.STYLE_INLINE]||this.hideGroup(n["panelTitle"+CKEDITOR.STYLE_INLINE]),i[CKEDITOR.STYLE_OBJECT]||this.hideGroup(n["panelTitle"+CKEDITOR.STYLE_OBJECT])},refresh:function(){var t=e.elementPath();if(t){for(var n in r)if(r[n].checkApplicable(t,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){r={},i=[]}})}})}(),function(){function e(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var n=t.getSelection(),r;if(r=(new CKEDITOR.dom.elementPath(n.getCommonAncestor(),n.root)).contains({td:1,th:1},1)){var n=t.createRange(),i=CKEDITOR.tools.tryThese(function(){var t=r.getParent().$.cells[r.$.cellIndex+(e?-1:1)];return t.parentNode.parentNode,t},function(){var t=r.getParent(),t=t.getAscendant("table").$.rows[t.$.rowIndex+(e?-1:1)];return t.cells[e?t.cells.length-1:0]});if(!i&&!e){for(var s=r.getAscendant("table").$,i=r.getParent().$.cells,s=new CKEDITOR.dom.element(s.insertRow(-1),t.document),o=0,u=i.length;o<u;o++)s.append((new CKEDITOR.dom.element(i[o],t.document)).clone(!1,!1)).appendBogus();n.moveToElementEditStart(s)}else{if(!i)return!0;i=new CKEDITOR.dom.element(i),n.moveToElementEditStart(i),(!n.checkStartOfBlock()||!n.checkEndOfBlock())&&n.selectNodeContents(i)}return n.select(!0),!0}}return!1}}}var t={editorFocus:!1,modes:{wysiwyg:1,source:1}},n={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},r={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(i){for(var s=i.config.enableTabKeyTools!==!1,o=i.config.tabSpaces||0,u="";o--;)u+=" ";u&&i.on("key",function(e){e.data.keyCode==9&&(i.insertHtml(u),e.cancel())}),s&&i.on("key",function(e){(e.data.keyCode==9&&i.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&i.execCommand("selectPreviousCell"))&&e.cancel()}),i.addCommand("blur",CKEDITOR.tools.extend(n,t)),i.addCommand("blurBack",CKEDITOR.tools.extend(r,t)),i.addCommand("selectNextCell",e()),i.addCommand("selectPreviousCell",e(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,t){var n=t===void 0?this.getTabIndex():t,r,i,s,o,u,a;if(n<=0)for(u=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);u;){if(u.isVisible()&&u.getTabIndex()===0){s=u;break}u=u.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(u=this.getDocument().getBody().getFirst();u=u.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!r)if(!i&&u.equals(this)){i=!0;if(e){if(!(u=u.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;r=1}}else i&&!this.contains(u)&&(r=1);if(u.isVisible()&&!((a=u.getTabIndex())<0)){if(r&&a==n){s=u;break}a>n&&(!s||!o||a<o)?(s=u,o=a):!s&&a===0&&(s=u,o=a)}}s&&s.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var n=t===void 0?this.getTabIndex():t,r,i,s,o=0,u,a=this.getDocument().getBody().getLast();a=a.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!r)if(!i&&a.equals(this)){i=!0;if(e){if(!(a=a.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;r=1}}else i&&!this.contains(a)&&(r=1);if(a.isVisible()&&!((u=a.getTabIndex())<0))if(n<=0){if(r&&u===0){s=a;break}u>o&&(s=a,o=u)}else{if(r&&u==n){s=a;break}u<n&&(!s||u>o)&&(s=a,o=u)}}s&&s.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!e.blockless){var n=e.lang.table;e.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(e.plugins.dialogadvtab?"table"+e.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]})),e.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",t())),e.addCommand("tableDelete",t({exec:function(e){var t=e.elementPath().contains("table",1);if(t){var n=t.getParent();n.getChildCount()==1&&!n.is("body","td","th")&&(t=n),e=e.createRange(),e.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove(),e.select()}}})),e.ui.addButton&&e.ui.addButton("Table",{label:n.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),e.addMenuItems&&e.addMenuItems({table:{label:n.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:n.deleteTable,command:"tableDelete",group:"table",order:1}}),e.on("doubleclick",function(e){e.data.element.is("table")&&(e.data.dialog="tableProperties")}),e.contextMenu&&e.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function e(e){function t(e){!(n.length>0)&&e.type==CKEDITOR.NODE_ELEMENT&&h.test(e.getName())&&!e.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(r,e,"selected_cell",!0),n.push(e))}for(var e=e.getRanges(),n=[],r={},i=0;i<e.length;i++){var s=e[i];if(s.collapsed)s=s.getCommonAncestor(),(s=s.getAscendant("td",!0)||s.getAscendant("th",!0))&&n.push(s);else{var s=new CKEDITOR.dom.walker(s),o;for(s.guard=t;o=s.next();)(o.type!=CKEDITOR.NODE_ELEMENT||!o.is(CKEDITOR.dtd.table))&&(o=o.getAscendant("td",!0)||o.getAscendant("th",!0))&&!o.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(r,o,"selected_cell",!0),n.push(o))}}return CKEDITOR.dom.element.clearAllMarkers(r),n}function t(t,n){for(var r=e(t),i=r[0],s=i.getAscendant("table"),i=i.getDocument(),o=r[0].getParent(),u=o.$.rowIndex,r=r[r.length-1],a=r.getParent().$.rowIndex+r.$.rowSpan-1,r=new CKEDITOR.dom.element(s.$.rows[a]),u=n?u:a,o=n?o:r,r=CKEDITOR.tools.buildTableMap(s),s=r[u],u=n?r[u-1]:r[u+1],r=r[0].length,i=i.createElement("tr"),a=0;s[a]&&a<r;a++){var f;s[a].rowSpan>1&&u&&s[a]==u[a]?(f=s[a],f.rowSpan=f.rowSpan+1):(f=(new CKEDITOR.dom.element(s[a])).clone(),f.removeAttribute("rowSpan"),f.appendBogus(),i.append(f),f=f.$),a+=f.colSpan-1}n?i.insertBefore(o):i.insertAfter(o)}function n(t){if(t instanceof CKEDITOR.dom.selection){for(var r=e(t),i=r[0].getAscendant("table"),s=CKEDITOR.tools.buildTableMap(i),t=r[0].getParent().$.rowIndex,r=r[r.length-1],o=r.getParent().$.rowIndex+r.$.rowSpan-1,r=[],u=t;u<=o;u++){for(var a=s[u],f=new CKEDITOR.dom.element(i.$.rows[u]),l=0;l<a.length;l++){var c=new CKEDITOR.dom.element(a[l]),h=c.getParent().$.rowIndex;c.$.rowSpan==1?c.remove():(c.$.rowSpan=c.$.rowSpan-1,h==u&&(h=s[u+1],h[l-1]?c.insertAfter(new CKEDITOR.dom.element(h[l-1])):(new CKEDITOR.dom.element(i.$.rows[u+1])).append(c,1))),l+=c.$.colSpan-1}r.push(f)}s=i.$.rows,i=new CKEDITOR.dom.element(s[o+1]||(t>0?s[t-1]:null)||i.$.parentNode);for(u=r.length;u>=0;u--)n(r[u]);return i}return t instanceof CKEDITOR.dom.element&&(i=t.getAscendant("table"),i.$.rows.length==1?i.remove():t.remove()),null}function r(e,t){for(var n=t?Infinity:0,r=0;r<e.length;r++){var i;i=e[r];for(var s=t,o=i.getParent().$.cells,u=0,a=0;a<o.length;a++){var f=o[a],u=u+(s?1:f.colSpan);if(f==i.$)break}i=u-1;if(t?i<n:i>n)n=i}return n}function i(t,n){for(var i=e(t),s=i[0].getAscendant("table"),o=r(i,1),i=r(i),o=n?o:i,u=CKEDITOR.tools.buildTableMap(s),s=[],i=[],a=u.length,f=0;f<a;f++)s.push(u[f][o]),i.push(n?u[f][o-1]:u[f][o+1]);for(f=0;f<a;f++)s[f]&&(s[f].colSpan>1&&i[f]==s[f]?(o=s[f],o.colSpan=o.colSpan+1):(o=(new CKEDITOR.dom.element(s[f])).clone(),o.removeAttribute("colSpan"),o.appendBogus(),o[n?"insertBefore":"insertAfter"].call(o,new CKEDITOR.dom.element(s[f])),o=o.$),f+=o.rowSpan-1)}function s(e,t){var n=e.getStartElement();if(n=n.getAscendant("td",1)||n.getAscendant("th",1)){var r=n.clone();r.appendBogus(),t?r.insertBefore(n):r.insertAfter(n)}}function o(t){if(t instanceof CKEDITOR.dom.selection){var t=e(t),n=t[0]&&t[0].getAscendant("table"),r;e:{var i=0;r=t.length-1;for(var s={},a,f;a=t[i++];)CKEDITOR.dom.element.setMarker(s,a,"delete_cell",!0);for(i=0;a=t[i++];)if((f=a.getPrevious())&&!f.getCustomData("delete_cell")||(f=a.getNext())&&!f.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(s),r=f;break e}CKEDITOR.dom.element.clearAllMarkers(s),f=t[0].getParent(),(f=f.getPrevious())?r=f.getLast():(f=t[r].getParent(),r=(f=f.getNext())?f.getChild(0):null)}for(f=t.length-1;f>=0;f--)o(t[f]);r?u(r,!0):n&&n.remove()}else t instanceof CKEDITOR.dom.element&&(n=t.getParent(),n.getChildCount()==1?n.remove():t.remove())}function u(e,t){var n=e.getDocument(),r=CKEDITOR.document;CKEDITOR.env.ie&&CKEDITOR.env.version==10&&(r.focus(),n.focus()),n=new CKEDITOR.dom.range(n),n["moveToElementEdit"+(t?"End":"Start")](e)||(n.selectNodeContents(e),n.collapse(t?!1:!0)),n.select(!0)}function a(e,t,n){e=e[t];if(typeof n=="undefined")return e;for(t=0;e&&t<e.length;t++){if(n.is&&e[t]==n.$)return t;if(t==n)return new CKEDITOR.dom.element(e[t])}return n.is?-1:null}function f(t,n,r){var i=e(t),s;if((n?i.length!=1:i.length<2)||(s=t.getCommonAncestor())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("table"))return!1;var o,t=i[0];s=t.getAscendant("table");var u=CKEDITOR.tools.buildTableMap(s),f=u.length,l=u[0].length,c=t.getParent().$.rowIndex,h=a(u,c,t);if(n){var p;try{var v=parseInt(t.getAttribute("rowspan"),10)||1;o=parseInt(t.getAttribute("colspan"),10)||1,p=u[n=="up"?c-v:n=="down"?c+v:c][n=="left"?h-o:n=="right"?h+o:h]}catch(m){return!1}if(!p||t.$==p)return!1;i[n=="up"||n=="left"?"unshift":"push"](new CKEDITOR.dom.element(p))}for(var n=t.getDocument(),g=c,v=p=0,y=!r&&new CKEDITOR.dom.documentFragment(n),b=0,n=0;n<i.length;n++){o=i[n];var w=o.getParent(),E=o.getFirst(),S=o.$.colSpan,x=o.$.rowSpan,w=w.$.rowIndex,T=a(u,w,o),b=b+S*x,v=Math.max(v,T-h+S);p=Math.max(p,w-c+x),r||(S=o,(x=S.getBogus())&&x.remove(),S.trim(),o.getChildren().count()&&(w!=g&&E&&(!E.isBlockBoundary||!E.isBlockBoundary({br:1}))&&(g=y.getLast(CKEDITOR.dom.walker.whitespaces(!0)))&&(!g.is||!g.is("br"))&&y.append("br"),o.moveChildren(y)),n?o.remove():o.setHtml("")),g=w}if(r)return p*v==b;y.moveChildren(t),t.appendBogus(),v>=l?t.removeAttribute("rowSpan"):t.$.rowSpan=p,p>=f?t.removeAttribute("colSpan"):t.$.colSpan=v,r=new CKEDITOR.dom.nodeList(s.$.rows),i=r.count();for(n=i-1;n>=0;n--)s=r.getItem(n),s.$.cells.length||(s.remove(),i++);return t}function l(t,n){var r=e(t);if(r.length>1)return!1;if(n)return!0;var r=r[0],i=r.getParent(),s=i.getAscendant("table"),o=CKEDITOR.tools.buildTableMap(s),u=i.$.rowIndex,f=a(o,u,r),l=r.$.rowSpan,c;if(l>1){c=Math.ceil(l/2);for(var l=Math.floor(l/2),i=u+c,s=new CKEDITOR.dom.element(s.$.rows[i]),o=a(o,i),h,i=r.clone(),u=0;u<o.length;u++){h=o[u];if(h.parentNode==s.$&&u>f){i.insertBefore(new CKEDITOR.dom.element(h));break}h=null}h||s.append(i)}else{l=c=1,s=i.clone(),s.insertAfter(i),s.append(i=r.clone()),h=a(o,u);for(f=0;f<h.length;f++)h[f].rowSpan++}return i.appendBogus(),r.$.rowSpan=c,i.$.rowSpan=l,c==1&&r.removeAttribute("rowSpan"),l==1&&i.removeAttribute("rowSpan"),i}function c(t,n){var r=e(t);if(r.length>1)return!1;if(n)return!0;var r=r[0],i=r.getParent(),s=i.getAscendant("table"),s=CKEDITOR.tools.buildTableMap(s),o=a(s,i.$.rowIndex,r),u=r.$.colSpan;if(u>1)i=Math.ceil(u/2),u=Math.floor(u/2);else{for(var u=i=1,f=[],l=0;l<s.length;l++){var c=s[l];f.push(c[o]),c[o].rowSpan>1&&(l+=c[o].rowSpan-1)}for(s=0;s<f.length;s++)f[s].colSpan++}return s=r.clone(),s.insertAfter(r),s.appendBogus(),r.$.colSpan=i,s.$.colSpan=u,i==1&&r.removeAttribute("colSpan"),u==1&&s.removeAttribute("colSpan"),s}var h=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(r){function a(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function h(e,t){var n=r.addCommand(e,t);r.addFeature(n)}var p=r.lang.table;h("cellProperties",new CKEDITOR.dialogCommand("cellProperties",a({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),h("rowDelete",a({requiredContent:"table",exec:function(e){e=e.getSelection(),u(n(e))}})),h("rowInsertBefore",a({requiredContent:"table",exec:function(e){e=e.getSelection(),t(e,!0)}})),h("rowInsertAfter",a({requiredContent:"table",exec:function(e){e=e.getSelection(),t(e)}})),h("columnDelete",a({requiredContent:"table",exec:function(t){for(var t=t.getSelection(),t=e(t),n=t[0],r=t[t.length-1],t=n.getAscendant("table"),i=CKEDITOR.tools.buildTableMap(t),s,o,a=[],f=0,l=i.length;f<l;f++)for(var c=0,h=i[f].length;c<h;c++)i[f][c]==n.$&&(s=c),i[f][c]==r.$&&(o=c);for(f=s;f<=o;f++)for(c=0;c<i.length;c++)r=i[c],n=new CKEDITOR.dom.element(t.$.rows[c]),r=new CKEDITOR.dom.element(r[f]),r.$&&(r.$.colSpan==1?r.remove():r.$.colSpan=r.$.colSpan-1,c+=r.$.rowSpan-1,n.$.cells.length||a.push(n));o=t.$.rows[0]&&t.$.rows[0].cells,s=new CKEDITOR.dom.element(o[s]||(s?o[s-1]:t.$.parentNode)),a.length==l&&t.remove(),s&&u(s,!0)}})),h("columnInsertBefore",a({requiredContent:"table",exec:function(e){e=e.getSelection(),i(e,!0)}})),h("columnInsertAfter",a({requiredContent:"table",exec:function(e){e=e.getSelection(),i(e)}})),h("cellDelete",a({requiredContent:"table",exec:function(e){e=e.getSelection(),o(e)}})),h("cellMerge",a({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e){u(f(e.getSelection()),!0)}})),h("cellMergeRight",a({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){u(f(e.getSelection(),"right"),!0)}})),h("cellMergeDown",a({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){u(f(e.getSelection(),"down"),!0)}})),h("cellVerticalSplit",a({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){u(l(e.getSelection()))}})),h("cellHorizontalSplit",a({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){u(c(e.getSelection()))}})),h("cellInsertBefore",a({requiredContent:"table",exec:function(e){e=e.getSelection(),s(e,!0)}})),h("cellInsertAfter",a({requiredContent:"table",exec:function(e){e=e.getSelection(),s(e)}})),r.addMenuItems&&r.addMenuItems({tablecell:{label:p.cell.menu,group:"tablecell",order:1,getItems:function(){var t=r.getSelection(),n=e(t);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:f(t,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:f(t,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:f(t,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:l(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:c(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:n.length>0?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:p.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:p.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:p.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:p.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:p.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:p.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:p.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:p.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:p.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:p.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:p.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:p.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:p.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:p.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:p.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:p.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:p.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),r.contextMenu&&r.contextMenu.addListener(function(e,t,n){return(e=n.contains({td:1,th:1},1))&&!e.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:e},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e){for(var e=e.$.rows,t=-1,n=[],r=0;r<e.length;r++){t++,!n[t]&&(n[t]=[]);for(var i=-1,s=0;s<e[r].cells.length;s++){var o=e[r].cells[s];for(i++;n[t][i];)i++;for(var u=isNaN(o.colSpan)?1:o.colSpan,o=isNaN(o.rowSpan)?1:o.rowSpan,a=0;a<o;a++){n[t+a]||(n[t+a]=[]);for(var f=0;f<u;f++)n[t+a][i+f]=e[r].cells[s]}i+=u-1}}return n},function(){function e(e){function n(){for(var n=r(),s=CKEDITOR.tools.clone(e.config.toolbarGroups)||t(e),o=0;o<s.length;o++){var u=s[o];if(u!="/"){typeof u=="string"&&(u=s[o]={name:u});var f,l=u.groups;if(l)for(var c=0;c<l.length;c++)f=l[c],(f=n[f])&&i(u,f);(f=n[u.name])&&i(u,f)}}return s}function r(){var t={},n,r,i;for(n in e.ui.items)r=e.ui.items[n],i=r.toolbar||"others",i=i.split(","),r=i[0],i=parseInt(i[1]||-1,10),t[r]||(t[r]=[]),t[r].push({name:n,order:i});for(r in t)t[r]=t[r].sort(function(e,t){return e.order==t.order?0:t.order<0?-1:e.order<0?1:e.order<t.order?-1:1});return t}function i(t,n){if(n.length){t.items?t.items.push(e.ui.create("-")):t.items=[];for(var r;r=n.shift();)r=typeof r=="string"?r:r.name,(!o||CKEDITOR.tools.indexOf(o,r)==-1)&&(r=e.ui.create(r))&&e.addFeature(r)&&t.items.push(r)}}function s(e){var t=[],n,r,s;for(n=0;n<e.length;++n)r=e[n],s={},r=="/"?t.push(r):CKEDITOR.tools.isArray(r)?(i(s,CKEDITOR.tools.clone(r)),t.push(s)):r.items&&(i(s,CKEDITOR.tools.clone(r.items)),s.name=r.name,t.push(s));return t}var o=e.config.removeButtons,o=o&&o.split(","),u=e.config.toolbar;return typeof u=="string"&&(u=e.config["toolbar_"+u]),e.toolbar=u?s(u):n()}function t(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var n=function(){this.toolbars=[],this.focusCommandExecuted=!1};n.prototype.focus=function(){for(var e=0,t;t=this.toolbars[e++];)for(var n=0,r;r=t.items[n++];)if(r.focus){r.focus();return}};var r={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){e.toolbox.focus()},100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(t){var i,s=function(e,n){var r,o=t.lang.dir=="rtl",u=t.config.toolbarGroupCycling,a=o?37:39,o=o?39:37,u=u===void 0||u;switch(n){case 9:case CKEDITOR.SHIFT+9:for(;!r||!r.items.length;){r=n==9?(r?r.next:e.toolbar.next)||t.toolbox.toolbars[0]:(r?r.previous:e.toolbar.previous)||t.toolbox.toolbars[t.toolbox.toolbars.length-1];if(r.items.length)for(e=r.items[i?r.items.length-1:0];e&&!e.focus;)(e=i?e.previous:e.next)||(r=0)}return e&&e.focus(),!1;case a:r=e;do r=r.next,!r&&u&&(r=e.toolbar.items[0]);while(r&&!r.focus);return r?r.focus():s(e,9),!1;case 40:return e.button&&e.button.hasArrow?(t.once("panelShow",function(e){e.data._.panel._.currentBlock.onKeyDown(40)}),e.execute()):s(e,n==40?a:o),!1;case o:case 38:r=e;do r=r.previous,!r&&u&&(r=e.toolbar.items[e.toolbar.items.length-1]);while(r&&!r.focus);return r?r.focus():(i=1,s(e,CKEDITOR.SHIFT+9),i=0),!1;case 27:return t.focus(),!1;case 13:case 32:return e.execute(),!1}return!0};t.on("uiSpace",function(r){if(r.data.space==t.config.toolbarLocation){r.removeListener(),t.toolbox=new n;var i=CKEDITOR.tools.getNextId(),o=['<span id="',i,'" class="cke_voice_label">',t.lang.toolbar.toolbars,"</span>",'<span id="'+t.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',i,'" onmousedown="return false;">'],i=t.config.toolbarStartupExpanded!==!1,u,a;t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&o.push('<span class="cke_toolbox_main"'+(i?">":' style="display:none">'));for(var f=t.toolbox.toolbars,l=e(t),h=0;h<l.length;h++){var p,v=0,m,y=l[h],w;if(y){u&&(o.push("</span>"),a=u=0);if(y==="/")o.push('<span class="cke_toolbar_break"></span>');else{w=y.items||y;for(var E=0;E<w.length;E++){var S=w[E],x;if(S)if(S.type==CKEDITOR.UI_SEPARATOR)a=u&&S;else{x=S.canGroup!==!1;if(!v){p=CKEDITOR.tools.getNextId(),v={id:p,items:[]},m=y.name&&(t.lang.toolbar.toolbarGroups[y.name]||y.name),o.push('<span id="',p,'" class="cke_toolbar"',m?' aria-labelledby="'+p+'_label"':"",' role="toolbar">'),m&&o.push('<span id="',p,'_label" class="cke_voice_label">',m,"</span>"),o.push('<span class="cke_toolbar_start"></span>');var T=f.push(v)-1;T>0&&(v.previous=f[T-1],v.previous.next=v)}x?u||(o.push('<span class="cke_toolgroup" role="presentation">'),u=1):u&&(o.push("</span>"),u=0),p=function(e){e=e.render(t,o),T=v.items.push(e)-1,T>0&&(e.previous=v.items[T-1],e.previous.next=e),e.toolbar=v,e.onkey=s,e.onfocus=function(){t.toolbox.focusCommandExecuted||t.focus()}},a&&(p(a),a=0),p(S)}}u&&(o.push("</span>"),a=u=0),v&&o.push('<span class="cke_toolbar_end"></span></span>')}}}t.config.toolbarCanCollapse&&o.push("</span>");if(t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var N=CKEDITOR.tools.addFunction(function(){t.execCommand("toolbarCollapse")});t.on("destroy",function(){CKEDITOR.tools.removeFunction(N)}),t.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=e.ui.space("toolbar_collapser"),n=t.getPrevious(),r=e.ui.space("contents"),i=n.getParent(),s=parseInt(r.$.style.height,10),o=i.$.offsetHeight,u=t.hasClass("cke_toolbox_collapser_min");u?(n.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarCollapse)):(n.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarExpand)),t.getFirst().setText(u?"▲":"◀"),r.setStyle("height",s-(i.$.offsetHeight-o)+"px"),e.fire("resize")},modes:{wysiwyg:1,source:1}}),t.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),o.push('<a title="'+(i?t.lang.toolbar.toolbarCollapse:t.lang.toolbar.toolbarExpand)+'" id="'+t.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),i||o.push(" cke_toolbox_collapser_min"),o.push('" onclick="CKEDITOR.tools.callFunction('+N+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}o.push("</span>"),r.data.html=r.data.html+o.join("")}}),t.on("destroy",function(){if(this.toolbox){var e,t=0,n,r,i;for(e=this.toolbox.toolbars;t<e.length;t++){r=e[t].items;for(n=0;n<r.length;n++)i=r[n],i.clickFn&&CKEDITOR.tools.removeFunction(i.clickFn),i.keyDownFn&&CKEDITOR.tools.removeFunction(i.keyDownFn)}}}),t.on("uiReady",function(){var e=t.ui.space("toolbox");e&&t.focusManager.add(e,1)}),t.addCommand("toolbarFocus",r),t.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),t.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),t.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(e,n,r){var i=t(this.editor),s=n===0,o={name:e};if(r){if(r=CKEDITOR.tools.search(i,function(e){return e.name==r})){!r.groups&&(r.groups=[]);if(n){n=CKEDITOR.tools.indexOf(r.groups,n);if(n>=0){r.groups.splice(n+1,0,e);return}}s?r.groups.splice(0,0,e):r.groups.push(e);return}n=null}n&&(n=CKEDITOR.tools.indexOf(i,function(e){return e.name==n})),s?i.splice(0,0,e):typeof n=="number"?i.splice(n+1,0,o):i.push(e)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function e(e){this.editor=e,this.reset()}CKEDITOR.plugins.add("undo",{init:function(t){function n(e){i.enabled&&e.data.command.canUndo!==!1&&i.save()}function r(){i.enabled=t.readOnly?!1:t.mode=="wysiwyg",i.onChange()}var i=t.undoManager=new e(t),s=t.addCommand("undo",{exec:function(){i.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),o=t.addCommand("redo",{exec:function(){i.redo()&&(t.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1}),u=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90];t.setKeystroke([[u[0],"undo"],[u[1],"redo"],[u[2],"redo"]]),t.on("contentDom",function(){var e=t.editable();e.attachListener(e,"keydown",function(e){CKEDITOR.tools.indexOf(u,e.data.getKeystroke())>-1&&e.data.preventDefault()})}),i.onChange=function(){s.setState(i.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),o.setState(i.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},t.on("beforeCommandExec",n),t.on("afterCommandExec",n),t.on("saveSnapshot",function(e){i.save(e.data&&e.data.contentOnly)}),t.on("contentDom",function(){t.editable().on("keydown",function(e){e=e.data.getKey(),(e==8||e==46)&&i.type(e,0)}),t.editable().on("keypress",function(e){i.type(e.data.getKey(),1)})}),t.on("beforeModeUnload",function(){t.mode=="wysiwyg"&&i.save(!0)}),t.on("mode",r),t.on("readOnly",r),t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"})),t.resetUndo=function(){i.reset(),t.fire("saveSnapshot")},t.on("updateSnapshot",function(){i.currentImage&&i.update()}),t.on("lockSnapshot",function(e){i.lock(e.data&&e.data.dontUpdate)}),t.on("unlockSnapshot",i.unlock,i)}}),CKEDITOR.plugins.undo={};var t=CKEDITOR.plugins.undo.Image=function(e,t){this.editor=e,e.fire("beforeUndoImage");var n=e.getSnapshot();CKEDITOR.env.ie&&n&&(n=n.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=n,t||(this.bookmarks=(n=n&&e.getSelection())&&n.createBookmarks2(!0)),e.fire("afterUndoImage")},n=/\b(?:href|src|name)="[^"]*?"/gi;t.prototype={equalsContent:function(e){var t=this.contents,e=e.contents;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&(t=t.replace(n,""),e=e.replace(n,"")),t!=e?!1:!0},equalsSelection:function(e){var t=this.bookmarks,e=e.bookmarks;if(t||e){if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r.startOffset!=i.startOffset||r.endOffset!=i.endOffset||!CKEDITOR.tools.arrayCompare(r.start,i.start)||!CKEDITOR.tools.arrayCompare(r.end,i.end))return!1}}return!0}},e.prototype={type:function(e,n){var r=!n&&e!=this.lastKeystroke,i=this.editor;if(!this.typing||n&&!this.wasCharacter||r){var s=new t(i),o=this.snapshots.length;CKEDITOR.tools.setTimeout(function(){var e=i.getSnapshot();CKEDITOR.env.ie&&(e=e.replace(/\s+data-cke-expando=".*?"/g,"")),s.contents!=e&&o==this.snapshots.length&&(this.typing=!0,this.save(!1,s,!1)||this.snapshots.splice(this.index+1,this.snapshots.length-this.index-1),this.hasUndo=!0,this.hasRedo=!1,this.modifiersCount=this.typesCount=1,this.onChange())},0,this)}this.lastKeystroke=e,(this.wasCharacter=n)?(this.modifiersCount=0,this.typesCount++,this.typesCount>25?(this.save(!1,null,!1),this.typesCount=1):setTimeout(function(){i.fire("change")},0)):(this.typesCount=0,this.modifiersCount++,this.modifiersCount>25?(this.save(!1,null,!1),this.modifiersCount=1):setTimeout(function(){i.fire("change")},0))},reset:function(){this.lastKeystroke=0,this.snapshots=[],this.index=-1,this.limit=this.editor.config.undoStackSize||20,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.typing=!1,delete this.lastKeystroke,this.modifiersCount=this.typesCount=0},fireChange:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(e,n,r){if(this.locked)return!1;var i=this.snapshots;n||(n=new t(this.editor));if(n.contents===!1)return!1;if(this.currentImage)if(n.equalsContent(this.currentImage)){if(e||n.equalsSelection(this.currentImage))return!1}else this.editor.fire("change");return i.splice(this.index+1,i.length-this.index-1),i.length==this.limit&&i.shift(),this.index=i.push(n)-1,this.currentImage=n,r!==!1&&this.fireChange(),!0},restoreImage:function(e){var t=this.editor,n;e.bookmarks&&(t.focus(),n=t.getSelection()),this.locked=1,this.editor.loadSnapshot(e.contents),e.bookmarks?n.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&(n=this.editor.document.getBody().$.createTextRange(),n.collapse(!0),n.select()),this.locked=0,this.index=e.index,this.currentImage=this.snapshots[this.index],this.update(),this.fireChange(),t.fire("change")},getNextImage:function(e){var t=this.snapshots,n=this.currentImage,r;if(n)if(e)for(r=this.index-1;r>=0;r--){e=t[r];if(!n.equalsContent(e))return e.index=r,e}else for(r=this.index+1;r<t.length;r++){e=t[r];if(!n.equalsContent(e))return e.index=r,e}return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this.restoreImage(e),!0}return!1},redo:function(){if(this.redoable()){this.save(!0);if(this.redoable()){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0}}return!1},update:function(e){if(!this.locked){e||(e=new t(this.editor));for(var n=this.index,r=this.snapshots;n>0&&this.currentImage.equalsContent(r[n-1]);)n-=1;r.splice(n,this.index-n+1,e),this.index=n,this.currentImage=e}},lock:function(e){this.locked?this.locked.level++:e?this.locked={level:1}:(e=new t(this.editor,!0),this.locked={update:this.currentImage&&this.currentImage.equalsContent(e)?e:null,level:1})},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update,n=e&&new t(this.editor,!0);this.locked=null,e&&!e.equalsContent(n)&&this.update()}}}}(),CKEDITOR.config.wsc_removeGlobalVariable=!0,CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(e){e.config.wsc_onFinish=typeof e.config.wsc_onFinish=="function"?e.config.wsc_onFinish:function(){},e.config.wsc_onClose=typeof e.config.wsc_onClose=="function"?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-1e748a6"},init:function(e){this.parseConfig(e),this.parseApi(e),e.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname},typeof e.plugins.scayt=="undefined"&&e.ui.addButton&&e.ui.addButton("SpellChecker",{label:e.lang.wsc.toolbar,command:"checkspell",toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&CKEDITOR.env.version<=8?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),function(){function e(e){var t=this.editor,n=e.document,r=n.body;(e=n.getElementById("cke_actscrpt"))&&e.parentNode.removeChild(e),(e=n.getElementById("cke_shimscrpt"))&&e.parentNode.removeChild(e),CKEDITOR.env.gecko&&(r.contentEditable=!1,CKEDITOR.env.version<2e4&&(r.innerHTML=r.innerHTML.replace(/^.*<\!-- cke-content-start --\>/,""),setTimeout(function(){var e=new CKEDITOR.dom.range(new CKEDITOR.dom.document(n));e.setStart(new CKEDITOR.dom.node(r),0),t.getSelection().selectRanges([e])},0))),r.contentEditable=!0,CKEDITOR.env.ie&&(r.hideFocus=!0,r.disabled=!0,r.removeAttribute("disabled")),delete this._.isLoadingData,this.$=r,n=new CKEDITOR.dom.document(n),this.setup(),CKEDITOR.env.ie&&(n.getDocumentElement().addClass(n.$.compatMode),t.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(n,"selectionchange",function(){var e=n.getBody(),r=t.getSelection(),i=r&&r.getRanges()[0];i&&e.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&i.startContainer.equals(e)&&setTimeout(function(){i=t.getSelection().getRanges()[0],i.startContainer.equals("body")||(e.getFirst().remove(1),i.moveToElementEditEnd(e),i.select())},0)})),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&CKEDITOR.env.version>10)&&n.getDocumentElement().on("mousedown",function(e){e.data.getTarget().is("html")&&setTimeout(function(){t.editable().focus()})});try{t.document.$.execCommand("2D-position",!1,!0)}catch(i){}try{t.document.$.execCommand("enableInlineTableEditing",!1,!t.config.disableNativeTableHandles)}catch(s){}if(t.config.disableObjectResizing)try{this.getDocument().$.execCommand("enableObjectResizing",!1,!1)}catch(o){this.attachListener(this,CKEDITOR.env.ie?"resizestart":"resize",function(e){e.data.preventDefault()})}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&t.document.$.compatMode=="CSS1Compat")&&this.attachListener(this,"keydown",function(e){var n=e.data.getKeystroke();if(n==33||n==34)if(CKEDITOR.env.ie)setTimeout(function(){t.getSelection().scrollIntoView()},0);else if(t.window.$.innerHeight>this.$.offsetHeight){var r=t.createRange();r[n==33?"moveToElementEditStart":"moveToElementEditEnd"](this),r.select(),e.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(n,"blur",function(){try{n.$.selection.empty()}catch(e){}}),t.document.getElementsByTag("title").getItem(0).data("cke-title",t.document.$.title),CKEDITOR.env.ie&&(t.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){t.fire("contentDom"),this._.isPendingFocus&&(t.focus(),this._.isPendingFocus=!1),setTimeout(function(){t.fire("dataReady")},0),CKEDITOR.env.ie&&setTimeout(function(){if(t.document){var e=t.document.$.body;e.runtimeStyle.marginBottom="0px",e.runtimeStyle.marginBottom=""}},1e3)},0,this)}function t(){var e=[];if(CKEDITOR.document.$.documentMode>=8){e.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var t=[],n;for(n in CKEDITOR.dtd.$removeEmpty)t.push("html.CSS1Compat "+n+"[contenteditable=false]");e.push(t.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(e.push("html{height:100% !important}"),e.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return e.push("html{cursor:text;*cursor:auto}"),e.push("img,input,textarea{cursor:default}"),e.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(e){e.config.fullPage&&e.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),e.addMode("wysiwyg",function(t){function r(r){r&&r.removeListener(),e.editable(new n(e,s.$.contentWindow.document.body)),e.setData(e.getData(1),t)}var i="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(i)+"}())":"",s=CKEDITOR.dom.element.createFromHtml('<iframe src="'+i+'" frameBorder="0"></iframe>');s.setStyles({width:"100%",height:"100%"}),s.addClass("cke_wysiwyg_frame cke_reset");var o=e.ui.space("contents");o.append(s),(i=CKEDITOR.env.ie||CKEDITOR.env.gecko)&&s.on("load",r);var u=e.title,f=e.lang.common.editorHelp;u&&(CKEDITOR.env.ie&&(u+=", "+f),s.setAttribute("title",u));var u=CKEDITOR.tools.getNextId(),l=CKEDITOR.dom.element.createFromHtml('<span id="'+u+'" class="cke_voice_label">'+f+"</span>");o.append(l,1),e.on("beforeModeUnload",function(e){e.removeListener(),l.remove()}),s.setAttributes({"aria-describedby":u,tabIndex:e.tabIndex,allowTransparency:"true"}),!i&&r(),CKEDITOR.env.webkit&&(i=function(){o.setStyle("width","100%"),s.hide(),s.setSize("width",o.getSize("width")),o.removeStyle("width"),s.show()},s.setCustomData("onResize",i),CKEDITOR.document.getWindow().on("resize",i)),e.fire("ariaWidget",s)})}});var n=CKEDITOR.tools.createClass({$:function(t){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(t){CKEDITOR.tools.setTimeout(e,0,this,t)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,n){var r=this.editor;if(n)this.setHtml(e),r.fire("dataReady");else{this._.isLoadingData=!0,r._.dataStore={id:1};var i=r.config,s=i.fullPage,o=i.docType,u=CKEDITOR.tools.buildStyleHtml(t()).replace(/<style>/,'<style data-cke-temp="1">');s||(u+=CKEDITOR.tools.buildStyleHtml(r.config.contentsCss));var a=i.baseHref?'<base href="'+i.baseHref+'" data-cke-temp="1" />':"";s&&(e=e.replace(/<!DOCTYPE[^>]*>/i,function(e){return r.docType=o=e,""}).replace(/<\?xml\s[^\?]*\?>/i,function(e){return r.xmlDeclaration=e,""})),e=r.dataProcessor.toHtml(e),s?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),a&&(e=e.replace(/<head>/,"$&"+a)),e=e.replace(/<\/head\s*>/,u+"$&"),e=o+e):e=i.docType+'<html dir="'+i.contentsLangDirection+'" lang="'+(i.contentsLanguage||r.langCode)+'"><head><title>'+this._.docTitle+"</title>"+a+u+"</head><body"+(i.bodyId?' id="'+i.bodyId+'"':"")+(i.bodyClass?' class="'+i.bodyClass+'"':"")+">"+e+"</body></html>",CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),CKEDITOR.env.version<2e4&&(e=e.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),i='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>",CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(i+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>'),e=e.replace(/(?=\s*<\/(:?head)>)/,i),this.clearCustomData(),this.clearListeners(),r.fire("contentDomUnload");var f=this.getDocument();try{f.write(e)}catch(l){setTimeout(function(){f.write(e)},0)}}},getData:function(e){if(e)return this.getHtml();var e=this.editor,t=e.config,n=t.fullPage,r=n&&e.docType,i=n&&e.xmlDeclaration,s=this.getDocument(),n=n?s.getDocumentElement().getOuterHtml():s.getBody().getHtml();return CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),n=e.dataProcessor.toDataFormat(n),i&&(n=i+"\n"+n),r&&(n=r+"\n"+n),n},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:n.baseProto.focus.call(this)},detach:function(){var e=this.editor,t=e.document,e=e.window.getFrame();n.baseProto.detach.call(this),this.clearCustomData(),t.getDocumentElement().clearCustomData(),e.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(t=e.removeCustomData("onResize"))&&t.removeListener(),e.remove()}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css"),CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filebrowser,floatingspace,listblock,button,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,pastefromword,pastetext,removeformat,resize,menubutton,scayt,sourcearea,specialchar,stylescombo,tab,table,tabletools,toolbar,undo,wsc,wysiwygarea",CKEDITOR.config.skin="moono",function(){var e=function(e,t){for(var n=CKEDITOR.getUrl("plugins/"+t),e=e.split(","),r=0;r<e.length;r++)CKEDITOR.skin.icons[e[r]]={path:n,offset:-e[++r],bgsize:e[++r]}};CKEDITOR.env.hidpi?e("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,creatediv,432,,docprops-rtl,456,,docprops,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,justifyblock,1056,,justifycenter,1080,,justifyleft,1104,,justifyright,1128,,language,1152,,anchor-rtl,1176,,anchor,1200,,link,1224,,unlink,1248,,bulletedlist-rtl,1272,,bulletedlist,1296,,numberedlist-rtl,1320,,numberedlist,1344,,mathjax,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastefromword-rtl,1512,,pastefromword,1536,,pastetext-rtl,1560,,pastetext,1584,,placeholder,1608,,preview-rtl,1632,,preview,1656,,print,1680,,removeformat,1704,,save,1728,,scayt,1752,,selectall,1776,,showblocks-rtl,1800,,showblocks,1824,,smiley,1848,,source-rtl,1872,,source,1896,,sourcedialog-rtl,1920,,sourcedialog,1944,,specialchar,1968,,table,1992,,templates-rtl,2016,,templates,2040,,uicolor,2064,,redo-rtl,2088,,redo,2112,,undo-rtl,2136,,undo,2160,,spellchecker,2184,","icons_hidpi.png"):e("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,creatediv,432,auto,docprops-rtl,456,auto,docprops,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,justifyblock,1056,auto,justifycenter,1080,auto,justifyleft,1104,auto,justifyright,1128,auto,language,1152,auto,anchor-rtl,1176,auto,anchor,1200,auto,link,1224,auto,unlink,1248,auto,bulletedlist-rtl,1272,auto,bulletedlist,1296,auto,numberedlist-rtl,1320,auto,numberedlist,1344,auto,mathjax,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastefromword-rtl,1512,auto,pastefromword,1536,auto,pastetext-rtl,1560,auto,pastetext,1584,auto,placeholder,1608,auto,preview-rtl,1632,auto,preview,1656,auto,print,1680,auto,removeformat,1704,auto,save,1728,auto,scayt,1752,auto,selectall,1776,auto,showblocks-rtl,1800,auto,showblocks,1824,auto,smiley,1848,auto,source-rtl,1872,auto,source,1896,auto,sourcedialog-rtl,1920,auto,sourcedialog,1944,auto,specialchar,1968,auto,table,1992,auto,templates-rtl,2016,auto,templates,2040,auto,uicolor,2064,auto,redo-rtl,2088,auto,redo,2112,auto,undo-rtl,2136,auto,undo,2160,auto,spellchecker,2184,auto","icons.png")}()}(),define("third-party/ckeditor/ckeditor",function(){}),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend(!0,{},e.fn.typeahead.defaults,n),this.$menu=e(this.options.menu).appendTo("body"),this.shown=!1,this.eventSupported=this.options.eventSupported||this.eventSupported,this.grepper=this.options.grepper||this.grepper,this.highlighter=this.options.highlighter||this.highlighter,this.lookup=this.options.lookup||this.lookup,this.matcher=this.options.matcher||this.matcher,this.render=this.options.render||this.render,this.select=this.options.select||this.select,this.sorter=this.options.sorter||this.sorter,this.source=this.options.source||this.source;if(!this.source.length){var r=this.options.ajax;typeof r=="string"?this.ajax=e.extend({},e.fn.typeahead.defaults.ajax,{url:r}):this.ajax=e.extend({},e.fn.typeahead.defaults.ajax,r),this.ajax.url||(this.ajax=null)}this.listen()};t.prototype={constructor:t,eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},ajaxer:function(){var t=this,n=t.$element.val();return n===t.query?t:(t.query=n,t.ajax.timerId&&(clearTimeout(t.ajax.timerId),t.ajax.timerId=null),!n||n.length<t.ajax.triggerLength?(t.ajax.xhr&&(t.ajax.xhr.abort(),t.ajax.xhr=null,t.ajaxToggleLoadClass(!1)),t.shown?t.hide():t):(t.ajax.timerId=setTimeout(function(){e.proxy(t.ajaxExecute(n),t)},t.ajax.timeout),t))},ajaxExecute:function(t){this.ajaxToggleLoadClass(!0),this.ajax.xhr&&this.ajax.xhr.abort();var n=this.ajax.preDispatch?this.ajax.preDispatch(t):{query:t},r=this.ajax.method==="post"?e.post:e.get;this.ajax.xhr=r(this.ajax.url,n,e.proxy(this.ajaxLookup,this)),this.ajax.timerId=null},ajaxLookup:function(e){var t;this.ajaxToggleLoadClass(!1);if(!this.ajax.xhr)return;return this.ajax.preProcess&&(e=this.ajax.preProcess(e)),this.ajax.data=e,t=this.grepper(this.ajax.data),!t||!t.length?this.shown?this.hide():this:(this.ajax.xhr=null,this.render(t.slice(0,this.options.items)).show())},ajaxToggleLoadClass:function(e){if(!this.ajax.loadingClass)return;this.$element.toggleClass(this.ajax.loadingClass,e)},lookup:function(e){var t=this,n;if(!t.ajax)return t.query=t.$element.val(),t.query?(n=t.grepper(t.source),!n||!n.length?t.shown?t.hide():t:t.render(n.slice(0,t.options.items)).show()):t.shown?t.hide():t;t.ajaxer()},grepper:function(t){var n=this,r;return t&&t.length&&!t[0].hasOwnProperty(n.options.display)?null:(r=e.grep(t,function(e){return n.matcher(e[n.options.display],e)}),this.sorter(r))},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=this,n=[],r=[],i=[],s;while(s=e.shift())s[t.options.display].toLowerCase().indexOf(this.query.toLowerCase())?~s[t.options.display].indexOf(this.query)?r.push(s):i.push(s):n.push(s);return n.concat(r,i)},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r[n.options.val]),t.find("a").html(n.highlighter(r[n.options.display],r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},select:function(){var e=this.$menu.find(".active");return this.$element.val(e.text()).change(),this.options.itemSelected(e,e.attr("data-value"),e.text()),this.hide()},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")?this.$element.on("keydown",e.proxy(this.keypress,this)):this.$element.on("keypress",e.proxy(this.keypress,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},keyup:function(e){e.stopPropagation(),e.preventDefault();switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:this.hide();break;default:this.lookup()}},keypress:function(e){e.stopPropagation();if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}},blur:function(e){var t=this;e.stopPropagation(),e.preventDefault(),setTimeout(function(){t.$menu.is(":focus")||t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',display:"name",val:"id",itemSelected:function(){},ajax:{url:null,timeout:300,method:"post",triggerLength:3,loadingClass:null,displayField:null,preDispatch:null,preProcess:null}},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})})}(window.jQuery),define("third-party/twitter-bootstrap-typeahead/js/bootstrap-typeahead",function(){}),function(e){define("backbone-forms/adapters/bootstrap-modal",["jquery","underscore","backbone"],function(){return function(){var e=_.templateSettings;_.templateSettings={interpolate:/\{\{(.+?)\}\}/g,evaluate:/<%([\s\S]+?)%>/g};var t=_.template('    <div class="modal-dialog"><div class="modal-content">    <% if (title) { %>      <div class="modal-header">        <% if (allowCancel) { %>          <a class="close">×</a>        <% } %>        <h3>{{title}}</h3>      </div>    <% } %>    <div class="modal-body">{{content}}</div>    <div class="modal-footer">      <% if (allowCancel) { %>        <% if (cancelText) { %>          <a href="#" class="btn cancel btn-default">{{cancelText}}</a>        <% } %>      <% } %>      <a href="#" class="btn ok btn-primary">{{okText}}</a>    </div>    </div></div>  ');_.templateSettings=e;var n=Backbone.View.extend({className:"modal",events:{"click .close":function(e){e.preventDefault(),this.trigger("cancel")},"click .cancel":function(e){e.preventDefault(),this.trigger("cancel")},"click .ok":function(e){e.preventDefault(),this.trigger("ok"),this.close()}},initialize:function(e){this.options=_.extend({title:null,okText:"OK",cancelText:"Cancel",allowCancel:!0,escape:!0,animate:!1,template:t},e)},render:function(){var e=this.$el,t=this.options,n=t.content;e.html(t.template(t));var r=this.$content=e.find(".modal-body");return n.$el&&e.find(".modal-body").html(n.render().$el),t.animate&&e.addClass("fade"),this.isRendered=!0,this},open:function(e){this.isRendered||this.render();var t=this,r=this.$el;r.modal({keyboard:this.options.allowCancel,backdrop:this.options.allowCancel?!0:"static"}),r.one("shown",function(){r.find(".btn.ok").focus(),t.trigger("shown")});var i=n.count,s=$(".modal-backdrop:eq("+i+")"),o=s.css("z-index"),u=s.css("z-index");return s.css("z-index",o+i),this.$el.css("z-index",u+i),this.options.allowCancel&&(s.one("click",function(){t.trigger("cancel")}),$(document).one("keyup.dismiss.modal",function(e){e.which==27&&t.trigger("cancel")})),this.on("cancel",function(){t.close()}),n.count++,e&&t.on("ok",e),this},close:function(){var e=this,t=this.$el;if(this._preventClose){this._preventClose=!1;return}t.modal("hide"),t.one("hidden",function(){e.remove(),e.trigger("hidden")}),n.count--},preventClose:function(){this._preventClose=!0}},{count:0});Backbone.BootstrapModal=n}.apply(e,arguments)})}(this),function(e){define("backbone-forms/editors/list",["backbone","backbone-forms/adapters/bootstrap-modal"],function(){return function(){(function(e){e.editors.List=e.editors.Base.extend({events:{'click [data-action="add"]':function(e){e.preventDefault(),this.addItem(null,!0)}},initialize:function(t){t=t||{};var n=e.editors;n.Base.prototype.initialize.call(this,t);var r=this.schema;if(!r)throw"Missing required option 'schema'";this.template=t.template||this.constructor.template,this.Editor=function(){var e=r.itemType;return e?n.List[e]?n.List[e]:n[e]:n.Text}(),this.items=[]},render:function(){var e=this,t=this.value||[],n=$($.trim(this.template()));this.$list=n.is("[data-items]")?n:n.find("[data-items]"),t.length?_.each(t,function(t){e.addItem(t)}):this.Editor.isAsync||this.addItem();var r=this.el;return this.setElement(n),r&&$(r).replaceWith(this.el),this.$el.attr("id",this.id),this.$el.attr("name",this.key),this.hasFocus&&this.trigger("blur",this),this},addItem:function(t,n){var r=this,i=e.editors,s=(new i.List.Item({list:this,form:this.form,schema:this.schema,value:t,Editor:this.Editor,key:this.key})).render(),o=function(){r.items.push(s),r.$list.append(s.el),s.editor.on("all",function(e){if(e==="change")return;var t=_.toArray(arguments);t[0]="item:"+e,t.splice(1,0,r),i.List.prototype.trigger.apply(this,t)},r),s.editor.on("change",function(){s.addEventTriggered||(s.addEventTriggered=!0,this.trigger("add",this,s.editor)),this.trigger("item:change",this,s.editor),this.trigger("change",this)},r),s.editor.on("focus",function(){if(this.hasFocus)return;this.trigger("focus",this)},r),s.editor.on("blur",function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(_.find(e.items,function(e){return e.editor.hasFocus}))return;e.trigger("blur",e)},0)},r);if(n||t)s.addEventTriggered=!0;n&&(r.trigger("add",r,s.editor),r.trigger("change",r))};return this.Editor.isAsync?s.editor.on("readyToAdd",o,this):(o(),s.editor.focus()),s},removeItem:function(e){var t=this.schema.confirmDelete;if(t&&!confirm(t))return;var n=_.indexOf(this.items,e);this.items[n].remove(),this.items.splice(n,1),e.addEventTriggered&&(this.trigger("remove",this,e.editor),this.trigger("change",this)),!this.items.length&&!this.Editor.isAsync&&this.addItem()},getValue:function(){var e=_.map(this.items,function(e){return e.getValue()});return _.without(e,undefined,"")},setValue:function(e){this.items=[],this.value=e,this.render()},focus:function(){if(this.hasFocus)return;this.items[0]&&this.items[0].editor.focus()},blur:function(){if(!this.hasFocus)return;var e=_.find(this.items,function(e){return e.editor.hasFocus});e&&e.editor.blur()},remove:function(){_.invoke(this.items,"remove"),e.editors.Base.prototype.remove.call(this)},validate:function(){if(!this.validators)return null;var e=_.map(this.items,function(e){return e.validate()}),t=_.compact(e).length?!0:!1;if(!t)return null;var n={type:"list",message:"Some of the items in the list failed validation",errors:e};return n}},{template:_.template('      <div>        <div data-items></div>        <button type="button" data-action="add">Add</button>      </div>    ',null,e.templateSettings)}),e.editors.List.Item=e.editors.Base.extend({events:{'click [data-action="remove"]':function(e){e.preventDefault(),this.list.removeItem(this)},"keydown input[type=text]":function(e){if(e.keyCode!==13)return;e.preventDefault(),this.list.addItem(),this.list.$list.find("> li:last input").focus()}},initialize:function(t){this.list=t.list,this.schema=t.schema||this.list.schema,this.value=t.value,this.Editor=t.Editor||e.editors.Text,this.key=t.key,this.template=t.template||this.constructor.template,this.errorClassName=t.errorClassName||this.constructor.errorClassName,this.form=t.form},render:function(){this.editor=(new this.Editor({key:this.key,schema:this.schema,value:this.value,list:this.list,item:this,form:this.form})).render();var e=$($.trim(this.template()));return e.find("[data-editor]").append(this.editor.el),this.setElement(e),this},getValue:function(){return this.editor.getValue()},setValue:function(e){this.editor.setValue(e)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove(),Backbone.View.prototype.remove.call(this)},validate:function(){var e=this.getValue(),t=this.list.form?this.list.form.getValue():{},n=this.schema.validators,r=this.getValidator;if(!n)return null;var i=null;return _.every(n,function(n){return i=r(n)(e,t),i?!1:!0}),i?this.setError(i):this.clearError(),i?i:null},setError:function(e){this.$el.addClass(this.errorClassName),this.$el.attr("title",e.message)},clearError:function(){this.$el.removeClass(this.errorClassName),this.$el.attr("title",null)}},{template:_.template('      <div>        <span data-editor></span>        <button type="button" data-action="remove">&times;</button>      </div>    ',null,e.templateSettings),errorClassName:"error"}),e.editors.List.Modal=e.editors.Base.extend({events:{click:"openEditor"},initialize:function(t){t=t||{},e.editors.Base.prototype.initialize.call(this,t);if(!e.editors.List.Modal.ModalAdapter)throw"A ModalAdapter is required";this.form=t.form;if(!t.form)throw'Missing required option: "form"';this.template=t.template||this.constructor.template},render:function(){var e=this;return _.isEmpty(this.value)?this.openEditor():(this.renderSummary(),setTimeout(function(){e.trigger("readyToAdd")},0)),this.hasFocus&&this.trigger("blur",this),this},renderSummary:function(){this.$el.html($.trim(this.template({summary:this.getStringValue()})))},itemToString:function(t){var n=function(t){var n={key:t};return e.Field.prototype.createTitle.call(n)};t=t||{};var r=[];return _.each(this.nestedSchema,function(e,i){var s=e.title?e.title:n(i),o=t[i];if(_.isUndefined(o)||_.isNull(o))o="";r.push('<span data-key="'+i+'" data-desc='+s+'">'+o+"</span>")}),r.join("")},getStringValue:function(){var e=this.schema,t=this.getValue();return _.isEmpty(t)?"[Empty]":e.itemToString?e.itemToString(t):this.itemToString(t)},openEditor:function(){var t=this,n=this.form.constructor,r=this.modalForm=new n({schema:this.nestedSchema,data:this.value}),i=this.modal=new e.editors.List.Modal.ModalAdapter({content:r,animate:!0});i.open(),this.trigger("open",this),this.trigger("focus",this),i.on("cancel",this.onModalClosed,this),i.on("ok",_.bind(this.onModalSubmitted,this))},onModalSubmitted:function(){var e=this.modal,t=this.modalForm,n=!this.value,r=t.validate();if(r)return e.preventClose();this.value=t.getValue(),this.renderSummary(),n&&this.trigger("readyToAdd"),this.trigger("change",this),this.onModalClosed()},onModalClosed:function(){this.modal=null,this.modalForm=null,this.trigger("close",this),this.trigger("blur",this)},getValue:function(){return this.value},setValue:function(e){this.value=e},focus:function(){if(this.hasFocus)return;this.openEditor()},blur:function(){if(!this.hasFocus)return;this.modal&&this.modal.trigger("cancel")}},{template:_.template("      <div><%= summary %></div>    ",null,e.templateSettings),ModalAdapter:Backbone.BootstrapModal,isAsync:!0}),e.editors.List.Object=e.editors.List.Modal.extend({initialize:function(){e.editors.List.Modal.prototype.initialize.apply(this,arguments);var t=this.schema;if(!t.subSchema)throw'Missing required option "schema.subSchema"';this.nestedSchema=t.subSchema}}),e.editors.List.NestedModel=e.editors.List.Modal.extend({initialize:function(){e.editors.List.Modal.prototype.initialize.apply(this,arguments);var t=this.schema;if(!t.model)throw'Missing required option "schema.model"';var n=t.model.prototype.schema;this.nestedSchema=_.isFunction(n)?n():n},getStringValue:function(){var e=this.schema,t=this.getValue();return _.isEmpty(t)?null:e.itemToString?e.itemToString(t):(new e.model(t)).toString()}})})(Backbone.Form)}.apply(e,arguments)})}(this),function(e){define("backbone-forms/editors/file",["backbone"],function(){return function(){(function(){Backbone.Form.editors.File=Backbone.Form.editors.Base.extend({tagName:"div",defaultValue:"",initialize:function(e){var t=this,e=e||{};if(e.model){if(!e.key)throw"Missing option: 'key'";this.model=e.model,this.value=this.model.get(e.key)}else e.value&&(this.value=e.value);this.$el.addClass("control-group fancyfile bbf-file"),this.$el.removeClass("form-control"),t.options=e,_.extend(t,_.pick(e,"key","form"));var n=t.schema=e.schema||{};t.validators=e.validators||n.validators},render:function(){var e=this;return e.$el.toggle(!1),e.$el.html('<span src="" class="preview"></span><input name="upload" type="file" data-toggle="fancyfile" /><button class="btn btn-danger remove-file"><i class="glyphicon glyphicon-remove"></i></button><div class="progress-container"></div>'),setTimeout(function(){e.$el.toggle(!0),$('[type="file"]',e.$el).fancyfile({text:"",icon:'<i class="glyphicon glyphicon-folder-open"></i>',style:"btn-info",placeholder:"Select File…"}),$(".fancy-file",e.$el).toggle(!e.value),$(".remove-file",e.$el).toggle(!!e.value),$(".preview",e.$el).toggle(!!e.value)},200),e.value&&e.repaintPreview(),this._delegateEvents(),this},repaintPreview:function(){var e=this;e.value?$(".preview",e.$el).html('<a target="_blank" href="/api/fs.files/'+("string"==typeof e.value?e.value:e.value._id)+'/raw"'+' class="btn btn-default btn-small"'+'><i class="glyphicon glyphicon-download-alt"></i></a> '):$(".preview",e.$el).html("")},_delegateEvents:function(){var e=this;$('[type="file"]',e.$el).on("change",function(t){if(this.files.length===0)return;var n=new XMLHttpRequest;n.open("POST","/api/fs.files"),$(".fancy-file",e.$el).toggle(!1),n.upload.onprogress=function(t){console.log(t.loaded+" of "+t.total);var n=t.loaded/(t.total||1)*100+"%";$(".progress-container .progress-bar",e.$el).css("width",n).text("Uploading... "+(n==="100%"?"(Waiting for a response)":n))},n.onload=function(t){var n=JSON.parse(arguments[0].currentTarget.response);e.setValue(n.data[0]._id),$(".remove-file",e.$el).toggle(!!e.value),$(".fancy-file",e.$el).toggle(!e.value),$(".preview",e.$el).toggle(!!e.value),$(".progress-container",e.$el).html(""),e.repaintPreview()};var r=new FormData,i=$("#collection-form").data("collection-name");r.append(i+"."+e.options.key,this.files[0]),n.send(r),$(".progress-container",e.$el).html('<div class="progress progress-striped active">   <div class="progress-bar" style="width:0%;"></div></div>')}),$(".remove-file",e.$el).on("click",function(t){t.preventDefault(),require(["third-party/alertify.js/lib/alertify.min"],function(){alertify.confirm("Are you sure you want to remove this file?",function(t){t&&$.ajax({url:"/api/fs.files/"+e.value._id,method:"DELETE"}).success(function(){e.setValue(null),$('[type="file"]',e.$el).val(null),$(".preview",e.$el).attr("src","about:blank"),$(".remove-file",e.$el).toggle(!!e.value),$(".fancy-file",e.$el).toggle(!e.value),$(".image-preview",e.$el).toggle(!!e.value),e.repaintPreview()}).error(function(){alert("An error has occurred.")})})})})},getValue:function(){return this.value&&"object"==typeof this.value,this.value},setValue:function(e){e&&"object"==typeof e,this.value=e,this.render()},focus:function(){$('[type="file"]',this.$el).get(0).focus()},blur:function(){$('[type="file"]',this.$el).get(0).blur()}})})()}.apply(e,arguments)})}(this),function(e){define("backbone-forms/editors/image",["backbone"],function(){return function(){(function(){Backbone.Form.editors.Image=Backbone.Form.editors.Base.extend({tagName:"div",defaultValue:"",initialize:function(e){var t=this,e=e||{};if(e.model){if(!e.key)throw"Missing option: 'key'";this.model=e.model,this.value=this.model.get(e.key)}else e.value&&(this.value=e.value);this.$el.removeClass("form-control"),this.$el.addClass("bbf-image"),t.options=e,_.extend(t,_.pick(e,"key","form"));var n=t.schema=e.schema||{};t.validators=e.validators||n.validators,this.oFReader=new FileReader,this.rFilter=/^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i},render:function(){var e=this;return e.$el.css({width:290,display:"block"}),e.$el.toggle(!1),e.$el.html('<a class="img-link" href="#" target="_blank"><img src="" class="image-preview img-thumbnail" style="display:block;max-height:300px;" /></a><input name="upload" type="file" data-toggle="fancyfile" /><button class="btn btn-danger remove-file"><i class="glyphicon glyphicon-remove"></i></button><div class="progress-container"></div>'),setTimeout(function(){e.$el.toggle(!0),$('[type="file"]',e.$el).fancyfile({text:"",icon:'<i class="glyphicon glyphicon-camera"></i>',style:"btn-info",placeholder:"Select Image…"}),$(".fancy-file",e.$el).toggle(!e.value),$(".remove-file",e.$el).toggle(!!e.value),$(".image-preview",e.$el).toggle(!!e.value)},200),e.value&&("object"==typeof e.value?($(".img-link",e.$el).attr("href","/api/fs.files/"+e.value._id+"/raw"),e.value.metadata&&e.value.metadata.s3_url?$(".image-preview",e.$el).attr("src",e.value.metadata.s3_url):$(".image-preview",e.$el).attr("src","/api/fs.files/"+e.value._id+"/raw")):($(".img-link",e.$el).attr("href","/api/fs.files/"+e.value+"/raw"),$(".image-preview",e.$el).attr("src","/api/fs.files/"+e.value+"/raw"))),this._delegateEvents(),this},_delegateEvents:function(){var e=this;e.oFReader.onload=function(t){$(".image-preview",e.$el).one("load",function(){$(".image-preview",e.$el).toggle(!0)}),$(".image-preview",e.$el).attr("src",t.target.result)},$('[type="file"]',e.$el).on("change",function(t){if(this.files.length===0)return;var n=this.files[0];if(!e.rFilter.test(n.type)){alert("You must select a valid image file!");return}e.oFReader.readAsDataURL(n);var r=new XMLHttpRequest;r.open("POST","/api/fs.files"),$(".fancy-file",e.$el).toggle(!1),r.upload.onprogress=function(t){console.log(t.loaded+" of "+t.total);var n=t.loaded/(t.total||1)*100+"%";$(".progress-container .progress-bar",e.$el).css("width",n).text("Uploading... "+(n==="100%"?"(Waiting for a response)":n))},r.onload=function(t){var n=JSON.parse(arguments[0].currentTarget.response);e.setValue(n.data[0]._id),$(".remove-file",e.$el).toggle(!!e.value),$(".fancy-file",e.$el).toggle(!e.value),$(".image-preview",e.$el).toggle(!!e.value),$(".progress-container",e.$el).html(""),$(".img-link",e.$el).attr("href","/api/fs.files/"+e.value._id+"/raw")};var i=new FormData,s=$("#collection-form").data("collection-name");i.append(s+"."+e.options.key,this.files[0]),r.send(i),$(".progress-container",e.$el).html('<div class="progress progress-striped">   <div class="progress-bar" style="width:0%;"></div></div>')}),$(".remove-file",e.$el).on("click",function(t){t.preventDefault(),require(["third-party/alertify.js/lib/alertify.min"],function(){alertify.confirm("Are you sure you want to remove this image?",function(t){t&&$.ajax({url:"/api/fs.files/"+e.value._id,method:"DELETE"}).success(function(){e.setValue(null),$('[type="file"]',e.$el).val(null),$(".image-preview",e.$el).attr("src","about:blank"),$(".remove-file",e.$el).toggle(!!e.value),$(".fancy-file",e.$el).toggle(!e.value),$(".image-preview",e.$el).toggle(!!e.value)}).error(function(){alert("An error has occurred.")})})})})},getValue:function(){return this.value&&"object"==typeof this.value,this.value},setValue:function(e){e&&"object"==typeof e,this.value=e,this.render()},focus:function(){$('[type="file"]',this.$el).get(0).focus()},blur:function(){$('[type="file"]',this.$el).get(0).blur()}})})()}.apply(e,arguments)})}(this),function(e){define("backbone-forms/editors/object-id",["backbone"],function(){return function(){(function(){Backbone.Form.editors.ObjectId=Backbone.Form.editors.Base.extend({tagName:"div",defaultValue:"",initialize:function(e){var t=this,e=e||{};if(e.model){if(!e.key)throw"Missing option: 'key'";this.model=e.model,this.value=this.model.get(e.key)}else e.value&&(this.value=e.value);t.$el.addClass("bbf-object-id"),t.options=e,_.extend(t,_.pick(e,"key","form"));var n=t.schema=e.schema||{};t.validators=e.validators||n.validators},render:function(){var e=this;return e.$el.removeClass("form-control"),e.$el.html('<input type="hidden" name="_id" placeholder="Search..." autocomplete="off"><input class="form-control" type="text" name="'+e.schema.autocompleteField+'" placeholder="Search..." autocomplete="off">'+'<span class="info btn-group"></span>'),e.value&&($('input[type="hidden"]',e.$el).val(e.value._id),$('input[type="text"]',e.$el).val(e.value[e.schema.autocompleteField])),this._delegateEvents(),e.refresh(),this},_delegateEvents:function(){var e=this;$('input[type="text"]',e.$el).on("focus",function(t){var n=$(this),r=e.schema.autocompleteField,i={};if(n.data("typeahead"))return;n.on("change",function(){var t=$(this);setTimeout(function(){var n=i[t.val()];n&&($('[type="hidden"]',e.$el).val(n._id),e.setValue(n))},200)}),n.typeahead({ajax:{url:"/api/search/"+e.schema.autocompleteCollectionName,timeout:300,displayField:"endpoint",triggerLength:1,method:"get",loadingClass:"loading-circle",preDispatch:function(e){return{q:e}},preProcess:function(e){var t=_(e.data).map(function(e){return i[e[r]]=e,{name:e[r],_id:e._id}});return t}}})})},getValue:function(){return this.value},setValue:function(e){var t=this;t.value=e,t.render()},refresh:function(){var e=this;e.value?$(".info",e.$el).html('<a target="_blank" class="btn btn-default btn-small" href="/edit/'+e.schema.autocompleteCollectionName+"/"+e.value._id+'">'+'<i class="glyphicon glyphicon-edit"></i></a>'+' <a target="_blank" class="btn btn-default btn-small" href="/preview/'+e.schema.autocompleteCollectionName+"/"+e.value._id+'">'+'<i class="glyphicon glyphicon-eye-open"></i></a>'):$(".info",e.$el).html("no "+e.schema.autocompleteCollectionName+" linked")},focus:function(){$('[type="text"]',this.$el).get(0).focus()},blur:function(){$('[type="text"]',this.$el).get(0).blur()}})})()}.apply(e,arguments)})}(this),function(e){define("backbone-forms/editors/ckeditor",["backbone"],function(){return function(){(function(){Backbone.Form.editors.CKEditor=Backbone.Form.editors.TextArea.extend({tagName:"div",render:function(){var e=this;return window.CKEDITOR.basePath=window.CKEDITOR_BASEPATH="/third-party/ckeditor/",window.CKEDITOR.config.contentsCss=window.CKEDITOR.basePath+"contents.css",e.id="ck-"+Math.random().toString().slice(2),e.$el=$(e.el),e.$el.attr("id",e.id),e.$el.css({width:"100%",height:"auto"}),setTimeout(function(){e.ck=CKEDITOR.appendTo(e.id,{basePath:"/third-party/ckeditor/",toolbar:"Basic",skin:"../../../third-party/BootstrapCK4-Skin/skins/bootstrapck"},e.value)},200),this},getValue:function(){return this.value=this.ck.getData(),this.value},setValue:function(e){this.value=e,this.ck.setData(this.value)}})})()}.apply(e,arguments)})}(this),function(e){define("backbone-forms/editors/datepicker",["backbone"],function(){return function(){(function(){Backbone.Form.editors.Datepicker=Backbone.Form.editors.Text.extend({tagName:"input",render:function(){var e=this;e.id="datepicker-"+Math.random().toString().slice(2),e.$el=$(e.el),e.$el.attr("id",e.id),setTimeout(function(){e.$el.parent().addClass("input-group date"),e.$el.after('<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>')},200),e.$el.datepicker({format:(this.schema.editorAttrs||{}).format||"yyyy-mm-dd"});var t=t||{};if(t.model){if(!t.key)throw"Missing option: 'key'";this.model=t.model,this.value=this.model.get(t.key)}else t.value&&(this.value=t.value);return this.value&&this.setValue(this.value),this},getValue:function(){return this.value=this.$el.datepicker("getUTCDate"),this.value},setValue:function(e){this.value=e,this.$el.datepicker("setUTCDate",new Date(this.value))}})})()}.apply(e,arguments)})}(this),!function(e){var t=function(e){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,e&&(void 0!==e.toLowerCase?this.setColor(e):void 0!==e.h&&(this.value=e))};t.prototype={constructor:t,_sanitizeNumber:function(e){return"number"==typeof e?e:isNaN(e)||null===e||""===e||void 0===e?1:void 0!==e.toLowerCase?parseFloat(e):1},setColor:function(e){e=e.toLowerCase(),this.value=this.stringToHSB(e)||{h:0,s:0,b:0,a:1}},stringToHSB:function(t){t=t.toLowerCase();var n=this,r=!1;return e.each(this.stringParsers,function(e,i){var s=i.re.exec(t),o=s&&i.parse.apply(n,[s]),u=i.format||"rgba";return o?(r=u.match(/hsla?/)?n.RGBtoHSB.apply(n,n.HSLtoRGB.apply(n,o)):n.RGBtoHSB.apply(n,o),n.origFormat=u,!1):!0}),r},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setBrightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,r){e=e||this.value.h,t=t||this.value.s,n=n||this.value.b,r=r||this.value.a;var i,s,o,u,a,f,l,c;switch(e&&void 0===t&&void 0===n&&(t=e.s,n=e.v,e=e.h),u=Math.floor(6*e),a=6*e-u,f=n*(1-t),l=n*(1-a*t),c=n*(1-(1-a)*t),u%6){case 0:i=n,s=c,o=f;break;case 1:i=l,s=n,o=f;break;case 2:i=f,s=n,o=c;break;case 3:i=f,s=l,o=n;break;case 4:i=c,s=f,o=n;break;case 5:i=n,s=f,o=l}return{r:Math.floor(255*i),g:Math.floor(255*s),b:Math.floor(255*o),a:r}},toHex:function(e,t,n,r){var i=this.toRGB(e,t,n,r);return"#"+(1<<24|parseInt(i.r)<<16|parseInt(i.g)<<8|parseInt(i.b)).toString(16).substr(1)},toHSL:function(e,t,n,r){e=e||this.value.h,t=t||this.value.s,n=n||this.value.b,r=r||this.value.a;var i=e,s=(2-t)*n,o=t*n;return o/=s>0&&1>=s?s:2-s,s/=2,o>1&&(o=1),{h:i,s:o,l:s,a:r}},RGBtoHSB:function(e,t,n,r){e/=255,t/=255,n/=255;var i,s,o,u;return o=Math.max(e,t,n),u=o-Math.min(e,t,n),i=0===u?null:o===e?(t-n)/u:o===t?(n-e)/u+2:(e-t)/u+4,i=(i+360)%6*60/360,s=0===u?0:u/o,{h:this._sanitizeNumber(i),s:s,b:o,a:this._sanitizeNumber(r)}},HueToRGB:function(e,t,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e},HSLtoRGB:function(e,t,n,r){0>t&&(t=0);var i;i=.5>=n?n*(1+t):n+t-n*t;var s=2*n-i,o=e+1/3,u=e,a=e-1/3,f=Math.round(255*this.HueToRGB(s,i,o)),l=Math.round(255*this.HueToRGB(s,i,u)),c=Math.round(255*this.HueToRGB(s,i,a));return[f,l,c,this._sanitizeNumber(r)]},toString:function(e){switch(e=e||"rgba"){case"rgb":var t=this.toRGB();return"rgb("+t.r+","+t.g+","+t.b+")";case"rgba":var t=this.toRGB();return"rgba("+t.r+","+t.g+","+t.b+","+t.a+")";case"hsl":var n=this.toHSL();return"hsl("+Math.round(360*n.h)+","+Math.round(100*n.s)+"%,"+Math.round(100*n.l)+"%)";case"hsla":var n=this.toHSL();return"hsla("+Math.round(360*n.h)+","+Math.round(100*n.s)+"%,"+Math.round(100*n.l)+"%,"+n.a+")";case"hex":return this.toHex();default:return!1}},stringParsers:[{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1]}},{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(e){return[e[1],e[2],e[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/^([a-z]{3,})$/,format:"alias",parse:function(e){var t=this.colorNameToHex(e[0])||"#000000",n=this.stringParsers[0].re.exec(t),r=n&&this.stringParsers[0].parse.apply(this,[n]);return r}}],colorNameToHex:function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"undefined"!=typeof t[e.toLowerCase()]?t[e.toLowerCase()]:!1}};var n={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'},r=function(r,i){this.element=e(r).addClass("colorpicker-element"),this.options=e.extend({},n,this.element.data(),i),this.component=this.options.component,this.component=this.component!==!1?this.element.find(this.component):!1,this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1?e(this.container):!1,this.input=this.element.is("input")?this.element:this.options.input?this.element.find(this.options.input):!1,this.input&&0===this.input.length&&(this.input=!1),this.color=new t(this.options.color!==!1?this.options.color:this.getValue()),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.picker=e(this.options.template),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format)&&this.picker.addClass("colorpicker-with-alpha"),this.picker.on("mousedown.colorpicker",e.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:e("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":e.proxy(this.keyup,this)}),this.component===!1&&this.element.on({"focus.colorpicker":e.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":e.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":e.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":e.proxy(this.show,this)}),this.update(),e(e.proxy(function(){this.element.trigger("create")},this))};r.version="2.0.0-beta",r.Color=t,r.prototype={constructor:r,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1)return!1;var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+(this.component?this.component.outerHeight():this.element.outerHeight()),left:e.left})},show:function(t){return this.isDisabled()?!1:(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),e(window).on("resize.colorpicker",e.proxy(this.reposition,this)),!this.hasInput()&&t&&t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),this.options.inline===!1&&e(window.document).on({"mousedown.colorpicker":e.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color}),void 0)},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),e(window).off("resize.colorpicker",this.reposition),e(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(e){return e=e||this.color.toString(this.format),this.element.data("color",e),e},updateInput:function(e){return e=e||this.color.toString(this.format),this.input!==!1&&this.input.prop("value",e),e},updatePicker:function(e){void 0!==e&&(this.color=new t(e));var n=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,r=this.picker.find("i");return 0!==r.length?(this.options.horizontal===!1?(n=this.options.sliders,r.eq(1).css("top",n.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",n.alpha.maxTop*(1-this.color.value.a))):(n=this.options.slidersHorz,r.eq(1).css("left",n.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",n.alpha.maxLeft*(1-this.color.value.a))),r.eq(0).css({top:n.saturation.maxTop-this.color.value.b*n.saturation.maxTop,left:this.color.value.s*n.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),e):void 0},updateComponent:function(e){if(e=e||this.color.toString(this.format),this.component!==!1){var t=this.component.find("i").eq(0);t.length>0?t.css({backgroundColor:e}):this.component.css({backgroundColor:e})}return e},update:function(e){var t=this.updateComponent();return(this.getValue(!1)!==!1||e===!0)&&(this.updateInput(t),this.updateData(t)),this.updatePicker(),t},setValue:function(e){this.color=new t(e),this.update(),this.element.trigger({type:"changeColor",color:this.color,value:e})},getValue:function(e){e=void 0===e?"#000000":e;var t;return t=this.hasInput()?this.input.val():this.element.data("color"),(void 0===t||""===t||null===t)&&(t=e),t},hasInput:function(){return this.input!==!1},isDisabled:function(){return this.hasInput()?this.input.prop("disabled")===!0:!1},disable:function(){return this.hasInput()?(this.input.prop("disabled",!0),!0):!1},enable:function(){return this.hasInput()?(this.input.prop("disabled",!1),!0):!1},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target),r=n.closest("div"),i=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!r.is(".colorpicker")){if(r.is(".colorpicker-saturation"))this.currentSlider=e.extend({},i.saturation);else if(r.is(".colorpicker-hue"))this.currentSlider=e.extend({},i.hue);else{if(!r.is(".colorpicker-alpha"))return!1;this.currentSlider=e.extend({},i.alpha)}var s=r.offset();this.currentSlider.guide=r.find("i")[0].style,this.currentSlider.left=t.pageX-s.left,this.currentSlider.top=t.pageY-s.top,this.mousePointer={left:t.pageX,top:t.pageY},e(document).on({"mousemove.colorpicker":e.proxy(this.mousemove,this),"mouseup.colorpicker":e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left))),n=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=t+"px",this.currentSlider.guide.top=n+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,t/100),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,n/100),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(document).off({"mousemove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup}),!1},keyup:function(e){if(38===e.keyCode)this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0);else if(40===e.keyCode)this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0);else{var n=this.input.val();this.color=new t(n),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())}this.element.trigger({type:"changeColor",color:this.color,value:n})}},e.colorpicker=r,e.fn.colorpicker=function(t){return this.each(function(){var n=e(this),i=n.data("colorpicker"),s="object"==typeof t?t:{};i||"string"==typeof t?"string"==typeof t&&i[t].apply(i,Array.prototype.slice.call(arguments,1)):n.data("colorpicker",new r(this,s))})},e.fn.colorpicker.constructor=r}(window.jQuery),define("third-party/AdminLTE/js/plugins/colorpicker/bootstrap-colorpicker.min",function(){}),function(e){define("backbone-forms/editors/colorpicker",["backbone","third-party/AdminLTE/js/plugins/colorpicker/bootstrap-colorpicker.min"],function(){return function(){(function(){Backbone.Form.editors.Colorpicker=Backbone.Form.editors.Text.extend({tagName:"input",render:function(){var e=this;e.id="colorpicker-"+Math.random().toString().slice(2),e.$el=$(e.el),e.$el.attr("id",e.id),e.$el.attr("data-color-format","hex"),e.$el.colorpicker();var t=t||{};if(t.model){if(!t.key)throw"Missing option: 'key'";this.model=t.model,this.value=this.model.get(t.key)}else t.value&&(this.value=t.value);return this.value&&this.setValue(this.value),this},getValue:function(){return this.value=this.$el.val(),this.value},setValue:function(e){this.value=e,this.$el.val(this.value)}})})()}.apply(e,arguments)})}(this),function(e){function tt(e,t,n){switch(arguments.length){case 2:return e!=null?e:t;case 3:return e!=null?e:t!=null?t:n;default:throw new Error("Implement me")}}function nt(e,t){return o.call(e,t)}function rt(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function it(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function st(e,t){var n=!0;return ht(function(){return n&&(it(e),n=!1),t.apply(this,arguments)},t)}function ot(e,t){Z[e]||(it(t),Z[e]=!0)}function ut(e,t){return function(n){return vt(e.call(this,n),t)}}function at(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function ft(){}function lt(e,t){t!==!1&&Mt(e),pt(this,e),this._d=new Date(+e._d)}function ct(e){var n=Tt(e),r=n.year||0,i=n.quarter||0,s=n.month||0,o=n.week||0,u=n.day||0,a=n.hour||0,f=n.minute||0,l=n.second||0,c=n.millisecond||0;this._milliseconds=+c+l*1e3+f*6e4+a*36e5,this._days=+u+o*7,this._months=+s+i*3+r*12,this._data={},this._locale=t.localeData(),this._bubble()}function ht(e,t){for(var n in t)nt(t,n)&&(e[n]=t[n]);return nt(t,"toString")&&(e.toString=t.toString),nt(t,"valueOf")&&(e.valueOf=t.valueOf),e}function pt(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=t._pf),typeof t._locale!="undefined"&&(e._locale=t._locale);if(m.length>0)for(n in m)r=m[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function dt(e){return e<0?Math.ceil(e):Math.floor(e)}function vt(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function mt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function gt(e,t){var n;return t=Bt(t,e),e.isBefore(t)?n=mt(e,t):(n=mt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function yt(e,n){return function(r,i){var s,o;return i!==null&&!isNaN(+i)&&(ot(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period)."),o=r,r=i,i=o),r=typeof r=="string"?+r:r,s=t.duration(r,i),bt(this,s,e),this}}function bt(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&dn(e,"Date",pn(e,"Date")+o*r),u&&hn(e,pn(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function wt(e){return Object.prototype.toString.call(e)==="[object Array]"}function Et(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function St(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&Ct(e[o])!==Ct(t[o]))&&s++;return s+i}function xt(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=V[e]||$[t]||t}return e}function Tt(e){var t={},n,r;for(r in e)nt(e,r)&&(n=xt(r),n&&(t[n]=e[r]));return t}function Nt(n){var r,i;if(n.indexOf("week")===0)r=7,i="day";else{if(n.indexOf("month")!==0)return;r=12,i="month"}t[n]=function(s,o){var u,a,f=t._locale[n],l=[];typeof s=="number"&&(o=s,s=e),a=function(e){var n=t().utc().set(i,e);return f.call(t._locale,n,s||"")};if(o!=null)return a(o);for(u=0;u<r;u++)l.push(a(u));return l}}function Ct(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function kt(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Lt(e,n,r){return an(t([e,11,31+n-r]),n,r).week}function At(e){return Ot(e)?366:365}function Ot(e){return e%4===0&&e%100!==0||e%400===0}function Mt(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[f]<0||e._a[f]>11?f:e._a[l]<1||e._a[l]>kt(e._a[a],e._a[f])?l:e._a[c]<0||e._a[c]>23?c:e._a[h]<0||e._a[h]>59?h:e._a[p]<0||e._a[p]>59?p:e._a[d]<0||e._a[d]>999?d:-1,e._pf._overflowDayOfYear&&(t<a||t>l)&&(t=l),e._pf.overflow=t)}function _t(e){return e._isValid==null&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&e._pf.charsLeftOver===0&&e._pf.unusedTokens.length===0)),e._isValid}function Dt(e){return e?e.toLowerCase().replace("_","-"):e}function Pt(e){var t=0,n,r,i,s;while(t<e.length){s=Dt(e[t]).split("-"),n=s.length,r=Dt(e[t+1]),r=r?r.split("-"):null;while(n>0){i=Ht(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&St(s,r,!0)>=n-1)break;n--}t++}return null}function Ht(e){var n=null;if(!v[e]&&g)try{n=t.locale(),require("./locale/"+e),t.locale(n)}catch(r){}return v[e]}function Bt(e,n){return n._isUTC?t(e).zone(n._offset||0):t(e).local()}function jt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Ft(e){var t=e.match(E),n,r;for(n=0,r=t.length;n<r;n++)Y[t[n]]?t[n]=Y[t[n]]:t[n]=jt(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function It(e,t){return e.isValid()?(t=qt(t,e.localeData()),J[t]||(J[t]=Ft(t)),J[t](e)):e.localeData().invalidDate()}function qt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;S.lastIndex=0;while(n>=0&&S.test(e))e=e.replace(S,r),S.lastIndex=0,n-=1;return e}function Rt(e,t){var n,r=t._strict;switch(e){case"Q":return D;case"DDDD":return H;case"YYYY":case"GGGG":case"gggg":return r?B:N;case"Y":case"G":case"g":return F;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?j:C;case"S":if(r)return D;case"SS":if(r)return P;case"SSS":if(r)return H;case"DDD":return T;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return L;case"a":case"A":return t._locale._meridiemParse;case"X":return M;case"Z":case"ZZ":return A;case"T":return O;case"SSSS":return k;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?P:x;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return x;case"Do":return _;default:return n=new RegExp(Qt(Kt(e.replace("\\","")),"i")),n}}function Ut(e){e=e||"";var t=e.match(A)||[],n=t[t.length-1]||[],r=(n+"").match(z)||["-",0,0],i=+(r[1]*60)+Ct(r[2]);return r[0]==="+"?-i:i}function zt(e,n,r){var i,s=r._a;switch(e){case"Q":n!=null&&(s[f]=(Ct(n)-1)*3);break;case"M":case"MM":n!=null&&(s[f]=Ct(n)-1);break;case"MMM":case"MMMM":i=r._locale.monthsParse(n),i!=null?s[f]=i:r._pf.invalidMonth=n;break;case"D":case"DD":n!=null&&(s[l]=Ct(n));break;case"Do":n!=null&&(s[l]=Ct(parseInt(n,10)));break;case"DDD":case"DDDD":n!=null&&(r._dayOfYear=Ct(n));break;case"YY":s[a]=t.parseTwoDigitYear(n);break;case"YYYY":case"YYYYY":case"YYYYYY":s[a]=Ct(n);break;case"a":case"A":r._isPm=r._locale.isPM(n);break;case"H":case"HH":case"h":case"hh":s[c]=Ct(n);break;case"m":case"mm":s[h]=Ct(n);break;case"s":case"ss":s[p]=Ct(n);break;case"S":case"SS":case"SSS":case"SSSS":s[d]=Ct(("0."+n)*1e3);break;case"X":r._d=new Date(parseFloat(n)*1e3);break;case"Z":case"ZZ":r._useUTC=!0,r._tzm=Ut(n);break;case"dd":case"ddd":case"dddd":i=r._locale.weekdaysParse(n),i!=null?(r._w=r._w||{},r._w.d=i):r._pf.invalidWeekday=n;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),n&&(r._w=r._w||{},r._w[e]=Ct(n));break;case"gg":case"GG":r._w=r._w||{},r._w[e]=t.parseTwoDigitYear(n)}}function Wt(e){var n,r,i,s,o,u,f;n=e._w,n.GG!=null||n.W!=null||n.E!=null?(o=1,u=4,r=tt(n.GG,e._a[a],an(t(),1,4).year),i=tt(n.W,1),s=tt(n.E,1)):(o=e._locale._week.dow,u=e._locale._week.doy,r=tt(n.gg,e._a[a],an(t(),o,u).year),i=tt(n.w,1),n.d!=null?(s=n.d,s<o&&++i):n.e!=null?s=n.e+o:s=o),f=fn(r,i,s,u,o),e._a[a]=f.year,e._dayOfYear=f.dayOfYear}function Xt(e){var t,n,r=[],i,s;if(e._d)return;i=$t(e),e._w&&e._a[l]==null&&e._a[f]==null&&Wt(e),e._dayOfYear&&(s=tt(e._a[a],i[a]),e._dayOfYear>At(s)&&(e._pf._overflowDayOfYear=!0),n=rn(s,0,e._dayOfYear),e._a[f]=n.getUTCMonth(),e._a[l]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._d=(e._useUTC?rn:nn).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}function Vt(e){var t;if(e._d)return;t=Tt(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],Xt(e)}function $t(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Jt(e){if(e._f===t.ISO_8601){Yt(e);return}e._a=[],e._pf.empty=!0;var n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=qt(e._f,e._locale).match(E)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(Rt(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&e._pf.unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),Y[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),zt(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=a-f,n.length>0&&e._pf.unusedInput.push(n),e._isPm&&e._a[c]<12&&(e._a[c]+=12),e._isPm===!1&&e._a[c]===12&&(e._a[c]=0),Xt(e),Mt(e)}function Kt(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Qt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Gt(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=pt({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._pf=rt(),t._f=e._f[i],Jt(t);if(!_t(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}ht(e,n||t)}function Yt(e){var t,n,r=e._i,i=I.exec(r);if(i){e._pf.iso=!0;for(t=0,n=R.length;t<n;t++)if(R[t][1].exec(r)){e._f=R[t][0]+(i[6]||" ");break}for(t=0,n=U.length;t<n;t++)if(U[t][1].exec(r)){e._f+=U[t][0];break}r.match(A)&&(e._f+="Z"),Jt(e)}else e._isValid=!1}function Zt(e){Yt(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function en(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function tn(n){var r=n._i,i;r===e?n._d=new Date:Et(r)?n._d=new Date(+r):(i=y.exec(r))!==null?n._d=new Date(+i[1]):typeof r=="string"?Zt(n):wt(r)?(n._a=en(r.slice(0),function(e){return parseInt(e,10)}),Xt(n)):typeof r=="object"?Vt(n):typeof r=="number"?n._d=new Date(r):t.createFromInputFallback(n)}function nn(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function rn(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function sn(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function on(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function un(e,n,r){var i=t.duration(e).abs(),o=s(i.as("s")),u=s(i.as("m")),a=s(i.as("h")),f=s(i.as("d")),l=s(i.as("M")),c=s(i.as("y")),h=o<K.s&&["s",o]||u===1&&["m"]||u<K.m&&["mm",u]||a===1&&["h"]||a<K.h&&["hh",a]||f===1&&["d"]||f<K.d&&["dd",f]||l===1&&["M"]||l<K.M&&["MM",l]||c===1&&["y"]||["yy",c];return h[2]=n,h[3]=+e>0,h[4]=r,on.apply({},h)}function an(e,n,r){var i=r-n,s=r-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=t(e).add(s,"d"),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function fn(e,t,n,r,i){var s=rn(e,0,1).getUTCDay(),o,u;return s=s===0?7:s,n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:At(e-1)+u}}function ln(n){var r=n._i,i=n._f;return n._locale=n._locale||t.localeData(n._l),r===null||i===e&&r===""?t.invalid({nullInput:!0}):(typeof r=="string"&&(n._i=r=n._locale.preparse(r)),t.isMoment(r)?new lt(r,!0):(i?wt(i)?Gt(n):Jt(n):tn(n),new lt(n)))}function cn(e,n){var r,i;n.length===1&&wt(n[0])&&(n=n[0]);if(!n.length)return t();r=n[0];for(i=1;i<n.length;++i)n[i][e](r)&&(r=n[i]);return r}function hn(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),kt(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function pn(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function dn(e,t,n){return t==="Month"?hn(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function vn(e,n){return function(r){return r!=null?(dn(this,e,r),t.updateOffset(this,n),this):pn(this,e)}}function mn(e){return e*400/146097}function gn(e){return e*146097/400}function yn(e){t.duration.fn[e]=function(){return this._data[e]}}function bn(e){if(typeof ender!="undefined")return;i=r.moment,e?r.moment=st("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",t):r.moment=t}var t,n="2.8.3",r=typeof global!="undefined"?global:this,i,s=Math.round,o=Object.prototype.hasOwnProperty,u,a=0,f=1,l=2,c=3,h=4,p=5,d=6,v={},m=[],g=typeof module!="undefined"&&module.exports,y=/^\/?Date\((\-?\d+)/i,b=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,w=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,E=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,S=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,x=/\d\d?/,T=/\d{1,3}/,N=/\d{1,4}/,C=/[+\-]?\d{1,6}/,k=/\d+/,L=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,A=/Z|[\+\-]\d\d:?\d\d/gi,O=/T/i,M=/[\+\-]?\d+(\.\d{1,3})?/,_=/\d{1,2}/,D=/\d/,P=/\d\d/,H=/\d{3}/,B=/\d{4}/,j=/[+-]?\d{6}/,F=/[+-]?\d+/,I=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,q="YYYY-MM-DDTHH:mm:ssZ",R=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],U=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],z=/([\+\-]|\d\d)/gi,W="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),X={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},V={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},$={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},J={},K={s:45,m:45,h:22,d:26,M:11},Q="DDD w W M D d".split(" "),G="M D H h m s w W".split(" "),Y={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return vt(this.year()%100,2)},YYYY:function(){return vt(this.year(),4)},YYYYY:function(){return vt(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+vt(Math.abs(e),6)},gg:function(){return vt(this.weekYear()%100,2)},gggg:function(){return vt(this.weekYear(),4)},ggggg:function(){return vt(this.weekYear(),5)},GG:function(){return vt(this.isoWeekYear()%100,2)},GGGG:function(){return vt(this.isoWeekYear(),4)},GGGGG:function(){return vt(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return Ct(this.milliseconds()/100)},SS:function(){return vt(Ct(this.milliseconds()/10),2)},SSS:function(){return vt(this.milliseconds(),3)},SSSS:function(){return vt(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+vt(Ct(e/60),2)+":"+vt(Ct(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+vt(Ct(e/60),2)+vt(Ct(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Z={},et=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];while(Q.length)u=Q.pop(),Y[u+"o"]=at(Y[u],u);while(G.length)u=G.pop(),Y[u+u]=ut(Y[u],2);Y.DDDD=ut(Y.DDD,3),ht(ft.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var n,r,i;this._monthsParse||(this._monthsParse=[]);for(n=0;n<12;n++){this._monthsParse[n]||(r=t.utc([2e3,n]),i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i"));if(this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var n,r,i;this._weekdaysParse||(this._weekdaysParse=[]);for(n=0;n<7;n++){this._weekdaysParse[n]||(r=t([2e3,1]).day(n),i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[n].test(e))return n}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n=="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return an(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),t=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=r,s._strict=i,s._isUTC=!1,s._pf=rt(),ln(s)},t.suppressDeprecationWarnings=!1,t.createFromInputFallback=st("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),t.min=function(){var e=[].slice.call(arguments,0);return cn("isBefore",e)},t.max=function(){var e=[].slice.call(arguments,0);return cn("isAfter",e)},t.utc=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=t,s._f=n,s._strict=i,s._pf=rt(),ln(s).utc()},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=e,i=null,s,o,u,a;return t.isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(r={},n?r[n]=e:r.milliseconds=e):(i=b.exec(e))?(s=i[1]==="-"?-1:1,r={y:0,d:Ct(i[l])*s,h:Ct(i[c])*s,m:Ct(i[h])*s,s:Ct(i[p])*s,ms:Ct(i[d])*s}):(i=w.exec(e))?(s=i[1]==="-"?-1:1,u=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s},r={y:u(i[2]),M:u(i[3]),d:u(i[4]),h:u(i[5]),m:u(i[6]),s:u(i[7]),w:u(i[8])}):typeof r=="object"&&("from"in r||"to"in r)&&(a=gt(t(r.from),t(r.to)),r={},r.ms=a.milliseconds,r.M=a.months),o=new ct(r),t.isDuration(e)&&nt(e,"_locale")&&(o._locale=e._locale),o},t.version=n,t.defaultFormat=q,t.ISO_8601=function(){},t.momentProperties=m,t.updateOffset=function(){},t.relativeTimeThreshold=function(t,n){return K[t]===e?!1:n===e?K[t]:(K[t]=n,!0)},t.lang=st("moment.lang is deprecated. Use moment.locale instead.",function(e,n){return t.locale(e,n)}),t.locale=function(e,n){var r;return e&&(typeof n!="undefined"?r=t.defineLocale(e,n):r=t.localeData(e),r&&(t.duration._locale=t._locale=r)),t._locale._abbr},t.defineLocale=function(e,n){return n!==null?(n.abbr=e,v[e]||(v[e]=new ft),v[e].set(n),t.locale(e),v[e]):(delete v[e],null)},t.langData=st("moment.langData is deprecated. Use moment.localeData instead.",function(e){return t.localeData(e)}),t.localeData=function(e){var n;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return t._locale;if(!wt(e)){n=Ht(e);if(n)return n;e=[e]}return Pt(e)},t.isMoment=function(e){return e instanceof lt||e!=null&&nt(e,"_isAMomentObject")},t.isDuration=function(e){return e instanceof ct};for(u=et.length-1;u>=0;--u)Nt(et[u]);t.normalizeUnits=function(e){return xt(e)},t.invalid=function(e){var n=t.utc(NaN);return e!=null?ht(n._pf,e):n._pf.userInvalidated=!0,n},t.parseZone=function(){return t.apply(null,arguments).parseZone()},t.parseTwoDigitYear=function(e){return Ct(e)+(Ct(e)>68?1900:2e3)},ht(t.fn=lt.prototype,{clone:function(){return t(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=t(this).utc();return 0<e.year()&&e.year()<=9999?It(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):It(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return _t(this)},isDSTShifted:function(){return this._a?this.isValid()&&St(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray())>0:!1},parsingFlags:function(){return ht({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var n=It(this,e||t.defaultFormat);return this.localeData().postformat(n)},add:yt(1,"add"),subtract:yt(-1,"subtract"),diff:function(e,n,r){var i=Bt(e,this),s=(this.zone()-i.zone())*6e4,o,u,a;return n=xt(n),n==="year"||n==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),a=this-t(this).startOf("month")-(i-t(i).startOf("month")),a-=(this.zone()-t(this).startOf("month").zone()-(i.zone()-t(i).startOf("month").zone()))*6e4,u+=a/o,n==="year"&&(u/=12)):(o=this-i,u=n==="second"?o/1e3:n==="minute"?o/6e4:n==="hour"?o/36e5:n==="day"?(o-s)/864e5:n==="week"?(o-s)/6048e5:o),r?u:dt(u)},from:function(e,n){return t.duration({to:this,from:e}).locale(this.locale()).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(e){var n=e||t(),r=Bt(n,this).startOf("day"),i=this.diff(r,"days",!0),s=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this))},isLeapYear:function(){return Ot(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=sn(e,this.localeData()),this.add(e-t,"d")):t},month:vn("Month",!0),startOf:function(e){e=xt(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this},endOf:function(e){return e=xt(e),this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")},isAfter:function(e,n){return n=xt(typeof n!="undefined"?n:"millisecond"),n==="millisecond"?(e=t.isMoment(e)?e:t(e),+this>+e):+this.clone().startOf(n)>+t(e).startOf(n)},isBefore:function(e,n){return n=xt(typeof n!="undefined"?n:"millisecond"),n==="millisecond"?(e=t.isMoment(e)?e:t(e),+this<+e):+this.clone().startOf(n)<+t(e).startOf(n)},isSame:function(e,n){return n=xt(n||"millisecond"),n==="millisecond"?(e=t.isMoment(e)?e:t(e),+this===+e):+this.clone().startOf(n)===+Bt(e,this).startOf(n)},min:st("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=t.apply(null,arguments),e<this?this:e}),max:st("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=t.apply(null,arguments),e>this?this:e}),zone:function(e,n){var r=this._offset||0,i;return e==null?this._isUTC?r:this._dateTzOffset():(typeof e=="string"&&(e=Ut(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=this._dateTzOffset()),this._offset=e,this._isUTC=!0,i!=null&&this.subtract(i,"m"),r!==e&&(!n||this._changeInProgress?bt(this,t.duration(r-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e?e=t(e).zone():e=0,(this.zone()-e)%60===0},daysInMonth:function(){return kt(this.year(),this.month())},dayOfYear:function(e){var n=s((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return e==null?n:this.add(e-n,"d")},quarter:function(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)},weekYear:function(e){var t=an(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=an(this,1,4).year;return e==null?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")},isoWeek:function(e){var t=an(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return Lt(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return Lt(this.year(),e.dow,e.doy)},get:function(e){return e=xt(e),this[e]()},set:function(e,t){return e=xt(e),typeof this[e]=="function"&&this[e](t),this},locale:function(n){var r;return n===e?this._locale._abbr:(r=t.localeData(n),r!=null&&(this._locale=r),this)},lang:st("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15}}),t.fn.millisecond=t.fn.milliseconds=vn("Milliseconds",!1),t.fn.second=t.fn.seconds=vn("Seconds",!1),t.fn.minute=t.fn.minutes=vn("Minutes",!1),t.fn.hour=t.fn.hours=vn("Hours",!0),t.fn.date=vn("Date",!0),t.fn.dates=st("dates accessor is deprecated. Use date instead.",vn("Date",!0)),t.fn.year=vn("FullYear",!0),t.fn.years=st("years accessor is deprecated. Use year instead.",vn("FullYear",!0)),t.fn.days=t.fn.day,t.fn.months=t.fn.month,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.fn.quarters=t.fn.quarter,t.fn.toJSON=t.fn.toISOString,ht(t.duration.fn=ct.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u=0;r.milliseconds=e%1e3,i=dt(e/1e3),r.seconds=i%60,s=dt(i/60),r.minutes=s%60,o=dt(s/60),r.hours=o%24,t+=dt(o/24),u=dt(mn(t)),t-=dt(gn(u)),n+=dt(t/30),t%=30,u+=dt(n/12),n%=12,r.days=t,r.months=n,r.years=u},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return dt(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+Ct(this._months/12)*31536e6},humanize:function(e){var t=un(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,n){var r=t.duration(e,n);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(e,n){var r=t.duration(e,n);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(e){return e=xt(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;e=xt(e);if(e==="month"||e==="year")return t=this._days+this._milliseconds/864e5,n=this._months+mn(t)*12,e==="month"?n:n/12;t=this._days+gn(this._months/12);switch(e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return t*24+this._milliseconds/36e5;case"minute":return t*24*60+this._milliseconds/6e4;case"second":return t*24*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(t*24*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:t.fn.lang,locale:t.fn.locale,toIsoString:st("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),t.duration.fn.toString=t.duration.fn.toISOString;for(u in X)nt(X,u)&&yn(u.toLowerCase());t.duration.fn.asMilliseconds=function(){return this.as("ms")},t.duration.fn.asSeconds=function(){return this.as("s")},t.duration.fn.asMinutes=function(){return this.as("m")},t.duration.fn.asHours=function(){return this.as("h")},t.duration.fn.asDays=function(){return this.as("d")},t.duration.fn.asWeeks=function(){return this.as("weeks")},t.duration.fn.asMonths=function(){return this.as("M")},t.duration.fn.asYears=function(){return this.as("y")},t.locale("en",{ordinal:function(e){var t=e%10,n=Ct(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),g?module.exports=t:typeof define=="function"&&define.amd?(define("moment",["require","exports","module"],function(e,n,s){return s.config&&s.config()&&s.config().noGlobal===!0&&(r.moment=i),t}),bn(!0)):bn()}.call(this),!function(e,t){if("function"==typeof define&&define.amd)define("datetimePicker",["jquery","moment"],t);else if("object"==typeof exports)t(require("jquery"),require("moment"));else{if(!jQuery)throw new Error("bootstrap-datetimepicker requires jQuery to be loaded first");if(!moment)throw new Error("bootstrap-datetimepicker requires moment.js to be loaded first");t(e.jQuery,moment)}}(this,function(e,t){if("undefined"==typeof t)throw new Error("momentjs is required");var n=0,r=function(r,i){var s,o=e.fn.datetimepicker.defaults,u={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},f=this,l=!1,h=function(){var s,l,h=!1;if(f.options=e.extend({},o,i),f.options.icons=e.extend({},u,f.options.icons),f.element=e(r),d(),!f.options.pickTime&&!f.options.pickDate)throw new Error("Must choose at least one picker");if(f.id=n++,t.locale(f.options.language),f.date=t(),f.unset=!1,f.isInput=f.element.is("input"),f.component=!1,f.element.hasClass("input-group")&&(f.component=f.element.find(0===f.element.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),f.format=f.options.format,s=t().localeData(),f.format||(f.format=f.options.pickDate?s.longDateFormat("L"):"",f.options.pickDate&&f.options.pickTime&&(f.format+=" "),f.format+=f.options.pickTime?s.longDateFormat("LT"):"",f.options.useSeconds&&(-1!==s.longDateFormat("LT").indexOf(" A")?f.format=f.format.split(" A")[0]+":ss A":f.format+=":ss")),f.use24hours=f.format.toLowerCase().indexOf("a")<0&&f.format.indexOf("h")<0,f.component&&(h=f.component.find("span")),f.options.pickTime&&h&&h.addClass(f.options.icons.time),f.options.pickDate&&h&&(h.removeClass(f.options.icons.time),h.addClass(f.options.icons.date)),f.options.widgetParent="string"==typeof f.options.widgetParent&&f.options.widgetParent||f.element.parents().filter(function(){return"scroll"===e(this).css("overflow-y")}).get(0)||"body",f.widget=e(X()).appendTo(f.options.widgetParent),f.minViewMode=f.options.minViewMode||0,"string"==typeof f.minViewMode)switch(f.minViewMode){case"months":f.minViewMode=1;break;case"years":f.minViewMode=2;break;default:f.minViewMode=0}if(f.viewMode=f.options.viewMode||0,"string"==typeof f.viewMode)switch(f.viewMode){case"months":f.viewMode=1;break;case"years":f.viewMode=2;break;default:f.viewMode=0}f.viewMode=Math.max(f.viewMode,f.minViewMode),f.options.disabledDates=z(f.options.disabledDates),f.options.enabledDates=z(f.options.enabledDates),f.startViewMode=f.viewMode,f.setMinDate(f.options.minDate),f.setMaxDate(f.options.maxDate),w(),E(),x(),T(),N(),y(),D(),p().prop("disabled")||P(),""!==f.options.defaultDate&&""===p().val()&&f.setValue(f.options.defaultDate),1!==f.options.minuteStepping&&(l=f.options.minuteStepping,f.date.minutes(Math.round(f.date.minutes()/l)*l%60).seconds(0))},p=function(){var e;if(f.isInput)return f.element;if(e=f.element.find(".datepickerinput"),0===e.size())e=f.element.find("input");else if(!e.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');return e},d=function(){var e;e=f.element.is("input")?f.element.data():f.element.find("input").data(),void 0!==e.dateFormat&&(f.options.format=e.dateFormat),void 0!==e.datePickdate&&(f.options.pickDate=e.datePickdate),void 0!==e.datePicktime&&(f.options.pickTime=e.datePicktime),void 0!==e.dateUseminutes&&(f.options.useMinutes=e.dateUseminutes),void 0!==e.dateUseseconds&&(f.options.useSeconds=e.dateUseseconds),void 0!==e.dateUsecurrent&&(f.options.useCurrent=e.dateUsecurrent),void 0!==e.calendarWeeks&&(f.options.calendarWeeks=e.calendarWeeks),void 0!==e.dateMinutestepping&&(f.options.minuteStepping=e.dateMinutestepping),void 0!==e.dateMindate&&(f.options.minDate=e.dateMindate),void 0!==e.dateMaxdate&&(f.options.maxDate=e.dateMaxdate),void 0!==e.dateShowtoday&&(f.options.showToday=e.dateShowtoday),void 0!==e.dateCollapse&&(f.options.collapse=e.dateCollapse),void 0!==e.dateLanguage&&(f.options.language=e.dateLanguage),void 0!==e.dateDefaultdate&&(f.options.defaultDate=e.dateDefaultdate),void 0!==e.dateDisableddates&&(f.options.disabledDates=e.dateDisableddates),void 0!==e.dateEnableddates&&(f.options.enabledDates=e.dateEnableddates),void 0!==e.dateIcons&&(f.options.icons=e.dateIcons),void 0!==e.dateUsestrict&&(f.options.useStrict=e.dateUsestrict),void 0!==e.dateDirection&&(f.options.direction=e.dateDirection),void 0!==e.dateSidebyside&&(f.options.sideBySide=e.dateSidebyside),void 0!==e.dateDaysofweekdisabled&&(f.options.daysOfWeekDisabled=e.dateDaysofweekdisabled)},v=function(){var t,n="absolute",r=f.component?f.component.offset():f.element.offset(),i=e(window);f.width=f.component?f.component.outerWidth():f.element.outerWidth(),r.top=r.top+f.element.outerHeight(),"up"===f.options.direction?t="top":"bottom"===f.options.direction?t="bottom":"auto"===f.options.direction&&(t=r.top+f.widget.height()>i.height()+i.scrollTop()&&f.widget.height()+f.element.outerHeight()<r.top?"top":"bottom"),"top"===t?(r.bottom=i.height()-r.top+f.element.outerHeight()+3,f.widget.addClass("top").removeClass("bottom")):(r.top+=1,f.widget.addClass("bottom").removeClass("top")),void 0!==f.options.width&&f.widget.width(f.options.width),"left"===f.options.orientation&&(f.widget.addClass("left-oriented"),r.left=r.left-f.widget.width()+20),F()&&(n="fixed",r.top-=i.scrollTop(),r.left-=i.scrollLeft()),i.width()<r.left+f.widget.outerWidth()?(r.right=i.width()-r.left-f.width,r.left="auto",f.widget.addClass("pull-right")):(r.right="auto",f.widget.removeClass("pull-right")),f.widget.css("top"===t?{position:n,bottom:r.bottom,top:"auto",left:r.left,right:r.right}:{position:n,top:r.top,bottom:"auto",left:r.left,right:r.right})},m=function(e,n){(!t(f.date).isSame(t(e))||l)&&(l=!1,f.element.trigger({type:"dp.change",date:t(f.date),oldDate:t(e)}),"change"!==n&&f.element.change())},g=function(e){l=!0,f.element.trigger({type:"dp.error",date:t(e,f.format,f.options.useStrict)})},y=function(e){t.locale(f.options.language);var n=e;n||(n=p().val(),n&&(f.date=t(n,f.format,f.options.useStrict)),f.date||(f.date=t())),f.viewDate=t(f.date).startOf("month"),S(),C()},w=function(){t.locale(f.options.language);var n,r=e("<tr>"),i=t.weekdaysMin();if(f.options.calendarWeeks===!0&&r.append('<th class="cw">#</th>'),0===t().localeData()._week.dow)for(n=0;7>n;n++)r.append('<th class="dow">'+i[n]+"</th>");else for(n=1;8>n;n++)r.append(7===n?'<th class="dow">'+i[0]+"</th>":'<th class="dow">'+i[n]+"</th>");f.widget.find(".datepicker-days thead").append(r)},E=function(){t.locale(f.options.language);var e,n="",r=t.monthsShort();for(e=0;12>e;e++)n+='<span class="month">'+r[e]+"</span>";f.widget.find(".datepicker-months td").append(n)},S=function(){if(f.options.pickDate){t.locale(f.options.language);var n,r,i,s,o,u,l,c,h,p=f.viewDate.year(),d=f.viewDate.month(),v=f.options.minDate.year(),m=f.options.minDate.month(),g=f.options.maxDate.year(),y=f.options.maxDate.month(),w=[],E=t.months();for(f.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),f.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),f.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),f.widget.find(".datepicker-days th:eq(1)").text(E[d]+" "+p),r=t(f.viewDate,f.format,f.options.useStrict).subtract(1,"months"),l=r.daysInMonth(),r.date(l).startOf("week"),(p===v&&m>=d||v>p)&&f.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(p===g&&d>=y||p>g)&&f.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),i=t(r).add(42,"d");r.isBefore(i);){if(r.weekday()===t().startOf("week").weekday()&&(s=e("<tr>"),w.push(s),f.options.calendarWeeks===!0&&s.append('<td class="cw">'+r.week()+"</td>")),o="",r.year()<p||r.year()===p&&r.month()<d?o+=" old":(r.year()>p||r.year()===p&&r.month()>d)&&(o+=" new"),r.isSame(t({y:f.date.year(),M:f.date.month(),d:f.date.date()}))&&(o+=" active"),(R(r,"day")||!U(r))&&(o+=" disabled"),f.options.showToday===!0&&r.isSame(t(),"day")&&(o+=" today"),f.options.daysOfWeekDisabled)for(u=0;u<f.options.daysOfWeekDisabled.length;u++)if(r.day()===f.options.daysOfWeekDisabled[u]){o+=" disabled";break}s.append('<td class="day'+o+'">'+r.date()+"</td>"),n=r.date(),r.add(1,"d"),n===r.date()&&r.add(1,"d")}for(f.widget.find(".datepicker-days tbody").empty().append(w),h=f.date.year(),E=f.widget.find(".datepicker-months").find("th:eq(1)").text(p).end().find("span").removeClass("active"),h===p&&E.eq(f.date.month()).addClass("active"),v>p-1&&f.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),p+1>g&&f.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),u=0;12>u;u++)p===v&&m>u||v>p?e(E[u]).addClass("disabled"):(p===g&&u>y||p>g)&&e(E[u]).addClass("disabled");for(w="",p=10*parseInt(p/10,10),c=f.widget.find(".datepicker-years").find("th:eq(1)").text(p+"-"+(p+9)).parents("table").find("td"),f.widget.find(".datepicker-years").find("th").removeClass("disabled"),v>p&&f.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),p+9>g&&f.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),p-=1,u=-1;11>u;u++)w+='<span class="year'+(-1===u||10===u?" old":"")+(h===p?" active":"")+(v>p||p>g?" disabled":"")+'">'+p+"</span>",p+=1;c.html(w)}},x=function(){t.locale(f.options.language);var e,n,r,i=f.widget.find(".timepicker .timepicker-hours table"),s="";if(i.parent().hide(),f.use24hours)for(e=0,n=0;6>n;n+=1){for(s+="<tr>",r=0;4>r;r+=1)s+='<td class="hour">'+W(e.toString())+"</td>",e++;s+="</tr>"}else for(e=1,n=0;3>n;n+=1){for(s+="<tr>",r=0;4>r;r+=1)s+='<td class="hour">'+W(e.toString())+"</td>",e++;s+="</tr>"}i.html(s)},T=function(){var e,t,n=f.widget.find(".timepicker .timepicker-minutes table"),r="",i=0,s=f.options.minuteStepping;for(n.parent().hide(),1===s&&(s=5),e=0;e<Math.ceil(60/s/4);e++){for(r+="<tr>",t=0;4>t;t+=1)60>i?(r+='<td class="minute">'+W(i.toString())+"</td>",i+=s):r+="<td></td>";r+="</tr>"}n.html(r)},N=function(){var e,t,n=f.widget.find(".timepicker .timepicker-seconds table"),r="",i=0;for(n.parent().hide(),e=0;3>e;e++){for(r+="<tr>",t=0;4>t;t+=1)r+='<td class="second">'+W(i.toString())+"</td>",i+=5;r+="</tr>"}n.html(r)},C=function(){if(f.date){var e=f.widget.find(".timepicker span[data-time-component]"),t=f.date.hours(),n=f.date.format("A");f.use24hours||(0===t?t=12:12!==t&&(t%=12),f.widget.find(".timepicker [data-action=togglePeriod]").text(n)),e.filter("[data-time-component=hours]").text(W(t)),e.filter("[data-time-component=minutes]").text(W(f.date.minutes())),e.filter("[data-time-component=seconds]").text(W(f.date.second()))}},k=function(n){n.stopPropagation(),n.preventDefault(),f.unset=!1;var r,i,s,o,u=e(n.target).closest("span, td, th"),l=t(f.date);if(1===u.length&&!u.is(".disabled"))switch(u[0].nodeName.toLowerCase()){case"th":switch(u[0].className){case"picker-switch":D(1);break;case"prev":case"next":s=V.modes[f.viewMode].navStep,"prev"===u[0].className&&(s=-1*s),f.viewDate.add(s,V.modes[f.viewMode].navFnc),S()}break;case"span":u.is(".month")?(r=u.parent().find("span").index(u),f.viewDate.month(r)):(i=parseInt(u.text(),10)||0,f.viewDate.year(i)),f.viewMode===f.minViewMode&&(f.date=t({y:f.viewDate.year(),M:f.viewDate.month(),d:f.viewDate.date(),h:f.date.hours(),m:f.date.minutes(),s:f.date.seconds()}),I(),m(l,n.type)),D(-1),S();break;case"td":u.is(".day")&&(o=parseInt(u.text(),10)||1,r=f.viewDate.month(),i=f.viewDate.year(),u.is(".old")?0===r?(r=11,i-=1):r-=1:u.is(".new")&&(11===r?(r=0,i+=1):r+=1),f.date=t({y:i,M:r,d:o,h:f.date.hours(),m:f.date.minutes(),s:f.date.seconds()}),f.viewDate=t({y:i,M:r,d:Math.min(28,o)}),S(),I(),m(l,n.type))}},L={incrementHours:function(){q("add","hours",1)},incrementMinutes:function(){q("add","minutes",f.options.minuteStepping)},incrementSeconds:function(){q("add","seconds",1)},decrementHours:function(){q("subtract","hours",1)},decrementMinutes:function(){q("subtract","minutes",f.options.minuteStepping)},decrementSeconds:function(){q("subtract","seconds",1)},togglePeriod:function(){var e=f.date.hours();e>=12?e-=12:e+=12,f.date.hours(e)},showPicker:function(){f.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),f.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){f.widget.find(".timepicker .timepicker-picker").hide(),f.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.widget.find(".timepicker .timepicker-picker").hide(),f.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.widget.find(".timepicker .timepicker-picker").hide(),f.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=parseInt(e(t.target).text(),10);f.use24hours||(f.date.hours()>=12?12!==n&&(n+=12):12===n&&(n=0)),f.date.hours(n),L.showPicker.call(f)},selectMinute:function(t){f.date.minutes(parseInt(e(t.target).text(),10)),L.showPicker.call(f)},selectSecond:function(t){f.date.seconds(parseInt(e(t.target).text(),10)),L.showPicker.call(f)}},A=function(n){var r=t(f.date),i=e(n.currentTarget).data("action"),s=L[i].apply(f,arguments);return O(n),f.date||(f.date=t({y:1970})),I(),C(),m(r,n.type),s},O=function(e){e.stopPropagation(),e.preventDefault()},M=function(e){27===e.keyCode&&f.hide()},_=function(n){t.locale(f.options.language);var r=e(n.target),i=t(f.date),s=t(r.val(),f.format,f.options.useStrict);s.isValid()&&!R(s)&&U(s)?(y(),f.setValue(s),m(i,n.type),I()):(f.viewDate=i,f.unset=!0,m(i,n.type),g(s))},D=function(e){e&&(f.viewMode=Math.max(f.minViewMode,Math.min(2,f.viewMode+e))),f.widget.find(".datepicker > div").hide().filter(".datepicker-"+V.modes[f.viewMode].clsName).show()},P=function(){var t,n,r,i,s;f.widget.on("click",".datepicker *",e.proxy(k,this)),f.widget.on("click","[data-action]",e.proxy(A,this)),f.widget.on("mousedown",e.proxy(O,this)),f.element.on("keydown",e.proxy(M,this)),f.options.pickDate&&f.options.pickTime&&f.widget.on("click.togglePicker",".accordion-toggle",function(o){if(o.stopPropagation(),t=e(this),n=t.closest("ul"),r=n.find(".in"),i=n.find(".collapse:not(.in)"),r&&r.length){if(s=r.data("collapse"),s&&s.transitioning)return;r.collapse("hide"),i.collapse("show"),t.find("span").toggleClass(f.options.icons.time+" "+f.options.icons.date),f.component&&f.component.find("span").toggleClass(f.options.icons.time+" "+f.options.icons.date)}}),f.isInput?f.element.on({click:e.proxy(f.show,this),focus:e.proxy(f.show,this),change:e.proxy(_,this),blur:e.proxy(f.hide,this)}):(f.element.on({change:e.proxy(_,this)},"input"),f.component?(f.component.on("click",e.proxy(f.show,this)),f.component.on("mousedown",e.proxy(O,this))):f.element.on("click",e.proxy(f.show,this)))},H=function(){e(window).on("resize.datetimepicker"+f.id,e.proxy(v,this)),f.isInput||e(document).on("mousedown.datetimepicker"+f.id,e.proxy(f.hide,this))},B=function(){f.widget.off("click",".datepicker *",f.click),f.widget.off("click","[data-action]"),f.widget.off("mousedown",f.stopEvent),f.options.pickDate&&f.options.pickTime&&f.widget.off("click.togglePicker"),f.isInput?f.element.off({focus:f.show,change:_,click:f.show,blur:f.hide}):(f.element.off({change:_},"input"),f.component?(f.component.off("click",f.show),f.component.off("mousedown",f.stopEvent)):f.element.off("click",f.show))},j=function(){e(window).off("resize.datetimepicker"+f.id),f.isInput||e(document).off("mousedown.datetimepicker"+f.id)},F=function(){if(f.element){var t,n=f.element.parents(),r=!1;for(t=0;t<n.length;t++)if("fixed"===e(n[t]).css("position")){r=!0;break}return r}return!1},I=function(){t.locale(f.options.language);var e="";f.unset||(e=t(f.date).format(f.format)),p().val(e),f.element.data("date",e),f.options.pickTime||f.hide()},q=function(e,n,r){t.locale(f.options.language);var i;return"add"===e?(i=t(f.date),23===i.hours()&&i.add(r,n),i.add(r,n)):i=t(f.date).subtract(r,n),R(t(i.subtract(r,n)))||R(i)?void g(i.format(f.format)):("add"===e?f.date.add(r,n):f.date.subtract(r,n),void (f.unset=!1))},R=function(e,n){t.locale(f.options.language);var r=t(f.options.maxDate,f.format,f.options.useStrict),i=t(f.options.minDate,f.format,f.options.useStrict);return n&&(r=r.endOf(n),i=i.startOf(n)),e.isAfter(r)||e.isBefore(i)?!0:f.options.disabledDates===!1?!1:f.options.disabledDates[e.format("YYYY-MM-DD")]===!0},U=function(e){return t.locale(f.options.language),f.options.enabledDates===!1?!0:f.options.enabledDates[e.format("YYYY-MM-DD")]===!0},z=function(e){var n,r={},i=0;for(n=0;n<e.length;n++)s=t.isMoment(e[n])||e[n]instanceof Date?t(e[n]):t(e[n],f.format,f.options.useStrict),s.isValid()&&(r[s.format("YYYY-MM-DD")]=!0,i++);return i>0?r:!1},W=function(e){return e=e.toString(),e.length>=2?e:"0"+e},X=function(){var e='<thead><tr><th class="prev">&lsaquo;</th><th colspan="'+(f.options.calendarWeeks?"6":"5")+'" class="picker-switch"></th><th class="next">&rsaquo;</th></tr></thead>',t='<tbody><tr><td colspan="'+(f.options.calendarWeeks?"8":"7")+'"></td></tr></tbody>',n='<div class="datepicker-days"><table class="table-condensed">'+e+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+e+t+'</table></div><div class="datepicker-years"><table class="table-condensed">'+e+t+"</table></div>",r="";return f.options.pickDate&&f.options.pickTime?(r='<div class="bootstrap-datetimepicker-widget'+(f.options.sideBySide?" timepicker-sbs":"")+(f.use24hours?" usetwentyfour":"")+' dropdown-menu" style="z-index:9999 !important;">',r+=f.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+n+'</div><div class="col-sm-6 timepicker">'+$.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(f.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+n+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+f.options.icons.time+'"></span></a></li><li'+(f.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+$.getTemplate()+"</div></li></ul>",r+="</div>"):f.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+$.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+n+"</div></div>"},V={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}]},$={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};$.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+f.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(f.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+f.options.icons.up+'"></span></a>':"")+"</td>"+(f.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+f.options.icons.up+'"></span></a></td>':"")+(f.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+$.hourTemplate+'</td> <td class="separator">:</td><td>'+(f.options.useMinutes?$.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(f.options.useSeconds?'<td class="separator">:</td><td>'+$.secondTemplate+"</td>":"")+(f.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+f.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(f.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+f.options.icons.down+'"></span></a>':"")+"</td>"+(f.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+f.options.icons.down+'"></span></a></td>':"")+(f.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(f.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},f.destroy=function(){B(),j(),f.widget.remove(),f.element.removeData("DateTimePicker"),f.component&&f.component.removeData("DateTimePicker")},f.show=function(e){if(!p().prop("disabled")){if(f.options.useCurrent&&""===p().val()){if(1!==f.options.minuteStepping){var n=t(),r=f.options.minuteStepping;n.minutes(Math.round(n.minutes()/r)*r%60).seconds(0),f.setValue(n.format(f.format))}else f.setValue(t().format(f.format));m("",e.type)}e&&"click"===e.type&&f.isInput&&f.widget.hasClass("picker-open")||(f.widget.hasClass("picker-open")?(f.widget.hide(),f.widget.removeClass("picker-open")):(f.widget.show(),f.widget.addClass("picker-open")),f.height=f.component?f.component.outerHeight():f.element.outerHeight(),v(),f.element.trigger({type:"dp.show",date:t(f.date)}),H(),e&&O(e))}},f.disable=function(){var e=p();e.prop("disabled")||(e.prop("disabled",!0),B())},f.enable=function(){var e=p();e.prop("disabled")&&(e.prop("disabled",!1),P())},f.hide=function(){var e,n,r=f.widget.find(".collapse");for(e=0;e<r.length;e++)if(n=r.eq(e).data("collapse"),n&&n.transitioning)return;f.widget.hide(),f.widget.removeClass("picker-open"),f.viewMode=f.startViewMode,D(),f.element.trigger({type:"dp.hide",date:t(f.date)}),j()},f.setValue=function(e){t.locale(f.options.language),e?f.unset=!1:(f.unset=!0,I()),e=t.isMoment(e)?e.locale(f.options.language):e instanceof Date?t(e):t(e,f.format,f.options.useStrict),e.isValid()?(f.date=e,I(),f.viewDate=t({y:f.date.year(),M:f.date.month()}),S(),C()):g(e)},f.getDate=function(){return f.unset?null:t(f.date)},f.setDate=function(e){var n=t(f.date);f.setValue(e?e:null),m(n,"function")},f.setDisabledDates=function(e){f.options.disabledDates=z(e),f.viewDate&&y()},f.setEnabledDates=function(e){f.options.enabledDates=z(e),f.viewDate&&y()},f.setMaxDate=function(e){void 0!==e&&(f.options.maxDate=t.isMoment(e)||e instanceof Date?t(e):t(e,f.format,f.options.useStrict),f.viewDate&&y())},f.setMinDate=function(e){void 0!==e&&(f.options.minDate=t.isMoment(e)||e instanceof Date?t(e):t(e,f.format,f.options.useStrict),f.viewDate&&y())},h()};e.fn.datetimepicker=function(t){return this.each(function(){var n=e(this),i=n.data("DateTimePicker");i||n.data("DateTimePicker",new r(this,t))})},e.fn.datetimepicker.defaults={format:!1,pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,calendarWeeks:!1,minuteStepping:1,minDate:t({y:1900}),maxDate:t().add(100,"y"),showToday:!0,collapse:!0,language:t.locale(),defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:[],widgetParent:!1}}),function(e){define("backbone-forms/editors/datetimepicker",["backbone","datetimePicker"],function(){return function(){(function(){Backbone.Form.editors.Datetimepicker=Backbone.Form.editors.Text.extend({tagName:"input",render:function(){var e=this;e.id="datetimepicker-"+Math.random().toString().slice(2),e.$el=$(e.el),e.$el.attr("id",e.id),e.$el.datetimepicker(),e.$el.parent().addClass("input-group date"),e.$el.after('<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>');var t=t||{};if(t.model){if(!t.key)throw"Missing option: 'key'";this.model=t.model,this.value=this.model.get(t.key)}else t.value&&(this.value=t.value);return this.value&&this.setValue(this.value),this},getValue:function(){return this.value=this.$el.data("DateTimePicker").getDate()._d,this.value},setValue:function(e){this.value=e,this.$el.data("DateTimePicker").setDate(new Date(this.value))}})})()}.apply(e,arguments)})}(this),function(e){define("third-party/backbone-forms/distribution/templates/bootstrap3",["backbone-forms/editors/list"],function(){return function(){(function(e){e.template=_.template('    <form class="form-horizontal" role="form" data-fieldsets></form>  '),e.Fieldset.template=_.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  "),e.Field.template=_.template('    <div class="form-group field-<%= key %>">      <label class="col-sm-2 control-label" for="<%= editorId %>"><%= title %></label>      <div class="col-sm-10">        <span data-editor></span>        <p class="help-block" data-error></p>        <p class="help-block"><%= help %></p>      </div>    </div>  '),e.NestedField.template=_.template('    <div class="field-<%= key %>">      <div title="<%= title %>" class="input-xlarge">        <span data-editor></span>        <div class="help-inline" data-error></div>      </div>      <div class="help-block"><%= help %></div>    </div>  '),e.editors.Base.prototype.className="form-control",e.Field.errorClassName="has-error",e.editors.List&&(e.editors.List.template=_.template('      <div class="bbf-list">        <ul class="unstyled clearfix" data-items></ul>        <button type="button" class="btn bbf-add" data-action="add">Add</button>      </div>    '),e.editors.List.Item.template=_.template('      <li class="clearfix">        <div class="pull-left" data-editor></div>        <button type="button" class="btn bbf-del" data-action="remove">&times;</button>      </li>    '),e.editors.List.Object.template=e.editors.List.NestedModel.template=_.template('      <div class="bbf-list-modal"><%= summary %></div>    '))})(Backbone.Form)}.apply(e,arguments)})}(this),define("third-party/requirejs-text/text!views/generic/revisions/timeline-item.html",[],function(){return'<li>\n    <a class="fa <%= rev.is_draft ? \'fa-star\' : \'fa-pencil\' %> bg-aqua restore"  data-revision-i="<%= i %>" href="#"></a>\n    <div class="timeline-item">\n        <span class="time"><i class="fa fa-clock-o"></i> <%= (new Date(rev.created)).toLocaleString() %></span>\n        <h3 class="timeline-header"><a href="#"><%= rev.user %></a> <%= rev.is_draft ? \'saved a draft\' : \'edited\' %></h3>\n        <div class="timeline-body">\n            <blockquote><%= rev.description || \'no description available.\' %></blockquote>\n        </div>\n        <div class=\'timeline-footer\'>\n            <a class="btn btn-danger btn-xs fa fa-times remove-revision" data-revision-i="<%= i %>"></a>\n        </div>\n    </div>\n</li>\n'}),define("views/generic/revisions/timeline",["text!views/generic/revisions/timeline-item.html"],function(e){return Backbone.View.extend({events:{"click li a.restore":"restore","click li a.remove-revision":"remove"},initialize:function(e){var t=this;t.model=e.model,t.config=e.config,t.revisionsModel=e.revisionsModel,t.setElement($("[data-revisions-list]").get(0)),t.model.on("change",function(e){t.notifyRevisionChanges(e)})},render:function(){var t=this,n="";t.$el.html(_(t.revisionsModel).map(function(t,r){var i='<li class="time-label"><span class="bg-green">'+humaneDate(t.created).toLowerCase()+"</span></li>";return i===n?i="":n=i,i+_.template(e,{rev:t,i:r})}).join("")),t.$el.append('<li><i class="fa fa-clock-o"></i><div class="timeline-item"><h3 class="timeline-header no-border">Created</h3></div></li>'),t.$el.slimscroll({height:$(window).height()/1.5+"px",color:"rgba(0,0,0,0.2)"});var r=0;_(t.revisionsModel).every(function(e,t){return e.is_draft?!0:(r=t,!1)}),t.currentRevision=t.revisionsModel[r],t.repaintList(r)},repaintList:function(e){var t=this;$icons=t.$("li a.restore i"),$icons.each(function(t,n){t===0?$(n).attr("class","glyphicon glyphicon-fast-forward"):t<e&&$(n).attr("class","glyphicon glyphicon-step-forward"),t===$icons.size()-1?$(n).attr("class","glyphicon glyphicon-fast-backward"):t>e&&$(n).attr("class","glyphicon glyphicon-step-backward"),t===e&&$(n).attr("class","glyphicon glyphicon-ok")}),$icons=t.$("li > a.fa"),$icons.each(function(t,n){t===e?$(n).toggleClass("bg-aqua",!0):$(n).toggleClass("bg-aqua",!1)})},restore:function(e){var t=this,n=$(e.currentTarget),r=n.data("revision-i"),i=t.revisionsModel[r];t.previousRevision=t.currentRevision,t.currentRevision=i,e.preventDefault(),t.model.set(i.modelSnapshot),t.repaintList(r),alertify.log('switched content to revision: "<i>'+i.description+'</i>"<br/> by <strong>'+i.user+"</strong>")},pushRevision:function(e){var t=this;t.previousRevision=t.currentRevision,t.currentRevision=e},notifyRevisionChanges:function(e){var t=this,n="",r=[];_(t.config.schema).each(function(t,n){if(!e.hasChanged(n))return;var i=t.title||n,s=t.type,o=e.previous(n),u=e.get(n);"List"===s&&(o=o.length+" elements",u=u.length+" elements"),"Datepicker"===s&&(o=(new Date(o)).toLocaleDateString(),u=(new Date(u)).toLocaleDateString()),"Date"===s&&(o=(new Date(o)).toTimeString(),u=(new Date(u)).toTimeString());if("File"===s||"Image"===s||"ObjectId"===s)o=_.isObject(o)?o[t.autocompleteField]||o.filename||o._id:o,u=_.isObject(u)?u[t.autocompleteField]||u.filename||u._id:u;o!==u&&(!!o||!!u)&&(console.log(i,"<",o,"><",u,">"),o=o?$("<div>"+o.toString()+"</div>").text():"",u=u?$("<div>"+u.toString()+"</div>").text():"",o.length>500&&(o=o.substr(0,500)+"..."),u.length>500&&(u=u.substr(0,500)+"..."),r.push("<td>"+i+'</td><td class="bg-danger">'+o+'</td><td class="bg-success">'+u+"</td>"))}),n='<div class="alert alert-success alert-dismissable diff-report">',n+='<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>',r.length?(n+="<h4>Changelog</h4>",n+='<table class="table table-stripped"><tr><th></th><th>From</th><th>To</th></tr>',t.previousRevision&&t.currentRevision&&(n+='<tr><th>Revision</th><td class="bg-danger"><strong>'+t.previousRevision.user+"</strong> ("+humaneDate(t.previousRevision.created).toLowerCase()+')<p>"'+t.previousRevision.description+'"</p></td>',n+='<td class="bg-success"><strong>'+t.currentRevision.user+"</strong> ("+humaneDate(t.currentRevision.created).toLowerCase()+')<p>"'+t.currentRevision.description+'"</p></td></tr>'),n+="<tr>"+r.join("</tr><tr>")+"</tr>"):n+="<strong>Woha!</strong> No changes found.",n+="</table>",n+="</div>";var i=$(n);$(".diff-report").fadeOut(0,function(){$(this).remove()}),$("#collection-form").before(i),i.hide().fadeIn(600)},remove:function(e){var t=this,n=$(e.currentTarget),r=n.data("revision-i"),i=t.revisionsModel[r];e.preventDefault(),alertify.confirm("Are you sure you want to remove this revision?",function(e){if(!e)return;require(["models/"+i.collectionName+"-revision"],function(e){var n=new e(i);n.destroy({success:function(){alertify.log('revision removed: "<i>'+i.description+'</i>"<br/> by <strong>'+i.user+"</strong>"),t.revisionsModel.splice(r,1),t.render()}})})})}})}),define("views/generic/form",["third-party/ladda-bootstrap/dist/ladda.min","third-party/bootstrap-datepicker/js/bootstrap-datepicker","third-party/bs-fancyfile/js/bootstrap-fancyfile.min","third-party/ckeditor/ckeditor","third-party/twitter-bootstrap-typeahead/js/bootstrap-typeahead","backbone-forms/editors/list","backbone-forms/editors/file","backbone-forms/editors/image","backbone-forms/editors/object-id","backbone-forms/editors/ckeditor","backbone-forms/editors/datepicker","backbone-forms/editors/colorpicker","backbone-forms/editors/datetimepicker","third-party/backbone-forms/distribution/templates/bootstrap3"],function(e){return Backbone.View.extend({events:{"click .submit":"submit","click .submit-draft":"submitDraft","click .remove":"remove"},initialize:function(e){var t=this;t.collectionName=e.collectionName,t.objectId=e.objectId,t.setElement($("#form-controls").get(0)),require(["models/"+t.collectionName,"forms/"+t.collectionName,"json!/config/"+t.collectionName+".json","json!/api/"+t.collectionName+"/"+(t.objectId||"default")],function(n,r,i,s){var o=r.prototype.schema,u=r.prototype.userRoles;o&&$.each(o,function(t,n){n.conditionals&&$.each(n.conditionals,function(n,r){var s=!0,a=!1;r.page&&r.page!==e.page&&(s=!1),r.roles?$.each(r.roles,function(e,t){u.indexOf(t)>-1&&(a=!0)}):a=!0;if(s&&a){var f=r.props;f&&$.each(f,function(e,n){o[t][e]=n}),r.remove&&(delete o[t],delete i.schema[t])}});if(n.permissions){var r=!1;$.each(n.permissions,function(e,t){u.indexOf(t)>-1&&(r=!0)}),r||(delete o[t],delete i.schema[t])}}),t.config=i,t.model=new n(s),t.form=new r({model:t.model,fieldsets:t.config.fieldsets,schema:o}),$("#collection-form").html(t.form.render().$el),t.buildDependencyTree(r.prototype.schema,t),$("#collection-form").on("submit",function(e){e.preventDefault()}),t.renderFormControls(),t.objectId&&t.renderRevisionsControls(),t.model.isNew()||t.bindModelEvents()}),t.$el.data("readonly")&&$(".submit, .remove",t.$el).attr("disabled","disabled")},render:function(){},renderFormControls:function(){var t=this,n="";t.objectId&&$("[data-permission-d]").size()&&(n+='<button class="btn btn-danger btn-lg remove ladda-button" data-style="expand-right"><i class="fa fa-times"></i> Delete</button>'),t.$(".left").html(n);var n="";$("[data-permission-u], [data-permission-c]").size()&&(t.objectId&&(n+='<button class="btn btn-primary btn-lg submit-draft ladda-button" data-style="expand-right"><i class="fa fa-star"></i> Save draft</button>'),n+='<button class="btn btn-primary btn-lg submit ladda-button" data-style="expand-right"><i class="fa fa-pencil"></i> '+(t.objectId?"Save & Publish":"Create")+"</button>"),t.model.isNew()||(n+='<a class="btn btn-info btn-lg preview" href="/preview/'+t.collectionName+"/"+t.objectId+'" target="_blank"><i class="fa fa-eye"></i> View</a>'),t.$(".right").html(n),t.laddaSubmit=e.create(t.$(".submit").get(0)),t.laddaSubmitDraft=e.create(t.$(".submit-draft").get(0)),t.laddaRemove=e.create(t.$(".remove").get(0))},renderRevisionsControls:function(){var e=this;$("[data-collection-tostringfield]").html(e.model.toString()),$("[data-created]").html(humaneDate(e.model.get(e.config.createdField.key))),$("[data-updated]").html(humaneDate(e.model.get(e.config.updatedField.key))),require(["views/generic/revisions/timeline","json!/api/"+e.collectionName+"/"+e.objectId+"/revisions?t="+Math.random()],function(t,n){e.revisionsView=new t({model:e.model,revisionsModel:n,config:e.config}),e.revisionsView.render()})},submit:function(e){var t=this,n;(n=t.form.validate())||(t.laddaSubmit.start(),alertify.prompt("Please, enter a revision description:",function(e,r){if(!e){t.laddaSubmit.stop();return}t.revisionsView&&t.revisionsView.pushRevision(!1);if(!(n=t.form.commit())){var i=t.model.isNew();t.model.save({},{silent:!0,url:t.model.url()+"?description="+encodeURIComponent(r),success:function(){t.laddaSubmit.stop(),alertify.success("success!"),i?document.location.href="/edit/"+t.collectionName+"/"+t.model.id:(t.revisionsView&&require(["json!/api/"+t.collectionName+"/"+t.objectId+"/revisions?t="+Math.random()],function(e){t.revisionsView.revisionsModel=e,t.revisionsView.render()}),$("[data-updated]").html(humaneDate(t.model.get(t.config.updatedField.key))))},error:function(){t.laddaSubmit.stop(),alertify.error("an error has ocurred! :S")}})}else t.laddaSubmit.stop(),console.log("model err",n),alertify.error("validation failed, look at the console for details.")}))},submitDraft:function(e){var t=this,n;(n=t.form.validate())||(t.laddaSubmitDraft.start(),alertify.prompt("Please, enter a revision description:",function(e,r){if(!e){t.laddaSubmitDraft.stop();return}t.revisionsView&&t.revisionsView.pushRevision(!1),(n=t.form.commit())?(t.laddaSubmitDraft.stop(),console.log("model err",n),alertify.error("validation failed, look at the console for details.")):require(["models/"+t.collectionName+"-revision"],function(e){var n=new e({description:r,snapshot:t.model.toJSON()});n.save({},{silent:!0,url:n.urlRoot.replace(/:objectId/,t.objectId),success:function(){t.laddaSubmitDraft.stop(),alertify.success("success!"),t.revisionsView&&require(["json!/api/"+t.collectionName+"/"+t.objectId+"/revisions?t="+Math.random()],function(e){t.revisionsView.revisionsModel=e,t.revisionsView.render(),t.revisionsView.repaintList(0)}),$("[data-updated]").html(humaneDate(t.model.get(t.config.updatedField.key)))},error:function(){t.laddaSubmitDraft.stop(),alertify.error("an error has ocurred! :S")}})})}))},remove:function(e){var t=this;t.laddaRemove.start(),alertify.confirm("Are you sure you want to delete this "+t.collectionName,function(e){t.laddaRemove.stop(),e&&t.model.destroy({success:function(){document.location.href="/search/"+t.collectionName}})})},buildDependencyTree:function(e,t){var n={};for(var r in e){var i=e[r];if(i.hasOwnProperty("depends")){var s;for(var o in i.depends){n.hasOwnProperty(o)||(n[o]={}),n[o][r]=i.depends[o];for(var u in n[o][r])s=n[o][r][u]=="show"?"hide":"show"}$('.form-control[name="'+r+'"]').closest(".form-group")[s](),$('.form-control[name="'+o+'"]').on("change, keyup",function(e){t.checkConditionals(e,n[o])})}}},checkConditionals:function(e,t){var n=$(e.target),r=n.val();for(var i in t)for(var s in t[i]){var o=t[i][s],u=o=="show"?"slideUp":"slideDown";r.trim()==s||s=="*"&&r.trim()!==""?$('.form-control[name="'+i+'"]').closest(".form-group")[o]():$('.form-control[name="'+i+'"]').closest(".form-group")[u]()}},bindModelEvents:function(){var e=this;e.model.on("change",function(t){_(e.config.schema).each(function(n,r){if(!t.hasChanged(r))return;var i={};i[r]=t.get(r),e.form.setValue(i)})})}})}),define("views/generic/search",[],function(){return Backbone.View.extend({initialize:function(e){var t=this;t.collectionName=e.collectionName,this.setElement($("#collection-list").get(0));var n=$("#fast-search-q");n.on("keyup",function(e){var r=n.val()||".";require(["json!/config/"+t.collectionName+".json","json!/api/search/"+t.collectionName+"?q="+r],function(e,n){t.$el.html('<table class="table table-striped"><thead></thead><tbody></tbody></table>'),t.$("thead").prepend("<tr><th>#</th>"+n.columns.map(function(e,t){return"<th>"+n.columnsHumanNames[t]+"</th>"})+"<th>actions</th></tr>"),t.$("tbody").append(_(n.data).map(function(r,i){return"<tr><td>"+(i+1)+"</td>"+n.columns.map(function(t){return e.createdField.key===t||e.updatedField.key===t?'<td datetime="'+r[t]+'">'+humaneDate(r[t])+"</td>":"<td>"+r[t]+"</td>"})+"<td>"+'<div class="btn-group"><a class="btn btn-default btn-small" href="/edit/'+t.collectionName+"/"+r._id+'"><i class="glyphicon glyphicon-edit"></i></a>'+' <a class="btn btn-default btn-small" href="/preview/'+t.collectionName+"/"+r._id+'" target="_blank" ><i class="glyphicon glyphicon-eye-open"></i></a></div>'+"</td></tr>"}).join(""))})}),n.trigger("keyup"),n.get(0).focus()}})}),define("routers/main",["spin","mongorilla/config/spinner-default","third-party/ladda-bootstrap/dist/ladda.min"],function(e,t,n){return Backbone.Router.extend({routes:{"auth/login":"loginForm",dashboard:"dashboard","add/:collectionName":"createForm","edit/:collectionName/:objectId":"editForm","search/:collectionName":"searchForm"},initialize:function(){require(["views/layout/header/view"],function(e){var t=new e}),require(["views/layout/sidebar/view"],function(e){var t=new e}),console.log("Mongorilla!")},dashboard:function(){require(["views/dashboard/widget/collections-pie/view"],function(n){var r=$('[data-view="dashboard/widget/collections-pie/view"]').get(0);(new e(t)).spin(r);var i=new n({el:r})}),require(["views/dashboard/widget/editions-chart/view"],function(n){var r=$('[data-view="dashboard/widget/editions-chart/view"]').get(0);(new e(t)).spin(r);var i=new n({el:r})}),$('[data-view="dashboard/widget/recent/view"]').each(function(n,r){require(["views/dashboard/widget/recent/view"],function(n){(new e(t)).spin(r);var i=new n({el:r})})})},loginForm:function(){require(["views/login/form"],function(e){var t=new e})},createForm:function(n){var r=$("#collection-form").get(0);(new e(t)).spin(r),require(["views/generic/form"],function(e){var t=new e({collectionName:n,page:"create"})})},editForm:function(n,r){var i=$("#collection-form").get(0);(new e(t)).spin(i),require(["views/generic/form"],function(e){var t=new e({collectionName:n,objectId:r,page:"edit"})})},searchForm:function(n){var r=$("#collection-list").get(0);(new e(t)).spin(r),require(["views/generic/search"],function(e){var t=new e({collectionName:n})})}})}),require.config({baseUrl:"/",timeout:30,map:{"*":{text:"third-party/requirejs-text/text",json:"third-party/requirejs-json/json",css:"third-party/require-css/css",async:"third-party/requirejs-plugins/src/async",goog:"third-party/requirejs-plugins/src/goog"}},paths:{jquery:"third-party/jquery/dist/jquery.min",underscore:"third-party/underscore/underscore",backbone:"third-party/backbone/backbone",spin:"third-party/ladda-bootstrap/dist/spin.min",bootstrap:"third-party/bootstrap/dist/js/bootstrap.min",moment:"third-party/moment/moment",admin_lte:"admin-lte",propertyParser:"third-party/requirejs-plugins/src/propertyParser",datetimePicker:"third-party/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min"},shim:{underscore:{exports:"_"},jquery:{exports:"jQuery"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},"third-party/backbone-forms/distribution/templates/bootstrap3":{deps:["backbone-forms/editors/list"]},bootstrap:{deps:["jquery"]},admin_lte:{deps:["third-party/AdminLTE/js/plugins/slimScroll/jquery.slimscroll.min","third-party/AdminLTE/js/plugins/iCheck/icheck.min","bootstrap"]},datetimePicker:{deps:["moment"]},"third-party/backbone-deep-model/distribution/deep-model.min":{deps:["backbone"]},"third-party/backbone-forms/distribution/backbone-forms":{deps:["backbone"]},"backbone-forms/adapters/bootstrap-modal":{deps:["jquery","underscore","backbone"]},"backbone-forms/editors/list":{deps:["backbone","backbone-forms/adapters/bootstrap-modal"]},"backbone-forms/editors/file":{deps:["backbone"]},"backbone-forms/editors/image":{deps:["backbone"]},"backbone-forms/editors/object-id":{deps:["backbone"]},"backbone-forms/editors/ckeditor":{deps:["backbone"]},"backbone-forms/editors/datepicker":{deps:["backbone"]},"backbone-forms/editors/datetimepicker":{deps:["backbone","datetimePicker"]},"backbone-forms/editors/colorpicker":{deps:["backbone","third-party/AdminLTE/js/plugins/colorpicker/bootstrap-colorpicker.min"]}}}),define("mongorilla/config/spinner-default",[],function(){return{color:"#999",length:6,width:2,radius:6,top:20}}),require(["backbone","bootstrap"],function(e){require(["third-party/alertify.js/lib/alertify.min","third-party/backbone-deep-model/distribution/deep-model.min","third-party/backbone-forms/distribution/backbone-forms","third-party/humane-dates/humane","admin-lte","helpers/string"],function(t){window.alertify=t,require(["routers/main"],function(t){var n=new t;e.history.start({root:"",pushState:!0})})})}),define("init",function(){});